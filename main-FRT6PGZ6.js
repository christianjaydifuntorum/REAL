import{a as Dn,b as Xj}from"./chunk-TTSLDLLY.js";import{A as Kp,B as $b,C as Jx,D as Xx,E as wt,F as qi,G as Tr,H as Wb,I as eN,J as Qp,K as Yt,L as uo,M as Cy,N as Gb,O as Uo,P as Wu,Q as gc,R as Sy,S as Dy,T as tN,U as fs,V as $r,a as qx,b as yy,c as Hx,d as zx,e as Ve,f as fh,g as _y,h as $x,i as Wx,j as Vr,k as wy,l as Gp,m as Hb,n as Gx,o as Ws,p as zb,q as by,r as Kx,s as Qx,t as Ey,u as wr,v as Yx,w as Zx,x as Bo,y as $u,z as Iy}from"./chunk-UUMDVYKM.js";import{a as Ue,b as Ut,c as Bx,d as Yj,e as Zj,f as Jj,g as Ux,h as qb,i as Ee}from"./chunk-5KHZBZE7.js";function O_(n,e){e||(e={});var t=RL();t.p(n);var r=oG(n,e,e.dictionary?6:2,4);return sG(r,e),PL(r,r.length-4,t.d()),r}function kL(n,e){return nG(n.subarray(aG(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var ii,yo,CC,k_,L_,wC,SL,DL,AL,bC,TL,YW,EL,EC,iu,gn,ia,sl,gn,gn,gn,gn,sm,gn,ZW,JW,XW,eG,vC,Is,yC,SC,xL,tG,Cs,nG,ou,im,_C,IC,IL,om,NL,CL,rG,ML,iG,RL,oG,PL,sG,aG,uG,lG,LL=Bx(()=>{"use strict";ii=Uint8Array,yo=Uint16Array,CC=Int32Array,k_=new ii([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),L_=new ii([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wC=new ii([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),SL=function(n,e){for(var t=new yo(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new CC(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},DL=SL(k_,2),AL=DL.b,bC=DL.r;AL[28]=258,bC[258]=28;TL=SL(L_,0),YW=TL.b,EL=TL.r,EC=new yo(32768);for(gn=0;gn<32768;++gn)iu=(gn&43690)>>1|(gn&21845)<<1,iu=(iu&52428)>>2|(iu&13107)<<2,iu=(iu&61680)>>4|(iu&3855)<<4,EC[gn]=((iu&65280)>>8|(iu&255)<<8)>>1;ia=function(n,e,t){for(var r=n.length,i=0,o=new yo(e);i<r;++i)n[i]&&++o[n[i]-1];var s=new yo(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new yo(1<<e);var u=15-e;for(i=0;i<r;++i)if(n[i])for(var l=i<<4|n[i],d=e-n[i],f=s[n[i]-1]++<<d,m=f|(1<<d)-1;f<=m;++f)a[EC[f]>>u]=l}else for(a=new yo(r),i=0;i<r;++i)n[i]&&(a[i]=EC[s[n[i]-1]++]>>15-n[i]);return a},sl=new ii(288);for(gn=0;gn<144;++gn)sl[gn]=8;for(gn=144;gn<256;++gn)sl[gn]=9;for(gn=256;gn<280;++gn)sl[gn]=7;for(gn=280;gn<288;++gn)sl[gn]=8;sm=new ii(32);for(gn=0;gn<32;++gn)sm[gn]=5;ZW=ia(sl,9,0),JW=ia(sl,9,1),XW=ia(sm,5,0),eG=ia(sm,5,1),vC=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Is=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},yC=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},SC=function(n){return(n+7)/8|0},xL=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new ii(n.subarray(e,t))},tG=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Cs=function(n,e,t){var r=new Error(e||tG[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Cs),!t)throw r;return r},nG=function(n,e,t,r){var i=n.length,o=r?r.length:0;if(!i||e.f&&!e.l)return t||new ii(0);var s=!t,a=s||e.i!=2,u=e.i;s&&(t=new ii(i*3));var l=function(ke){var ze=t.length;if(ke>ze){var qe=new ii(Math.max(ze*2,ke));qe.set(t),t=qe}},d=e.f||0,f=e.p||0,m=e.b||0,g=e.l,b=e.d,E=e.m,D=e.n,w=i*8;do{if(!g){d=Is(n,f,1);var x=Is(n,f+1,3);if(f+=3,x)if(x==1)g=JW,b=eG,E=9,D=5;else if(x==2){var Y=Is(n,f,31)+257,R=Is(n,f+10,15)+4,I=Y+Is(n,f+5,31)+1;f+=14;for(var N=new ii(I),P=new ii(19),C=0;C<R;++C)P[wC[C]]=Is(n,f+C*3,7);f+=R*3;for(var T=vC(P),M=(1<<T)-1,B=ia(P,T,1),C=0;C<I;){var K=B[Is(n,f,M)];f+=K&15;var F=K>>4;if(F<16)N[C++]=F;else{var ee=0,J=0;for(F==16?(J=3+Is(n,f,3),f+=2,ee=N[C-1]):F==17?(J=3+Is(n,f,7),f+=3):F==18&&(J=11+Is(n,f,127),f+=7);J--;)N[C++]=ee}}var ne=N.subarray(0,Y),se=N.subarray(Y);E=vC(ne),D=vC(se),g=ia(ne,E,1),b=ia(se,D,1)}else Cs(1);else{var F=SC(f)+4,z=n[F-4]|n[F-3]<<8,H=F+z;if(H>i){u&&Cs(0);break}a&&l(m+z),t.set(n.subarray(F,H),m),e.b=m+=z,e.p=f=H*8,e.f=d;continue}if(f>w){u&&Cs(0);break}}a&&l(m+131072);for(var ce=(1<<E)-1,Ce=(1<<D)-1,k=f;;k=f){var ee=g[yC(n,f)&ce],W=ee>>4;if(f+=ee&15,f>w){u&&Cs(0);break}if(ee||Cs(2),W<256)t[m++]=W;else if(W==256){k=f,g=null;break}else{var G=W-254;if(W>264){var C=W-257,te=k_[C];G=Is(n,f,(1<<te)-1)+AL[C],f+=te}var ae=b[yC(n,f)&Ce],fe=ae>>4;ae||Cs(3),f+=ae&15;var se=YW[fe];if(fe>3){var te=L_[fe];se+=yC(n,f)&(1<<te)-1,f+=te}if(f>w){u&&Cs(0);break}a&&l(m+131072);var ye=m+G;if(m<se){var _e=o-se,Oe=Math.min(se,ye);for(_e+m<0&&Cs(3);m<Oe;++m)t[m]=r[_e+m]}for(;m<ye;++m)t[m]=t[m-se]}}e.l=g,e.p=k,e.b=m,e.f=d,g&&(d=1,e.m=E,e.d=b,e.n=D)}while(!d);return m!=t.length&&s?xL(t,0,m):t.subarray(0,m)},ou=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},im=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},_C=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return{t:ML,l:0};if(i==1){var s=new ii(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(H,Y){return H.f-Y.f}),t.push({s:-1,f:25001});var a=t[0],u=t[1],l=0,d=1,f=2;for(t[0]={s:-1,f:a.f+u.f,l:a,r:u};d!=i-1;)a=t[t[l].f<t[f].f?l++:f++],u=t[l!=d&&t[l].f<t[f].f?l++:f++],t[d++]={s:-1,f:a.f+u.f,l:a,r:u};for(var m=o[0].s,r=1;r<i;++r)o[r].s>m&&(m=o[r].s);var g=new yo(m+1),b=IC(t[d-1],g,0);if(b>e){var r=0,E=0,D=b-e,w=1<<D;for(o.sort(function(Y,R){return g[R.s]-g[Y.s]||Y.f-R.f});r<i;++r){var x=o[r].s;if(g[x]>e)E+=w-(1<<b-g[x]),g[x]=e;else break}for(E>>=D;E>0;){var F=o[r].s;g[F]<e?E-=1<<e-g[F]++-1:++r}for(;r>=0&&E;--r){var z=o[r].s;g[z]==e&&(--g[z],++E)}b=e}return{t:new ii(g),l:b}},IC=function(n,e,t){return n.s==-1?Math.max(IC(n.l,e,t+1),IC(n.r,e,t+1)):e[n.s]=t},IL=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new yo(++e),r=0,i=n[0],o=1,s=function(u){t[r++]=u},a=1;a<=e;++a)if(n[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=n[a]}return{c:t.subarray(0,r),n:e}},om=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},NL=function(n,e,t){var r=t.length,i=SC(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},CL=function(n,e,t,r,i,o,s,a,u,l,d){ou(e,d++,t),++i[256];for(var f=_C(i,15),m=f.t,g=f.l,b=_C(o,15),E=b.t,D=b.l,w=IL(m),x=w.c,F=w.n,z=IL(E),H=z.c,Y=z.n,R=new yo(19),I=0;I<x.length;++I)++R[x[I]&31];for(var I=0;I<H.length;++I)++R[H[I]&31];for(var N=_C(R,7),P=N.t,C=N.l,T=19;T>4&&!P[wC[T-1]];--T);var M=l+5<<3,B=om(i,sl)+om(o,sm)+s,K=om(i,m)+om(o,E)+s+14+3*T+om(R,P)+2*R[16]+3*R[17]+7*R[18];if(u>=0&&M<=B&&M<=K)return NL(e,d,n.subarray(u,u+l));var ee,J,ne,se;if(ou(e,d,1+(K<B)),d+=2,K<B){ee=ia(m,g,0),J=m,ne=ia(E,D,0),se=E;var ce=ia(P,C,0);ou(e,d,F-257),ou(e,d+5,Y-1),ou(e,d+10,T-4),d+=14;for(var I=0;I<T;++I)ou(e,d+3*I,P[wC[I]]);d+=3*T;for(var Ce=[x,H],k=0;k<2;++k)for(var W=Ce[k],I=0;I<W.length;++I){var G=W[I]&31;ou(e,d,ce[G]),d+=P[G],G>15&&(ou(e,d,W[I]>>5&127),d+=W[I]>>12)}}else ee=ZW,J=sl,ne=XW,se=sm;for(var I=0;I<a;++I){var te=r[I];if(te>255){var G=te>>18&31;im(e,d,ee[G+257]),d+=J[G+257],G>7&&(ou(e,d,te>>23&31),d+=k_[G]);var ae=te&31;im(e,d,ne[ae]),d+=se[ae],ae>3&&(im(e,d,te>>5&8191),d+=L_[ae])}else im(e,d,ee[te]),d+=J[te]}return im(e,d,ee[256]),d+J[256]},rG=new CC([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ML=new ii(0),iG=function(n,e,t,r,i,o){var s=o.z||n.length,a=new ii(r+s+5*(1+Math.ceil(s/7e3))+i),u=a.subarray(r,a.length-i),l=o.l,d=(o.r||0)&7;if(e){d&&(u[0]=o.r>>3);for(var f=rG[e-1],m=f>>13,g=f&8191,b=(1<<t)-1,E=o.p||new yo(32768),D=o.h||new yo(b+1),w=Math.ceil(t/3),x=2*w,F=function(ft){return(n[ft]^n[ft+1]<<w^n[ft+2]<<x)&b},z=new CC(25e3),H=new yo(288),Y=new yo(32),R=0,I=0,N=o.i||0,P=0,C=o.w||0,T=0;N+2<s;++N){var M=F(N),B=N&32767,K=D[M];if(E[B]=K,D[M]=B,C<=N){var ee=s-N;if((R>7e3||P>24576)&&(ee>423||!l)){d=CL(n,u,0,z,H,Y,I,P,T,N-T,d),P=R=I=0,T=N;for(var J=0;J<286;++J)H[J]=0;for(var J=0;J<30;++J)Y[J]=0}var ne=2,se=0,ce=g,Ce=B-K&32767;if(ee>2&&M==F(N-Ce))for(var k=Math.min(m,ee)-1,W=Math.min(32767,N),G=Math.min(258,ee);Ce<=W&&--ce&&B!=K;){if(n[N+ne]==n[N+ne-Ce]){for(var te=0;te<G&&n[N+te]==n[N+te-Ce];++te);if(te>ne){if(ne=te,se=Ce,te>k)break;for(var ae=Math.min(Ce,te-2),fe=0,J=0;J<ae;++J){var ye=N-Ce+J&32767,_e=E[ye],Oe=ye-_e&32767;Oe>fe&&(fe=Oe,K=ye)}}}B=K,K=E[B],Ce+=B-K&32767}if(se){z[P++]=268435456|bC[ne]<<18|EL[se];var ke=bC[ne]&31,ze=EL[se]&31;I+=k_[ke]+L_[ze],++H[257+ke],++Y[ze],C=N+ne,++R}else z[P++]=n[N],++H[n[N]]}}for(N=Math.max(N,C);N<s;++N)z[P++]=n[N],++H[n[N]];d=CL(n,u,l,z,H,Y,I,P,T,N-T,d),l||(o.r=d&7|u[d/8|0]<<3,d-=7,o.h=D,o.p=E,o.i=N,o.w=C)}else{for(var N=o.w||0;N<s+l;N+=65535){var qe=N+65535;qe>=s&&(u[d/8|0]=l,qe=s),d=NL(u,d+1,n.subarray(N,qe))}o.i=s}return xL(a,0,r+SC(d)+i)},RL=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=t[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},oG=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new ii(o.length+n.length);s.set(o),s.set(n,o.length),n=s,i.w=o.length}return iG(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},PL=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},sG=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=RL();i.p(e.dictionary),PL(n,2,i.d())}},aG=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Cs(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&Cs(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};uG=typeof TextDecoder<"u"&&new TextDecoder,lG=0;try{uG.decode(ML,{stream:!0}),lG=1}catch{}});var BC={};Zj(BC,{AcroForm:()=>CG,AcroFormAppearance:()=>rt,AcroFormButton:()=>Rr,AcroFormCheckBox:()=>cm,AcroFormChoiceField:()=>Zc,AcroFormComboBox:()=>Xc,AcroFormEditBox:()=>um,AcroFormListBox:()=>Jc,AcroFormPasswordField:()=>dm,AcroFormPushButton:()=>lm,AcroFormRadioButton:()=>ed,AcroFormTextField:()=>cl,GState:()=>hm,ShadingPattern:()=>ul,TilingPattern:()=>Yc,default:()=>jC,jsPDF:()=>yt});function DC(){bt.console&&typeof bt.console.log=="function"&&bt.console.log.apply(bt.console,arguments)}function AC(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Qc(r.response,e,t)},r.onerror=function(){Pn.error("could not download file")},r.send()}function OL(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function F_(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}function XL(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,s=i.exec(n);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),u=this.g.toString(16),l=this.b.toString(16);return a.length==1&&(a="0"+a),u.length==1&&(u="0"+u),l.length==1&&(l="0"+l),"#"+a+u+l}}function TC(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=oi(t,r,i,o,e[0],7,-680876936),o=oi(o,t,r,i,e[1],12,-389564586),i=oi(i,o,t,r,e[2],17,606105819),r=oi(r,i,o,t,e[3],22,-1044525330),t=oi(t,r,i,o,e[4],7,-176418897),o=oi(o,t,r,i,e[5],12,1200080426),i=oi(i,o,t,r,e[6],17,-1473231341),r=oi(r,i,o,t,e[7],22,-45705983),t=oi(t,r,i,o,e[8],7,1770035416),o=oi(o,t,r,i,e[9],12,-1958414417),i=oi(i,o,t,r,e[10],17,-42063),r=oi(r,i,o,t,e[11],22,-1990404162),t=oi(t,r,i,o,e[12],7,1804603682),o=oi(o,t,r,i,e[13],12,-40341101),i=oi(i,o,t,r,e[14],17,-1502002290),t=si(t,r=oi(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=si(o,t,r,i,e[6],9,-1069501632),i=si(i,o,t,r,e[11],14,643717713),r=si(r,i,o,t,e[0],20,-373897302),t=si(t,r,i,o,e[5],5,-701558691),o=si(o,t,r,i,e[10],9,38016083),i=si(i,o,t,r,e[15],14,-660478335),r=si(r,i,o,t,e[4],20,-405537848),t=si(t,r,i,o,e[9],5,568446438),o=si(o,t,r,i,e[14],9,-1019803690),i=si(i,o,t,r,e[3],14,-187363961),r=si(r,i,o,t,e[8],20,1163531501),t=si(t,r,i,o,e[13],5,-1444681467),o=si(o,t,r,i,e[2],9,-51403784),i=si(i,o,t,r,e[7],14,1735328473),t=ai(t,r=si(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=ai(o,t,r,i,e[8],11,-2022574463),i=ai(i,o,t,r,e[11],16,1839030562),r=ai(r,i,o,t,e[14],23,-35309556),t=ai(t,r,i,o,e[1],4,-1530992060),o=ai(o,t,r,i,e[4],11,1272893353),i=ai(i,o,t,r,e[7],16,-155497632),r=ai(r,i,o,t,e[10],23,-1094730640),t=ai(t,r,i,o,e[13],4,681279174),o=ai(o,t,r,i,e[0],11,-358537222),i=ai(i,o,t,r,e[3],16,-722521979),r=ai(r,i,o,t,e[6],23,76029189),t=ai(t,r,i,o,e[9],4,-640364487),o=ai(o,t,r,i,e[12],11,-421815835),i=ai(i,o,t,r,e[15],16,530742520),t=ui(t,r=ai(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=ui(o,t,r,i,e[7],10,1126891415),i=ui(i,o,t,r,e[14],15,-1416354905),r=ui(r,i,o,t,e[5],21,-57434055),t=ui(t,r,i,o,e[12],6,1700485571),o=ui(o,t,r,i,e[3],10,-1894986606),i=ui(i,o,t,r,e[10],15,-1051523),r=ui(r,i,o,t,e[1],21,-2054922799),t=ui(t,r,i,o,e[8],6,1873313359),o=ui(o,t,r,i,e[15],10,-30611744),i=ui(i,o,t,r,e[6],15,-1560198380),r=ui(r,i,o,t,e[13],21,1309151649),t=ui(t,r,i,o,e[4],6,-145523070),o=ui(o,t,r,i,e[11],10,-1120210379),i=ui(i,o,t,r,e[2],15,718787259),r=ui(r,i,o,t,e[9],21,-343485551),n[0]=ll(t,n[0]),n[1]=ll(r,n[1]),n[2]=ll(i,n[2]),n[3]=ll(o,n[3])}function q_(n,e,t,r,i,o){return e=ll(ll(e,n),ll(r,o)),ll(e<<i|e>>>32-i,t)}function oi(n,e,t,r,i,o,s){return q_(e&t|~e&r,n,e,i,o,s)}function si(n,e,t,r,i,o,s){return q_(e&r|t&~r,n,e,i,o,s)}function ai(n,e,t,r,i,o,s){return q_(e^t^r,n,e,i,o,s)}function ui(n,e,t,r,i,o,s){return q_(t^(e|~r),n,e,i,o,s)}function eO(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)TC(r,cG(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(TC(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,TC(r,i),r}function cG(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}function dG(n){for(var e="",t=0;t<4;t++)e+=FL[n>>8*t+4&15]+FL[n>>8*t&15];return e}function hG(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function PC(n){return eO(n).map(hG).join("")}function ll(n,e){if(fG){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function kC(n,e){var t,r,i,o;if(n!==t){for(var s=(i=n,o=1+(256/n.length>>0),new Array(o+1).join(i)),a=[],u=0;u<256;u++)a[u]=u;var l=0;for(u=0;u<256;u++){var d=a[u];l=(l+d+s.charCodeAt(u))%256,a[u]=a[l],a[l]=d}t=n,r=a}else a=r;var f=e.length,m=0,g=0,b="";for(u=0;u<f;u++)g=(g+(d=a[m=(m+1)%256]))%256,a[m]=a[g],a[g]=d,s=a[(a[m]+a[g])%256],b+=String.fromCharCode(e.charCodeAt(u)^s);return b}function pf(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(VL.perm!==void 0)throw new Error("Invalid permission: "+a);i+=VL[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var o=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=PC(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=kC(this.encryptionKey,this.padding)}function gf(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function jL(n){if(Dn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var s=e[t][o];try{s[0].apply(n,r)}catch(a){bt.console&&Pn.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function hm(n){if(!(this instanceof hm))return new hm(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function tO(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function ul(n,e,t,r,i){if(!(this instanceof ul))return new ul(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,tO.call(this,r,i)}function Yc(n,e,t,r,i){if(!(this instanceof Yc))return new Yc(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,tO.call(this,r,i)}function yt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,u=16,l="S",d=null;Dn(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(d=n.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(u=n.floatPrecision),l=n.defaultPathOperation||"S"),s=n.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var f=n.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=jL;var b="1.3",E=g.__private__.getPdfVersion=function(){return b};g.__private__.setPdfVersion=function(v){b=v};var D={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return D};var w=g.__private__.getPageFormat=function(v){return D[v]};i=i||"a4";var x={COMPAT:"compat",ADVANCED:"advanced"},F=x.COMPAT;function z(){this.saveGraphicsState(),X(new pt(Ye,0,0,-Ye,0,ls()*Ye).toString()+" cm"),this.setFontSize(this.getFontSize()/Ye),l="n",F=x.ADVANCED}function H(){this.restoreGraphicsState(),l="S",F=x.COMPAT}var Y=g.__private__.combineFontStyleAndFontWeight=function(v,L){if(v=="bold"&&L=="normal"||v=="bold"&&L==400||v=="normal"&&L=="italic"||v=="bold"&&L=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return L&&(v=L==400||L==="normal"?v==="italic"?"italic":"normal":L!=700&&L!=="bold"||v!=="normal"?(L==700?"bold":L)+""+v:"bold"),v};g.advancedAPI=function(v){var L=F===x.COMPAT;return L&&z.call(this),typeof v!="function"||(v(this),L&&H.call(this)),this},g.compatAPI=function(v){var L=F===x.ADVANCED;return L&&H.call(this),typeof v!="function"||(v(this),L&&z.call(this)),this},g.isAdvancedAPI=function(){return F===x.ADVANCED};var R,I=function(v){if(F!==x.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},N=g.roundToPrecision=g.__private__.roundToPrecision=function(v,L){var Z=e||L;if(isNaN(v)||isNaN(Z))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(Z).replace(/0+$/,"")};R=g.hpf=g.__private__.hpf=typeof u=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return N(v,u)}:u==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return N(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return N(v,16)};var P=g.f2=g.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return N(v,2)},C=g.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return N(v,3)},T=g.scale=g.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return F===x.COMPAT?v*Ye:F===x.ADVANCED?v:void 0},M=function(v){return F===x.COMPAT?ls()-v:F===x.ADVANCED?v:void 0},B=function(v){return T(M(v))};g.__private__.setPrecision=g.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var K,ee="00000000000000000000000000000000",J=g.__private__.getFileId=function(){return ee},ne=g.__private__.setFileId=function(v){return ee=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(er=new pf(d.userPermissions,d.userPassword,d.ownerPassword,ee)),ee};g.setFileId=function(v){return ne(v),this},g.getFileId=function(){return J()};var se=g.__private__.convertDateToPDFDate=function(v){var L=v.getTimezoneOffset(),Z=L<0?"+":"-",re=Math.floor(Math.abs(L/60)),he=Math.abs(L%60),we=[Z,G(re),"'",G(he),"'"].join("");return["D:",v.getFullYear(),G(v.getMonth()+1),G(v.getDate()),G(v.getHours()),G(v.getMinutes()),G(v.getSeconds()),we].join("")},ce=g.__private__.convertPDFDateToDate=function(v){var L=parseInt(v.substr(2,4),10),Z=parseInt(v.substr(6,2),10)-1,re=parseInt(v.substr(8,2),10),he=parseInt(v.substr(10,2),10),we=parseInt(v.substr(12,2),10),Me=parseInt(v.substr(14,2),10);return new Date(L,Z,re,he,we,Me,0)},Ce=g.__private__.setCreationDate=function(v){var L;if(v===void 0&&(v=new Date),v instanceof Date)L=se(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");L=v}return K=L},k=g.__private__.getCreationDate=function(v){var L=K;return v==="jsDate"&&(L=ce(K)),L};g.setCreationDate=function(v){return Ce(v),this},g.getCreationDate=function(v){return k(v)};var W,G=g.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},te=g.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},ae=0,fe=[],ye=[],_e=0,Oe=[],ke=[],ze=!1,qe=ye,ft=function(){ae=0,_e=0,ye=[],fe=[],Oe=[],ns=Xn(),Ji=Xn()};g.__private__.setCustomOutputDestination=function(v){ze=!0,qe=v};var Se=function(v){ze||(qe=v)};g.__private__.resetCustomOutputDestination=function(){ze=!1,qe=ye};var X=g.__private__.out=function(v){return v=v.toString(),_e+=v.length+1,qe.push(v),qe},St=g.__private__.write=function(v){return X(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},ot=g.__private__.getArrayBuffer=function(v){for(var L=v.length,Z=new ArrayBuffer(L),re=new Uint8Array(Z);L--;)re[L]=v.charCodeAt(L);return Z},Le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Le};var Be=n.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(v){return Be=F===x.ADVANCED?v/Ye:v,this};var Ke,$e=g.__private__.getFontSize=g.getFontSize=function(){return F===x.COMPAT?Be:Be*Ye},lt=n.R2L||!1;g.__private__.setR2L=g.setR2L=function(v){return lt=v,this},g.__private__.getR2L=g.getR2L=function(){return lt};var Et,Tt=g.__private__.setZoomMode=function(v){var L=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Ke=v;else if(isNaN(v)){if(L.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Ke=v}else Ke=parseInt(v,10)};g.__private__.getZoomMode=function(){return Ke};var Vt,_t=g.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Et=v};g.__private__.getPageMode=function(){return Et};var Rt=g.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');Vt=v};g.__private__.getLayoutMode=function(){return Vt},g.__private__.setDisplayMode=g.setDisplayMode=function(v,L,Z){return Tt(v),Rt(L),_t(Z),this};var gt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(v){if(Object.keys(gt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return gt[v]},g.__private__.getDocumentProperties=function(){return gt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(v){for(var L in gt)gt.hasOwnProperty(L)&&v[L]&&(gt[L]=v[L]);return this},g.__private__.setDocumentProperty=function(v,L){if(Object.keys(gt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return gt[v]=L};var Ht,Ye,Lr,Gt,Mi,mn={},In={},Do=[],cn={},ts={},Bn={},Ri={},fi=null,Ln=0,It=[],Kt=new jL(g),Vs=n.hotfixes||[],Jn={},Qi={},Xr=[],pt=function v(L,Z,re,he,we,Me){if(!(this instanceof v))return new v(L,Z,re,he,we,Me);isNaN(L)&&(L=1),isNaN(Z)&&(Z=0),isNaN(re)&&(re=0),isNaN(he)&&(he=1),isNaN(we)&&(we=0),isNaN(Me)&&(Me=0),this._matrix=[L,Z,re,he,we,Me]};Object.defineProperty(pt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(pt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(pt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(pt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(pt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(pt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(pt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(pt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(pt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(pt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(pt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(pt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(pt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(pt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(pt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(pt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),pt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(R).join(v)},pt.prototype.multiply=function(v){var L=v.sx*this.sx+v.shy*this.shx,Z=v.sx*this.shy+v.shy*this.sy,re=v.shx*this.sx+v.sy*this.shx,he=v.shx*this.shy+v.sy*this.sy,we=v.tx*this.sx+v.ty*this.shx+this.tx,Me=v.tx*this.shy+v.ty*this.sy+this.ty;return new pt(L,Z,re,he,we,Me)},pt.prototype.decompose=function(){var v=this.sx,L=this.shy,Z=this.shx,re=this.sy,he=this.tx,we=this.ty,Me=Math.sqrt(v*v+L*L),Ze=(v/=Me)*Z+(L/=Me)*re;Z-=v*Ze,re-=L*Ze;var st=Math.sqrt(Z*Z+re*re);return Ze/=st,v*(re/=st)<L*(Z/=st)&&(v=-v,L=-L,Ze=-Ze,Me=-Me),{scale:new pt(Me,0,0,st,0,0),translate:new pt(1,0,0,1,he,we),rotate:new pt(v,L,-L,v,0,0),skew:new pt(1,0,Ze,1,0,0)}},pt.prototype.toString=function(v){return this.join(" ")},pt.prototype.inversed=function(){var v=this.sx,L=this.shy,Z=this.shx,re=this.sy,he=this.tx,we=this.ty,Me=1/(v*re-L*Z),Ze=re*Me,st=-L*Me,h=-Z*Me,_=v*Me;return new pt(Ze,st,h,_,-Ze*he-h*we,-st*he-_*we)},pt.prototype.applyToPoint=function(v){var L=v.x*this.sx+v.y*this.shx+this.tx,Z=v.x*this.shy+v.y*this.sy+this.ty;return new No(L,Z)},pt.prototype.applyToRectangle=function(v){var L=this.applyToPoint(v),Z=this.applyToPoint(new No(v.x+v.w,v.y+v.h));return new Nu(L.x,L.y,Z.x-L.x,Z.y-L.y)},pt.prototype.clone=function(){var v=this.sx,L=this.shy,Z=this.shx,re=this.sy,he=this.tx,we=this.ty;return new pt(v,L,Z,re,he,we)},g.Matrix=pt;var Tn=g.matrixMult=function(v,L){return L.multiply(v)},Yi=new pt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Yi;var vr=function(v,L){if(!ts[v]){var Z=(L instanceof ul?"Sh":"P")+(Object.keys(cn).length+1).toString(10);L.id=Z,ts[v]=Z,cn[Z]=L,Kt.publish("addPattern",L)}};g.ShadingPattern=ul,g.TilingPattern=Yc,g.addShadingPattern=function(v,L){return I("addShadingPattern()"),vr(v,L),this},g.beginTilingPattern=function(v){I("beginTilingPattern()"),Ru(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},g.endTilingPattern=function(v,L){I("endTilingPattern()"),L.stream=ke[W].join(`
`),vr(v,L),Kt.publish("endTilingPattern",L),Xr.pop().restore()};var Un=g.__private__.newObject=function(){var v=Xn();return pi(v,!0),v},Xn=g.__private__.newObjectDeferred=function(){return ae++,fe[ae]=function(){return _e},ae},pi=function(v,L){return L=typeof L=="boolean"&&L,fe[v]=_e,L&&X(v+" 0 obj"),v},Zi=g.__private__.newAdditionalObject=function(){var v={objId:Xn(),content:""};return Oe.push(v),v},ns=Xn(),Ji=Xn(),ei=g.__private__.decodeColorString=function(v){var L=v.split(" ");if(L.length!==2||L[1]!=="g"&&L[1]!=="G")L.length===5&&(L[4]==="k"||L[4]==="K")&&(L=[(1-L[0])*(1-L[3]),(1-L[1])*(1-L[3]),(1-L[2])*(1-L[3]),"r"]);else{var Z=parseFloat(L[0]);L=[Z,Z,Z,"r"]}for(var re="#",he=0;he<3;he++)re+=("0"+Math.floor(255*parseFloat(L[he])).toString(16)).slice(-2);return re},Pi=g.__private__.encodeColorString=function(v){var L;typeof v=="string"&&(v={ch1:v});var Z=v.ch1,re=v.ch2,he=v.ch3,we=v.ch4,Me=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Z=="string"&&Z.charAt(0)!=="#"){var Ze=new XL(Z);if(Ze.ok)Z=Ze.toHex();else if(!/^\d*\.?\d*$/.test(Z))throw new Error('Invalid color "'+Z+'" passed to jsPDF.encodeColorString.')}if(typeof Z=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Z)&&(Z="#"+Z[1]+Z[1]+Z[2]+Z[2]+Z[3]+Z[3]),typeof Z=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Z)){var st=parseInt(Z.substr(1),16);Z=st>>16&255,re=st>>8&255,he=255&st}if(re===void 0||we===void 0&&Z===re&&re===he)if(typeof Z=="string")L=Z+" "+Me[0];else switch(v.precision){case 2:L=P(Z/255)+" "+Me[0];break;case 3:default:L=C(Z/255)+" "+Me[0]}else if(we===void 0||Dn(we)==="object"){if(we&&!isNaN(we.a)&&we.a===0)return L=["1.","1.","1.",Me[1]].join(" ");if(typeof Z=="string")L=[Z,re,he,Me[1]].join(" ");else switch(v.precision){case 2:L=[P(Z/255),P(re/255),P(he/255),Me[1]].join(" ");break;default:case 3:L=[C(Z/255),C(re/255),C(he/255),Me[1]].join(" ")}}else if(typeof Z=="string")L=[Z,re,he,we,Me[2]].join(" ");else switch(v.precision){case 2:L=[P(Z),P(re),P(he),P(we),Me[2]].join(" ");break;case 3:default:L=[C(Z),C(re),C(he),C(we),Me[2]].join(" ")}return L},ki=g.__private__.getFilters=function(){return s},Ur=g.__private__.putStream=function(v){var L=(v=v||{}).data||"",Z=v.filters||ki(),re=v.alreadyAppliedFilters||[],he=v.addLength1||!1,we=L.length,Me=v.objectId,Ze=function(Pe){return Pe};if(d!==null&&Me===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Ze=er.encryptor(Me,0));var st={};Z===!0&&(Z=["FlateEncode"]);var h=v.additionalKeyValues||[],_=(st=yt.API.processDataByFilters!==void 0?yt.API.processDataByFilters(L,Z):{data:L,reverseChain:[]}).reverseChain+(Array.isArray(re)?re.join(" "):re.toString());if(st.data.length!==0&&(h.push({key:"Length",value:st.data.length}),he===!0&&h.push({key:"Length1",value:we})),_.length!=0)if(_.split("/").length-1==1)h.push({key:"Filter",value:_});else{h.push({key:"Filter",value:"["+_+"]"});for(var A=0;A<h.length;A+=1)if(h[A].key==="DecodeParms"){for(var U=[],ue=0;ue<st.reverseChain.split("/").length-1;ue+=1)U.push("null");U.push(h[A].value),h[A].value="["+U.join(" ")+"]"}}X("<<");for(var pe=0;pe<h.length;pe++)X("/"+h[pe].key+" "+h[pe].value);X(">>"),st.data.length!==0&&(X("stream"),X(Ze(st.data)),X("endstream"))},Dr=g.__private__.putPage=function(v){var L=v.number,Z=v.data,re=v.objId,he=v.contentsObjId;pi(re,!0),X("<</Type /Page"),X("/Parent "+v.rootDictionaryObjId+" 0 R"),X("/Resources "+v.resourceDictionaryObjId+" 0 R"),X("/MediaBox ["+parseFloat(R(v.mediaBox.bottomLeftX))+" "+parseFloat(R(v.mediaBox.bottomLeftY))+" "+R(v.mediaBox.topRightX)+" "+R(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&X("/CropBox ["+R(v.cropBox.bottomLeftX)+" "+R(v.cropBox.bottomLeftY)+" "+R(v.cropBox.topRightX)+" "+R(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&X("/BleedBox ["+R(v.bleedBox.bottomLeftX)+" "+R(v.bleedBox.bottomLeftY)+" "+R(v.bleedBox.topRightX)+" "+R(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&X("/TrimBox ["+R(v.trimBox.bottomLeftX)+" "+R(v.trimBox.bottomLeftY)+" "+R(v.trimBox.topRightX)+" "+R(v.trimBox.topRightY)+"]"),v.artBox!==null&&X("/ArtBox ["+R(v.artBox.bottomLeftX)+" "+R(v.artBox.bottomLeftY)+" "+R(v.artBox.topRightX)+" "+R(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&X("/UserUnit "+v.userUnit),Kt.publish("putPage",{objId:re,pageContext:It[L],pageNumber:L,page:Z}),X("/Contents "+he+" 0 R"),X(">>"),X("endobj");var we=Z.join(`
`);return F===x.ADVANCED&&(we+=`
Q`),pi(he,!0),Ur({data:we,filters:ki(),objectId:he}),X("endobj"),re},js=g.__private__.putPages=function(){var v,L,Z=[];for(v=1;v<=Ln;v++)It[v].objId=Xn(),It[v].contentsObjId=Xn();for(v=1;v<=Ln;v++)Z.push(Dr({number:v,data:ke[v],objId:It[v].objId,contentsObjId:It[v].contentsObjId,mediaBox:It[v].mediaBox,cropBox:It[v].cropBox,bleedBox:It[v].bleedBox,trimBox:It[v].trimBox,artBox:It[v].artBox,userUnit:It[v].userUnit,rootDictionaryObjId:ns,resourceDictionaryObjId:Ji}));pi(ns,!0),X("<</Type /Pages");var re="/Kids [";for(L=0;L<Ln;L++)re+=Z[L]+" 0 R ";X(re+"]"),X("/Count "+Ln),X(">>"),X("endobj"),Kt.publish("postPutPages")},Ia=function(v){Kt.publish("putFont",{font:v,out:X,newObject:Un,putStream:Ur}),v.isAlreadyPutted!==!0&&(v.objectNumber=Un(),X("<<"),X("/Type /Font"),X("/BaseFont /"+gf(v.postScriptName)),X("/Subtype /Type1"),typeof v.encoding=="string"&&X("/Encoding /"+v.encoding),X("/FirstChar 32"),X("/LastChar 255"),X(">>"),X("endobj"))},Bs=function(){for(var v in mn)mn.hasOwnProperty(v)&&(f===!1||f===!0&&m.hasOwnProperty(v))&&Ia(mn[v])},Us=function(v){v.objectNumber=Un();var L=[];L.push({key:"Type",value:"/XObject"}),L.push({key:"Subtype",value:"/Form"}),L.push({key:"BBox",value:"["+[R(v.x),R(v.y),R(v.x+v.width),R(v.y+v.height)].join(" ")+"]"}),L.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var Z=v.pages[1].join(`
`);Ur({data:Z,additionalKeyValues:L,objectId:v.objectNumber}),X("endobj")},Ca=function(){for(var v in Jn)Jn.hasOwnProperty(v)&&Us(Jn[v])},Ql=function(v,L){var Z,re=[],he=1/(L-1);for(Z=0;Z<1;Z+=he)re.push(Z);if(re.push(1),v[0].offset!=0){var we={offset:0,color:v[0].color};v.unshift(we)}if(v[v.length-1].offset!=1){var Me={offset:1,color:v[v.length-1].color};v.push(Me)}for(var Ze="",st=0,h=0;h<re.length;h++){for(Z=re[h];Z>v[st+1].offset;)st++;var _=v[st].offset,A=(Z-_)/(v[st+1].offset-_),U=v[st].color,ue=v[st+1].color;Ze+=te(Math.round((1-A)*U[0]+A*ue[0]).toString(16))+te(Math.round((1-A)*U[1]+A*ue[1]).toString(16))+te(Math.round((1-A)*U[2]+A*ue[2]).toString(16))}return Ze.trim()},Np=function(v,L){L||(L=21);var Z=Un(),re=Ql(v.colors,L),he=[];he.push({key:"FunctionType",value:"0"}),he.push({key:"Domain",value:"[0.0 1.0]"}),he.push({key:"Size",value:"["+L+"]"}),he.push({key:"BitsPerSample",value:"8"}),he.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ur({data:re,additionalKeyValues:he,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Z}),X("endobj"),v.objectNumber=Un(),X("<< /ShadingType "+v.type),X("/ColorSpace /DeviceRGB");var we="/Coords ["+R(parseFloat(v.coords[0]))+" "+R(parseFloat(v.coords[1]))+" ";v.type===2?we+=R(parseFloat(v.coords[2]))+" "+R(parseFloat(v.coords[3])):we+=R(parseFloat(v.coords[2]))+" "+R(parseFloat(v.coords[3]))+" "+R(parseFloat(v.coords[4]))+" "+R(parseFloat(v.coords[5])),X(we+="]"),v.matrix&&X("/Matrix ["+v.matrix.toString()+"]"),X("/Function "+Z+" 0 R"),X("/Extend [true true]"),X(">>"),X("endobj")},wu=function(v,L){var Z=Xn(),re=Un();L.push({resourcesOid:Z,objectOid:re}),v.objectNumber=re;var he=[];he.push({key:"Type",value:"/Pattern"}),he.push({key:"PatternType",value:"1"}),he.push({key:"PaintType",value:"1"}),he.push({key:"TilingType",value:"1"}),he.push({key:"BBox",value:"["+v.boundingBox.map(R).join(" ")+"]"}),he.push({key:"XStep",value:R(v.xStep)}),he.push({key:"YStep",value:R(v.yStep)}),he.push({key:"Resources",value:Z+" 0 R"}),v.matrix&&he.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Ur({data:v.stream,additionalKeyValues:he,objectId:v.objectNumber}),X("endobj")},Sa=function(v){var L;for(L in cn)cn.hasOwnProperty(L)&&(cn[L]instanceof ul?Np(cn[L]):cn[L]instanceof Yc&&wu(cn[L],v))},bu=function(v){for(var L in v.objectNumber=Un(),X("<<"),v)switch(L){case"opacity":X("/ca "+P(v[L]));break;case"stroke-opacity":X("/CA "+P(v[L]))}X(">>"),X("endobj")},Da=function(){var v;for(v in Bn)Bn.hasOwnProperty(v)&&bu(Bn[v])},Xi=function(){for(var v in X("/XObject <<"),Jn)Jn.hasOwnProperty(v)&&Jn[v].objectNumber>=0&&X("/"+v+" "+Jn[v].objectNumber+" 0 R");Kt.publish("putXobjectDict"),X(">>")},Yl=function(){er.oid=Un(),X("<<"),X("/Filter /Standard"),X("/V "+er.v),X("/R "+er.r),X("/U <"+er.toHexString(er.U)+">"),X("/O <"+er.toHexString(er.O)+">"),X("/P "+er.P),X(">>"),X("endobj")},qd=function(){for(var v in X("/Font <<"),mn)mn.hasOwnProperty(v)&&(f===!1||f===!0&&m.hasOwnProperty(v))&&X("/"+v+" "+mn[v].objectNumber+" 0 R");X(">>")},Hd=function(){if(Object.keys(cn).length>0){for(var v in X("/Shading <<"),cn)cn.hasOwnProperty(v)&&cn[v]instanceof ul&&cn[v].objectNumber>=0&&X("/"+v+" "+cn[v].objectNumber+" 0 R");Kt.publish("putShadingPatternDict"),X(">>")}},Aa=function(v){if(Object.keys(cn).length>0){for(var L in X("/Pattern <<"),cn)cn.hasOwnProperty(L)&&cn[L]instanceof g.TilingPattern&&cn[L].objectNumber>=0&&cn[L].objectNumber<v&&X("/"+L+" "+cn[L].objectNumber+" 0 R");Kt.publish("putTilingPatternDict"),X(">>")}},zd=function(){if(Object.keys(Bn).length>0){var v;for(v in X("/ExtGState <<"),Bn)Bn.hasOwnProperty(v)&&Bn[v].objectNumber>=0&&X("/"+v+" "+Bn[v].objectNumber+" 0 R");Kt.publish("putGStateDict"),X(">>")}},qn=function(v){pi(v.resourcesOid,!0),X("<<"),X("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),qd(),Hd(),Aa(v.objectOid),zd(),Xi(),X(">>"),X("endobj")},Eu=function(){var v=[];Bs(),Da(),Ca(),Sa(v),Kt.publish("putResources"),v.forEach(qn),qn({resourcesOid:Ji,objectOid:Number.MAX_SAFE_INTEGER}),Kt.publish("postPutResources")},Zl=function(){Kt.publish("putAdditionalObjects");for(var v=0;v<Oe.length;v++){var L=Oe[v];pi(L.objId,!0),X(L.content),X("endobj")}Kt.publish("postPutAdditionalObjects")},Jl=function(v){In[v.fontName]=In[v.fontName]||{},In[v.fontName][v.fontStyle]=v.id},Xl=function(v,L,Z,re,he){var we={id:"F"+(Object.keys(mn).length+1).toString(10),postScriptName:v,fontName:L,fontStyle:Z,encoding:re,isStandardFont:he||!1,metadata:{}};return Kt.publish("addFont",{font:we,instance:this}),mn[we.id]=we,Jl(we),we.id},Mp=function(v){for(var L=0,Z=Le.length;L<Z;L++){var re=Xl.call(this,v[L][0],v[L][1],v[L][2],Le[L][3],!0);f===!1&&(m[re]=!0);var he=v[L][0].split("-");Jl({id:re,fontName:he[0],fontStyle:he[1]||""})}Kt.publish("addFonts",{fonts:mn,dictionary:In})},Li=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(re){var L=re.stack||"";~L.indexOf(" at ")&&(L=L.split(" at ")[1]);var Z="Error in function "+L.split(`
`)[0].split("<")[0]+": "+re.message;if(!bt.console)throw new Error(Z);bt.console.error(Z,re),bt.alert&&alert(Z)}},v.foo.bar=v,v.foo},Ta=function(v,L){var Z,re,he,we,Me,Ze,st,h,_;if(he=(L=L||{}).sourceEncoding||"Unicode",Me=L.outputEncoding,(L.autoencode||Me)&&mn[Ht].metadata&&mn[Ht].metadata[he]&&mn[Ht].metadata[he].encoding&&(we=mn[Ht].metadata[he].encoding,!Me&&mn[Ht].encoding&&(Me=mn[Ht].encoding),!Me&&we.codePages&&(Me=we.codePages[0]),typeof Me=="string"&&(Me=we[Me]),Me)){for(st=!1,Ze=[],Z=0,re=v.length;Z<re;Z++)(h=Me[v.charCodeAt(Z)])?Ze.push(String.fromCharCode(h)):Ze.push(v[Z]),Ze[Z].charCodeAt(0)>>8&&(st=!0);v=Ze.join("")}for(Z=v.length;st===void 0&&Z!==0;)v.charCodeAt(Z-1)>>8&&(st=!0),Z--;if(!st)return v;for(Ze=L.noBOM?[]:[254,255],Z=0,re=v.length;Z<re;Z++){if((_=(h=v.charCodeAt(Z))>>8)>>8)throw new Error("Character at position "+Z+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ze.push(_),Ze.push(h-(_<<8))}return String.fromCharCode.apply(void 0,Ze)},ti=g.__private__.pdfEscape=g.pdfEscape=function(v,L){return Ta(v,L).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},eo=g.__private__.beginPage=function(v){ke[++Ln]=[],It[Ln]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},xa(Ln),Se(ke[W])},Oi=function(v,L){var Z,re,he;switch(t=L||t,typeof v=="string"&&(Z=w(v.toLowerCase()),Array.isArray(Z)&&(re=Z[0],he=Z[1])),Array.isArray(v)&&(re=v[0]*Ye,he=v[1]*Ye),isNaN(re)&&(re=i[0],he=i[1]),(re>14400||he>14400)&&(Pn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),re=Math.min(14400,re),he=Math.min(14400,he)),i=[re,he],t.substr(0,1)){case"l":he>re&&(i=[he,re]);break;case"p":re>he&&(i=[he,re])}eo(i),Jd(Cn),X(ro),zs!==0&&X(zs+" J"),sc!==0&&X(sc+" j"),Kt.publish("addPage",{pageNumber:Ln})},Iu=function(v){v>0&&v<=Ln&&(ke.splice(v,1),It.splice(v,1),Ln--,W>Ln&&(W=Ln),this.setPage(W))},xa=function(v){v>0&&v<=Ln&&(W=v)},$d=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return ke.length-1},vn=function(v,L,Z){var re,he=void 0;return Z=Z||{},v=v!==void 0?v:mn[Ht].fontName,L=L!==void 0?L:mn[Ht].fontStyle,re=v.toLowerCase(),In[re]!==void 0&&In[re][L]!==void 0?he=In[re][L]:In[v]!==void 0&&In[v][L]!==void 0?he=In[v][L]:Z.disableWarning===!1&&Pn.warn("Unable to look up font label for font '"+v+"', '"+L+"'. Refer to getFontList() for available fonts."),he||Z.noFallback||(he=In.times[L])==null&&(he=In.times.normal),he},Cu=g.__private__.putInfo=function(){var v=Un(),L=function(re){return re};for(var Z in d!==null&&(L=er.encryptor(v,0)),X("<<"),X("/Producer ("+ti(L("jsPDF "+yt.version))+")"),gt)gt.hasOwnProperty(Z)&&gt[Z]&&X("/"+Z.substr(0,1).toUpperCase()+Z.substr(1)+" ("+ti(L(gt[Z]))+")");X("/CreationDate ("+ti(L(K))+")"),X(">>"),X("endobj")},rs=g.__private__.putCatalog=function(v){var L=(v=v||{}).rootDictionaryObjId||ns;switch(Un(),X("<<"),X("/Type /Catalog"),X("/Pages "+L+" 0 R"),Ke||(Ke="fullwidth"),Ke){case"fullwidth":X("/OpenAction [3 0 R /FitH null]");break;case"fullheight":X("/OpenAction [3 0 R /FitV null]");break;case"fullpage":X("/OpenAction [3 0 R /Fit]");break;case"original":X("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Z=""+Ke;Z.substr(Z.length-1)==="%"&&(Ke=parseInt(Ke)/100),typeof Ke=="number"&&X("/OpenAction [3 0 R /XYZ null null "+P(Ke)+"]")}switch(Vt||(Vt="continuous"),Vt){case"continuous":X("/PageLayout /OneColumn");break;case"single":X("/PageLayout /SinglePage");break;case"two":case"twoleft":X("/PageLayout /TwoColumnLeft");break;case"tworight":X("/PageLayout /TwoColumnRight")}Et&&X("/PageMode /"+Et),Kt.publish("putCatalog"),X(">>"),X("endobj")},Na=g.__private__.putTrailer=function(){X("trailer"),X("<<"),X("/Size "+(ae+1)),X("/Root "+ae+" 0 R"),X("/Info "+(ae-1)+" 0 R"),d!==null&&X("/Encrypt "+er.oid+" 0 R"),X("/ID [ <"+ee+"> <"+ee+"> ]"),X(">>")},Rp=g.__private__.putHeader=function(){X("%PDF-"+b),X("%\xBA\xDF\xAC\xE0")},Wd=g.__private__.putXRef=function(){var v="0000000000";X("xref"),X("0 "+(ae+1)),X("0000000000 65535 f ");for(var L=1;L<=ae;L++)typeof fe[L]=="function"?X((v+fe[L]()).slice(-10)+" 00000 n "):fe[L]!==void 0?X((v+fe[L]).slice(-10)+" 00000 n "):X("0000000000 00000 n ")},is=g.__private__.buildDocument=function(){ft(),Se(ye),Kt.publish("buildDocument"),Rp(),js(),Zl(),Eu(),d!==null&&Yl(),Cu(),rs();var v=_e;return Wd(),Na(),X("startxref"),X(""+v),X("%%EOF"),Se(ke[W]),ye.join(`
`)},Su=g.__private__.getBlob=function(v){return new Blob([ot(v)],{type:"application/pdf"})},Du=g.output=g.__private__.output=Li(function(v,L){switch(typeof(L=L||{})=="string"?L={filename:L}:L.filename=L.filename||"generated.pdf",v){case void 0:return is();case"save":g.save(L.filename);break;case"arraybuffer":return ot(is());case"blob":return Su(is());case"bloburi":case"bloburl":if(bt.URL!==void 0&&typeof bt.URL.createObjectURL=="function")return bt.URL&&bt.URL.createObjectURL(Su(is()))||void 0;Pn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Z="",re=is();try{Z=RC(re)}catch{Z=RC(unescape(encodeURIComponent(re)))}return"data:application/pdf;filename="+L.filename+";base64,"+Z;case"pdfobjectnewwindow":if(Object.prototype.toString.call(bt)==="[object Window]"){var he="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",we=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';L.pdfObjectUrl&&(he=L.pdfObjectUrl,we="");var Me='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+he+'"'+we+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(L)+");<\/script></body></html>",Ze=bt.open();return Ze!==null&&Ze.document.write(Me),Ze}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(bt)==="[object Window]"){var st='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(L.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+L.filename+'" width="500px" height="400px" /></body></html>',h=bt.open();if(h!==null){h.document.write(st);var _=this;h.document.documentElement.querySelector("#pdfViewer").onload=function(){h.document.title=L.filename,h.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(_.output("bloburl"))}}return h}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(bt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var A='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",L)+'"></iframe></body></html>',U=bt.open();if(U!==null&&(U.document.write(A),U.document.title=L.filename),U||typeof safari>"u")return U;break;case"datauri":case"dataurl":return bt.document.location.href=this.output("datauristring",L);default:return null}}),Gd=function(v){return Array.isArray(Vs)===!0&&Vs.indexOf(v)>-1};switch(r){case"pt":Ye=1;break;case"mm":Ye=72/25.4;break;case"cm":Ye=72/2.54;break;case"in":Ye=72;break;case"px":Ye=Gd("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ye=12;break;case"ex":Ye=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ye=r}var er=null;Ce(),ne();var Ao=function(v){return d!==null?er.encryptor(v,0):function(L){return L}},ec=g.__private__.getPageInfo=g.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:It[v].objId,pageNumber:v,pageContext:It[v]}},Ct=g.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var L in It)if(It[L].objId===v)break;return ec(L)},Kd=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:It[W].objId,pageNumber:W,pageContext:It[W]}};g.addPage=function(){return Oi.apply(this,arguments),this},g.setPage=function(){return xa.apply(this,arguments),Se.call(this,ke[W]),this},g.insertPage=function(v){return this.addPage(),this.movePage(W,v),this},g.movePage=function(v,L){var Z,re;if(v>L){Z=ke[v],re=It[v];for(var he=v;he>L;he--)ke[he]=ke[he-1],It[he]=It[he-1];ke[L]=Z,It[L]=re,this.setPage(L)}else if(v<L){Z=ke[v],re=It[v];for(var we=v;we<L;we++)ke[we]=ke[we+1],It[we]=It[we+1];ke[L]=Z,It[L]=re,this.setPage(L)}return this},g.deletePage=function(){return Iu.apply(this,arguments),this},g.__private__.text=g.text=function(v,L,Z,re,he){var we,Me,Ze,st,h,_,A,U,ue,pe=(re=re||{}).scope||this;if(typeof v=="number"&&typeof L=="number"&&(typeof Z=="string"||Array.isArray(Z))){var Pe=Z;Z=L,L=v,v=Pe}if(arguments[3]instanceof pt?(I("The transform parameter of text() with a Matrix value"),ue=he):(Ze=arguments[4],st=arguments[5],Dn(A=arguments[3])==="object"&&A!==null||(typeof Ze=="string"&&(st=Ze,Ze=null),typeof A=="string"&&(st=A,A=null),typeof A=="number"&&(Ze=A,A=null),re={flags:A,angle:Ze,align:st})),isNaN(L)||isNaN(Z)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return pe;var Dt="",_n=!1,At=typeof re.lineHeightFactor=="number"?re.lineHeightFactor:os,xn=pe.internal.scaleFactor;function sr(On){return On=On.split("	").join(Array(re.TabLen||9).join(" ")),ti(On,A)}function Ro(On){for(var Fn,ur=On.concat(),Ar=[],Fa=ur.length;Fa--;)typeof(Fn=ur.shift())=="string"?Ar.push(Fn):Array.isArray(On)&&(Fn.length===1||Fn[1]===void 0&&Fn[2]===void 0)?Ar.push(Fn[0]):Ar.push([Fn[0],Fn[1],Fn[2]]);return Ar}function qr(On,Fn){var ur;if(typeof On=="string")ur=Fn(On)[0];else if(Array.isArray(On)){for(var Ar,Fa,Bp=On.concat(),uh=[],Jv=Bp.length;Jv--;)typeof(Ar=Bp.shift())=="string"?uh.push(Fn(Ar)[0]):Array.isArray(Ar)&&typeof Ar[0]=="string"&&(Fa=Fn(Ar[0],Ar[1],Ar[2]),uh.push([Fa[0],Fa[1],Fa[2]]));ur=uh}return ur}var cs=!1,Pa=!0;if(typeof v=="string")cs=!0;else if(Array.isArray(v)){var kp=v.concat();Me=[];for(var eh,Hr=kp.length;Hr--;)(typeof(eh=kp.shift())!="string"||Array.isArray(eh)&&typeof eh[0]!="string")&&(Pa=!1);cs=Pa}if(cs===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var th=Be/pe.internal.scaleFactor,nh=th*(At-1);switch(re.baseline){case"bottom":Z-=nh;break;case"top":Z+=th-nh;break;case"hanging":Z+=th-2*nh;break;case"middle":Z+=th/2-nh}if((_=re.maxWidth||0)>0&&(typeof v=="string"?v=pe.splitTextToSize(v,_):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(On,Fn){return On.concat(pe.splitTextToSize(Fn,_))},[]))),we={text:v,x:L,y:Z,options:re,mutex:{pdfEscape:ti,activeFontKey:Ht,fonts:mn,activeFontSize:Be}},Kt.publish("preProcessText",we),v=we.text,Ze=(re=we.options).angle,!(ue instanceof pt)&&Ze&&typeof Ze=="number"){Ze*=Math.PI/180,re.rotationDirection===0&&(Ze=-Ze),F===x.ADVANCED&&(Ze=-Ze);var rh=Math.cos(Ze),Lp=Math.sin(Ze);ue=new pt(rh,Lp,-Lp,rh,0,0)}else Ze&&Ze instanceof pt&&(ue=Ze);F!==x.ADVANCED||ue||(ue=Yi),(h=re.charSpace||us)!==void 0&&(Dt+=R(T(h))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(U=re.horizontalScale)!==void 0&&(Dt+=R(100*U)+` Tz
`),re.lang;var Vi=-1,Cb=re.renderingMode!==void 0?re.renderingMode:re.stroke,Op=pe.internal.getCurrentPageInfo().pageContext;switch(Cb){case 0:case!1:case"fill":Vi=0;break;case 1:case!0:case"stroke":Vi=1;break;case 2:case"fillThenStroke":Vi=2;break;case 3:case"invisible":Vi=3;break;case 4:case"fillAndAddForClipping":Vi=4;break;case 5:case"strokeAndAddPathForClipping":Vi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vi=6;break;case 7:case"addToPathForClipping":Vi=7}var Kv=Op.usedRenderingMode!==void 0?Op.usedRenderingMode:-1;Vi!==-1?Dt+=Vi+` Tr
`:Kv!==-1&&(Dt+=`0 Tr
`),Vi!==-1&&(Op.usedRenderingMode=Vi),st=re.align||"left";var Po,ih=Be*At,Qv=pe.internal.pageSize.getWidth(),Yv=mn[Ht];h=re.charSpace||us,_=re.maxWidth||0,A=Object.assign({autoencode:!0,noBOM:!0},re.flags);var ku=[],lc=function(On){return pe.getStringUnitWidth(On,{font:Yv,charSpace:h,fontSize:Be,doKerning:!1})*Be/xn};if(Object.prototype.toString.call(v)==="[object Array]"){var ji;Me=Ro(v),st!=="left"&&(Po=Me.map(lc));var vi,Lu=0;if(st==="right"){L-=Po[0],v=[],Hr=Me.length;for(var ka=0;ka<Hr;ka++)ka===0?(vi=mi(L),ji=xo(Z)):(vi=T(Lu-Po[ka]),ji=-ih),v.push([Me[ka],vi,ji]),Lu=Po[ka]}else if(st==="center"){L-=Po[0]/2,v=[],Hr=Me.length;for(var La=0;La<Hr;La++)La===0?(vi=mi(L),ji=xo(Z)):(vi=T((Lu-Po[La])/2),ji=-ih),v.push([Me[La],vi,ji]),Lu=Po[La]}else if(st==="left"){v=[],Hr=Me.length;for(var oh=0;oh<Hr;oh++)v.push(Me[oh])}else if(st==="justify"&&Yv.encoding==="Identity-H"){v=[],Hr=Me.length,_=_!==0?_:Qv;for(var Oa=0,ar=0;ar<Hr;ar++)if(ji=ar===0?xo(Z):-ih,vi=ar===0?mi(L):Oa,ar<Hr-1){var Fp=T((_-Po[ar])/(Me[ar].split(" ").length-1)),yi=Me[ar].split(" ");v.push([yi[0]+" ",vi,ji]),Oa=0;for(var ko=1;ko<yi.length;ko++){var sh=(lc(yi[ko-1]+" "+yi[ko])-lc(yi[ko]))*xn+Fp;ko==yi.length-1?v.push([yi[ko],sh,0]):v.push([yi[ko]+" ",sh,0]),Oa-=sh}}else v.push([Me[ar],vi,ji]);v.push(["",Oa,0])}else{if(st!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Hr=Me.length,_=_!==0?_:Qv,ar=0;ar<Hr;ar++)ji=ar===0?xo(Z):-ih,vi=ar===0?mi(L):0,ar<Hr-1?ku.push(R(T((_-Po[ar])/(Me[ar].split(" ").length-1)))):ku.push(0),v.push([Me[ar],vi,ji])}}var Zv=typeof re.R2L=="boolean"?re.R2L:lt;Zv===!0&&(v=qr(v,function(On,Fn,ur){return[On.split("").reverse().join(""),Fn,ur]})),we={text:v,x:L,y:Z,options:re,mutex:{pdfEscape:ti,activeFontKey:Ht,fonts:mn,activeFontSize:Be}},Kt.publish("postProcessText",we),v=we.text,_n=we.mutex.isHex||!1;var Vp=mn[Ht].encoding;Vp!=="WinAnsiEncoding"&&Vp!=="StandardEncoding"||(v=qr(v,function(On,Fn,ur){return[sr(On),Fn,ur]})),Me=Ro(v),v=[];for(var cc,dc,Ou,hc=0,ah=1,fc=Array.isArray(Me[0])?ah:hc,Fu="",jp=function(On,Fn,ur){var Ar="";return ur instanceof pt?(ur=typeof re.angle=="number"?Tn(ur,new pt(1,0,0,1,On,Fn)):Tn(new pt(1,0,0,1,On,Fn),ur),F===x.ADVANCED&&(ur=Tn(new pt(1,0,0,-1,0,0),ur)),Ar=ur.join(" ")+` Tm
`):Ar=R(On)+" "+R(Fn)+` Td
`,Ar},Lo=0;Lo<Me.length;Lo++){switch(Fu="",fc){case ah:Ou=(_n?"<":"(")+Me[Lo][0]+(_n?">":")"),cc=parseFloat(Me[Lo][1]),dc=parseFloat(Me[Lo][2]);break;case hc:Ou=(_n?"<":"(")+Me[Lo]+(_n?">":")"),cc=mi(L),dc=xo(Z)}ku!==void 0&&ku[Lo]!==void 0&&(Fu=ku[Lo]+` Tw
`),Lo===0?v.push(Fu+jp(cc,dc,ue)+Ou):fc===hc?v.push(Fu+Ou):fc===ah&&v.push(Fu+jp(cc,dc,ue)+Ou)}v=fc===hc?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var Oo=`BT
/`;return Oo+=Ht+" "+Be+` Tf
`,Oo+=R(Be*At)+` TL
`,Oo+=Hs+`
`,Oo+=Dt,Oo+=v,X(Oo+="ET"),m[Ht]=!0,pe};var qs=g.__private__.clip=g.clip=function(v){return X(v==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return qs("evenodd")},g.__private__.discardPath=g.discardPath=function(){return X("n"),this};var To=g.__private__.isValidStyle=function(v){var L=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(L=!0),L};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(v){return To(v)&&(l=v),this};var Qd=g.__private__.getStyle=g.getStyle=function(v){var L=l;switch(v){case"D":case"S":L="S";break;case"F":L="f";break;case"FD":case"DF":L="B";break;case"f":case"f*":case"B":case"B*":L=v}return L},Yd=g.close=function(){return X("h"),this};g.stroke=function(){return X("S"),this},g.fill=function(v){return gi("f",v),this},g.fillEvenOdd=function(v){return gi("f*",v),this},g.fillStroke=function(v){return gi("B",v),this},g.fillStrokeEvenOdd=function(v){return gi("B*",v),this};var gi=function(v,L){Dn(L)==="object"?Ma(L,v):X(v)},tc=function(v){v===null||F===x.ADVANCED&&v===void 0||(v=Qd(v),X(v))};function Pp(v,L,Z,re,he){var we=new Yc(L||this.boundingBox,Z||this.xStep,re||this.yStep,this.gState,he||this.matrix);we.stream=this.stream;var Me=v+"$$"+this.cloneIndex+++"$$";return vr(Me,we),we}var Ma=function(v,L){var Z=ts[v.key],re=cn[Z];if(re instanceof ul)X("q"),X(Au(L)),re.gState&&g.setGState(re.gState),X(v.matrix.toString()+" cm"),X("/"+Z+" sh"),X("Q");else if(re instanceof Yc){var he=new pt(1,0,0,-1,0,ls());v.matrix&&(he=he.multiply(v.matrix||Yi),Z=Pp.call(re,v.key,v.boundingBox,v.xStep,v.yStep,he).id),X("q"),X("/Pattern cs"),X("/"+Z+" scn"),re.gState&&g.setGState(re.gState),X(L),X("Q")}},Au=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Tu=g.moveTo=function(v,L){return X(R(T(v))+" "+R(B(L))+" m"),this},to=g.lineTo=function(v,L){return X(R(T(v))+" "+R(B(L))+" l"),this},Fi=g.curveTo=function(v,L,Z,re,he,we){return X([R(T(v)),R(B(L)),R(T(Z)),R(B(re)),R(T(he)),R(B(we)),"c"].join(" ")),this};g.__private__.line=g.line=function(v,L,Z,re,he){if(isNaN(v)||isNaN(L)||isNaN(Z)||isNaN(re)||!To(he))throw new Error("Invalid arguments passed to jsPDF.line");return F===x.COMPAT?this.lines([[Z-v,re-L]],v,L,[1,1],he||"S"):this.lines([[Z-v,re-L]],v,L,[1,1]).stroke()},g.__private__.lines=g.lines=function(v,L,Z,re,he,we){var Me,Ze,st,h,_,A,U,ue,pe,Pe,Dt,_n;if(typeof v=="number"&&(_n=Z,Z=L,L=v,v=_n),re=re||[1,1],we=we||!1,isNaN(L)||isNaN(Z)||!Array.isArray(v)||!Array.isArray(re)||!To(he)||typeof we!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Tu(L,Z),Me=re[0],Ze=re[1],h=v.length,Pe=L,Dt=Z,st=0;st<h;st++)(_=v[st]).length===2?(Pe=_[0]*Me+Pe,Dt=_[1]*Ze+Dt,to(Pe,Dt)):(A=_[0]*Me+Pe,U=_[1]*Ze+Dt,ue=_[2]*Me+Pe,pe=_[3]*Ze+Dt,Pe=_[4]*Me+Pe,Dt=_[5]*Ze+Dt,Fi(A,U,ue,pe,Pe,Dt));return we&&Yd(),tc(he),this},g.path=function(v){for(var L=0;L<v.length;L++){var Z=v[L],re=Z.c;switch(Z.op){case"m":Tu(re[0],re[1]);break;case"l":to(re[0],re[1]);break;case"c":Fi.apply(this,re);break;case"h":Yd()}}return this},g.__private__.rect=g.rect=function(v,L,Z,re,he){if(isNaN(v)||isNaN(L)||isNaN(Z)||isNaN(re)||!To(he))throw new Error("Invalid arguments passed to jsPDF.rect");return F===x.COMPAT&&(re=-re),X([R(T(v)),R(B(L)),R(T(Z)),R(T(re)),"re"].join(" ")),tc(he),this},g.__private__.triangle=g.triangle=function(v,L,Z,re,he,we,Me){if(isNaN(v)||isNaN(L)||isNaN(Z)||isNaN(re)||isNaN(he)||isNaN(we)||!To(Me))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Z-v,re-L],[he-Z,we-re],[v-he,L-we]],v,L,[1,1],Me,!0),this},g.__private__.roundedRect=g.roundedRect=function(v,L,Z,re,he,we,Me){if(isNaN(v)||isNaN(L)||isNaN(Z)||isNaN(re)||isNaN(he)||isNaN(we)||!To(Me))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ze=4/3*(Math.SQRT2-1);return he=Math.min(he,.5*Z),we=Math.min(we,.5*re),this.lines([[Z-2*he,0],[he*Ze,0,he,we-we*Ze,he,we],[0,re-2*we],[0,we*Ze,-he*Ze,we,-he,we],[2*he-Z,0],[-he*Ze,0,-he,-we*Ze,-he,-we],[0,2*we-re],[0,-we*Ze,he*Ze,-we,he,-we]],v+he,L,[1,1],Me,!0),this},g.__private__.ellipse=g.ellipse=function(v,L,Z,re,he){if(isNaN(v)||isNaN(L)||isNaN(Z)||isNaN(re)||!To(he))throw new Error("Invalid arguments passed to jsPDF.ellipse");var we=4/3*(Math.SQRT2-1)*Z,Me=4/3*(Math.SQRT2-1)*re;return Tu(v+Z,L),Fi(v+Z,L-Me,v+we,L-re,v,L-re),Fi(v-we,L-re,v-Z,L-Me,v-Z,L),Fi(v-Z,L+Me,v-we,L+re,v,L+re),Fi(v+we,L+re,v+Z,L+Me,v+Z,L),tc(he),this},g.__private__.circle=g.circle=function(v,L,Z,re){if(isNaN(v)||isNaN(L)||isNaN(Z)||!To(re))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,L,Z,Z,re)},g.setFont=function(v,L,Z){return Z&&(L=Y(L,Z)),Ht=vn(v,L,{disableWarning:!1}),this};var Zd=g.__private__.getFont=g.getFont=function(){return mn[vn.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var v,L,Z={};for(v in In)if(In.hasOwnProperty(v))for(L in Z[v]=[],In[v])In[v].hasOwnProperty(L)&&Z[v].push(L);return Z},g.addFont=function(v,L,Z,re,he){var we=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&we.indexOf(arguments[3])!==-1?he=arguments[3]:arguments[3]&&we.indexOf(arguments[3])==-1&&(Z=Y(Z,re)),he=he||"Identity-H",Xl.call(this,v,L,Z,he)};var os,Cn=n.lineWidth||.200025,xu=g.__private__.getLineWidth=g.getLineWidth=function(){return Cn},Jd=g.__private__.setLineWidth=g.setLineWidth=function(v){return Cn=v,X(R(T(v))+" w"),this};g.__private__.setLineDash=yt.API.setLineDash=yt.API.setLineDashPattern=function(v,L){if(v=v||[],L=L||0,isNaN(L)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(Z){return R(T(Z))}).join(" "),L=R(T(L)),X("["+v+"] "+L+" d"),this};var nc=g.__private__.getLineHeight=g.getLineHeight=function(){return Be*os};g.__private__.getLineHeight=g.getLineHeight=function(){return Be*os};var rc=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(os=v),this},ic=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return os};rc(n.lineHeight);var mi=g.__private__.getHorizontalCoordinate=function(v){return T(v)},xo=g.__private__.getVerticalCoordinate=function(v){return F===x.ADVANCED?v:It[W].mediaBox.topRightY-It[W].mediaBox.bottomLeftY-T(v)},no=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(v){return R(mi(v))},ss=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(v){return R(xo(v))},ro=n.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return ei(ro)},g.__private__.setStrokeColor=g.setDrawColor=function(v,L,Z,re){return ro=Pi({ch1:v,ch2:L,ch3:Z,ch4:re,pdfColorType:"draw",precision:2}),X(ro),this};var as=n.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return ei(as)},g.__private__.setFillColor=g.setFillColor=function(v,L,Z,re){return as=Pi({ch1:v,ch2:L,ch3:Z,ch4:re,pdfColorType:"fill",precision:2}),X(as),this};var Hs=n.textColor||"0 g",oc=g.__private__.getTextColor=g.getTextColor=function(){return ei(Hs)};g.__private__.setTextColor=g.setTextColor=function(v,L,Z,re){return Hs=Pi({ch1:v,ch2:L,ch3:Z,ch4:re,pdfColorType:"text",precision:3}),this};var us=n.charSpace,Xd=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(us||0)};g.__private__.setCharSpace=g.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return us=v,this};var zs=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(v){var L=g.CapJoinStyles[v];if(L===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zs=L,X(L+" J"),this};var sc=0;g.__private__.setLineJoin=g.setLineJoin=function(v){var L=g.CapJoinStyles[v];if(L===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sc=L,X(L+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return X(R(T(v))+" M"),this},g.GState=hm,g.setGState=function(v){(v=typeof v=="string"?Bn[Ri[v]]:ac(null,v)).equals(fi)||(X("/"+v.id+" gs"),fi=v)};var ac=function(v,L){if(!v||!Ri[v]){var Z=!1;for(var re in Bn)if(Bn.hasOwnProperty(re)&&Bn[re].equals(L)){Z=!0;break}if(Z)L=Bn[re];else{var he="GS"+(Object.keys(Bn).length+1).toString(10);Bn[he]=L,L.id=he}return v&&(Ri[v]=L.id),Kt.publish("addGState",L),L}};g.addGState=function(v,L){return ac(v,L),this},g.saveGraphicsState=function(){return X("q"),Do.push({key:Ht,size:Be,color:Hs}),this},g.restoreGraphicsState=function(){X("Q");var v=Do.pop();return Ht=v.key,Be=v.size,Hs=v.color,fi=null,this},g.setCurrentTransformationMatrix=function(v){return X(v.toString()+" cm"),this},g.comment=function(v){return X("#"+v),this};var No=function(v,L){var Z=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Z},set:function(we){isNaN(we)||(Z=parseFloat(we))}});var re=L||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return re},set:function(we){isNaN(we)||(re=parseFloat(we))}});var he="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return he},set:function(we){he=we.toString()}}),this},Nu=function(v,L,Z,re){No.call(this,v,L),this.type="rect";var he=Z||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return he},set:function(Me){isNaN(Me)||(he=parseFloat(Me))}});var we=re||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return we},set:function(Me){isNaN(Me)||(we=parseFloat(Me))}}),this},Mu=function(){this.page=Ln,this.currentPage=W,this.pages=ke.slice(0),this.pagesContext=It.slice(0),this.x=Lr,this.y=Gt,this.matrix=Mi,this.width=Mo(W),this.height=ls(W),this.outputDestination=qe,this.id="",this.objectNumber=-1};Mu.prototype.restore=function(){Ln=this.page,W=this.currentPage,It=this.pagesContext,ke=this.pages,Lr=this.x,Gt=this.y,Mi=this.matrix,Pu(W,this.width),io(W,this.height),qe=this.outputDestination};var Ru=function(v,L,Z,re,he){Xr.push(new Mu),Ln=W=0,ke=[],Lr=v,Gt=L,Mi=he,eo([Z,re])},uc=function(v){if(Qi[v])Xr.pop().restore();else{var L=new Mu,Z="Xo"+(Object.keys(Jn).length+1).toString(10);L.id=Z,Qi[v]=Z,Jn[Z]=L,Kt.publish("addFormObject",L),Xr.pop().restore()}};for(var Ra in g.beginFormObject=function(v,L,Z,re,he){return Ru(v,L,Z,re,he),this},g.endFormObject=function(v){return uc(v),this},g.doFormObject=function(v,L){var Z=Jn[Qi[v]];return X("q"),X(L.toString()+" cm"),X("/"+Z.id+" Do"),X("Q"),this},g.getFormObject=function(v){var L=Jn[Qi[v]];return{x:L.x,y:L.y,width:L.width,height:L.height,matrix:L.matrix}},g.save=function(v,L){return v=v||"generated.pdf",(L=L||{}).returnPromise=L.returnPromise||!1,L.returnPromise===!1?(Qc(Su(is()),v),typeof Qc.unload=="function"&&bt.setTimeout&&setTimeout(Qc.unload,911),this):new Promise(function(Z,re){try{var he=Qc(Su(is()),v);typeof Qc.unload=="function"&&bt.setTimeout&&setTimeout(Qc.unload,911),Z(he)}catch(we){re(we.message)}})},yt.API)yt.API.hasOwnProperty(Ra)&&(Ra==="events"&&yt.API.events.length?function(v,L){var Z,re,he;for(he=L.length-1;he!==-1;he--)Z=L[he][0],re=L[he][1],v.subscribe.apply(v,[Z].concat(typeof re=="function"?[re]:re))}(Kt,yt.API.events):g[Ra]=yt.API[Ra]);var Mo=g.getPageWidth=function(v){return(It[v=v||W].mediaBox.topRightX-It[v].mediaBox.bottomLeftX)/Ye},Pu=g.setPageWidth=function(v,L){It[v].mediaBox.topRightX=L*Ye+It[v].mediaBox.bottomLeftX},ls=g.getPageHeight=function(v){return(It[v=v||W].mediaBox.topRightY-It[v].mediaBox.bottomLeftY)/Ye},io=g.setPageHeight=function(v,L){It[v].mediaBox.topRightY=L*Ye+It[v].mediaBox.bottomLeftY};return g.internal={pdfEscape:ti,getStyle:Qd,getFont:Zd,getFontSize:$e,getCharSpace:Xd,getTextColor:oc,getLineHeight:nc,getLineHeightFactor:ic,getLineWidth:xu,write:St,getHorizontalCoordinate:mi,getVerticalCoordinate:xo,getCoordinateString:no,getVerticalCoordinateString:ss,collections:{},newObject:Un,newAdditionalObject:Zi,newObjectDeferred:Xn,newObjectDeferredBegin:pi,getFilters:ki,putStream:Ur,events:Kt,scaleFactor:Ye,pageSize:{getWidth:function(){return Mo(W)},setWidth:function(v){Pu(W,v)},getHeight:function(){return ls(W)},setHeight:function(v){io(W,v)}},encryptionOptions:d,encryption:er,getEncryptor:Ao,output:Du,getNumberOfPages:$d,pages:ke,out:X,f2:P,f3:C,getPageInfo:ec,getPageInfoByObjId:Ct,getCurrentPageInfo:Kd,getPDFVersion:E,Point:No,Rectangle:Nu,Matrix:pt,hasHotfix:Gd},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Mo(W)},set:function(v){Pu(W,v)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return ls(W)},set:function(v){io(W,v)},enumerable:!0,configurable:!0}),Mp.call(g,Le),Ht="F1",Oi(i,t),Kt.publish("initialized"),g}function oO(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}function FC(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(o){return sO[o=o||"normal"]?o:"normal"}(n.style),r=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(o){return typeof OC[o=o||"normal"]=="number"?o:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function UL(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}function HL(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function AG(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},DG,t.genericFontFamilies||{}),o=null,s=null,a=0;a<e.length;++a)if(i[(o=FC(e[a])).family]&&(o.family=i[o.family]),n.hasOwnProperty(o.family)){s=n[o.family];break}if(!(s=s||n[r]))throw new Error("Could not find a font-family for the rule '"+HL(o)+"' and default family '"+r+"'.");if(s=function(u,l){if(l[u])return l[u];var d=OC[u],f=d<=OC.normal?-1:1,m=UL(l,aO,d,f);if(!m)throw new Error("Could not find a matching font-stretch value for "+u);return m}(o.stretch,s),s=function(u,l){if(l[u])return l[u];for(var d=sO[u],f=0;f<d.length;++f)if(l[d[f]])return l[d[f]];throw new Error("Could not find a matching font-style for "+u)}(o.style,s),!(s=function(u,l){if(l[u])return l[u];if(u===400&&l[500])return l[500];if(u===500&&l[400])return l[400];var d=SG[u],f=UL(l,uO,d,u<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+u);return f}(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+HL(o)+"'.");return s}function zL(n){return n.trimLeft()}function TG(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function xG(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}function MG(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,s=1<<(7&i)+1;n[e++],n[e++];var a=null,u=null;o&&(a=e,u=s,e+=3*s);var l=!0,d=[],f=0,m=null,g=0,b=null;for(this.width=t,this.height=r;l&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,b=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((C=n[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=n[e++];f=n[e++]|n[e++]<<8,m=n[e++],!(1&E)&&(m=null),g=E>>2&7,e++;break;case 254:for(;;){if(!((C=n[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var D=n[e++]|n[e++]<<8,w=n[e++]|n[e++]<<8,x=n[e++]|n[e++]<<8,F=n[e++]|n[e++]<<8,z=n[e++],H=z>>6&1,Y=1<<(7&z)+1,R=a,I=u,N=!1;z>>7&&(N=!0,R=e,I=Y,e+=3*Y);var P=e;for(e++;;){var C;if(!((C=n[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}d.push({x:D,y:w,width:x,height:F,has_local_palette:N,palette_offset:R,palette_size:I,data_offset:P,data_length:e-P,transparent_index:m,interlaced:!!H,delay:f,disposal:g});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(T){if(T<0||T>=d.length)throw new Error("Frame index out of range.");return d[T]},this.decodeAndBlitFrameBGRA=function(T,M){var B=this.frameInfo(T),K=B.width*B.height,ee=new Uint8Array(K);YL(n,B.data_offset,ee,K);var J=B.palette_offset,ne=B.transparent_index;ne===null&&(ne=256);var se=B.width,ce=t-se,Ce=se,k=4*(B.y*t+B.x),W=4*((B.y+B.height)*t+B.x),G=k,te=4*ce;B.interlaced===!0&&(te+=4*t*7);for(var ae=8,fe=0,ye=ee.length;fe<ye;++fe){var _e=ee[fe];if(Ce===0&&(Ce=se,(G+=te)>=W&&(te=4*ce+4*t*(ae-1),G=k+(se+ce)*(ae<<1),ae>>=1)),_e===ne)G+=4;else{var Oe=n[J+3*_e],ke=n[J+3*_e+1],ze=n[J+3*_e+2];M[G++]=ze,M[G++]=ke,M[G++]=Oe,M[G++]=255}--Ce}},this.decodeAndBlitFrameRGBA=function(T,M){var B=this.frameInfo(T),K=B.width*B.height,ee=new Uint8Array(K);YL(n,B.data_offset,ee,K);var J=B.palette_offset,ne=B.transparent_index;ne===null&&(ne=256);var se=B.width,ce=t-se,Ce=se,k=4*(B.y*t+B.x),W=4*((B.y+B.height)*t+B.x),G=k,te=4*ce;B.interlaced===!0&&(te+=4*t*7);for(var ae=8,fe=0,ye=ee.length;fe<ye;++fe){var _e=ee[fe];if(Ce===0&&(Ce=se,(G+=te)>=W&&(te=4*ce+4*t*(ae-1),G=k+(se+ce)*(ae<<1),ae>>=1)),_e===ne)G+=4;else{var Oe=n[J+3*_e],ke=n[J+3*_e+1],ze=n[J+3*_e+2];M[G++]=Oe,M[G++]=ke,M[G++]=ze,M[G++]=255}--Ce}}}function YL(n,e,t,r){for(var i=n[e++],o=1<<i,s=o+1,a=s+1,u=i+1,l=(1<<u)-1,d=0,f=0,m=0,g=n[e++],b=new Int32Array(4096),E=null;;){for(;d<16&&g!==0;)f|=n[e++]<<d,d+=8,g===1?g=n[e++]:--g;if(d<u)break;var D=f&l;if(f>>=u,d-=u,D!==o){if(D===s)break;for(var w=D<a?D:E,x=0,F=w;F>o;)F=b[F]>>8,++x;var z=F;if(m+x+(w!==D?1:0)>r)return void Pn.log("Warning, gif stream longer than expected.");t[m++]=z;var H=m+=x;for(w!==D&&(t[m++]=z),F=w;x--;)F=b[F],t[--H]=255&F,F>>=8;E!==null&&a<4096&&(b[a++]=E<<8|z,a>=l+1&&u<12&&(++u,l=l<<1|1)),E=D}else a=s+1,l=(1<<(u=i+1))-1,E=null}return m!==r&&Pn.log("Warning, gif stream shorter than expected."),t}function MC(n){var e,t,r,i,o,s=Math.floor,a=new Array(64),u=new Array(64),l=new Array(64),d=new Array(64),f=new Array(65535),m=new Array(65535),g=new Array(64),b=new Array(64),E=[],D=0,w=7,x=new Array(64),F=new Array(64),z=new Array(64),H=new Array(256),Y=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(k,W){for(var G=0,te=0,ae=new Array,fe=1;fe<=16;fe++){for(var ye=1;ye<=k[fe];ye++)ae[W[te]]=[],ae[W[te]][0]=G,ae[W[te]][1]=fe,te++,G++;G*=2}return ae}function J(k){for(var W=k[0],G=k[1]-1;G>=0;)W&1<<G&&(D|=1<<w),G--,--w<0&&(D==255?(ne(255),ne(0)):ne(D),w=7,D=0)}function ne(k){E.push(k)}function se(k){ne(k>>8&255),ne(255&k)}function ce(k,W,G,te,ae){for(var fe,ye=ae[0],_e=ae[240],Oe=function(Le,Be){var Ke,$e,lt,Et,Tt,Vt,_t,Rt,gt,Ht,Ye=0;for(gt=0;gt<8;++gt){Ke=Le[Ye],$e=Le[Ye+1],lt=Le[Ye+2],Et=Le[Ye+3],Tt=Le[Ye+4],Vt=Le[Ye+5],_t=Le[Ye+6];var Lr=Ke+(Rt=Le[Ye+7]),Gt=Ke-Rt,Mi=$e+_t,mn=$e-_t,In=lt+Vt,Do=lt-Vt,cn=Et+Tt,ts=Et-Tt,Bn=Lr+cn,Ri=Lr-cn,fi=Mi+In,Ln=Mi-In;Le[Ye]=Bn+fi,Le[Ye+4]=Bn-fi;var It=.707106781*(Ln+Ri);Le[Ye+2]=Ri+It,Le[Ye+6]=Ri-It;var Kt=.382683433*((Bn=ts+Do)-(Ln=mn+Gt)),Vs=.5411961*Bn+Kt,Jn=1.306562965*Ln+Kt,Qi=.707106781*(fi=Do+mn),Xr=Gt+Qi,pt=Gt-Qi;Le[Ye+5]=pt+Vs,Le[Ye+3]=pt-Vs,Le[Ye+1]=Xr+Jn,Le[Ye+7]=Xr-Jn,Ye+=8}for(Ye=0,gt=0;gt<8;++gt){Ke=Le[Ye],$e=Le[Ye+8],lt=Le[Ye+16],Et=Le[Ye+24],Tt=Le[Ye+32],Vt=Le[Ye+40],_t=Le[Ye+48];var Tn=Ke+(Rt=Le[Ye+56]),Yi=Ke-Rt,vr=$e+_t,Un=$e-_t,Xn=lt+Vt,pi=lt-Vt,Zi=Et+Tt,ns=Et-Tt,Ji=Tn+Zi,ei=Tn-Zi,Pi=vr+Xn,ki=vr-Xn;Le[Ye]=Ji+Pi,Le[Ye+32]=Ji-Pi;var Ur=.707106781*(ki+ei);Le[Ye+16]=ei+Ur,Le[Ye+48]=ei-Ur;var Dr=.382683433*((Ji=ns+pi)-(ki=Un+Yi)),js=.5411961*Ji+Dr,Ia=1.306562965*ki+Dr,Bs=.707106781*(Pi=pi+Un),Us=Yi+Bs,Ca=Yi-Bs;Le[Ye+40]=Ca+js,Le[Ye+24]=Ca-js,Le[Ye+8]=Us+Ia,Le[Ye+56]=Us-Ia,Ye++}for(gt=0;gt<64;++gt)Ht=Le[gt]*Be[gt],g[gt]=Ht>0?Ht+.5|0:Ht-.5|0;return g}(k,W),ke=0;ke<64;++ke)b[R[ke]]=Oe[ke];var ze=b[0]-G;G=b[0],ze==0?J(te[0]):(J(te[m[fe=32767+ze]]),J(f[fe]));for(var qe=63;qe>0&&b[qe]==0;)qe--;if(qe==0)return J(ye),G;for(var ft,Se=1;Se<=qe;){for(var X=Se;b[Se]==0&&Se<=qe;)++Se;var St=Se-X;if(St>=16){ft=St>>4;for(var ot=1;ot<=ft;++ot)J(_e);St&=15}fe=32767+b[Se],J(ae[(St<<4)+m[fe]]),J(f[fe]),Se++}return qe!=63&&J(ye),G}function Ce(k){k=Math.min(Math.max(k,1),100),o!=k&&(function(W){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ae=s((G[te]*W+50)/100);ae=Math.min(Math.max(ae,1),255),a[R[te]]=ae}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ye=0;ye<64;ye++){var _e=s((fe[ye]*W+50)/100);_e=Math.min(Math.max(_e,1),255),u[R[ye]]=_e}for(var Oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ke=0,ze=0;ze<8;ze++)for(var qe=0;qe<8;qe++)l[ke]=1/(a[R[ke]]*Oe[ze]*Oe[qe]*8),d[ke]=1/(u[R[ke]]*Oe[ze]*Oe[qe]*8),ke++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),o=k)}this.encode=function(k,W){W&&Ce(W),E=new Array,D=0,w=7,se(65496),se(65504),se(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),se(1),se(1),ne(0),ne(0),function(){se(65499),se(132),ne(0);for(var $e=0;$e<64;$e++)ne(a[$e]);ne(1);for(var lt=0;lt<64;lt++)ne(u[lt])}(),function($e,lt){se(65472),se(17),ne(8),se(lt),se($e),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(k.width,k.height),function(){se(65476),se(418),ne(0);for(var $e=0;$e<16;$e++)ne(I[$e+1]);for(var lt=0;lt<=11;lt++)ne(N[lt]);ne(16);for(var Et=0;Et<16;Et++)ne(P[Et+1]);for(var Tt=0;Tt<=161;Tt++)ne(C[Tt]);ne(1);for(var Vt=0;Vt<16;Vt++)ne(T[Vt+1]);for(var _t=0;_t<=11;_t++)ne(M[_t]);ne(17);for(var Rt=0;Rt<16;Rt++)ne(B[Rt+1]);for(var gt=0;gt<=161;gt++)ne(K[gt])}(),se(65498),se(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var G=0,te=0,ae=0;D=0,w=7,this.encode.displayName="_encode_";for(var fe,ye,_e,Oe,ke,ze,qe,ft,Se,X=k.data,St=k.width,ot=k.height,Le=4*St,Be=0;Be<ot;){for(fe=0;fe<Le;){for(ke=Le*Be+fe,qe=-1,ft=0,Se=0;Se<64;Se++)ze=ke+(ft=Se>>3)*Le+(qe=4*(7&Se)),Be+ft>=ot&&(ze-=Le*(Be+1+ft-ot)),fe+qe>=Le&&(ze-=fe+qe-Le+4),ye=X[ze++],_e=X[ze++],Oe=X[ze++],x[Se]=(Y[ye]+Y[_e+256>>0]+Y[Oe+512>>0]>>16)-128,F[Se]=(Y[ye+768>>0]+Y[_e+1024>>0]+Y[Oe+1280>>0]>>16)-128,z[Se]=(Y[ye+1280>>0]+Y[_e+1536>>0]+Y[Oe+1792>>0]>>16)-128;G=ce(x,l,G,e,r),te=ce(F,d,te,t,i),ae=ce(z,d,ae,t,i),fe+=32}Be+=8}if(w>=0){var Ke=[];Ke[1]=w+1,Ke[0]=(1<<w+1)-1,J(Ke)}return se(65497),new Uint8Array(E)},n=n||50,function(){for(var k=String.fromCharCode,W=0;W<256;W++)H[W]=k(W)}(),e=ee(I,N),t=ee(T,M),r=ee(P,C),i=ee(B,K),function(){for(var k=1,W=2,G=1;G<=15;G++){for(var te=k;te<W;te++)m[32767+te]=G,f[32767+te]=[],f[32767+te][1]=G,f[32767+te][0]=te;for(var ae=-(W-1);ae<=-k;ae++)m[32767+ae]=G,f[32767+ae]=[],f[32767+ae][1]=G,f[32767+ae][0]=W-1+ae;k<<=1,W<<=1}}(),function(){for(var k=0;k<256;k++)Y[k]=19595*k,Y[k+256>>0]=38470*k,Y[k+512>>0]=7471*k+32768,Y[k+768>>0]=-11059*k,Y[k+1024>>0]=-21709*k,Y[k+1280>>0]=32768*k+8421375,Y[k+1536>>0]=-27439*k,Y[k+1792>>0]=-5329*k}(),Ce(n)}function Ss(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ZL(n){function e(I){if(!I)throw Error("assert :P")}function t(I,N,P){for(var C=0;4>C;C++)if(I[N+C]!=P.charCodeAt(C))return!0;return!1}function r(I,N,P,C,T){for(var M=0;M<T;M++)I[N+M]=P[C+M]}function i(I,N,P,C){for(var T=0;T<C;T++)I[N+T]=P}function o(I){return new Int32Array(I)}function s(I,N){for(var P=[],C=0;C<I;C++)P.push(new N);return P}function a(I,N){var P=[];return function C(T,M,B){for(var K=B[M],ee=0;ee<K&&(T.push(B.length>M+1?[]:new N),!(B.length<M+1));ee++)C(T[ee],M+1,B)}(P,0,I),P}var u=function(){var I=this;function N(c,p){for(var y=1<<p-1>>>0;c&y;)y>>>=1;return y?(c&y-1)+y:c}function P(c,p,y,S,O){e(!(S%y));do c[p+(S-=y)]=O;while(0<S)}function C(c,p,y,S,O){if(e(2328>=O),512>=O)var V=o(512);else if((V=o(O))==null)return 0;return function(j,q,$,Q,ie,ge){var me,de,Te=q,Ie=1<<$,oe=o(16),le=o(16);for(e(ie!=0),e(Q!=null),e(j!=null),e(0<$),de=0;de<ie;++de){if(15<Q[de])return 0;++oe[Q[de]]}if(oe[0]==ie)return 0;for(le[1]=0,me=1;15>me;++me){if(oe[me]>1<<me)return 0;le[me+1]=le[me]+oe[me]}for(de=0;de<ie;++de)me=Q[de],0<Q[de]&&(ge[le[me]++]=de);if(le[15]==1)return(Q=new T).g=0,Q.value=ge[0],P(j,Te,1,Ie,Q),Ie;var De,Ne=-1,Ae=Ie-1,et=0,He=1,mt=1,Qe=1<<$;for(de=0,me=1,ie=2;me<=$;++me,ie<<=1){if(He+=mt<<=1,0>(mt-=oe[me]))return 0;for(;0<oe[me];--oe[me])(Q=new T).g=me,Q.value=ge[de++],P(j,Te+et,ie,Qe,Q),et=N(et,me)}for(me=$+1,ie=2;15>=me;++me,ie<<=1){if(He+=mt<<=1,0>(mt-=oe[me]))return 0;for(;0<oe[me];--oe[me]){if(Q=new T,(et&Ae)!=Ne){for(Te+=Qe,De=1<<(Ne=me)-$;15>Ne&&!(0>=(De-=oe[Ne]));)++Ne,De<<=1;Ie+=Qe=1<<(De=Ne-$),j[q+(Ne=et&Ae)].g=De+$,j[q+Ne].value=Te-q-Ne}Q.g=me-$,Q.value=ge[de++],P(j,Te+(et>>$),ie,Qe,Q),et=N(et,me)}}return He!=2*le[15]-1?0:Ie}(c,p,y,S,O,V)}function T(){this.value=this.g=0}function M(){this.value=this.g=0}function B(){this.G=s(5,T),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Hr,M)}function K(c,p,y,S){e(c!=null),e(p!=null),e(2147483648>S),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=p,c.pa=y,c.Jd=p,c.Yc=y+S,c.Zc=4<=S?y+S-4+1:y,fe(c)}function ee(c,p){for(var y=0;0<p--;)y|=_e(c,128)<<p;return y}function J(c,p){var y=ee(c,p);return ye(c)?-y:y}function ne(c,p,y,S){var O,V=0;for(e(c!=null),e(p!=null),e(4294967288>S),c.Sb=S,c.Ra=0,c.u=0,c.h=0,4<S&&(S=4),O=0;O<S;++O)V+=p[y+O]<<8*O;c.Ra=V,c.bb=S,c.oa=p,c.pa=y}function se(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<rh-8>>>0,++c.bb,c.u-=8;G(c)&&(c.h=1,c.u=0)}function ce(c,p){if(e(0<=p),!c.h&&p<=nh){var y=W(c)&th[p];return c.u+=p,se(c),y}return c.h=1,c.u=0}function Ce(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function k(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(c){return c.Ra>>>(c.u&rh-1)>>>0}function G(c){return e(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>rh}function te(c,p){c.u=p,c.h=G(c)}function ae(c){c.u>=Lp&&(e(c.u>=Lp),se(c))}function fe(c){e(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(e(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function ye(c){return ee(c,1)}function _e(c,p){var y=c.Ca;0>c.b&&fe(c);var S=c.b,O=y*p>>>8,V=(c.I>>>S>O)+0;for(V?(y-=O,c.I-=O+1<<S>>>0):y=O+1,S=y,O=0;256<=S;)O+=8,S>>=8;return S=7^O+Vi[S],c.b-=S,c.Ca=(y<<S)-1,V}function Oe(c,p,y){c[p+0]=y>>24&255,c[p+1]=y>>16&255,c[p+2]=y>>8&255,c[p+3]=y>>0&255}function ke(c,p){return c[p+0]<<0|c[p+1]<<8}function ze(c,p){return ke(c,p)|c[p+2]<<16}function qe(c,p){return ke(c,p)|ke(c,p+2)<<16}function ft(c,p){var y=1<<p;return e(c!=null),e(0<p),c.X=o(y),c.X==null?0:(c.Mb=32-p,c.Xa=p,1)}function Se(c,p){e(c!=null),e(p!=null),e(c.Xa==p.Xa),r(p.X,0,c.X,0,1<<p.Xa)}function X(){this.X=[],this.Xa=this.Mb=0}function St(c,p,y,S){e(y!=null),e(S!=null);var O=y[0],V=S[0];return O==0&&(O=(c*V+p/2)/p),V==0&&(V=(p*O+c/2)/c),0>=O||0>=V?0:(y[0]=O,S[0]=V,1)}function ot(c,p){return c+(1<<p)-1>>>p}function Le(c,p){return((4278255360&c)+(4278255360&p)>>>0&4278255360)+((16711935&c)+(16711935&p)>>>0&16711935)>>>0}function Be(c,p){I[p]=function(y,S,O,V,j,q,$){var Q;for(Q=0;Q<j;++Q){var ie=I[c](q[$+Q-1],O,V+Q);q[$+Q]=Le(y[S+Q],ie)}}}function Ke(){this.ud=this.hd=this.jd=0}function $e(c,p){return((4278124286&(c^p))>>>1)+(c&p)>>>0}function lt(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function Et(c,p){return lt(c+(c-p+.5>>1))}function Tt(c,p,y){return Math.abs(p-y)-Math.abs(c-y)}function Vt(c,p,y,S,O,V,j){for(S=V[j-1],y=0;y<O;++y)V[j+y]=S=Le(c[p+y],S)}function _t(c,p,y,S,O){var V;for(V=0;V<y;++V){var j=c[p+V],q=j>>8&255,$=16711935&($=($=16711935&j)+((q<<16)+q));S[O+V]=(4278255360&j)+$>>>0}}function Rt(c,p){p.jd=c>>0&255,p.hd=c>>8&255,p.ud=c>>16&255}function gt(c,p,y,S,O,V){var j;for(j=0;j<S;++j){var q=p[y+j],$=q>>>8,Q=q,ie=255&(ie=(ie=q>>>16)+((c.jd<<24>>24)*($<<24>>24)>>>5));Q=255&(Q=(Q=Q+((c.hd<<24>>24)*($<<24>>24)>>>5))+((c.ud<<24>>24)*(ie<<24>>24)>>>5)),O[V+j]=(4278255360&q)+(ie<<16)+Q}}function Ht(c,p,y,S,O){I[p]=function(V,j,q,$,Q,ie,ge,me,de){for($=ge;$<me;++$)for(ge=0;ge<de;++ge)Q[ie++]=O(q[S(V[j++])])},I[c]=function(V,j,q,$,Q,ie,ge){var me=8>>V.b,de=V.Ea,Te=V.K[0],Ie=V.w;if(8>me)for(V=(1<<V.b)-1,Ie=(1<<me)-1;j<q;++j){var oe,le=0;for(oe=0;oe<de;++oe)oe&V||(le=S($[Q++])),ie[ge++]=O(Te[le&Ie]),le>>=me}else I["VP8LMapColor"+y]($,Q,Te,Ie,ie,ge,j,q,de)}}function Ye(c,p,y,S,O){for(y=p+y;p<y;){var V=c[p++];S[O++]=V>>16&255,S[O++]=V>>8&255,S[O++]=V>>0&255}}function Lr(c,p,y,S,O){for(y=p+y;p<y;){var V=c[p++];S[O++]=V>>16&255,S[O++]=V>>8&255,S[O++]=V>>0&255,S[O++]=V>>24&255}}function Gt(c,p,y,S,O){for(y=p+y;p<y;){var V=(j=c[p++])>>16&240|j>>12&15,j=j>>0&240|j>>28&15;S[O++]=V,S[O++]=j}}function Mi(c,p,y,S,O){for(y=p+y;p<y;){var V=(j=c[p++])>>16&248|j>>13&7,j=j>>5&224|j>>3&31;S[O++]=V,S[O++]=j}}function mn(c,p,y,S,O){for(y=p+y;p<y;){var V=c[p++];S[O++]=V>>0&255,S[O++]=V>>8&255,S[O++]=V>>16&255}}function In(c,p,y,S,O,V){if(V==0)for(y=p+y;p<y;)Oe(S,((V=c[p++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),O+=32;else r(S,O,c,p,y)}function Do(c,p){I[p][0]=I[c+"0"],I[p][1]=I[c+"1"],I[p][2]=I[c+"2"],I[p][3]=I[c+"3"],I[p][4]=I[c+"4"],I[p][5]=I[c+"5"],I[p][6]=I[c+"6"],I[p][7]=I[c+"7"],I[p][8]=I[c+"8"],I[p][9]=I[c+"9"],I[p][10]=I[c+"10"],I[p][11]=I[c+"11"],I[p][12]=I[c+"12"],I[p][13]=I[c+"13"],I[p][14]=I[c+"0"],I[p][15]=I[c+"0"]}function cn(c){return c==Ab||c==Tb||c==iy||c==xb}function ts(){this.eb=[],this.size=this.A=this.fb=0}function Bn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ri(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ts,this.f.kb=new Bn,this.sd=null}function fi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ln(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function It(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function Kt(c,p){var y=c.T,S=p.ba.f.RGBA,O=S.eb,V=S.fb+c.ka*S.A,j=Vo[p.ba.S],q=c.y,$=c.O,Q=c.f,ie=c.N,ge=c.ea,me=c.W,de=p.cc,Te=p.dc,Ie=p.Mc,oe=p.Nc,le=c.ka,De=c.ka+c.T,Ne=c.U,Ae=Ne+1>>1;for(le==0?j(q,$,null,null,Q,ie,ge,me,Q,ie,ge,me,O,V,null,null,Ne):(j(p.ec,p.fc,q,$,de,Te,Ie,oe,Q,ie,ge,me,O,V-S.A,O,V,Ne),++y);le+2<De;le+=2)de=Q,Te=ie,Ie=ge,oe=me,ie+=c.Rc,me+=c.Rc,V+=2*S.A,j(q,($+=2*c.fa)-c.fa,q,$,de,Te,Ie,oe,Q,ie,ge,me,O,V-S.A,O,V,Ne);return $+=c.fa,c.j+De<c.o?(r(p.ec,p.fc,q,$,Ne),r(p.cc,p.dc,Q,ie,Ae),r(p.Mc,p.Nc,ge,me,Ae),y--):1&De||j(q,$,null,null,Q,ie,ge,me,Q,ie,ge,me,O,V+S.A,null,null,Ne),y}function Vs(c,p,y){var S=c.F,O=[c.J];if(S!=null){var V=c.U,j=p.ba.S,q=j==ry||j==iy;p=p.ba.f.RGBA;var $=[0],Q=c.ka;$[0]=c.T,c.Kb&&(Q==0?--$[0]:(--Q,O[0]-=c.width),c.j+c.ka+c.T==c.o&&($[0]=c.o-c.j-Q));var ie=p.eb;Q=p.fb+Q*p.A,c=Fn(S,O[0],c.width,V,$,ie,Q+(q?0:3),p.A),e(y==$),c&&cn(j)&&Oo(ie,Q,q,V,$,p.A)}return 0}function Jn(c){var p=c.ma,y=p.ba.S,S=11>y,O=y==ty||y==ny||y==ry||y==Db||y==12||cn(y);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!Pa(p.Oa,c,O?11:12))return 0;if(O&&cn(y)&&Me(),c.da)alert("todo:use_scaling");else{if(S){if(p.Ib=It,c.Kb){if(y=c.U+1>>1,p.memory=o(c.U+2*y),p.memory==null)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+c.U,p.Mc=p.cc,p.Nc=p.dc+y,p.Ib=Kt,Me()}}else alert("todo:EmitYUV");O&&(p.Jb=Vs,S&&he())}if(S&&!Ex){for(c=0;256>c;++c)Mj[c]=89858*(c-128)+sy>>oy,kj[c]=-22014*(c-128)+sy,Pj[c]=-45773*(c-128),Rj[c]=113618*(c-128)+sy>>oy;for(c=qp;c<Rb;++c)p=76283*(c-16)+sy>>oy,Lj[c-qp]=At(p,255),Oj[c-qp]=At(p+8>>4,15);Ex=1}return 1}function Qi(c){var p=c.ma,y=c.U,S=c.T;return e(!(1&c.ka)),0>=y||0>=S?0:(y=p.Ib(c,p),p.Jb!=null&&p.Jb(c,p,y),p.Dc+=y,1)}function Xr(c){c.ma.memory=null}function pt(c,p,y,S){return ce(c,8)!=47?0:(p[0]=ce(c,14)+1,y[0]=ce(c,14)+1,S[0]=ce(c,1),ce(c,3)!=0?0:!c.h)}function Tn(c,p){if(4>c)return c+1;var y=c-2>>1;return(2+(1&c)<<y)+ce(p,y)+1}function Yi(c,p){return 120<p?p-120:1<=(y=((y=vj[p-1])>>4)*c+(8-(15&y)))?y:1;var y}function vr(c,p,y){var S=W(y),O=c[p+=255&S].g-8;return 0<O&&(te(y,y.u+8),S=W(y),p+=c[p].value,p+=S&(1<<O)-1),te(y,y.u+c[p].g),c[p].value}function Un(c,p,y){return y.g+=c.g,y.value+=c.value<<p>>>0,e(8>=y.g),c.g}function Xn(c,p,y){var S=c.xc;return e((p=S==0?0:c.vc[c.md*(y>>S)+(p>>S)])<c.Wb),c.Ya[p]}function pi(c,p,y,S){var O=c.ab,V=c.c*p,j=c.C;p=j+p;var q=y,$=S;for(S=c.Ta,y=c.Ua;0<O--;){var Q=c.gc[O],ie=j,ge=p,me=q,de=$,Te=($=S,q=y,Q.Ea);switch(e(ie<ge),e(ge<=Q.nc),Q.hc){case 2:Kv(me,de,(ge-ie)*Te,$,q);break;case 0:var Ie=ie,oe=ge,le=$,De=q,Ne=(Qe=Q).Ea;Ie==0&&(Cb(me,de,null,null,1,le,De),Vt(me,de+1,0,0,Ne-1,le,De+1),de+=Ne,De+=Ne,++Ie);for(var Ae=1<<Qe.b,et=Ae-1,He=ot(Ne,Qe.b),mt=Qe.K,Qe=Qe.w+(Ie>>Qe.b)*He;Ie<oe;){var fn=mt,wn=Qe,an=1;for(Op(me,de,le,De-Ne,1,le,De);an<Ne;){var Jt=(an&~et)+Ae;Jt>Ne&&(Jt=Ne),(0,ku[fn[wn++]>>8&15])(me,de+ +an,le,De+an-Ne,Jt-an,le,De+an),an=Jt}de+=Ne,De+=Ne,++Ie&et||(Qe+=He)}ge!=Q.nc&&r($,q-Te,$,q+(ge-ie-1)*Te,Te);break;case 1:for(Te=me,oe=de,Ne=(me=Q.Ea)-(De=me&~(le=(de=1<<Q.b)-1)),Ie=ot(me,Q.b),Ae=Q.K,Q=Q.w+(ie>>Q.b)*Ie;ie<ge;){for(et=Ae,He=Q,mt=new Ke,Qe=oe+De,fn=oe+me;oe<Qe;)Rt(et[He++],mt),lc(mt,Te,oe,de,$,q),oe+=de,q+=de;oe<fn&&(Rt(et[He++],mt),lc(mt,Te,oe,Ne,$,q),oe+=Ne,q+=Ne),++ie&le||(Q+=Ie)}break;case 3:if(me==$&&de==q&&0<Q.b){for(oe=$,me=Te=q+(ge-ie)*Te-(De=(ge-ie)*ot(Q.Ea,Q.b)),de=$,le=q,Ie=[],De=(Ne=De)-1;0<=De;--De)Ie[De]=de[le+De];for(De=Ne-1;0<=De;--De)oe[me+De]=Ie[De];Po(Q,ie,ge,$,Te,$,q)}else Po(Q,ie,ge,me,de,$,q)}q=S,$=y}$!=y&&r(S,y,q,$,V)}function Zi(c,p){var y=c.V,S=c.Ba+c.c*c.C,O=p-c.C;if(e(p<=c.l.o),e(16>=O),0<O){var V=c.l,j=c.Ta,q=c.Ua,$=V.width;if(pi(c,O,y,S),O=q=[q],e((y=c.C)<(S=p)),e(V.v<V.va),S>V.o&&(S=V.o),y<V.j){var Q=V.j-y;y=V.j,O[0]+=Q*$}if(y>=S?y=0:(O[0]+=4*V.v,V.ka=y-V.j,V.U=V.va-V.v,V.T=S-y,y=1),y){if(q=q[0],11>(y=c.ca).S){var ie=y.f.RGBA,ge=(S=y.S,O=V.U,V=V.T,Q=ie.eb,ie.A),me=V;for(ie=ie.fb+c.Ma*ie.A;0<me--;){var de=j,Te=q,Ie=O,oe=Q,le=ie;switch(S){case ey:ji(de,Te,Ie,oe,le);break;case ty:vi(de,Te,Ie,oe,le);break;case Ab:vi(de,Te,Ie,oe,le),Oo(oe,le,0,Ie,1,0);break;case hx:La(de,Te,Ie,oe,le);break;case ny:In(de,Te,Ie,oe,le,1);break;case Tb:In(de,Te,Ie,oe,le,1),Oo(oe,le,0,Ie,1,0);break;case ry:In(de,Te,Ie,oe,le,0);break;case iy:In(de,Te,Ie,oe,le,0),Oo(oe,le,1,Ie,1,0);break;case Db:Lu(de,Te,Ie,oe,le);break;case xb:Lu(de,Te,Ie,oe,le),On(oe,le,Ie,1,0);break;case fx:ka(de,Te,Ie,oe,le);break;default:e(0)}q+=$,ie+=ge}c.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");e(c.Ma<=y.height)}}c.C=p,e(c.C<=c.i)}function ns(c){var p;if(0<c.ua)return 0;for(p=0;p<c.Wb;++p){var y=c.Ya[p].G,S=c.Ya[p].H;if(0<y[1][S[1]+0].g||0<y[2][S[2]+0].g||0<y[3][S[3]+0].g)return 0}return 1}function Ji(c,p,y,S,O,V){if(c.Z!=0){var j=c.qd,q=c.rd;for(e(ju[c.Z]!=null);p<y;++p)ju[c.Z](j,q,S,O,S,O,V),j=S,q=O,O+=V;c.qd=j,c.rd=q}}function ei(c,p){var y=c.l.ma,S=y.Z==0||y.Z==1?c.l.j:c.C;if(S=c.C<S?S:c.C,e(p<=c.l.o),p>S){var O=c.l.width,V=y.ca,j=y.tb+O*S,q=c.V,$=c.Ba+c.c*S,Q=c.gc;e(c.ab==1),e(Q[0].hc==3),Qv(Q[0],S,p,q,$,V,j),Ji(y,S,p,V,j,O)}c.C=c.Ma=p}function Pi(c,p,y,S,O,V,j){var q=c.$/S,$=c.$%S,Q=c.m,ie=c.s,ge=y+c.$,me=ge;O=y+S*O;var de=y+S*V,Te=280+ie.ua,Ie=c.Pb?q:16777216,oe=0<ie.ua?ie.Wa:null,le=ie.wc,De=ge<de?Xn(ie,$,q):null;e(c.C<V),e(de<=O);var Ne=!1;e:for(;;){for(;Ne||ge<de;){var Ae=0;if(q>=Ie){var et=ge-y;e((Ie=c).Pb),Ie.wd=Ie.m,Ie.xd=et,0<Ie.s.ua&&Se(Ie.s.Wa,Ie.s.vb),Ie=q+_j}if($&le||(De=Xn(ie,$,q)),e(De!=null),De.Qb&&(p[ge]=De.qb,Ne=!0),!Ne)if(ae(Q),De.jc){Ae=Q,et=p;var He=ge,mt=De.pd[W(Ae)&Hr-1];e(De.jc),256>mt.g?(te(Ae,Ae.u+mt.g),et[He]=mt.value,Ae=0):(te(Ae,Ae.u+mt.g-256),e(256<=mt.value),Ae=mt.value),Ae==0&&(Ne=!0)}else Ae=vr(De.G[0],De.H[0],Q);if(Q.h)break;if(Ne||256>Ae){if(!Ne)if(De.nd)p[ge]=(De.qb|Ae<<8)>>>0;else{if(ae(Q),Ne=vr(De.G[1],De.H[1],Q),ae(Q),et=vr(De.G[2],De.H[2],Q),He=vr(De.G[3],De.H[3],Q),Q.h)break;p[ge]=(He<<24|Ne<<16|Ae<<8|et)>>>0}if(Ne=!1,++ge,++$>=S&&($=0,++q,j!=null&&q<=V&&!(q%16)&&j(c,q),oe!=null))for(;me<ge;)Ae=p[me++],oe.X[(506832829*Ae&4294967295)>>>oe.Mb]=Ae}else if(280>Ae){if(Ae=Tn(Ae-256,Q),et=vr(De.G[4],De.H[4],Q),ae(Q),et=Yi(S,et=Tn(et,Q)),Q.h)break;if(ge-y<et||O-ge<Ae)break e;for(He=0;He<Ae;++He)p[ge+He]=p[ge+He-et];for(ge+=Ae,$+=Ae;$>=S;)$-=S,++q,j!=null&&q<=V&&!(q%16)&&j(c,q);if(e(ge<=O),$&le&&(De=Xn(ie,$,q)),oe!=null)for(;me<ge;)Ae=p[me++],oe.X[(506832829*Ae&4294967295)>>>oe.Mb]=Ae}else{if(!(Ae<Te))break e;for(Ne=Ae-280,e(oe!=null);me<ge;)Ae=p[me++],oe.X[(506832829*Ae&4294967295)>>>oe.Mb]=Ae;Ae=ge,e(!(Ne>>>(et=oe).Xa)),p[Ae]=et.X[Ne],Ne=!0}Ne||e(Q.h==G(Q))}if(c.Pb&&Q.h&&ge<O)e(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&Se(c.s.vb,c.s.Wa);else{if(Q.h)break e;j?.(c,q>V?V:q),c.a=0,c.$=ge-y}return 1}return c.a=3,0}function ki(c){e(c!=null),c.vc=null,c.yc=null,c.Ya=null;var p=c.Wa;p!=null&&(p.X=null),c.vb=null,e(c!=null)}function Ur(){var c=new uc;return c==null?null:(c.a=0,c.xb=mx,Do("Predictor","VP8LPredictors"),Do("Predictor","VP8LPredictors_C"),Do("PredictorAdd","VP8LPredictorsAdd"),Do("PredictorAdd","VP8LPredictorsAdd_C"),Kv=_t,lc=gt,ji=Ye,vi=Lr,Lu=Gt,ka=Mi,La=mn,I.VP8LMapColor32b=ih,I.VP8LMapColor8b=Yv,c)}function Dr(c,p,y,S,O){var V=1,j=[c],q=[p],$=S.m,Q=S.s,ie=null,ge=0;e:for(;;){if(y)for(;V&&ce($,1);){var me=j,de=q,Te=S,Ie=1,oe=Te.m,le=Te.gc[Te.ab],De=ce(oe,2);if(Te.Oc&1<<De)V=0;else{switch(Te.Oc|=1<<De,le.hc=De,le.Ea=me[0],le.nc=de[0],le.K=[null],++Te.ab,e(4>=Te.ab),De){case 0:case 1:le.b=ce(oe,3)+2,Ie=Dr(ot(le.Ea,le.b),ot(le.nc,le.b),0,Te,le.K),le.K=le.K[0];break;case 3:var Ne,Ae=ce(oe,8)+1,et=16<Ae?0:4<Ae?1:2<Ae?2:3;if(me[0]=ot(le.Ea,et),le.b=et,Ne=Ie=Dr(Ae,1,0,Te,le.K)){var He,mt=Ae,Qe=le,fn=1<<(8>>Qe.b),wn=o(fn);if(wn==null)Ne=0;else{var an=Qe.K[0],Jt=Qe.w;for(wn[0]=Qe.K[0][0],He=1;He<1*mt;++He)wn[He]=Le(an[Jt+He],wn[He-1]);for(;He<4*fn;++He)wn[He]=0;Qe.K[0]=null,Qe.K[0]=wn,Ne=1}}Ie=Ne;break;case 2:break;default:e(0)}V=Ie}}if(j=j[0],q=q[0],V&&ce($,1)&&!(V=1<=(ge=ce($,4))&&11>=ge)){S.a=3;break e}var Nn;if(Nn=V)t:{var Sn,jt,yr,Bi=S,_r=j,Ui=q,bn=ge,so=y,ao=Bi.m,Or=Bi.s,zr=[null],_i=1,jo=0,$s=yj[bn];n:for(;;){if(so&&ce(ao,1)){var Fr=ce(ao,3)+2,ja=ot(_r,Fr),pc=ot(Ui,Fr),lh=ja*pc;if(!Dr(ja,pc,0,Bi,zr))break n;for(zr=zr[0],Or.xc=Fr,Sn=0;Sn<lh;++Sn){var Bu=zr[Sn]>>8&65535;zr[Sn]=Bu,Bu>=_i&&(_i=Bu+1)}}if(ao.h)break n;for(jt=0;5>jt;++jt){var tr=px[jt];!jt&&0<bn&&(tr+=1<<bn),jo<tr&&(jo=tr)}var Pb=s(_i*$s,T),Sx=_i,Dx=s(Sx,B);if(Dx==null)var uy=null;else e(65536>=Sx),uy=Dx;var Hp=o(jo);if(uy==null||Hp==null||Pb==null){Bi.a=1;break n}var ly=Pb;for(Sn=yr=0;Sn<_i;++Sn){var hs=uy[Sn],ch=hs.G,dh=hs.H,Ax=0,cy=1,Tx=0;for(jt=0;5>jt;++jt){tr=px[jt],ch[jt]=ly,dh[jt]=yr,!jt&&0<bn&&(tr+=1<<bn);i:{var dy,kb=tr,hy=Bi,zp=Hp,jj=ly,Bj=yr,Lb=0,Uu=hy.m,Uj=ce(Uu,1);if(i(zp,0,0,kb),Uj){var qj=ce(Uu,1)+1,Hj=ce(Uu,1),xx=ce(Uu,Hj==0?1:8);zp[xx]=1,qj==2&&(zp[xx=ce(Uu,8)]=1);var fy=1}else{var Nx=o(19),Mx=ce(Uu,4)+4;if(19<Mx){hy.a=3;var py=0;break i}for(dy=0;dy<Mx;++dy)Nx[mj[dy]]=ce(Uu,3);var Ob=void 0,$p=void 0,Rx=hy,zj=Nx,gy=kb,Px=zp,Fb=0,qu=Rx.m,kx=8,Lx=s(128,T);r:for(;C(Lx,0,7,zj,19);){if(ce(qu,1)){var $j=2+2*ce(qu,3);if((Ob=2+ce(qu,$j))>gy)break r}else Ob=gy;for($p=0;$p<gy&&Ob--;){ae(qu);var Ox=Lx[0+(127&W(qu))];te(qu,qu.u+Ox.g);var hh=Ox.value;if(16>hh)Px[$p++]=hh,hh!=0&&(kx=hh);else{var Wj=hh==16,Fx=hh-16,Gj=pj[Fx],Vx=ce(qu,fj[Fx])+Gj;if($p+Vx>gy)break r;for(var Kj=Wj?kx:0;0<Vx--;)Px[$p++]=Kj}}Fb=1;break r}Fb||(Rx.a=3),fy=Fb}(fy=fy&&!Uu.h)&&(Lb=C(jj,Bj,8,zp,kb)),fy&&Lb!=0?py=Lb:(hy.a=3,py=0)}if(py==0)break n;if(cy&&gj[jt]==1&&(cy=ly[yr].g==0),Ax+=ly[yr].g,yr+=py,3>=jt){var Wp,Vb=Hp[0];for(Wp=1;Wp<tr;++Wp)Hp[Wp]>Vb&&(Vb=Hp[Wp]);Tx+=Vb}}if(hs.nd=cy,hs.Qb=0,cy&&(hs.qb=(ch[3][dh[3]+0].value<<24|ch[1][dh[1]+0].value<<16|ch[2][dh[2]+0].value)>>>0,Ax==0&&256>ch[0][dh[0]+0].value&&(hs.Qb=1,hs.qb+=ch[0][dh[0]+0].value<<8)),hs.jc=!hs.Qb&&6>Tx,hs.jc){var my,Ba=hs;for(my=0;my<Hr;++my){var Hu=my,zu=Ba.pd[Hu],vy=Ba.G[0][Ba.H[0]+Hu];256<=vy.value?(zu.g=vy.g+256,zu.value=vy.value):(zu.g=0,zu.value=0,Hu>>=Un(vy,8,zu),Hu>>=Un(Ba.G[1][Ba.H[1]+Hu],16,zu),Hu>>=Un(Ba.G[2][Ba.H[2]+Hu],0,zu),Un(Ba.G[3][Ba.H[3]+Hu],24,zu))}}}Or.vc=zr,Or.Wb=_i,Or.Ya=uy,Or.yc=Pb,Nn=1;break t}Nn=0}if(!(V=Nn)){S.a=3;break e}if(0<ge){if(Q.ua=1<<ge,!ft(Q.Wa,ge)){S.a=1,V=0;break e}}else Q.ua=0;var jb=S,jx=j,Qj=q,Bb=jb.s,Ub=Bb.xc;if(jb.c=jx,jb.i=Qj,Bb.md=ot(jx,Ub),Bb.wc=Ub==0?-1:(1<<Ub)-1,y){S.xb=Dj;break e}if((ie=o(j*q))==null){S.a=1,V=0;break e}V=(V=Pi(S,ie,0,j,q,q,null))&&!$.h;break e}return V?(O!=null?O[0]=ie:(e(ie==null),e(y)),S.$=0,y||ki(Q)):ki(Q),V}function js(c,p){var y=c.c*c.i,S=y+p+16*p;return e(c.c<=p),c.V=o(S),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+y+p,1)}function Ia(c,p){var y=c.C,S=p-y,O=c.V,V=c.Ba+c.c*y;for(e(p<=c.l.o);0<S;){var j=16<S?16:S,q=c.l.ma,$=c.l.width,Q=$*j,ie=q.ca,ge=q.tb+$*y,me=c.Ta,de=c.Ua;pi(c,j,O,V),ur(me,de,ie,ge,Q),Ji(q,y,y+j,ie,ge,$),S-=j,O+=j*c.c,y+=j}e(y==p),c.C=c.Ma=p}function Bs(){this.ub=this.yd=this.td=this.Rb=0}function Us(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ca(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Ql(){this.Yb=function(){var c=[];return function p(y,S,O){for(var V=O[S],j=0;j<V&&(y.push(O.length>S+1?[]:0),!(O.length<S+1));j++)p(y[j],S+1,O)}(c,0,[3,11]),c}()}function Np(){this.jb=o(3),this.Wc=a([4,8],Ql),this.Xc=a([4,17],Ql)}function wu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Sa(){this.ld=this.La=this.dd=this.tc=0}function bu(){this.Na=this.la=0}function Da(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Xi(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Yl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Sa),this.Y=0,this.ya=Array(new Xi),this.aa=0,this.l=new Aa}function qd(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Hd(){this.cb=this.a=0,this.sc="",this.m=new Ce,this.Od=new Bs,this.Kc=new Us,this.ed=new wu,this.Qa=new Ca,this.Ic=this.$c=this.Aa=0,this.D=new Yl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,Ce),this.ia=0,this.pb=s(4,Da),this.Pa=new Np,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new qd),this.Hd=0,this.rb=Array(new bu),this.sb=0,this.wa=Array(new Sa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Xi),this.L=this.aa=0,this.gd=a([4,2],Sa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Aa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function zd(){var c=new Hd;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,Up||(Up=Jl)),c}function qn(c,p,y){return c.a==0&&(c.a=p,c.sc=y,c.cb=0),0}function Eu(c,p,y){return 3<=y&&c[p+0]==157&&c[p+1]==1&&c[p+2]==42}function Zl(c,p){if(c==null)return 0;if(c.a=0,c.sc="OK",p==null)return qn(c,2,"null VP8Io passed to VP8GetHeaders()");var y=p.data,S=p.w,O=p.ha;if(4>O)return qn(c,7,"Truncated header.");var V=y[S+0]|y[S+1]<<8|y[S+2]<<16,j=c.Od;if(j.Rb=!(1&V),j.td=V>>1&7,j.yd=V>>4&1,j.ub=V>>5,3<j.td)return qn(c,3,"Incorrect keyframe parameters.");if(!j.yd)return qn(c,4,"Frame not displayable.");S+=3,O-=3;var q=c.Kc;if(j.Rb){if(7>O)return qn(c,7,"cannot parse picture header");if(!Eu(y,S,O))return qn(c,3,"Bad code word");q.c=16383&(y[S+4]<<8|y[S+3]),q.Td=y[S+4]>>6,q.i=16383&(y[S+6]<<8|y[S+5]),q.Ud=y[S+6]>>6,S+=7,O-=7,c.za=q.c+15>>4,c.Ub=q.i+15>>4,p.width=q.c,p.height=q.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,i((V=c.Pa).jb,0,255,V.jb.length),e((V=c.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,i(V.Zb,0,0,V.Zb.length),i(V.Lb,0,0,V.Lb)}if(j.ub>O)return qn(c,7,"bad partition length");K(V=c.m,y,S,j.ub),S+=j.ub,O-=j.ub,j.Rb&&(q.Ld=ye(V),q.Kd=ye(V)),q=c.Qa;var $,Q=c.Pa;if(e(V!=null),e(q!=null),q.Cb=ye(V),q.Cb){if(q.Bb=ye(V),ye(V)){for(q.Fb=ye(V),$=0;4>$;++$)q.Zb[$]=ye(V)?J(V,7):0;for($=0;4>$;++$)q.Lb[$]=ye(V)?J(V,6):0}if(q.Bb)for($=0;3>$;++$)Q.jb[$]=ye(V)?ee(V,8):255}else q.Bb=0;if(V.Ka)return qn(c,3,"cannot parse segment header");if((q=c.ed).zd=ye(V),q.Tb=ee(V,6),q.wb=ee(V,3),q.Pc=ye(V),q.Pc&&ye(V)){for(Q=0;4>Q;++Q)ye(V)&&(q.vd[Q]=J(V,6));for(Q=0;4>Q;++Q)ye(V)&&(q.od[Q]=J(V,6))}if(c.L=q.Tb==0?0:q.zd?1:2,V.Ka)return qn(c,3,"cannot parse filter header");var ie=O;if(O=$=S,S=$+ie,q=ie,c.Xb=(1<<ee(c.m,2))-1,ie<3*(Q=c.Xb))y=7;else{for($+=3*Q,q-=3*Q,ie=0;ie<Q;++ie){var ge=y[O+0]|y[O+1]<<8|y[O+2]<<16;ge>q&&(ge=q),K(c.Jc[+ie],y,$,ge),$+=ge,q-=ge,O+=3}K(c.Jc[+Q],y,$,q),y=$<S?0:5}if(y!=0)return qn(c,y,"cannot parse partitions");for(y=ee($=c.m,7),O=ye($)?J($,4):0,S=ye($)?J($,4):0,q=ye($)?J($,4):0,Q=ye($)?J($,4):0,$=ye($)?J($,4):0,ie=c.Qa,ge=0;4>ge;++ge){if(ie.Cb){var me=ie.Zb[ge];ie.Fb||(me+=y)}else{if(0<ge){c.pb[ge]=c.pb[0];continue}me=y}var de=c.pb[ge];de.Sc[0]=Nb[At(me+O,127)],de.Sc[1]=Mb[At(me+0,127)],de.Eb[0]=2*Nb[At(me+S,127)],de.Eb[1]=101581*Mb[At(me+q,127)]>>16,8>de.Eb[1]&&(de.Eb[1]=8),de.Qc[0]=Nb[At(me+Q,117)],de.Qc[1]=Mb[At(me+$,127)],de.lc=me+$}if(!j.Rb)return qn(c,4,"Not a key frame.");for(ye(V),j=c.Pa,y=0;4>y;++y){for(O=0;8>O;++O)for(S=0;3>S;++S)for(q=0;11>q;++q)Q=_e(V,Cj[y][O][S][q])?ee(V,8):Ej[y][O][S][q],j.Wc[y][O].Yb[S][q]=Q;for(O=0;17>O;++O)j.Xc[y][O]=j.Wc[y][Sj[O]]}return c.kc=ye(V),c.kc&&(c.Bd=ee(V,8)),c.cb=1}function Jl(c,p,y,S,O,V,j){var q=p[O].Yb[y];for(y=0;16>O;++O){if(!_e(c,q[y+0]))return O;for(;!_e(c,q[y+1]);)if(q=p[++O].Yb[0],y=0,O==16)return 16;var $=p[O+1].Yb;if(_e(c,q[y+2])){var Q=c,ie=0;if(_e(Q,(me=q)[(ge=y)+3]))if(_e(Q,me[ge+6])){for(q=0,ge=2*(ie=_e(Q,me[ge+8]))+(me=_e(Q,me[ge+9+ie])),ie=0,me=wj[ge];me[q];++q)ie+=ie+_e(Q,me[q]);ie+=3+(8<<ge)}else _e(Q,me[ge+7])?(ie=7+2*_e(Q,165),ie+=_e(Q,145)):ie=5+_e(Q,159);else ie=_e(Q,me[ge+4])?3+_e(Q,me[ge+5]):2;q=$[2]}else ie=1,q=$[1];$=j+bj[O],0>(Q=c).b&&fe(Q);var ge,me=Q.b,de=(ge=Q.Ca>>1)-(Q.I>>me)>>31;--Q.b,Q.Ca+=de,Q.Ca|=1,Q.I-=(ge+1&de)<<me,V[$]=((ie^de)-de)*S[(0<O)+0]}return 16}function Xl(c){var p=c.rb[c.sb-1];p.la=0,p.Na=0,i(c.zc,0,0,c.zc.length),c.ja=0}function Mp(c,p){if(c==null)return 0;if(p==null)return qn(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!Zl(c,p))return 0;if(e(c.cb),p.ac==null||p.ac(p)){p.ob&&(c.L=0);var y=ay[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=p.v-y>>4,c.zb=p.j-y>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=p.o+15+y>>4,c.Hb=p.va+15+y>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var S=c.ed;for(y=0;4>y;++y){var O;if(c.Qa.Cb){var V=c.Qa.Lb[y];c.Qa.Fb||(V+=S.Tb)}else V=S.Tb;for(O=0;1>=O;++O){var j=c.gd[y][O],q=V;if(S.Pc&&(q+=S.vd[0],O&&(q+=S.od[0])),0<(q=0>q?0:63<q?63:q)){var $=q;0<S.wb&&($=4<S.wb?$>>2:$>>1)>9-S.wb&&($=9-S.wb),1>$&&($=1),j.dd=$,j.tc=2*q+$,j.ld=40<=q?2:15<=q?1:0}else j.tc=0;j.La=O}}}y=0}else qn(c,6,"Frame setup failed"),y=c.a;if(y=y==0){if(y){c.$c=0,0<c.Aa||(c.Ic=Vj);e:{y=c.Ic,S=4*($=c.za);var Q=32*$,ie=$+1,ge=0<c.L?$*(0<c.Aa?2:1):0,me=(c.Aa==2?2:1)*$;if((j=S+832+(O=3*(16*y+ay[c.L])/2*Q)+(V=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=j)y=0;else{if(j>c.Vb){if(c.Vb=0,c.Ec=o(j),c.Fc=0,c.Ec==null){y=qn(c,1,"no memory during frame initialization.");break e}c.Vb=j}j=c.Ec,q=c.Fc,c.Ac=j,c.Bc=q,q+=S,c.Gd=s(Q,qd),c.Hd=0,c.rb=s(ie+1,bu),c.sb=1,c.wa=ge?s(ge,Sa):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=$),e(!0),c.oc=j,c.pc=q,q+=832,c.ya=s(me,Xi),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=$),c.R=16*$,c.B=8*$,$=(Q=ay[c.L])*c.R,Q=Q/2*c.B,c.sa=j,c.ta=q+$,c.qa=c.sa,c.ra=c.ta+16*y*c.R+Q,c.Ha=c.qa,c.Ia=c.ra+8*y*c.B+Q,c.$c=0,q+=O,c.mb=V?j:null,c.nb=V?q:null,e(q+V<=c.Fc+c.Vb),Xl(c),i(c.Ac,c.Bc,0,S),y=1}}if(y){if(p.ka=0,p.y=c.sa,p.O=c.ta,p.f=c.qa,p.N=c.ra,p.ea=c.Ha,p.Vd=c.Ia,p.fa=c.R,p.Rc=c.B,p.F=null,p.J=0,!Jv){for(y=-255;255>=y;++y)Ar[255+y]=0>y?-y:y;for(y=-1020;1020>=y;++y)Fa[1020+y]=-128>y?-128:127<y?127:y;for(y=-112;112>=y;++y)Bp[112+y]=-16>y?-16:15<y?15:y;for(y=-255;510>=y;++y)uh[255+y]=0>y?0:255<y?255:y;Jv=1}oh=Cu,Oa=Iu,Fp=xa,yi=$d,ko=vn,ar=Oi,sh=as,Zv=Hs,Vp=Xd,cc=zs,dc=oc,Ou=us,hc=sc,ah=ac,fc=ic,Fu=mi,jp=xo,Lo=no,ds[0]=To,ds[1]=Na,ds[2]=Kd,ds[3]=qs,ds[4]=Qd,ds[5]=gi,ds[6]=Yd,ds[7]=tc,ds[8]=Ma,ds[9]=Pp,Vu[0]=Gd,Vu[1]=Wd,Vu[2]=is,Vu[3]=Su,Vu[4]=er,Vu[5]=Ao,Vu[6]=ec,Va[0]=Fi,Va[1]=Rp,Va[2]=Au,Va[3]=Tu,Va[4]=os,Va[5]=Zd,Va[6]=Cn,y=1}else y=0}y&&(y=function(de,Te){for(de.M=0;de.M<de.Va;++de.M){var Ie,oe=de.Jc[de.M&de.Xb],le=de.m,De=de;for(Ie=0;Ie<De.za;++Ie){var Ne=le,Ae=De,et=Ae.Ac,He=Ae.Bc+4*Ie,mt=Ae.zc,Qe=Ae.ya[Ae.aa+Ie];if(Ae.Qa.Bb?Qe.$b=_e(Ne,Ae.Pa.jb[0])?2+_e(Ne,Ae.Pa.jb[2]):_e(Ne,Ae.Pa.jb[1]):Qe.$b=0,Ae.kc&&(Qe.Ad=_e(Ne,Ae.Bd)),Qe.Za=!_e(Ne,145)+0,Qe.Za){var fn=Qe.Ob,wn=0;for(Ae=0;4>Ae;++Ae){var an,Jt=mt[0+Ae];for(an=0;4>an;++an){Jt=Ij[et[He+an]][Jt];for(var Nn=gx[_e(Ne,Jt[0])];0<Nn;)Nn=gx[2*Nn+_e(Ne,Jt[Nn])];Jt=-Nn,et[He+an]=Jt}r(fn,wn,et,He,4),wn+=4,mt[0+Ae]=Jt}}else Jt=_e(Ne,156)?_e(Ne,128)?1:3:_e(Ne,163)?2:0,Qe.Ob[0]=Jt,i(et,He,Jt,4),i(mt,0,Jt,4);Qe.Dd=_e(Ne,142)?_e(Ne,114)?_e(Ne,183)?1:3:2:0}if(De.m.Ka)return qn(de,7,"Premature end-of-partition0 encountered.");for(;de.ja<de.za;++de.ja){if(De=oe,Ne=(le=de).rb[le.sb-1],et=le.rb[le.sb+le.ja],Ie=le.ya[le.aa+le.ja],He=le.kc?Ie.Ad:0)Ne.la=et.la=0,Ie.Za||(Ne.Na=et.Na=0),Ie.Hc=0,Ie.Gc=0,Ie.ia=0;else{var Sn,jt;if(Ne=et,et=De,He=le.Pa.Xc,mt=le.ya[le.aa+le.ja],Qe=le.pb[mt.$b],Ae=mt.ad,fn=0,wn=le.rb[le.sb-1],Jt=an=0,i(Ae,fn,0,384),mt.Za)var yr=0,Bi=He[3];else{Nn=o(16);var _r=Ne.Na+wn.Na;if(_r=Up(et,He[1],_r,Qe.Eb,0,Nn,0),Ne.Na=wn.Na=(0<_r)+0,1<_r)oh(Nn,0,Ae,fn);else{var Ui=Nn[0]+3>>3;for(Nn=0;256>Nn;Nn+=16)Ae[fn+Nn]=Ui}yr=1,Bi=He[0]}var bn=15&Ne.la,so=15&wn.la;for(Nn=0;4>Nn;++Nn){var ao=1&so;for(Ui=jt=0;4>Ui;++Ui)bn=bn>>1|(ao=(_r=Up(et,Bi,_r=ao+(1&bn),Qe.Sc,yr,Ae,fn))>yr)<<7,jt=jt<<2|(3<_r?3:1<_r?2:Ae[fn+0]!=0),fn+=16;bn>>=4,so=so>>1|ao<<7,an=(an<<8|jt)>>>0}for(Bi=bn,yr=so>>4,Sn=0;4>Sn;Sn+=2){for(jt=0,bn=Ne.la>>4+Sn,so=wn.la>>4+Sn,Nn=0;2>Nn;++Nn){for(ao=1&so,Ui=0;2>Ui;++Ui)_r=ao+(1&bn),bn=bn>>1|(ao=0<(_r=Up(et,He[2],_r,Qe.Qc,0,Ae,fn)))<<3,jt=jt<<2|(3<_r?3:1<_r?2:Ae[fn+0]!=0),fn+=16;bn>>=2,so=so>>1|ao<<5}Jt|=jt<<4*Sn,Bi|=bn<<4<<Sn,yr|=(240&so)<<Sn}Ne.la=Bi,wn.la=yr,mt.Hc=an,mt.Gc=Jt,mt.ia=43690&Jt?0:Qe.ia,He=!(an|Jt)}if(0<le.L&&(le.wa[le.Y+le.ja]=le.gd[Ie.$b][Ie.Za],le.wa[le.Y+le.ja].La|=!He),De.Ka)return qn(de,7,"Premature end-of-file encountered.")}if(Xl(de),le=Te,De=1,Ie=(oe=de).D,Ne=0<oe.L&&oe.M>=oe.zb&&oe.M<=oe.Va,oe.Aa==0)e:{if(Ie.M=oe.M,Ie.uc=Ne,qr(oe,Ie),De=1,Ie=(jt=oe.D).Nb,Ne=(Jt=ay[oe.L])*oe.R,et=Jt/2*oe.B,Nn=16*Ie*oe.R,Ui=8*Ie*oe.B,He=oe.sa,mt=oe.ta-Ne+Nn,Qe=oe.qa,Ae=oe.ra-et+Ui,fn=oe.Ha,wn=oe.Ia-et+Ui,so=(bn=jt.M)==0,an=bn>=oe.Va-1,oe.Aa==2&&qr(oe,jt),jt.uc)for(ao=(_r=oe).D.M,e(_r.D.uc),jt=_r.yb;jt<_r.Hb;++jt){yr=jt,Bi=ao;var Or=(zr=(tr=_r).D).Nb;Sn=tr.R;var zr=zr.wa[zr.Y+yr],_i=tr.sa,jo=tr.ta+16*Or*Sn+16*yr,$s=zr.dd,Fr=zr.tc;if(Fr!=0)if(e(3<=Fr),tr.L==1)0<yr&&Fu(_i,jo,Sn,Fr+4),zr.La&&Lo(_i,jo,Sn,Fr),0<Bi&&fc(_i,jo,Sn,Fr+4),zr.La&&jp(_i,jo,Sn,Fr);else{var ja=tr.B,pc=tr.qa,lh=tr.ra+8*Or*ja+8*yr,Bu=tr.Ha,tr=tr.Ia+8*Or*ja+8*yr;Or=zr.ld,0<yr&&(Zv(_i,jo,Sn,Fr+4,$s,Or),cc(pc,lh,Bu,tr,ja,Fr+4,$s,Or)),zr.La&&(Ou(_i,jo,Sn,Fr,$s,Or),ah(pc,lh,Bu,tr,ja,Fr,$s,Or)),0<Bi&&(sh(_i,jo,Sn,Fr+4,$s,Or),Vp(pc,lh,Bu,tr,ja,Fr+4,$s,Or)),zr.La&&(dc(_i,jo,Sn,Fr,$s,Or),hc(pc,lh,Bu,tr,ja,Fr,$s,Or))}}if(oe.ia&&alert("todo:DitherRow"),le.put!=null){if(jt=16*bn,bn=16*(bn+1),so?(le.y=oe.sa,le.O=oe.ta+Nn,le.f=oe.qa,le.N=oe.ra+Ui,le.ea=oe.Ha,le.W=oe.Ia+Ui):(jt-=Jt,le.y=He,le.O=mt,le.f=Qe,le.N=Ae,le.ea=fn,le.W=wn),an||(bn-=Jt),bn>le.o&&(bn=le.o),le.F=null,le.J=null,oe.Fa!=null&&0<oe.Fa.length&&jt<bn&&(le.J=io(oe,le,jt,bn-jt),le.F=oe.mb,le.F==null&&le.F.length==0)){De=qn(oe,3,"Could not decode alpha data.");break e}jt<le.j&&(Jt=le.j-jt,jt=le.j,e(!(1&Jt)),le.O+=oe.R*Jt,le.N+=oe.B*(Jt>>1),le.W+=oe.B*(Jt>>1),le.F!=null&&(le.J+=le.width*Jt)),jt<bn&&(le.O+=le.v,le.N+=le.v>>1,le.W+=le.v>>1,le.F!=null&&(le.J+=le.v),le.ka=jt-le.j,le.U=le.va-le.v,le.T=bn-jt,De=le.put(le))}Ie+1!=oe.Ic||an||(r(oe.sa,oe.ta-Ne,He,mt+16*oe.R,Ne),r(oe.qa,oe.ra-et,Qe,Ae+8*oe.B,et),r(oe.Ha,oe.Ia-et,fn,wn+8*oe.B,et))}if(!De)return qn(de,6,"Output aborted.")}return 1}(c,p)),p.bc!=null&&p.bc(p),y&=1}return y?(c.cb=0,y):0}function Li(c,p,y,S,O){O=c[p+y+32*S]+(O>>3),c[p+y+32*S]=-256&O?0>O?0:255:O}function Ta(c,p,y,S,O,V){Li(c,p,0,y,S+O),Li(c,p,1,y,S+V),Li(c,p,2,y,S-V),Li(c,p,3,y,S-O)}function ti(c){return(20091*c>>16)+c}function eo(c,p,y,S){var O,V=0,j=o(16);for(O=0;4>O;++O){var q=c[p+0]+c[p+8],$=c[p+0]-c[p+8],Q=(35468*c[p+4]>>16)-ti(c[p+12]),ie=ti(c[p+4])+(35468*c[p+12]>>16);j[V+0]=q+ie,j[V+1]=$+Q,j[V+2]=$-Q,j[V+3]=q-ie,V+=4,p++}for(O=V=0;4>O;++O)q=(c=j[V+0]+4)+j[V+8],$=c-j[V+8],Q=(35468*j[V+4]>>16)-ti(j[V+12]),Li(y,S,0,0,q+(ie=ti(j[V+4])+(35468*j[V+12]>>16))),Li(y,S,1,0,$+Q),Li(y,S,2,0,$-Q),Li(y,S,3,0,q-ie),V++,S+=32}function Oi(c,p,y,S){var O=c[p+0]+4,V=35468*c[p+4]>>16,j=ti(c[p+4]),q=35468*c[p+1]>>16;Ta(y,S,0,O+j,c=ti(c[p+1]),q),Ta(y,S,1,O+V,c,q),Ta(y,S,2,O-V,c,q),Ta(y,S,3,O-j,c,q)}function Iu(c,p,y,S,O){eo(c,p,y,S),O&&eo(c,p+16,y,S+4)}function xa(c,p,y,S){Oa(c,p+0,y,S,1),Oa(c,p+32,y,S+128,1)}function $d(c,p,y,S){var O;for(c=c[p+0]+4,O=0;4>O;++O)for(p=0;4>p;++p)Li(y,S,p,O,c)}function vn(c,p,y,S){c[p+0]&&yi(c,p+0,y,S),c[p+16]&&yi(c,p+16,y,S+4),c[p+32]&&yi(c,p+32,y,S+128),c[p+48]&&yi(c,p+48,y,S+128+4)}function Cu(c,p,y,S){var O,V=o(16);for(O=0;4>O;++O){var j=c[p+0+O]+c[p+12+O],q=c[p+4+O]+c[p+8+O],$=c[p+4+O]-c[p+8+O],Q=c[p+0+O]-c[p+12+O];V[0+O]=j+q,V[8+O]=j-q,V[4+O]=Q+$,V[12+O]=Q-$}for(O=0;4>O;++O)j=(c=V[0+4*O]+3)+V[3+4*O],q=V[1+4*O]+V[2+4*O],$=V[1+4*O]-V[2+4*O],Q=c-V[3+4*O],y[S+0]=j+q>>3,y[S+16]=Q+$>>3,y[S+32]=j-q>>3,y[S+48]=Q-$>>3,S+=64}function rs(c,p,y){var S,O=p-32,V=oo,j=255-c[O-1];for(S=0;S<y;++S){var q,$=V,Q=j+c[p-1];for(q=0;q<y;++q)c[p+q]=$[Q+c[O+q]];p+=32}}function Na(c,p){rs(c,p,4)}function Rp(c,p){rs(c,p,8)}function Wd(c,p){rs(c,p,16)}function is(c,p){var y;for(y=0;16>y;++y)r(c,p+32*y,c,p-32,16)}function Su(c,p){var y;for(y=16;0<y;--y)i(c,p,c[p-1],16),p+=32}function Du(c,p,y){var S;for(S=0;16>S;++S)i(p,y+32*S,c,16)}function Gd(c,p){var y,S=16;for(y=0;16>y;++y)S+=c[p-1+32*y]+c[p+y-32];Du(S>>5,c,p)}function er(c,p){var y,S=8;for(y=0;16>y;++y)S+=c[p-1+32*y];Du(S>>4,c,p)}function Ao(c,p){var y,S=8;for(y=0;16>y;++y)S+=c[p+y-32];Du(S>>4,c,p)}function ec(c,p){Du(128,c,p)}function Ct(c,p,y){return c+2*p+y+2>>2}function Kd(c,p){var y,S=p-32;for(S=new Uint8Array([Ct(c[S-1],c[S+0],c[S+1]),Ct(c[S+0],c[S+1],c[S+2]),Ct(c[S+1],c[S+2],c[S+3]),Ct(c[S+2],c[S+3],c[S+4])]),y=0;4>y;++y)r(c,p+32*y,S,0,S.length)}function qs(c,p){var y=c[p-1],S=c[p-1+32],O=c[p-1+64],V=c[p-1+96];Oe(c,p+0,16843009*Ct(c[p-1-32],y,S)),Oe(c,p+32,16843009*Ct(y,S,O)),Oe(c,p+64,16843009*Ct(S,O,V)),Oe(c,p+96,16843009*Ct(O,V,V))}function To(c,p){var y,S=4;for(y=0;4>y;++y)S+=c[p+y-32]+c[p-1+32*y];for(S>>=3,y=0;4>y;++y)i(c,p+32*y,S,4)}function Qd(c,p){var y=c[p-1+0],S=c[p-1+32],O=c[p-1+64],V=c[p-1-32],j=c[p+0-32],q=c[p+1-32],$=c[p+2-32],Q=c[p+3-32];c[p+0+96]=Ct(S,O,c[p-1+96]),c[p+1+96]=c[p+0+64]=Ct(y,S,O),c[p+2+96]=c[p+1+64]=c[p+0+32]=Ct(V,y,S),c[p+3+96]=c[p+2+64]=c[p+1+32]=c[p+0+0]=Ct(j,V,y),c[p+3+64]=c[p+2+32]=c[p+1+0]=Ct(q,j,V),c[p+3+32]=c[p+2+0]=Ct($,q,j),c[p+3+0]=Ct(Q,$,q)}function Yd(c,p){var y=c[p+1-32],S=c[p+2-32],O=c[p+3-32],V=c[p+4-32],j=c[p+5-32],q=c[p+6-32],$=c[p+7-32];c[p+0+0]=Ct(c[p+0-32],y,S),c[p+1+0]=c[p+0+32]=Ct(y,S,O),c[p+2+0]=c[p+1+32]=c[p+0+64]=Ct(S,O,V),c[p+3+0]=c[p+2+32]=c[p+1+64]=c[p+0+96]=Ct(O,V,j),c[p+3+32]=c[p+2+64]=c[p+1+96]=Ct(V,j,q),c[p+3+64]=c[p+2+96]=Ct(j,q,$),c[p+3+96]=Ct(q,$,$)}function gi(c,p){var y=c[p-1+0],S=c[p-1+32],O=c[p-1+64],V=c[p-1-32],j=c[p+0-32],q=c[p+1-32],$=c[p+2-32],Q=c[p+3-32];c[p+0+0]=c[p+1+64]=V+j+1>>1,c[p+1+0]=c[p+2+64]=j+q+1>>1,c[p+2+0]=c[p+3+64]=q+$+1>>1,c[p+3+0]=$+Q+1>>1,c[p+0+96]=Ct(O,S,y),c[p+0+64]=Ct(S,y,V),c[p+0+32]=c[p+1+96]=Ct(y,V,j),c[p+1+32]=c[p+2+96]=Ct(V,j,q),c[p+2+32]=c[p+3+96]=Ct(j,q,$),c[p+3+32]=Ct(q,$,Q)}function tc(c,p){var y=c[p+0-32],S=c[p+1-32],O=c[p+2-32],V=c[p+3-32],j=c[p+4-32],q=c[p+5-32],$=c[p+6-32],Q=c[p+7-32];c[p+0+0]=y+S+1>>1,c[p+1+0]=c[p+0+64]=S+O+1>>1,c[p+2+0]=c[p+1+64]=O+V+1>>1,c[p+3+0]=c[p+2+64]=V+j+1>>1,c[p+0+32]=Ct(y,S,O),c[p+1+32]=c[p+0+96]=Ct(S,O,V),c[p+2+32]=c[p+1+96]=Ct(O,V,j),c[p+3+32]=c[p+2+96]=Ct(V,j,q),c[p+3+64]=Ct(j,q,$),c[p+3+96]=Ct(q,$,Q)}function Pp(c,p){var y=c[p-1+0],S=c[p-1+32],O=c[p-1+64],V=c[p-1+96];c[p+0+0]=y+S+1>>1,c[p+2+0]=c[p+0+32]=S+O+1>>1,c[p+2+32]=c[p+0+64]=O+V+1>>1,c[p+1+0]=Ct(y,S,O),c[p+3+0]=c[p+1+32]=Ct(S,O,V),c[p+3+32]=c[p+1+64]=Ct(O,V,V),c[p+3+64]=c[p+2+64]=c[p+0+96]=c[p+1+96]=c[p+2+96]=c[p+3+96]=V}function Ma(c,p){var y=c[p-1+0],S=c[p-1+32],O=c[p-1+64],V=c[p-1+96],j=c[p-1-32],q=c[p+0-32],$=c[p+1-32],Q=c[p+2-32];c[p+0+0]=c[p+2+32]=y+j+1>>1,c[p+0+32]=c[p+2+64]=S+y+1>>1,c[p+0+64]=c[p+2+96]=O+S+1>>1,c[p+0+96]=V+O+1>>1,c[p+3+0]=Ct(q,$,Q),c[p+2+0]=Ct(j,q,$),c[p+1+0]=c[p+3+32]=Ct(y,j,q),c[p+1+32]=c[p+3+64]=Ct(S,y,j),c[p+1+64]=c[p+3+96]=Ct(O,S,y),c[p+1+96]=Ct(V,O,S)}function Au(c,p){var y;for(y=0;8>y;++y)r(c,p+32*y,c,p-32,8)}function Tu(c,p){var y;for(y=0;8>y;++y)i(c,p,c[p-1],8),p+=32}function to(c,p,y){var S;for(S=0;8>S;++S)i(p,y+32*S,c,8)}function Fi(c,p){var y,S=8;for(y=0;8>y;++y)S+=c[p+y-32]+c[p-1+32*y];to(S>>4,c,p)}function Zd(c,p){var y,S=4;for(y=0;8>y;++y)S+=c[p+y-32];to(S>>3,c,p)}function os(c,p){var y,S=4;for(y=0;8>y;++y)S+=c[p-1+32*y];to(S>>3,c,p)}function Cn(c,p){to(128,c,p)}function xu(c,p,y){var S=c[p-y],O=c[p+0],V=3*(O-S)+Sb[1020+c[p-2*y]-c[p+y]],j=Xv[112+(V+4>>3)];c[p-y]=oo[255+S+Xv[112+(V+3>>3)]],c[p+0]=oo[255+O-j]}function Jd(c,p,y,S){var O=c[p+0],V=c[p+y];return Fo[255+c[p-2*y]-c[p-y]]>S||Fo[255+V-O]>S}function nc(c,p,y,S){return 4*Fo[255+c[p-y]-c[p+0]]+Fo[255+c[p-2*y]-c[p+y]]<=S}function rc(c,p,y,S,O){var V=c[p-3*y],j=c[p-2*y],q=c[p-y],$=c[p+0],Q=c[p+y],ie=c[p+2*y],ge=c[p+3*y];return 4*Fo[255+q-$]+Fo[255+j-Q]>S?0:Fo[255+c[p-4*y]-V]<=O&&Fo[255+V-j]<=O&&Fo[255+j-q]<=O&&Fo[255+ge-ie]<=O&&Fo[255+ie-Q]<=O&&Fo[255+Q-$]<=O}function ic(c,p,y,S){var O=2*S+1;for(S=0;16>S;++S)nc(c,p+S,y,O)&&xu(c,p+S,y)}function mi(c,p,y,S){var O=2*S+1;for(S=0;16>S;++S)nc(c,p+S*y,1,O)&&xu(c,p+S*y,1)}function xo(c,p,y,S){var O;for(O=3;0<O;--O)ic(c,p+=4*y,y,S)}function no(c,p,y,S){var O;for(O=3;0<O;--O)mi(c,p+=4,y,S)}function ss(c,p,y,S,O,V,j,q){for(V=2*V+1;0<O--;){if(rc(c,p,y,V,j))if(Jd(c,p,y,q))xu(c,p,y);else{var $=c,Q=p,ie=y,ge=$[Q-2*ie],me=$[Q-ie],de=$[Q+0],Te=$[Q+ie],Ie=$[Q+2*ie],oe=27*(De=Sb[1020+3*(de-me)+Sb[1020+ge-Te]])+63>>7,le=18*De+63>>7,De=9*De+63>>7;$[Q-3*ie]=oo[255+$[Q-3*ie]+De],$[Q-2*ie]=oo[255+ge+le],$[Q-ie]=oo[255+me+oe],$[Q+0]=oo[255+de-oe],$[Q+ie]=oo[255+Te-le],$[Q+2*ie]=oo[255+Ie-De]}p+=S}}function ro(c,p,y,S,O,V,j,q){for(V=2*V+1;0<O--;){if(rc(c,p,y,V,j))if(Jd(c,p,y,q))xu(c,p,y);else{var $=c,Q=p,ie=y,ge=$[Q-ie],me=$[Q+0],de=$[Q+ie],Te=Xv[112+((Ie=3*(me-ge))+4>>3)],Ie=Xv[112+(Ie+3>>3)],oe=Te+1>>1;$[Q-2*ie]=oo[255+$[Q-2*ie]+oe],$[Q-ie]=oo[255+ge+Ie],$[Q+0]=oo[255+me-Te],$[Q+ie]=oo[255+de-oe]}p+=S}}function as(c,p,y,S,O,V){ss(c,p,y,1,16,S,O,V)}function Hs(c,p,y,S,O,V){ss(c,p,1,y,16,S,O,V)}function oc(c,p,y,S,O,V){var j;for(j=3;0<j;--j)ro(c,p+=4*y,y,1,16,S,O,V)}function us(c,p,y,S,O,V){var j;for(j=3;0<j;--j)ro(c,p+=4,1,y,16,S,O,V)}function Xd(c,p,y,S,O,V,j,q){ss(c,p,O,1,8,V,j,q),ss(y,S,O,1,8,V,j,q)}function zs(c,p,y,S,O,V,j,q){ss(c,p,1,O,8,V,j,q),ss(y,S,1,O,8,V,j,q)}function sc(c,p,y,S,O,V,j,q){ro(c,p+4*O,O,1,8,V,j,q),ro(y,S+4*O,O,1,8,V,j,q)}function ac(c,p,y,S,O,V,j,q){ro(c,p+4,1,O,8,V,j,q),ro(y,S+4,1,O,8,V,j,q)}function No(){this.ba=new Ri,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ln,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Nu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Mu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ru(){this.ua=0,this.Wa=new X,this.vb=new X,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new B,this.yc=new T}function uc(){this.xb=this.a=0,this.l=new Aa,this.ca=new Ri,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new k,this.Pb=0,this.wd=new k,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ru,this.ab=0,this.gc=s(4,Mu),this.Oc=0}function Ra(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Aa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Mo(c,p,y,S,O,V,j){for(c=c==null?0:c[p+0],p=0;p<j;++p)O[V+p]=c+y[S+p]&255,c=O[V+p]}function Pu(c,p,y,S,O,V,j){var q;if(c==null)Mo(null,null,y,S,O,V,j);else for(q=0;q<j;++q)O[V+q]=c[p+q]+y[S+q]&255}function ls(c,p,y,S,O,V,j){if(c==null)Mo(null,null,y,S,O,V,j);else{var q,$=c[p+0],Q=$,ie=$;for(q=0;q<j;++q)Q=ie+($=c[p+q])-Q,ie=y[S+q]+(-256&Q?0>Q?0:255:Q)&255,Q=$,O[V+q]=ie}}function io(c,p,y,S){var O=p.width,V=p.o;if(e(c!=null&&p!=null),0>y||0>=S||y+S>V)return null;if(!c.Cc){if(c.ga==null){var j;if(c.ga=new Ra,(j=c.ga==null)||(j=p.width*p.o,e(c.Gb.length==0),c.Gb=o(j),c.Uc=0,c.Gb==null?j=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,j=1),j=!j),!j){j=c.ga;var q=c.Fa,$=c.P,Q=c.qc,ie=c.mb,ge=c.nb,me=$+1,de=Q-1,Te=j.l;if(e(q!=null&&ie!=null&&p!=null),ju[0]=null,ju[1]=Mo,ju[2]=Pu,ju[3]=ls,j.ca=ie,j.tb=ge,j.c=p.width,j.i=p.height,e(0<j.c&&0<j.i),1>=Q)p=0;else if(j.$a=q[$+0]>>0&3,j.Z=q[$+0]>>2&3,j.Lc=q[$+0]>>4&3,$=q[$+0]>>6&3,0>j.$a||1<j.$a||4<=j.Z||1<j.Lc||$)p=0;else if(Te.put=Qi,Te.ac=Jn,Te.bc=Xr,Te.ma=j,Te.width=p.width,Te.height=p.height,Te.Da=p.Da,Te.v=p.v,Te.va=p.va,Te.j=p.j,Te.o=p.o,j.$a)e:{e(j.$a==1),p=Ur();t:for(;;){if(p==null){p=0;break e}if(e(j!=null),j.mc=p,p.c=j.c,p.i=j.i,p.l=j.l,p.l.ma=j,p.l.width=j.c,p.l.height=j.i,p.a=0,ne(p.m,q,me,de),!Dr(j.c,j.i,1,p,null)||(p.ab==1&&p.gc[0].hc==3&&ns(p.s)?(j.ic=1,q=p.c*p.i,p.Ta=null,p.Ua=0,p.V=o(q),p.Ba=0,p.V==null?(p.a=1,p=0):p=1):(j.ic=0,p=js(p,j.c)),!p))break t;p=1;break e}j.mc=null,p=0}else p=de>=j.c*j.i;j=!p}if(j)return null;c.ga.Lc!=1?c.Ga=0:S=V-y}e(c.ga!=null),e(y+S<=V);e:{if(p=(q=c.ga).c,V=q.l.o,q.$a==0){if(me=c.rc,de=c.Vc,Te=c.Fa,$=c.P+1+y*p,Q=c.mb,ie=c.nb+y*p,e($<=c.P+c.qc),q.Z!=0)for(e(ju[q.Z]!=null),j=0;j<S;++j)ju[q.Z](me,de,Te,$,Q,ie,p),me=Q,de=ie,ie+=p,$+=p;else for(j=0;j<S;++j)r(Q,ie,Te,$,p),me=Q,de=ie,ie+=p,$+=p;c.rc=me,c.Vc=de}else{if(e(q.mc!=null),p=y+S,e((j=q.mc)!=null),e(p<=j.i),j.C>=p)p=1;else if(q.ic||he(),q.ic){q=j.V,me=j.Ba,de=j.c;var Ie=j.i,oe=(Te=1,$=j.$/de,Q=j.$%de,ie=j.m,ge=j.s,j.$),le=de*Ie,De=de*p,Ne=ge.wc,Ae=oe<De?Xn(ge,Q,$):null;e(oe<=le),e(p<=Ie),e(ns(ge));t:for(;;){for(;!ie.h&&oe<De;){if(Q&Ne||(Ae=Xn(ge,Q,$)),e(Ae!=null),ae(ie),256>(Ie=vr(Ae.G[0],Ae.H[0],ie)))q[me+oe]=Ie,++oe,++Q>=de&&(Q=0,++$<=p&&!($%16)&&ei(j,$));else{if(!(280>Ie)){Te=0;break t}Ie=Tn(Ie-256,ie);var et,He=vr(Ae.G[4],Ae.H[4],ie);if(ae(ie),!(oe>=(He=Yi(de,He=Tn(He,ie)))&&le-oe>=Ie)){Te=0;break t}for(et=0;et<Ie;++et)q[me+oe+et]=q[me+oe+et-He];for(oe+=Ie,Q+=Ie;Q>=de;)Q-=de,++$<=p&&!($%16)&&ei(j,$);oe<De&&Q&Ne&&(Ae=Xn(ge,Q,$))}e(ie.h==G(ie))}ei(j,$>p?p:$);break t}!Te||ie.h&&oe<le?(Te=0,j.a=ie.h?5:3):j.$=oe,p=Te}else p=Pi(j,j.V,j.Ba,j.c,j.i,p,Ia);if(!p){S=0;break e}}y+S>=V&&(c.Cc=1),S=1}if(!S)return null;if(c.Cc&&((S=c.ga)!=null&&(S.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+y*O}function v(c,p,y,S,O,V){for(;0<O--;){var j,q=c,$=p+(y?1:0),Q=c,ie=p+(y?0:3);for(j=0;j<S;++j){var ge=Q[ie+4*j];ge!=255&&(ge*=32897,q[$+4*j+0]=q[$+4*j+0]*ge>>23,q[$+4*j+1]=q[$+4*j+1]*ge>>23,q[$+4*j+2]=q[$+4*j+2]*ge>>23)}p+=V}}function L(c,p,y,S,O){for(;0<S--;){var V;for(V=0;V<y;++V){var j=c[p+2*V+0],q=15&(Q=c[p+2*V+1]),$=4369*q,Q=(240&Q|Q>>4)*$>>16;c[p+2*V+0]=(240&j|j>>4)*$>>16&240|(15&j|j<<4)*$>>16>>4&15,c[p+2*V+1]=240&Q|q}p+=O}}function Z(c,p,y,S,O,V,j,q){var $,Q,ie=255;for(Q=0;Q<O;++Q){for($=0;$<S;++$){var ge=c[p+$];V[j+4*$]=ge,ie&=ge}p+=y,j+=q}return ie!=255}function re(c,p,y,S,O){var V;for(V=0;V<O;++V)y[S+V]=c[p+V]>>8}function he(){Oo=v,On=L,Fn=Z,ur=re}function we(c,p,y){I[c]=function(S,O,V,j,q,$,Q,ie,ge,me,de,Te,Ie,oe,le,De,Ne){var Ae,et=Ne-1>>1,He=q[$+0]|Q[ie+0]<<16,mt=ge[me+0]|de[Te+0]<<16;e(S!=null);var Qe=3*He+mt+131074>>2;for(p(S[O+0],255&Qe,Qe>>16,Ie,oe),V!=null&&(Qe=3*mt+He+131074>>2,p(V[j+0],255&Qe,Qe>>16,le,De)),Ae=1;Ae<=et;++Ae){var fn=q[$+Ae]|Q[ie+Ae]<<16,wn=ge[me+Ae]|de[Te+Ae]<<16,an=He+fn+mt+wn+524296,Jt=an+2*(fn+mt)>>3;Qe=Jt+He>>1,He=(an=an+2*(He+wn)>>3)+fn>>1,p(S[O+2*Ae-1],255&Qe,Qe>>16,Ie,oe+(2*Ae-1)*y),p(S[O+2*Ae-0],255&He,He>>16,Ie,oe+(2*Ae-0)*y),V!=null&&(Qe=an+mt>>1,He=Jt+wn>>1,p(V[j+2*Ae-1],255&Qe,Qe>>16,le,De+(2*Ae-1)*y),p(V[j+2*Ae+0],255&He,He>>16,le,De+(2*Ae+0)*y)),He=fn,mt=wn}1&Ne||(Qe=3*He+mt+131074>>2,p(S[O+Ne-1],255&Qe,Qe>>16,Ie,oe+(Ne-1)*y),V!=null&&(Qe=3*mt+He+131074>>2,p(V[j+Ne-1],255&Qe,Qe>>16,le,De+(Ne-1)*y)))}}function Me(){Vo[ey]=Aj,Vo[ty]=vx,Vo[hx]=Tj,Vo[ny]=yx,Vo[ry]=_x,Vo[Db]=wx,Vo[fx]=xj,Vo[Ab]=vx,Vo[Tb]=yx,Vo[iy]=_x,Vo[xb]=wx}function Ze(c){return c&~Nj?0>c?0:255:c>>bx}function st(c,p){return Ze((19077*c>>8)+(26149*p>>8)-14234)}function h(c,p,y){return Ze((19077*c>>8)-(6419*p>>8)-(13320*y>>8)+8708)}function _(c,p){return Ze((19077*c>>8)+(33050*p>>8)-17685)}function A(c,p,y,S,O){S[O+0]=st(c,y),S[O+1]=h(c,p,y),S[O+2]=_(c,p)}function U(c,p,y,S,O){S[O+0]=_(c,p),S[O+1]=h(c,p,y),S[O+2]=st(c,y)}function ue(c,p,y,S,O){var V=h(c,p,y);p=V<<3&224|_(c,p)>>3,S[O+0]=248&st(c,y)|V>>5,S[O+1]=p}function pe(c,p,y,S,O){var V=240&_(c,p)|15;S[O+0]=240&st(c,y)|h(c,p,y)>>4,S[O+1]=V}function Pe(c,p,y,S,O){S[O+0]=255,A(c,p,y,S,O+1)}function Dt(c,p,y,S,O){U(c,p,y,S,O),S[O+3]=255}function _n(c,p,y,S,O){A(c,p,y,S,O),S[O+3]=255}function At(c,p){return 0>c?0:c>p?p:c}function xn(c,p,y){I[c]=function(S,O,V,j,q,$,Q,ie,ge){for(var me=ie+(-2&ge)*y;ie!=me;)p(S[O+0],V[j+0],q[$+0],Q,ie),p(S[O+1],V[j+0],q[$+0],Q,ie+y),O+=2,++j,++$,ie+=2*y;1&ge&&p(S[O+0],V[j+0],q[$+0],Q,ie)}}function sr(c,p,y){return y==0?c==0?p==0?6:5:p==0?4:0:y}function Ro(c,p,y,S,O){switch(c>>>30){case 3:Oa(p,y,S,O,0);break;case 2:ar(p,y,S,O);break;case 1:yi(p,y,S,O)}}function qr(c,p){var y,S,O=p.M,V=p.Nb,j=c.oc,q=c.pc+40,$=c.oc,Q=c.pc+584,ie=c.oc,ge=c.pc+600;for(y=0;16>y;++y)j[q+32*y-1]=129;for(y=0;8>y;++y)$[Q+32*y-1]=129,ie[ge+32*y-1]=129;for(0<O?j[q-1-32]=$[Q-1-32]=ie[ge-1-32]=129:(i(j,q-32-1,127,21),i($,Q-32-1,127,9),i(ie,ge-32-1,127,9)),S=0;S<c.za;++S){var me=p.ya[p.aa+S];if(0<S){for(y=-1;16>y;++y)r(j,q+32*y-4,j,q+32*y+12,4);for(y=-1;8>y;++y)r($,Q+32*y-4,$,Q+32*y+4,4),r(ie,ge+32*y-4,ie,ge+32*y+4,4)}var de=c.Gd,Te=c.Hd+S,Ie=me.ad,oe=me.Hc;if(0<O&&(r(j,q-32,de[Te].y,0,16),r($,Q-32,de[Te].f,0,8),r(ie,ge-32,de[Te].ea,0,8)),me.Za){var le=j,De=q-32+16;for(0<O&&(S>=c.za-1?i(le,De,de[Te].y[15],4):r(le,De,de[Te+1].y,0,4)),y=0;4>y;y++)le[De+128+y]=le[De+256+y]=le[De+384+y]=le[De+0+y];for(y=0;16>y;++y,oe<<=2)le=j,De=q+Ix[y],ds[me.Ob[y]](le,De),Ro(oe,Ie,16*+y,le,De)}else if(le=sr(S,O,me.Ob[0]),Vu[le](j,q),oe!=0)for(y=0;16>y;++y,oe<<=2)Ro(oe,Ie,16*+y,j,q+Ix[y]);for(y=me.Gc,le=sr(S,O,me.Dd),Va[le]($,Q),Va[le](ie,ge),oe=Ie,le=$,De=Q,255&(me=y>>0)&&(170&me?Fp(oe,256,le,De):ko(oe,256,le,De)),me=ie,oe=ge,255&(y>>=8)&&(170&y?Fp(Ie,320,me,oe):ko(Ie,320,me,oe)),O<c.Ub-1&&(r(de[Te].y,0,j,q+480,16),r(de[Te].f,0,$,Q+224,8),r(de[Te].ea,0,ie,ge+224,8)),y=8*V*c.B,de=c.sa,Te=c.ta+16*S+16*V*c.R,Ie=c.qa,me=c.ra+8*S+y,oe=c.Ha,le=c.Ia+8*S+y,y=0;16>y;++y)r(de,Te+y*c.R,j,q+32*y,16);for(y=0;8>y;++y)r(Ie,me+y*c.B,$,Q+32*y,8),r(oe,le+y*c.B,ie,ge+32*y,8)}}function cs(c,p,y,S,O,V,j,q,$){var Q=[0],ie=[0],ge=0,me=$!=null?$.kd:0,de=$??new Nu;if(c==null||12>y)return 7;de.data=c,de.w=p,de.ha=y,p=[p],y=[y],de.gb=[de.gb];e:{var Te=p,Ie=y,oe=de.gb;if(e(c!=null),e(Ie!=null),e(oe!=null),oe[0]=0,12<=Ie[0]&&!t(c,Te[0],"RIFF")){if(t(c,Te[0]+8,"WEBP")){oe=3;break e}var le=qe(c,Te[0]+4);if(12>le||4294967286<le){oe=3;break e}if(me&&le>Ie[0]-8){oe=7;break e}oe[0]=le,Te[0]+=12,Ie[0]-=12}oe=0}if(oe!=0)return oe;for(le=0<de.gb[0],y=y[0];;){e:{var De=c;Ie=p,oe=y;var Ne=Q,Ae=ie,et=Te=[0];if((Qe=ge=[ge])[0]=0,8>oe[0])oe=7;else{if(!t(De,Ie[0],"VP8X")){if(qe(De,Ie[0]+4)!=10){oe=3;break e}if(18>oe[0]){oe=7;break e}var He=qe(De,Ie[0]+8),mt=1+ze(De,Ie[0]+12);if(2147483648<=mt*(De=1+ze(De,Ie[0]+15))){oe=3;break e}et!=null&&(et[0]=He),Ne!=null&&(Ne[0]=mt),Ae!=null&&(Ae[0]=De),Ie[0]+=18,oe[0]-=18,Qe[0]=1}oe=0}}if(ge=ge[0],Te=Te[0],oe!=0)return oe;if(Ie=!!(2&Te),!le&&ge)return 3;if(V!=null&&(V[0]=!!(16&Te)),j!=null&&(j[0]=Ie),q!=null&&(q[0]=0),j=Q[0],Te=ie[0],ge&&Ie&&$==null){oe=0;break}if(4>y){oe=7;break}if(le&&ge||!le&&!ge&&!t(c,p[0],"ALPH")){y=[y],de.na=[de.na],de.P=[de.P],de.Sa=[de.Sa];e:{He=c,oe=p,le=y;var Qe=de.gb;Ne=de.na,Ae=de.P,et=de.Sa,mt=22,e(He!=null),e(le!=null),De=oe[0];var fn=le[0];for(e(Ne!=null),e(et!=null),Ne[0]=null,Ae[0]=null,et[0]=0;;){if(oe[0]=De,le[0]=fn,8>fn){oe=7;break e}var wn=qe(He,De+4);if(4294967286<wn){oe=3;break e}var an=8+wn+1&-2;if(mt+=an,0<Qe&&mt>Qe){oe=3;break e}if(!t(He,De,"VP8 ")||!t(He,De,"VP8L")){oe=0;break e}if(fn[0]<an){oe=7;break e}t(He,De,"ALPH")||(Ne[0]=He,Ae[0]=De+8,et[0]=wn),De+=an,fn-=an}}if(y=y[0],de.na=de.na[0],de.P=de.P[0],de.Sa=de.Sa[0],oe!=0)break}y=[y],de.Ja=[de.Ja],de.xa=[de.xa];e:if(Qe=c,oe=p,le=y,Ne=de.gb[0],Ae=de.Ja,et=de.xa,He=oe[0],De=!t(Qe,He,"VP8 "),mt=!t(Qe,He,"VP8L"),e(Qe!=null),e(le!=null),e(Ae!=null),e(et!=null),8>le[0])oe=7;else{if(De||mt){if(Qe=qe(Qe,He+4),12<=Ne&&Qe>Ne-12){oe=3;break e}if(me&&Qe>le[0]-8){oe=7;break e}Ae[0]=Qe,oe[0]+=8,le[0]-=8,et[0]=mt}else et[0]=5<=le[0]&&Qe[He+0]==47&&!(Qe[He+4]>>5),Ae[0]=le[0];oe=0}if(y=y[0],de.Ja=de.Ja[0],de.xa=de.xa[0],p=p[0],oe!=0)break;if(4294967286<de.Ja)return 3;if(q==null||Ie||(q[0]=de.xa?2:1),j=[j],Te=[Te],de.xa){if(5>y){oe=7;break}q=j,me=Te,Ie=V,c==null||5>y?c=0:5<=y&&c[p+0]==47&&!(c[p+4]>>5)?(le=[0],Qe=[0],Ne=[0],ne(Ae=new k,c,p,y),pt(Ae,le,Qe,Ne)?(q!=null&&(q[0]=le[0]),me!=null&&(me[0]=Qe[0]),Ie!=null&&(Ie[0]=Ne[0]),c=1):c=0):c=0}else{if(10>y){oe=7;break}q=Te,c==null||10>y||!Eu(c,p+3,y-3)?c=0:(me=c[p+0]|c[p+1]<<8|c[p+2]<<16,Ie=16383&(c[p+7]<<8|c[p+6]),c=16383&(c[p+9]<<8|c[p+8]),1&me||3<(me>>1&7)||!(me>>4&1)||me>>5>=de.Ja||!Ie||!c?c=0:(j&&(j[0]=Ie),q&&(q[0]=c),c=1))}if(!c||(j=j[0],Te=Te[0],ge&&(Q[0]!=j||ie[0]!=Te)))return 3;$!=null&&($[0]=de,$.offset=p-$.w,e(4294967286>p-$.w),e($.offset==$.ha-y));break}return oe==0||oe==7&&ge&&$==null?(V!=null&&(V[0]|=de.na!=null&&0<de.na.length),S!=null&&(S[0]=j),O!=null&&(O[0]=Te),0):oe}function Pa(c,p,y){var S=p.width,O=p.height,V=0,j=0,q=S,$=O;if(p.Da=c!=null&&0<c.Da,p.Da&&(q=c.cd,$=c.bd,V=c.v,j=c.j,11>y||(V&=-2,j&=-2),0>V||0>j||0>=q||0>=$||V+q>S||j+$>O))return 0;if(p.v=V,p.j=j,p.va=V+q,p.o=j+$,p.U=q,p.T=$,p.da=c!=null&&0<c.da,p.da){if(!St(q,$,y=[c.ib],V=[c.hb]))return 0;p.ib=y[0],p.hb=V[0]}return p.ob=c!=null&&c.ob,p.Kb=c==null||!c.Sd,p.da&&(p.ob=p.ib<3*S/4&&p.hb<3*O/4,p.Kb=0),1}function kp(c){if(c==null)return 2;if(11>c.S){var p=c.f.RGBA;p.fb+=(c.height-1)*p.A,p.A=-p.A}else p=c.f.kb,c=c.height,p.O+=(c-1)*p.fa,p.fa=-p.fa,p.N+=(c-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(c-1>>1)*p.Db,p.Db=-p.Db,p.F!=null&&(p.J+=(c-1)*p.lb,p.lb=-p.lb);return 0}function eh(c,p,y,S){if(S==null||0>=c||0>=p)return 2;if(y!=null){if(y.Da){var O=y.cd,V=y.bd,j=-2&y.v,q=-2&y.j;if(0>j||0>q||0>=O||0>=V||j+O>c||q+V>p)return 2;c=O,p=V}if(y.da){if(!St(c,p,O=[y.ib],V=[y.hb]))return 2;c=O[0],p=V[0]}}S.width=c,S.height=p;e:{var $=S.width,Q=S.height;if(c=S.S,0>=$||0>=Q||!(c>=ey&&13>c))c=2;else{if(0>=S.Rd&&S.sd==null){j=V=O=p=0;var ie=(q=$*Cx[c])*Q;if(11>c||(V=(Q+1)/2*(p=($+1)/2),c==12&&(j=(O=$)*Q)),(Q=o(ie+2*V+j))==null){c=1;break e}S.sd=Q,11>c?(($=S.f.RGBA).eb=Q,$.fb=0,$.A=q,$.size=ie):(($=S.f.kb).y=Q,$.O=0,$.fa=q,$.Fd=ie,$.f=Q,$.N=0+ie,$.Ab=p,$.Cd=V,$.ea=Q,$.W=0+ie+V,$.Db=p,$.Ed=V,c==12&&($.F=Q,$.J=0+ie+2*V),$.Tc=j,$.lb=O)}if(p=1,O=S.S,V=S.width,j=S.height,O>=ey&&13>O)if(11>O)c=S.f.RGBA,p&=(q=Math.abs(c.A))*(j-1)+V<=c.size,p&=q>=V*Cx[O],p&=c.eb!=null;else{c=S.f.kb,q=(V+1)/2,ie=(j+1)/2,$=Math.abs(c.fa),Q=Math.abs(c.Ab);var ge=Math.abs(c.Db),me=Math.abs(c.lb),de=me*(j-1)+V;p&=$*(j-1)+V<=c.Fd,p&=Q*(ie-1)+q<=c.Cd,p=(p&=ge*(ie-1)+q<=c.Ed)&$>=V&Q>=q&ge>=q,p&=c.y!=null,p&=c.f!=null,p&=c.ea!=null,O==12&&(p&=me>=V,p&=de<=c.Tc,p&=c.F!=null)}else p=0;c=p?0:2}}return c!=0||y!=null&&y.fd&&(c=kp(S)),c}var Hr=64,th=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],nh=24,rh=32,Lp=8,Vi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Be("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(c){return c},I.Predictor2=function(c,p,y){return p[y+0]},I.Predictor3=function(c,p,y){return p[y+1]},I.Predictor4=function(c,p,y){return p[y-1]},I.Predictor5=function(c,p,y){return $e($e(c,p[y+1]),p[y+0])},I.Predictor6=function(c,p,y){return $e(c,p[y-1])},I.Predictor7=function(c,p,y){return $e(c,p[y+0])},I.Predictor8=function(c,p,y){return $e(p[y-1],p[y+0])},I.Predictor9=function(c,p,y){return $e(p[y+0],p[y+1])},I.Predictor10=function(c,p,y){return $e($e(c,p[y-1]),$e(p[y+0],p[y+1]))},I.Predictor11=function(c,p,y){var S=p[y+0];return 0>=Tt(S>>24&255,c>>24&255,(p=p[y-1])>>24&255)+Tt(S>>16&255,c>>16&255,p>>16&255)+Tt(S>>8&255,c>>8&255,p>>8&255)+Tt(255&S,255&c,255&p)?S:c},I.Predictor12=function(c,p,y){var S=p[y+0];return(lt((c>>24&255)+(S>>24&255)-((p=p[y-1])>>24&255))<<24|lt((c>>16&255)+(S>>16&255)-(p>>16&255))<<16|lt((c>>8&255)+(S>>8&255)-(p>>8&255))<<8|lt((255&c)+(255&S)-(255&p)))>>>0},I.Predictor13=function(c,p,y){var S=p[y-1];return(Et((c=$e(c,p[y+0]))>>24&255,S>>24&255)<<24|Et(c>>16&255,S>>16&255)<<16|Et(c>>8&255,S>>8&255)<<8|Et(c>>0&255,S>>0&255))>>>0};var Cb=I.PredictorAdd0;I.PredictorAdd1=Vt,Be("Predictor2","PredictorAdd2"),Be("Predictor3","PredictorAdd3"),Be("Predictor4","PredictorAdd4"),Be("Predictor5","PredictorAdd5"),Be("Predictor6","PredictorAdd6"),Be("Predictor7","PredictorAdd7"),Be("Predictor8","PredictorAdd8"),Be("Predictor9","PredictorAdd9"),Be("Predictor10","PredictorAdd10"),Be("Predictor11","PredictorAdd11"),Be("Predictor12","PredictorAdd12"),Be("Predictor13","PredictorAdd13");var Op=I.PredictorAdd2;Ht("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),Ht("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var Kv,Po=I.ColorIndexInverseTransform,ih=I.MapARGB,Qv=I.VP8LColorIndexInverseTransformAlpha,Yv=I.MapAlpha,ku=I.VP8LPredictorsAdd=[];ku.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var lc,ji,vi,Lu,ka,La,oh,Oa,ar,Fp,yi,ko,sh,Zv,Vp,cc,dc,Ou,hc,ah,fc,Fu,jp,Lo,Oo,On,Fn,ur,Ar=o(511),Fa=o(2041),Bp=o(225),uh=o(767),Jv=0,Sb=Fa,Xv=Bp,oo=uh,Fo=Ar,ey=0,ty=1,hx=2,ny=3,ry=4,Db=5,fx=6,Ab=7,Tb=8,iy=9,xb=10,fj=[2,3,7],pj=[3,3,11],px=[280,256,256,256,40],gj=[0,1,1,1,0],mj=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],vj=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],yj=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_j=8,Nb=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Mb=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Up=null,wj=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],bj=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],gx=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ej=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ij=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Cj=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Sj=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Vu=[],ds=[],Va=[],Dj=1,mx=2,ju=[],Vo=[];we("UpsampleRgbLinePair",A,3),we("UpsampleBgrLinePair",U,3),we("UpsampleRgbaLinePair",_n,4),we("UpsampleBgraLinePair",Dt,4),we("UpsampleArgbLinePair",Pe,4),we("UpsampleRgba4444LinePair",pe,2),we("UpsampleRgb565LinePair",ue,2);var Aj=I.UpsampleRgbLinePair,Tj=I.UpsampleBgrLinePair,vx=I.UpsampleRgbaLinePair,yx=I.UpsampleBgraLinePair,_x=I.UpsampleArgbLinePair,wx=I.UpsampleRgba4444LinePair,xj=I.UpsampleRgb565LinePair,oy=16,sy=1<<oy-1,qp=-227,Rb=482,bx=6,Nj=(256<<bx)-1,Ex=0,Mj=o(256),Rj=o(256),Pj=o(256),kj=o(256),Lj=o(Rb-qp),Oj=o(Rb-qp);xn("YuvToRgbRow",A,3),xn("YuvToBgrRow",U,3),xn("YuvToRgbaRow",_n,4),xn("YuvToBgraRow",Dt,4),xn("YuvToArgbRow",Pe,4),xn("YuvToRgba4444Row",pe,2),xn("YuvToRgb565Row",ue,2);var Ix=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ay=[0,2,8],Fj=[8,7,6,4,4,2,2,2,1,1,1,1],Vj=1;this.WebPDecodeRGBA=function(c,p,y,S,O){var V=ty,j=new No,q=new Ri;j.ba=q,q.S=V,q.width=[q.width],q.height=[q.height];var $=q.width,Q=q.height,ie=new fi;if(ie==null||c==null)var ge=2;else e(ie!=null),ge=cs(c,p,y,ie.width,ie.height,ie.Pd,ie.Qd,ie.format,null);if(ge!=0?$=0:($!=null&&($[0]=ie.width[0]),Q!=null&&(Q[0]=ie.height[0]),$=1),$){q.width=q.width[0],q.height=q.height[0],S!=null&&(S[0]=q.width),O!=null&&(O[0]=q.height);e:{if(S=new Aa,(O=new Nu).data=c,O.w=p,O.ha=y,O.kd=1,p=[0],e(O!=null),((c=cs(O.data,O.w,O.ha,null,null,null,p,null,O))==0||c==7)&&p[0]&&(c=4),(p=c)==0){if(e(j!=null),S.data=O.data,S.w=O.w+O.offset,S.ha=O.ha-O.offset,S.put=Qi,S.ac=Jn,S.bc=Xr,S.ma=j,O.xa){if((c=Ur())==null){j=1;break e}if(function(me,de){var Te=[0],Ie=[0],oe=[0];t:for(;;){if(me==null)return 0;if(de==null)return me.a=2,0;if(me.l=de,me.a=0,ne(me.m,de.data,de.w,de.ha),!pt(me.m,Te,Ie,oe)){me.a=3;break t}if(me.xb=mx,de.width=Te[0],de.height=Ie[0],!Dr(Te[0],Ie[0],1,me,null))break t;return 1}return e(me.a!=0),0}(c,S)){if(S=(p=eh(S.width,S.height,j.Oa,j.ba))==0){t:{S=c;n:for(;;){if(S==null){S=0;break t}if(e(S.s.yc!=null),e(S.s.Ya!=null),e(0<S.s.Wb),e((y=S.l)!=null),e((O=y.ma)!=null),S.xb!=0){if(S.ca=O.ba,S.tb=O.tb,e(S.ca!=null),!Pa(O.Oa,y,ny)){S.a=2;break n}if(!js(S,y.width)||y.da)break n;if((y.da||cn(S.ca.S))&&he(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),S.ca.f.kb.F!=null&&he()),S.Pb&&0<S.s.ua&&S.s.vb.X==null&&!ft(S.s.vb,S.s.Wa.Xa)){S.a=1;break n}S.xb=0}if(!Pi(S,S.V,S.Ba,S.c,S.i,y.o,Zi))break n;O.Dc=S.Ma,S=1;break t}e(S.a!=0),S=0}S=!S}S&&(p=c.a)}else p=c.a}else{if((c=new zd)==null){j=1;break e}if(c.Fa=O.na,c.P=O.P,c.qc=O.Sa,Zl(c,S)){if((p=eh(S.width,S.height,j.Oa,j.ba))==0){if(c.Aa=0,y=j.Oa,e((O=c)!=null),y!=null){if(0<($=0>($=y.Md)?0:100<$?255:255*$/100)){for(Q=ie=0;4>Q;++Q)12>(ge=O.pb[Q]).lc&&(ge.ia=$*Fj[0>ge.lc?0:ge.lc]>>3),ie|=ge.ia;ie&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=y.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}Mp(c,S)||(p=c.a)}}else p=c.a}p==0&&j.Oa!=null&&j.Oa.fd&&(p=kp(j.ba))}j=p}V=j!=0?null:11>V?q.f.RGBA.eb:q.f.kb.y}else V=null;return V};var Cx=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(I,N){for(var P="",C=0;C<4;C++)P+=String.fromCharCode(I[N++]);return P}function d(I,N){return(I[N+0]<<0|I[N+1]<<8|I[N+2]<<16)>>>0}function f(I,N){return(I[N+0]<<0|I[N+1]<<8|I[N+2]<<16|I[N+3]<<24)>>>0}new u;var m=[0],g=[0],b=[],E=new u,D=n,w=function(I,N){var P={},C=0,T=!1,M=0,B=0;if(P.frames=[],!function(W,G,te,ae){for(var fe=0;fe<ae;fe++)if(W[G+fe]!=te.charCodeAt(fe))return!0;return!1}(I,N,"RIFF",4)){var K,ee;for(f(I,N+=4),N+=8;N<I.length;){var J=l(I,N),ne=f(I,N+=4);N+=4;var se=ne+(1&ne);switch(J){case"VP8 ":case"VP8L":P.frames[C]===void 0&&(P.frames[C]={}),(k=P.frames[C]).src_off=T?B:N-8,k.src_size=M+ne+8,C++,T&&(T=!1,M=0,B=0);break;case"VP8X":(k=P.header={}).feature_flags=I[N];var ce=N+4;k.canvas_width=1+d(I,ce),ce+=3,k.canvas_height=1+d(I,ce),ce+=3;break;case"ALPH":T=!0,M=se+8,B=N-8;break;case"ANIM":(k=P.header).bgcolor=f(I,N),ce=N+4,k.loop_count=(K=I)[(ee=ce)+0]<<0|K[ee+1]<<8,ce+=2;break;case"ANMF":var Ce,k;(k=P.frames[C]={}).offset_x=2*d(I,N),N+=3,k.offset_y=2*d(I,N),N+=3,k.width=1+d(I,N),N+=3,k.height=1+d(I,N),N+=3,k.duration=d(I,N),N+=3,Ce=I[N++],k.dispose=1&Ce,k.blend=Ce>>1&1}J!="ANMF"&&(N+=se)}return P}}(D,0);w.response=D,w.rgbaoutput=!0,w.dataurl=!1;var x=w.header?w.header:null,F=w.frames?w.frames:null;if(x){x.loop_counter=x.loop_count,m=[x.canvas_height],g=[x.canvas_width];for(var z=0;z<F.length&&F[z].blend!=0;z++);}var H=F[0],Y=E.WebPDecodeRGBA(D,H.src_off,H.src_size,g,m);H.rgba=Y,H.imgwidth=g[0],H.imgheight=m[0];for(var R=0;R<g[0]*m[0]*4;R++)b[R]=Y[R];return this.width=g,this.height=m,this.data=b,this}var bt,Pn,am,RC,Qc,FL,fG,VL,rr,VC,td,hf,kt,al,Wi,BL,oa,pG,gG,mG,cr,dr,hr,vG,yG,LC,V_,_G,wG,bG,EG,nO,xC,sa,rO,iO,Ds,Zc,Jc,Xc,um,Rr,lm,ed,U_,cm,cl,dm,rt,IG,CG,sO,aO,OC,uO,SG,DG,qL,j_,$L,WL,NC,ff,B_,GL,KL,QL,NG,As,dl,RG,PG,aa,kG,JL,lO,LG,OG,FG,VG,jG,BG,UG,cO,qG,HG,zG,$G,WG,jC,H_=Bx(()=>{"use strict";Xj();LL();bt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();Pn={log:DC,warn:function(n){bt.console&&(typeof bt.console.warn=="function"?bt.console.warn.apply(bt.console,arguments):DC.call(null,arguments))},error:function(n){bt.console&&(typeof bt.console.error=="function"?bt.console.error.apply(bt.console,arguments):DC(n))}};Qc=bt.saveAs||((typeof window>"u"?"undefined":Dn(window))!=="object"||window!==bt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=bt.URL||bt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?OL(i.href)?AC(n,e,t):F_(i,i.target="_blank"):F_(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){F_(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(OL(n))AC(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){F_(r)})}else navigator.msSaveOrOpenBlob(function(i,o){return o===void 0?o={autoBom:!1}:Dn(o)!=="object"&&(Pn.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return AC(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(bt.HTMLElement)||bt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":Dn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(n)}else{var u=bt.URL||bt.webkitURL,l=u.createObjectURL(n);r?r.location=l:location.href=l,r=null,setTimeout(function(){u.revokeObjectURL(l)},4e4)}});am=bt.atob.bind(bt),RC=bt.btoa.bind(bt);FL="0123456789abcdef".split("");fG=function(n){for(var e=0;e<n.length;e++)n[e]=dG(n[e]);return n.join("")}(eO("hello"))!="5d41402abc4b2a76b9719d911017c592";VL={print:4,modify:8,copy:16,"annot-forms":32};pf.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},pf.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},pf.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},pf.prototype.processOwnerPassword=function(n,e){return kC(PC(e).substr(0,5),n)},pf.prototype.encryptor=function(n,e){var t=PC(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return kC(t,r)}},hm.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Dn(n)!==Dn(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},yt.API={events:[]},yt.version="2.5.2";rr=yt.API,VC=1,td=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hf=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},kt=function(n){return n.toFixed(2)},al=function(n){return n.toFixed(5)};rr.__acroform__={};Wi=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},BL=function(n){return n*VC},oa=function(n){var e=new rO,t=rt.internal.getHeight(n)||0,r=rt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(kt(r)),Number(kt(t))],e},pG=rr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},gG=rr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},mG=rr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},cr=rr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return mG(n,e-1)},dr=rr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return pG(n,e-1)},hr=rr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return gG(n,e-1)},vG=rr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],s=n[2],a=n[3],u={};return u.lowerLeft_X=t(i)||0,u.lowerLeft_Y=r(o+a)||0,u.upperRight_X=t(i+s)||0,u.upperRight_Y=r(o)||0,[Number(kt(u.lowerLeft_X)),Number(kt(u.lowerLeft_Y)),Number(kt(u.upperRight_X)),Number(kt(u.upperRight_Y))]},yG=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=LC(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+kt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=oa(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},LC=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(C){return C.split(`
`)}):i.map(function(C){return[C]});var o=t,s=rt.internal.getHeight(n)||0;s=s<0?-s:s;var a=rt.internal.getWidth(n)||0;a=a<0?-a:a;var u=function(C,T,M){if(C+1<i.length){var B=T+" "+i[C+1][0];return V_(B,n,M).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var l,d,f=V_("3",n,o).height,m=n.multiline?s-o:(s-f)/2,g=m+=2,b=0,E=0,D=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+V_(e,n,o=12).width+", FieldWidth:"+a+`
`;break}for(var w="",x=0,F=0;F<i.length;F++)if(i.hasOwnProperty(F)){var z=!1;if(i[F].length!==1&&D!==i[F].length-1){if((f+2)*(x+2)+2>s)continue e;w+=i[F][D],z=!0,E=F,F--}else{w=(w+=i[F][D]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var H=parseInt(F),Y=u(H,w,o),R=F>=i.length-1;if(Y&&!R){w+=" ",D=0;continue}if(Y||R){if(R)E=H;else if(n.multiline&&(f+2)*(x+2)+2>s)continue e}else{if(!n.multiline||(f+2)*(x+2)+2>s)continue e;E=H}}for(var I="",N=b;N<=E;N++){var P=i[N];if(n.multiline){if(N===E){I+=P[D]+" ",D=(D+1)%P.length;continue}if(N===b){I+=P[P.length-1]+" ";continue}}I+=P[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,d=V_(I,n,o).width,n.textAlign){case"right":l=a-d-2;break;case"center":l=(a-d)/2;break;case"left":default:l=2}e+=kt(l)+" "+kt(g)+` Td
`,e+="("+td(I)+`) Tj
`,e+=-kt(l)+` 0 Td
`,g=-(o+2),d=0,b=z?E:E+1,x++,w=""}break}return r.text=e,r.fontSize=o,r},V_=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},_G={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},wG=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},bG=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Dn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},EG=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ds.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(_G)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");VC=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new iO,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&wG(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],u=[],l=a.Rect;if(a.Rect&&(a.Rect=vG(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=rt.createDefaultAppearanceStream(a),Dn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(u=a.getKeyValueListForStream()),a.Rect=l,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=yG(a);u.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var f="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var g=a.appearanceStreamContent[m];if(f+="/"+m+" ",f+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var s in g)if(g.hasOwnProperty(s)){var b=g[s];typeof b=="function"&&(b=b.call(i,a)),f+="/"+s+" "+b+" ",i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b)}}else typeof(b=g)=="function"&&(b=b.call(i,a)),f+="/"+s+" "+b,i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b);f+=">>"}u.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:u,objectId:a.objId}),i.internal.out("endobj")}o&&bG(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},nO=rr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(s){return s};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),Dn(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+td(r(n[o].toString()))+")"):i+=n[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},xC=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+td(r(n))+")"},sa=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};sa.prototype.toString=function(){return this.objId+" 0 R"},sa.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},sa.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:nO(i,this.objId,this.scope)}):i instanceof sa?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};rO=function(){sa.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Wi(rO,sa);iO=function(){sa.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+td(t(n))+")"}},set:function(t){n=t}})};Wi(iO,sa);Ds=function n(){sa.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!cr(e,3)},set:function(w){w?this.F=dr(e,3):this.F=hr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');t=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof U_)return;o="FieldObject"+n.FieldNum++}var w=function(x){return x};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+td(w(o))+")"},set:function(w){o=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(w){o=w}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(w){s=w}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(w){u=w}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return l===void 0?50/VC:l},set:function(w){l=w}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(w){d=w}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof U_||this instanceof cl))return xC(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=w}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Rr?m:xC(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=this instanceof Rr?w:w.substr(0,1)==="("?hf(w.substr(1,w.length-2)):hf(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Rr?hf(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof Rr?"/"+w:w}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Rr?g:xC(g,this.objId,this.scope)},set:function(w){w=w.toString(),g=this instanceof Rr?w:w.substr(0,1)==="("?hf(w.substr(1,w.length-2)):hf(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Rr?hf(g.substr(1,g.length-1)):g},set:function(w){w=w.toString(),g=this instanceof Rr?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(w){w=!!w,E=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(w){b=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,1)},set:function(w){w?this.Ff=dr(this.Ff,1):this.Ff=hr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,2)},set:function(w){w?this.Ff=dr(this.Ff,2):this.Ff=hr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,3)},set:function(w){w?this.Ff=dr(this.Ff,3):this.Ff=hr(this.Ff,3)}});var D=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(D!==null)return D},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');D=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(D){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:D=2;break;case"center":case 1:D=1;break;case"left":case 0:default:D=0}}})};Wi(Ds,sa);Zc=function(){Ds.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nO(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(o,s,a){a||(a=1);for(var u,l=[];u=s.exec(o);)l.push(u[a]);return l}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,18)},set:function(t){t?this.Ff=dr(this.Ff,18):this.Ff=hr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=dr(this.Ff,19):this.Ff=hr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,20)},set:function(t){t?(this.Ff=dr(this.Ff,20),e.sort()):this.Ff=hr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,22)},set:function(t){t?this.Ff=dr(this.Ff,22):this.Ff=hr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,23)},set:function(t){t?this.Ff=dr(this.Ff,23):this.Ff=hr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,27)},set:function(t){t?this.Ff=dr(this.Ff,27):this.Ff=hr(this.Ff,27)}}),this.hasAppearanceStream=!1};Wi(Zc,Ds);Jc=function(){Zc.call(this),this.fontName="helvetica",this.combo=!1};Wi(Jc,Zc);Xc=function(){Jc.call(this),this.combo=!0};Wi(Xc,Jc);um=function(){Xc.call(this),this.edit=!0};Wi(um,Xc);Rr=function(){Ds.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,15)},set:function(t){t?this.Ff=dr(this.Ff,15):this.Ff=hr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,16)},set:function(t){t?this.Ff=dr(this.Ff,16):this.Ff=hr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,17)},set:function(t){t?this.Ff=dr(this.Ff,17):this.Ff=hr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,26)},set:function(t){t?this.Ff=dr(this.Ff,26):this.Ff=hr(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+td(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Dn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Wi(Rr,Ds);lm=function(){Rr.call(this),this.pushButton=!0};Wi(lm,Rr);ed=function(){Rr.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Wi(ed,Rr);U_=function(){var n,e;Ds.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+td(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Dn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=rt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Wi(U_,Ds),ed.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},ed.prototype.createOption=function(n){var e=new U_;return e.Parent=this,e.optionName=n,this.Kids.push(e),IG.call(this.scope,e),e};cm=function(){Rr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=rt.CheckBox.createAppearanceStream()};Wi(cm,Rr);cl=function(){Ds.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,13)},set:function(e){e?this.Ff=dr(this.Ff,13):this.Ff=hr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,21)},set:function(e){e?this.Ff=dr(this.Ff,21):this.Ff=hr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,23)},set:function(e){e?this.Ff=dr(this.Ff,23):this.Ff=hr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,24)},set:function(e){e?this.Ff=dr(this.Ff,24):this.Ff=hr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,25)},set:function(e){e?this.Ff=dr(this.Ff,25):this.Ff=hr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,26)},set:function(e){e?this.Ff=dr(this.Ff,26):this.Ff=hr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Wi(cl,Ds);dm=function(){cl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,14)},set:function(n){n?this.Ff=dr(this.Ff,14):this.Ff=hr(this.Ff,14)}}),this.password=!0};Wi(dm,cl);rt={CheckBox:{createAppearanceStream:function(){return{N:{On:rt.CheckBox.YesNormal},D:{On:rt.CheckBox.YesPushDown,Off:rt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=oa(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=LC(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+kt(rt.internal.getWidth(n))+" "+kt(rt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+kt(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=oa(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=rt.internal.getHeight(n),s=rt.internal.getWidth(n),a=LC(n,n.caption);return i.push("1 g"),i.push("0 0 "+kt(s)+" "+kt(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+kt(s-1)+" "+kt(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+kt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=oa(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+kt(rt.internal.getWidth(n))+" "+kt(rt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:rt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=rt.RadioButton.Circle.YesNormal,e.D[n]=rt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=oa(n);e.scope=n.scope;var t=[],r=rt.internal.getWidth(n)<=rt.internal.getHeight(n)?rt.internal.getWidth(n)/4:rt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=rt.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+al(rt.internal.getWidth(n)/2)+" "+al(rt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=oa(n);e.scope=n.scope;var t=[],r=rt.internal.getWidth(n)<=rt.internal.getHeight(n)?rt.internal.getWidth(n)/4:rt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*rt.internal.Bezier_C).toFixed(5)),s=Number((r*rt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+al(rt.internal.getWidth(n)/2)+" "+al(rt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+al(rt.internal.getWidth(n)/2)+" "+al(rt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=oa(n);e.scope=n.scope;var t=[],r=rt.internal.getWidth(n)<=rt.internal.getHeight(n)?rt.internal.getWidth(n)/4:rt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*rt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+al(rt.internal.getWidth(n)/2)+" "+al(rt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:rt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=rt.RadioButton.Cross.YesNormal,e.D[n]=rt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=oa(n);e.scope=n.scope;var t=[],r=rt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+kt(rt.internal.getWidth(n)-2)+" "+kt(rt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(kt(r.x1.x)+" "+kt(r.x1.y)+" m"),t.push(kt(r.x2.x)+" "+kt(r.x2.y)+" l"),t.push(kt(r.x4.x)+" "+kt(r.x4.y)+" m"),t.push(kt(r.x3.x)+" "+kt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=oa(n);e.scope=n.scope;var t=rt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+kt(rt.internal.getWidth(n))+" "+kt(rt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+kt(rt.internal.getWidth(n)-2)+" "+kt(rt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(kt(t.x1.x)+" "+kt(t.x1.y)+" m"),r.push(kt(t.x2.x)+" "+kt(t.x2.y)+" l"),r.push(kt(t.x4.x)+" "+kt(t.x4.y)+" m"),r.push(kt(t.x3.x)+" "+kt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=oa(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+kt(rt.internal.getWidth(n))+" "+kt(rt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};rt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=rt.internal.getWidth(n),t=rt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},rt.internal.getWidth=function(n){var e=0;return Dn(n)==="object"&&(e=BL(n.Rect[2])),e},rt.internal.getHeight=function(n){var e=0;return Dn(n)==="object"&&(e=BL(n.Rect[3])),e};IG=rr.addField=function(n){if(EG(this,n),!(n instanceof Ds))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};rr.AcroFormChoiceField=Zc,rr.AcroFormListBox=Jc,rr.AcroFormComboBox=Xc,rr.AcroFormEditBox=um,rr.AcroFormButton=Rr,rr.AcroFormPushButton=lm,rr.AcroFormRadioButton=ed,rr.AcroFormCheckBox=cm,rr.AcroFormTextField=cl,rr.AcroFormPasswordField=dm,rr.AcroFormAppearance=rt,rr.AcroForm={ChoiceField:Zc,ListBox:Jc,ComboBox:Xc,EditBox:um,Button:Rr,PushButton:lm,RadioButton:ed,CheckBox:cm,TextField:cl,PasswordField:dm,Appearance:rt},yt.AcroForm={ChoiceField:Zc,ListBox:Jc,ComboBox:Xc,EditBox:um,Button:Rr,PushButton:lm,RadioButton:ed,CheckBox:cm,TextField:cl,PasswordField:dm,Appearance:rt};CG=yt.AcroForm;(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(C,T){var M,B,K,ee,J,ne=e;if((T=T||e)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(Y(C))for(J in t)for(K=t[J],M=0;M<K.length;M+=1){for(ee=!0,B=0;B<K[M].length;B+=1)if(K[M][B]!==void 0&&K[M][B]!==C[B]){ee=!1;break}if(ee===!0){ne=J;break}}else for(J in t)for(K=t[J],M=0;M<K.length;M+=1){for(ee=!0,B=0;B<K[M].length;B+=1)if(K[M][B]!==void 0&&K[M][B]!==C.charCodeAt(B)){ee=!1;break}if(ee===!0){ne=J;break}}return ne===e&&T!==e&&(ne=T),ne},i=function C(T){for(var M=this.internal.write,B=this.internal.putStream,K=(0,this.internal.getFilters)();K.indexOf("FlateEncode")!==-1;)K.splice(K.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var ee=[];if(ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Image"}),ee.push({key:"Width",value:T.width}),ee.push({key:"Height",value:T.height}),T.colorSpace===D.INDEXED?ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(ee.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===D.DEVICE_CMYK&&ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ee.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&ee.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)){for(var J="",ne=0,se=T.transparency.length;ne<se;ne++)J+=T.transparency[ne]+" "+T.transparency[ne]+" ";ee.push({key:"Mask",value:"["+J+"]"})}T.sMask!==void 0&&ee.push({key:"SMask",value:T.objectId+1+" 0 R"});var ce=T.filter!==void 0?["/"+T.filter]:void 0;if(B({data:T.data,additionalKeyValues:ee,alreadyAppliedFilters:ce,objectId:T.objectId}),M("endobj"),"sMask"in T&&T.sMask!==void 0){var Ce="/Predictor "+T.predictor+" /Colors 1 /BitsPerComponent "+T.bitsPerComponent+" /Columns "+T.width,k={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:T.bitsPerComponent,decodeParameters:Ce,data:T.sMask};"filter"in T&&(k.filter=T.filter),C.call(this,k)}if(T.colorSpace===D.INDEXED){var W=this.internal.newObject();B({data:I(new Uint8Array(T.palette)),objectId:W}),M("endobj")}},o=function(){var C=this.internal.collections.addImage_images;for(var T in C)i.call(this,C[T])},s=function(){var C,T=this.internal.collections.addImage_images,M=this.internal.write;for(var B in T)M("/I"+(C=T[B]).index,C.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},u=function(){var C=this.internal.collections.addImage_images;return a.call(this),C},l=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(C){return typeof n["process"+C.toUpperCase()]=="function"},f=function(C){return Dn(C)==="object"&&C.nodeType===1},m=function(C,T){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var M=""+C.getAttribute("src");if(M.indexOf("data:image/")===0)return am(unescape(M).split("base64,").pop());var B=n.loadFile(M,!0);if(B!==void 0)return B}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var K;switch(T){case"PNG":K="image/png";break;case"WEBP":K="image/webp";break;case"JPEG":case"JPG":default:K="image/jpeg"}return am(C.toDataURL(K,1).split("base64,").pop())}},g=function(C){var T=this.internal.collections.addImage_images;if(T){for(var M in T)if(C===T[M].alias)return T[M]}},b=function(C,T,M){return C||T||(C=-96,T=-96),C<0&&(C=-1*M.width*72/C/this.internal.scaleFactor),T<0&&(T=-1*M.height*72/T/this.internal.scaleFactor),C===0&&(C=T*M.width/M.height),T===0&&(T=C*M.height/M.width),[C,T]},E=function(C,T,M,B,K,ee){var J=b.call(this,M,B,K),ne=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,ce=u.call(this);if(M=J[0],B=J[1],ce[K.index]=K,ee){ee*=Math.PI/180;var Ce=Math.cos(ee),k=Math.sin(ee),W=function(te){return te.toFixed(4)},G=[W(Ce),W(k),W(-1*k),W(Ce),0,0,"cm"]}this.internal.write("q"),ee?(this.internal.write([1,"0","0",1,ne(C),se(T+B),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([ne(M),"0","0",ne(B),"0","0","cm"].join(" "))):this.internal.write([ne(M),"0","0",ne(B),ne(C),se(T+B),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+K.index+" Do"),this.internal.write("Q")},D=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=n.__addimage__.sHashCode=function(C){var T,M,B=0;if(typeof C=="string")for(M=C.length,T=0;T<M;T++)B=(B<<5)-B+C.charCodeAt(T),B|=0;else if(Y(C))for(M=C.byteLength/2,T=0;T<M;T++)B=(B<<5)-B+C[T],B|=0;return B},F=n.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var T=!0;return C.length===0&&(T=!1),C.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(T=!1),T},z=n.__addimage__.extractImageFromDataUrl=function(C){var T=(C=C||"").split("base64,"),M=null;if(T.length===2){var B=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(T[0]);Array.isArray(B)&&(M={mimeType:B[1],charset:B[2],data:T[1]})}return M},H=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(C){return H()&&C instanceof ArrayBuffer};var Y=n.__addimage__.isArrayBufferView=function(C){return H()&&typeof Uint32Array<"u"&&(C instanceof Int8Array||C instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array)},R=n.__addimage__.binaryStringToUint8Array=function(C){for(var T=C.length,M=new Uint8Array(T),B=0;B<T;B++)M[B]=C.charCodeAt(B);return M},I=n.__addimage__.arrayBufferToBinaryString=function(C){for(var T="",M=Y(C)?C:new Uint8Array(C),B=0;B<M.length;B+=8192)T+=String.fromCharCode.apply(null,M.subarray(B,B+8192));return T};n.addImage=function(){var C,T,M,B,K,ee,J,ne,se;if(typeof arguments[1]=="number"?(T=e,M=arguments[1],B=arguments[2],K=arguments[3],ee=arguments[4],J=arguments[5],ne=arguments[6],se=arguments[7]):(T=arguments[1],M=arguments[2],B=arguments[3],K=arguments[4],ee=arguments[5],J=arguments[6],ne=arguments[7],se=arguments[8]),Dn(C=arguments[0])==="object"&&!f(C)&&"imageData"in C){var ce=C;C=ce.imageData,T=ce.format||T||e,M=ce.x||M||0,B=ce.y||B||0,K=ce.w||ce.width||K,ee=ce.h||ce.height||ee,J=ce.alias||J,ne=ce.compression||ne,se=ce.rotation||ce.angle||se}var Ce=this.internal.getFilters();if(ne===void 0&&Ce.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(M)||isNaN(B))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var k=N.call(this,C,T,J,ne);return E.call(this,M,B,K,ee,k,se),this};var N=function(C,T,M,B){var K,ee,J;if(typeof C=="string"&&r(C)===e){C=unescape(C);var ne=P(C,!1);(ne!==""||(ne=n.loadFile(C,!0))!==void 0)&&(C=ne)}if(f(C)&&(C=m(C,T)),T=r(C,T),!d(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((J=M)==null||J.length===0)&&(M=function(se){return typeof se=="string"||Y(se)?x(se):Y(se.data)?x(se.data):null}(C)),(K=g.call(this,M))||(H()&&(C instanceof Uint8Array||T==="RGBA"||(ee=C,C=R(C))),K=this["process"+T.toUpperCase()](C,l.call(this),M,function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in n.image_compression?se:w.NONE}(B),ee)),!K)throw new Error("An unknown error occurred whilst processing the image.");return K},P=n.__addimage__.convertBase64ToBinaryString=function(C,T){var M;T=typeof T!="boolean"||T;var B,K="";if(typeof C=="string"){B=(M=z(C))!==null?M.data:C;try{K=am(B)}catch(ee){if(T)throw F(B)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};n.getImageProperties=function(C){var T,M,B="";if(f(C)&&(C=m(C)),typeof C=="string"&&r(C)===e&&((B=P(C,!1))===""&&(B=n.loadFile(C)||""),C=B),M=r(C),!d(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(!H()||C instanceof Uint8Array||(C=R(C)),!(T=this["process"+M.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=M,T}})(yt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};yt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,d=!1,f=0;f<l.length&&!d;f++)switch((r=l[f]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<l.length;m++){r=l[m];var g=this.internal.pdfEscape,b=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),D=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(E.objId),x=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(w(r.contents))+")",o+=" /Popup "+D.objId+" 0 R",o+=" /P "+u.objId+" 0 R",o+=" /T ("+g(w(x))+") >>",E.content=o;var F=E.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+F,r.open&&(o+=" /Open true"),o+=" >>",D.content=o,this.internal.write(E.objId,"0 R",D.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var z=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(b(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+z+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var H=this.annotations._nameMap[r.options.name];r.options.pageNumber=H.page,r.options.top=H.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(b(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var Y=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+Y+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,s){var a=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:u(t),y:l(r),w:u(t+i),h:l(r+o)},options:s,type:"link"})},n.textWithLink=function(t,r,i,o){var s,a,u=this.getTextWidth(t),l=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var d=this.splitTextToSize(t,a).length;s=Math.ceil(l*d)}else a=u,s=l;return this.text(t,r,i,o),i+=.2*l,o.align==="center"&&(r-=u/2),o.align==="right"&&(r-=u),this.link(r,i-l,a,s,o),u},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(yt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=n.__arabicParser__.isArabicEndLetter=function(E){return s(E)&&o(E)&&e[E.charCodeAt(0)].length<=2},u=n.__arabicParser__.isArabicAlfLetter=function(E){return s(E)&&i.indexOf(E.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return s(E)&&o(E)&&e[E.charCodeAt(0)].length>=1};var l=n.__arabicParser__.arabicLetterHasFinalForm=function(E){return s(E)&&o(E)&&e[E.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(E){return s(E)&&o(E)&&e[E.charCodeAt(0)].length>=3};var d=n.__arabicParser__.arabicLetterHasMedialForm=function(E){return s(E)&&o(E)&&e[E.charCodeAt(0)].length==4},f=n.__arabicParser__.resolveLigatures=function(E){var D=0,w=t,x="",F=0;for(D=0;D<E.length;D+=1)w[E.charCodeAt(D)]!==void 0?(F++,typeof(w=w[E.charCodeAt(D)])=="number"&&(x+=String.fromCharCode(w),w=t,F=0),D===E.length-1&&(w=t,x+=E.charAt(D-(F-1)),D-=F-1,F=0)):(w=t,x+=E.charAt(D-F),D-=F,F=0);return x};n.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var m=n.__arabicParser__.getCorrectForm=function(E,D,w){return s(E)?o(E)===!1?-1:!l(E)||!s(D)&&!s(w)||!s(w)&&a(D)||a(E)&&!s(D)||a(E)&&u(D)||a(E)&&a(D)?0:d(E)&&s(D)&&!a(D)&&s(w)&&l(w)?3:a(E)||!s(w)?1:2:-1},g=function(E){var D=0,w=0,x=0,F="",z="",H="",Y=(E=E||"").split("\\s+"),R=[];for(D=0;D<Y.length;D+=1){for(R.push(""),w=0;w<Y[D].length;w+=1)F=Y[D][w],z=Y[D][w-1],H=Y[D][w+1],s(F)?(x=m(F,z,H),R[D]+=x!==-1?String.fromCharCode(e[F.charCodeAt(0)][x]):F):R[D]+=F;R[D]=f(R[D])}return R.join(" ")},b=n.__arabicParser__.processArabic=n.processArabic=function(){var E,D=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(D)){var x=0;for(w=[],x=0;x<D.length;x+=1)Array.isArray(D[x])?w.push([g(D[x][0]),D[x][1],D[x][2]]):w.push([g(D[x])]);E=w}else E=g(D);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};n.events.push(["preProcessText",b])}(yt.API),yt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(yt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(E){u=E}});var l=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(E){d=E}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(E){f=E}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(E){m=E}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(E){g=E}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(E){b=E}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(u){return r.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},n.getTextDimensions=function(u,l){r.call(this);var d=(l=l||{}).fontSize||this.getFontSize(),f=l.font||this.getFont(),m=l.scaleFactor||this.internal.scaleFactor,g=0,b=0,E=0,D=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var w=l.maxWidth;w>0?typeof u=="string"?u=this.splitTextToSize(u,w):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(F,z){return F.concat(D.splitTextToSize(z,w))},[])):u=Array.isArray(u)?u:[u];for(var x=0;x<u.length;x++)g<(E=this.getStringUnitWidth(u[x],{font:f})*d)&&(g=E);return g!==0&&(b=u.length),{w:g/=m,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var u=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var u;u=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var l=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return l.lineNumber!==void 0&&(l.lineNumber===u.lineNumber?(u.x=(l.x||0)+(l.width||0),u.y=l.y||0):l.y+l.height+u.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=f.top,g&&m&&(this.printHeaderRow(u.lineNumber,!0),u.y+=m[0].height)):u.y=l.y+l.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,t===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-d,u.y+d,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+d,{align:"center",baseline:"top",maxWidth:u.width-d-d}):this.text(u.text,u.x+d,u.y+d,{align:"left",baseline:"top",maxWidth:u.width-d-d})),this.internal.__cell__.lastCell=u,this};n.table=function(u,l,d,f,m){if(r.call(this),!d)throw new Error("No data for PDF table.");var g,b,E,D,w=[],x=[],F=[],z={},H={},Y=[],R=[],I=(m=m||{}).autoSize||!1,N=m.printHeaders!==!1,P=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,C=m.margins||Object.assign({width:this.getPageWidth()},e),T=typeof m.padding=="number"?m.padding:3,M=m.headerBackgroundColor||"#c8c8c8",B=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=P,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=B,this.setFontSize(P),f==null)x=w=Object.keys(d[0]),F=w.map(function(){return"left"});else if(Array.isArray(f)&&Dn(f[0])==="object")for(w=f.map(function(ce){return ce.name}),x=f.map(function(ce){return ce.prompt||ce.name||""}),F=f.map(function(ce){return ce.align||"left"}),g=0;g<f.length;g+=1)H[f[g].name]=f[g].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(x=w=f,F=w.map(function(){return"left"}));if(I||Array.isArray(f)&&typeof f[0]=="string")for(g=0;g<w.length;g+=1){for(z[D=w[g]]=d.map(function(ce){return ce[D]}),this.setFont(void 0,"bold"),Y.push(this.getTextDimensions(x[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=z[D],this.setFont(void 0,"normal"),E=0;E<b.length;E+=1)Y.push(this.getTextDimensions(b[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);H[D]=Math.max.apply(null,Y)+T+T,Y=[]}if(N){var K={};for(g=0;g<w.length;g+=1)K[w[g]]={},K[w[g]].text=x[g],K[w[g]].align=F[g];var ee=a.call(this,K,H);R=w.map(function(ce){return new o(u,l,H[ce],ee,K[ce].text,void 0,K[ce].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var J=f.reduce(function(ce,Ce){return ce[Ce.name]=Ce.align,ce},{});for(g=0;g<d.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:d[g]},this);var ne=a.call(this,d[g],H);for(E=0;E<w.length;E+=1){var se=d[g][w[E]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:E,data:se},this),s.call(this,new o(u,l,H[w[E]],ne,se,g+2,J[w[E]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=l,this};var a=function(u,l){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(u).map(function(g){var b=u[g];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,l[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*f/m+d+d},this).reduce(function(g,b){return Math.max(g,b)},0)};n.setTableHeaderRow=function(u){r.call(this),this.internal.__cell__.tableHeaderRow=u},n.printHeaderRow=function(u,l){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),l&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=u;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(b)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),t=!1}}(yt.API);sO={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},aO=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],OC=oO(aO),uO=[100,200,300,400,500,600,700,800,900],SG=oO(uO);DG={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},qL={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};NC=["times"];(function(n){var e,t,r,i,o,s,a,u,l,d=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new u,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new s,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new s,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,u=this.internal.Matrix,l=new d}]);var f=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=k;Object.defineProperty(this,"pdf",{get:function(){return W}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(Se){G=!!Se}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(Se){te=!!Se}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Se){isNaN(Se)||(ae=Se)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(Se){isNaN(Se)||(fe=Se)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(Se){var X;typeof Se=="number"?X=[Se,Se,Se,Se]:((X=new Array(4))[0]=Se[0],X[1]=Se.length>=2?Se[1]:X[0],X[2]=Se.length>=3?Se[2]:X[0],X[3]=Se.length>=4?Se[3]:X[1]),l.margin=X}});var ye=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ye},set:function(Se){ye=Se}});var _e=0;Object.defineProperty(this,"lastBreak",{get:function(){return _e},set:function(Se){_e=Se}});var Oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Oe},set:function(Se){Oe=Se}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(Se){Se instanceof d&&(l=Se)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(Se){l.path=Se}});var ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return ke},set:function(Se){ke=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var X;X=m(Se),this.ctx.fillStyle=X.style,this.ctx.isFillTransparent=X.a===0,this.ctx.fillOpacity=X.a,this.pdf.setFillColor(X.r,X.g,X.b,{a:X.a}),this.pdf.setTextColor(X.r,X.g,X.b,{a:X.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var X=m(Se);this.ctx.strokeStyle=X.style,this.ctx.isStrokeTransparent=X.a===0,this.ctx.strokeOpacity=X.a,X.a===0?this.pdf.setDrawColor(255,255,255):(X.a,this.pdf.setDrawColor(X.r,X.g,X.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var ze=null;function qe(Se,X){if(ze===null){var St=function(ot){var Le=[];return Object.keys(ot).forEach(function(Be){ot[Be].forEach(function(Ke){var $e=null;switch(Ke){case"bold":$e={family:Be,weight:"bold"};break;case"italic":$e={family:Be,style:"italic"};break;case"bolditalic":$e={family:Be,weight:"bold",style:"italic"};break;case"":case"normal":$e={family:Be}}$e!==null&&($e.ref={name:Be,style:Ke},Le.push($e))})}),Le}(Se.getFontList());ze=function(ot){for(var Le={},Be=0;Be<ot.length;++Be){var Ke=FC(ot[Be]),$e=Ke.family,lt=Ke.stretch,Et=Ke.style,Tt=Ke.weight;Le[$e]=Le[$e]||{},Le[$e][lt]=Le[$e][lt]||{},Le[$e][lt][Et]=Le[$e][lt][Et]||{},Le[$e][lt][Et][Tt]=Ke}return Le}(St.concat(X))}return ze}var ft=null;Object.defineProperty(this,"fontFaces",{get:function(){return ft},set:function(Se){ze=null,ft=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var X;if(this.ctx.font=Se,(X=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var St=X[1],ot=(X[2],X[3]),Le=X[4],Be=(X[5],X[6]),Ke=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Le)[2];Le=Math.floor(Ke==="px"?parseFloat(Le)*this.pdf.internal.scaleFactor:Ke==="em"?parseFloat(Le)*this.pdf.getFontSize():parseFloat(Le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Le);var $e=function(gt){var Ht,Ye,Lr=[],Gt=gt.trim();if(Gt==="")return NC;if(Gt in qL)return[qL[Gt]];for(;Gt!=="";){switch(Ye=null,Ht=(Gt=zL(Gt)).charAt(0)){case'"':case"'":Ye=TG(Gt.substring(1),Ht);break;default:Ye=xG(Gt)}if(Ye===null||(Lr.push(Ye[0]),(Gt=zL(Ye[1]))!==""&&Gt.charAt(0)!==","))return NC;Gt=Gt.replace(/^,/,"")}return Lr}(Be);if(this.fontFaces){var lt=AG(qe(this.pdf,this.fontFaces),$e.map(function(gt){return{family:gt,stretch:"normal",weight:ot,style:St}}));this.pdf.setFont(lt.ref.name,lt.ref.style)}else{var Et="";(ot==="bold"||parseInt(ot,10)>=700||St==="bold")&&(Et="bold"),St==="italic"&&(Et+="italic"),Et.length===0&&(Et="normal");for(var Tt="",Vt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},_t=0;_t<$e.length;_t++){if(this.pdf.internal.getFont($e[_t],Et,{noFallback:!0,disableWarning:!0})!==void 0){Tt=$e[_t];break}if(Et==="bolditalic"&&this.pdf.internal.getFont($e[_t],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Tt=$e[_t],Et="bold";else if(this.pdf.internal.getFont($e[_t],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Tt=$e[_t],Et="normal";break}}if(Tt===""){for(var Rt=0;Rt<$e.length;Rt++)if(Vt[$e[Rt]]){Tt=Vt[$e[Rt]];break}}Tt=Tt===""?"Times":Tt,this.pdf.setFont(Tt,Et)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,Ce.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,Ce.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};f.prototype.setLineDash=function(k){this.lineDash=k},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){z.call(this,"fill",!1)},f.prototype.stroke=function(){z.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(k,W){if(isNaN(k)||isNaN(W))throw Pn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new s(k,W));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new s(k,W)},f.prototype.closePath=function(){var k=new s(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&Dn(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){k=new s(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(k.x,k.y)},f.prototype.lineTo=function(k,W){if(isNaN(k)||isNaN(W))throw Pn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new s(k,W));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new s(G.x,G.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),z.call(this,null,!0)},f.prototype.quadraticCurveTo=function(k,W,G,te){if(isNaN(G)||isNaN(te)||isNaN(k)||isNaN(W))throw Pn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new s(G,te)),fe=this.ctx.transform.applyToPoint(new s(k,W));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new s(ae.x,ae.y)},f.prototype.bezierCurveTo=function(k,W,G,te,ae,fe){if(isNaN(ae)||isNaN(fe)||isNaN(k)||isNaN(W)||isNaN(G)||isNaN(te))throw Pn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ye=this.ctx.transform.applyToPoint(new s(ae,fe)),_e=this.ctx.transform.applyToPoint(new s(k,W)),Oe=this.ctx.transform.applyToPoint(new s(G,te));this.path.push({type:"bct",x1:_e.x,y1:_e.y,x2:Oe.x,y2:Oe.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new s(ye.x,ye.y)},f.prototype.arc=function(k,W,G,te,ae,fe){if(isNaN(k)||isNaN(W)||isNaN(G)||isNaN(te)||isNaN(ae))throw Pn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var ye=this.ctx.transform.applyToPoint(new s(k,W));k=ye.x,W=ye.y;var _e=this.ctx.transform.applyToPoint(new s(0,G)),Oe=this.ctx.transform.applyToPoint(new s(0,0));G=Math.sqrt(Math.pow(_e.x-Oe.x,2)+Math.pow(_e.y-Oe.y,2))}Math.abs(ae-te)>=2*Math.PI&&(te=0,ae=2*Math.PI),this.path.push({type:"arc",x:k,y:W,radius:G,startAngle:te,endAngle:ae,counterclockwise:fe})},f.prototype.arcTo=function(k,W,G,te,ae){throw new Error("arcTo not implemented.")},f.prototype.rect=function(k,W,G,te){if(isNaN(k)||isNaN(W)||isNaN(G)||isNaN(te))throw Pn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,W),this.lineTo(k+G,W),this.lineTo(k+G,W+te),this.lineTo(k,W+te),this.lineTo(k,W),this.lineTo(k+G,W),this.lineTo(k,W)},f.prototype.fillRect=function(k,W,G,te){if(isNaN(k)||isNaN(W)||isNaN(G)||isNaN(te))throw Pn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,W,G,te),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},f.prototype.strokeRect=function(k,W,G,te){if(isNaN(k)||isNaN(W)||isNaN(G)||isNaN(te))throw Pn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(k,W,G,te),this.stroke())},f.prototype.clearRect=function(k,W,G,te){if(isNaN(k)||isNaN(W)||isNaN(G)||isNaN(te))throw Pn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,W,G,te))},f.prototype.save=function(k){k=typeof k!="boolean"||k;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(W),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(k){var W,G,te,ae;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))W=0,G=0,te=0,ae=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(fe!==null)W=parseInt(fe[1]),G=parseInt(fe[2]),te=parseInt(fe[3]),ae=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)W=parseInt(fe[1]),G=parseInt(fe[2]),te=parseInt(fe[3]),ae=parseFloat(fe[4]);else{if(ae=1,typeof k=="string"&&k.charAt(0)!=="#"){var ye=new XL(k);k=ye.ok?ye.toHex():"#000000"}k.length===4?(W=k.substring(1,2),W+=W,G=k.substring(2,3),G+=G,te=k.substring(3,4),te+=te):(W=k.substring(1,3),G=k.substring(3,5),te=k.substring(5,7)),W=parseInt(W,16),G=parseInt(G,16),te=parseInt(te,16)}}return{r:W,g:G,b:te,a:ae,style:k}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(k,W,G,te){if(isNaN(W)||isNaN(G)||typeof k!="string")throw Pn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!g.call(this)){var ae=ne(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;T.call(this,{text:k,x:W,y:G,scale:fe,angle:ae,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(k,W,G,te){if(isNaN(W)||isNaN(G)||typeof k!="string")throw Pn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){te=isNaN(te)?void 0:te;var ae=ne(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;T.call(this,{text:k,x:W,y:G,scale:fe,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(k){if(typeof k!="string")throw Pn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,G=this.pdf.internal.scaleFactor,te=W.internal.getFontSize(),ae=W.getStringUnitWidth(k)*te/W.internal.scaleFactor,fe=function(ye){var _e=(ye=ye||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _e}}),this};return new fe({width:ae*=Math.round(96*G/72*1e4)/1e4})},f.prototype.scale=function(k,W){if(isNaN(k)||isNaN(W))throw Pn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new u(k,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.rotate=function(k){if(isNaN(k))throw Pn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new u(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},f.prototype.translate=function(k,W){if(isNaN(k)||isNaN(W))throw Pn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new u(1,0,0,1,k,W);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.transform=function(k,W,G,te,ae,fe){if(isNaN(k)||isNaN(W)||isNaN(G)||isNaN(te)||isNaN(ae)||isNaN(fe))throw Pn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ye=new u(k,W,G,te,ae,fe);this.ctx.transform=this.ctx.transform.multiply(ye)},f.prototype.setTransform=function(k,W,G,te,ae,fe){k=isNaN(k)?1:k,W=isNaN(W)?0:W,G=isNaN(G)?0:G,te=isNaN(te)?1:te,ae=isNaN(ae)?0:ae,fe=isNaN(fe)?0:fe,this.ctx.transform=new u(k,W,G,te,ae,fe)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(k,W,G,te,ae,fe,ye,_e,Oe){var ke=this.pdf.getImageProperties(k),ze=1,qe=1,ft=1,Se=1;te!==void 0&&_e!==void 0&&(ft=_e/te,Se=Oe/ae,ze=ke.width/te*_e/te,qe=ke.height/ae*Oe/ae),fe===void 0&&(fe=W,ye=G,W=0,G=0),te!==void 0&&_e===void 0&&(_e=te,Oe=ae),te===void 0&&_e===void 0&&(_e=ke.width,Oe=ke.height);for(var X,St=this.ctx.transform.decompose(),ot=ne(St.rotate.shx),Le=new u,Be=(Le=(Le=(Le=Le.multiply(St.translate)).multiply(St.skew)).multiply(St.scale)).applyToRectangle(new a(fe-W*ft,ye-G*Se,te*ze,ae*qe)),Ke=D.call(this,Be),$e=[],lt=0;lt<Ke.length;lt+=1)$e.indexOf(Ke[lt])===-1&&$e.push(Ke[lt]);if(F($e),this.autoPaging)for(var Et=$e[0],Tt=$e[$e.length-1],Vt=Et;Vt<Tt+1;Vt++){this.pdf.setPage(Vt);var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rt=Vt===1?this.posY+this.margin[0]:this.margin[0],gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ye=Vt===1?0:gt+(Vt-2)*Ht;if(this.ctx.clip_path.length!==0){var Lr=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(X,this.posX+this.margin[3],-Ye+Rt+this.ctx.prevPageLastElemOffset),H.call(this,"fill",!0),this.path=Lr}var Gt=JSON.parse(JSON.stringify(Be));Gt=x([Gt],this.posX+this.margin[3],-Ye+Rt+this.ctx.prevPageLastElemOffset)[0];var Mi=(Vt>Et||Vt<Tt)&&E.call(this);Mi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,Ht,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",Gt.x,Gt.y,Gt.w,Gt.h,null,null,ot),Mi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(k,"JPEG",Be.x,Be.y,Be.w,Be.h,null,null,ot)};var D=function(k,W,G){var te=[];W=W||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":te.push(Math.floor((k.y+ae)/G)+1);break;case"arc":te.push(Math.floor((k.y+ae-k.radius)/G)+1),te.push(Math.floor((k.y+ae+k.radius)/G)+1);break;case"qct":var fe=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);te.push(Math.floor((fe.y+ae)/G)+1),te.push(Math.floor((fe.y+fe.h+ae)/G)+1);break;case"bct":var ye=ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);te.push(Math.floor((ye.y+ae)/G)+1),te.push(Math.floor((ye.y+ye.h+ae)/G)+1);break;case"rect":te.push(Math.floor((k.y+ae)/G)+1),te.push(Math.floor((k.y+k.h+ae)/G)+1)}for(var _e=0;_e<te.length;_e+=1)for(;this.pdf.internal.getNumberOfPages()<te[_e];)w.call(this);return te},w=function(){var k=this.fillStyle,W=this.strokeStyle,G=this.font,te=this.lineCap,ae=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=W,this.font=G,this.lineCap=te,this.lineWidth=ae,this.lineJoin=fe},x=function(k,W,G){for(var te=0;te<k.length;te++)switch(k[te].type){case"bct":k[te].x2+=W,k[te].y2+=G;case"qct":k[te].x1+=W,k[te].y1+=G;case"mt":case"lt":case"arc":default:k[te].x+=W,k[te].y+=G}return k},F=function(k){return k.sort(function(W,G){return W-G})},z=function(k,W){for(var G,te,ae=this.fillStyle,fe=this.strokeStyle,ye=this.lineCap,_e=this.lineWidth,Oe=Math.abs(_e*this.ctx.transform.scaleX),ke=this.lineJoin,ze=JSON.parse(JSON.stringify(this.path)),qe=JSON.parse(JSON.stringify(this.path)),ft=[],Se=0;Se<qe.length;Se++)if(qe[Se].x!==void 0)for(var X=D.call(this,qe[Se]),St=0;St<X.length;St+=1)ft.indexOf(X[St])===-1&&ft.push(X[St]);for(var ot=0;ot<ft.length;ot++)for(;this.pdf.internal.getNumberOfPages()<ft[ot];)w.call(this);if(F(ft),this.autoPaging)for(var Le=ft[0],Be=ft[ft.length-1],Ke=Le;Ke<Be+1;Ke++){this.pdf.setPage(Ke),this.fillStyle=ae,this.strokeStyle=fe,this.lineCap=ye,this.lineWidth=Oe,this.lineJoin=ke;var $e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],lt=Ke===1?this.posY+this.margin[0]:this.margin[0],Et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Tt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Vt=Ke===1?0:Et+(Ke-2)*Tt;if(this.ctx.clip_path.length!==0){var _t=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(G,this.posX+this.margin[3],-Vt+lt+this.ctx.prevPageLastElemOffset),H.call(this,k,!0),this.path=_t}if(te=JSON.parse(JSON.stringify(ze)),this.path=x(te,this.posX+this.margin[3],-Vt+lt+this.ctx.prevPageLastElemOffset),W===!1||Ke===0){var Rt=(Ke>Le||Ke<Be)&&E.call(this);Rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,Tt,null).clip().discardPath()),H.call(this,k,W),Rt&&this.pdf.restoreGraphicsState()}this.lineWidth=_e}else this.lineWidth=Oe,H.call(this,k,W),this.lineWidth=_e;this.path=ze},H=function(k,W){if((k!=="stroke"||W||!b.call(this))&&(k==="stroke"||W||!g.call(this))){for(var G,te,ae=[],fe=this.path,ye=0;ye<fe.length;ye++){var _e=fe[ye];switch(_e.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:_e,deltas:[],abs:[]});break;case"lt":var Oe=ae.length;if(fe[ye-1]&&!isNaN(fe[ye-1].x)&&(G=[_e.x-fe[ye-1].x,_e.y-fe[ye-1].y],Oe>0)){for(;Oe>=0;Oe--)if(ae[Oe-1].close!==!0&&ae[Oe-1].begin!==!0){ae[Oe-1].deltas.push(G),ae[Oe-1].abs.push(_e);break}}break;case"bct":G=[_e.x1-fe[ye-1].x,_e.y1-fe[ye-1].y,_e.x2-fe[ye-1].x,_e.y2-fe[ye-1].y,_e.x-fe[ye-1].x,_e.y-fe[ye-1].y],ae[ae.length-1].deltas.push(G);break;case"qct":var ke=fe[ye-1].x+2/3*(_e.x1-fe[ye-1].x),ze=fe[ye-1].y+2/3*(_e.y1-fe[ye-1].y),qe=_e.x+2/3*(_e.x1-_e.x),ft=_e.y+2/3*(_e.y1-_e.y),Se=_e.x,X=_e.y;G=[ke-fe[ye-1].x,ze-fe[ye-1].y,qe-fe[ye-1].x,ft-fe[ye-1].y,Se-fe[ye-1].x,X-fe[ye-1].y],ae[ae.length-1].deltas.push(G);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(_e)}}te=W?null:k==="stroke"?"stroke":"fill";for(var St=!1,ot=0;ot<ae.length;ot++)if(ae[ot].arc)for(var Le=ae[ot].abs,Be=0;Be<Le.length;Be++){var Ke=Le[Be];Ke.type==="arc"?I.call(this,Ke.x,Ke.y,Ke.radius,Ke.startAngle,Ke.endAngle,Ke.counterclockwise,void 0,W,!St):M.call(this,Ke.x,Ke.y),St=!0}else if(ae[ot].close===!0)this.pdf.internal.out("h"),St=!1;else if(ae[ot].begin!==!0){var $e=ae[ot].start.x,lt=ae[ot].start.y;B.call(this,ae[ot].deltas,$e,lt),St=!0}te&&N.call(this,te),W&&P.call(this)}},Y=function(k){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-G;case"top":return k+W-G;case"hanging":return k+W-2*G;case"middle":return k+W/2-G;case"ideographic":return k;case"alphabetic":default:return k}},R=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(W,G){this.colorStops.push([W,G])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(k,W,G,te,ae,fe,ye,_e,Oe){for(var ke=ee.call(this,G,te,ae,fe),ze=0;ze<ke.length;ze++){var qe=ke[ze];ze===0&&(Oe?C.call(this,qe.x1+k,qe.y1+W):M.call(this,qe.x1+k,qe.y1+W)),K.call(this,k,W,qe.x2,qe.y2,qe.x3,qe.y3,qe.x4,qe.y4)}_e?P.call(this):N.call(this,ye)},N=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},P=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(k,W){this.pdf.internal.out(t(k)+" "+r(W)+" m")},T=function(k){var W;switch(k.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var G=this.pdf.getTextDimensions(k.text),te=Y.call(this,k.y),ae=R.call(this,te)-G.h,fe=this.ctx.transform.applyToPoint(new s(k.x,te)),ye=this.ctx.transform.decompose(),_e=new u;_e=(_e=(_e=_e.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale);for(var Oe,ke,ze,qe=this.ctx.transform.applyToRectangle(new a(k.x,te,G.w,G.h)),ft=_e.applyToRectangle(new a(k.x,ae,G.w,G.h)),Se=D.call(this,ft),X=[],St=0;St<Se.length;St+=1)X.indexOf(Se[St])===-1&&X.push(Se[St]);if(F(X),this.autoPaging)for(var ot=X[0],Le=X[X.length-1],Be=ot;Be<Le+1;Be++){this.pdf.setPage(Be);var Ke=Be===1?this.posY+this.margin[0]:this.margin[0],$e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[2],Et=lt-this.margin[0],Tt=this.pdf.internal.pageSize.width-this.margin[1],Vt=Tt-this.margin[3],_t=Be===1?0:$e+(Be-2)*Et;if(this.ctx.clip_path.length!==0){var Rt=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Oe,this.posX+this.margin[3],-1*_t+Ke),H.call(this,"fill",!0),this.path=Rt}var gt=x([JSON.parse(JSON.stringify(ft))],this.posX+this.margin[3],-_t+Ke+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*k.scale),ze=this.lineWidth,this.lineWidth=ze*k.scale);var Ht=this.autoPaging!=="text";if(Ht||gt.y+gt.h<=lt){if(Ht||gt.y>=Ke&&gt.x<=Tt){var Ye=Ht?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||Tt-gt.x)[0],Lr=x([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-_t+Ke+this.ctx.prevPageLastElemOffset)[0],Gt=Ht&&(Be>ot||Be<Le)&&E.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,Et,null).clip().discardPath()),this.pdf.text(Ye,Lr.x,Lr.y,{angle:k.angle,align:W,renderingMode:k.renderingMode}),Gt&&this.pdf.restoreGraphicsState()}}else gt.y<lt&&(this.ctx.prevPageLastElemOffset+=lt-gt.y);k.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=ze)}else k.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*k.scale),ze=this.lineWidth,this.lineWidth=ze*k.scale),this.pdf.text(k.text,fe.x+this.posX,fe.y+this.posY,{angle:k.angle,align:W,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=ze)},M=function(k,W,G,te){G=G||0,te=te||0,this.pdf.internal.out(t(k+G)+" "+r(W+te)+" l")},B=function(k,W,G){return this.pdf.lines(k,W,G,null,null)},K=function(k,W,G,te,ae,fe,ye,_e){this.pdf.internal.out([e(i(G+k)),e(o(te+W)),e(i(ae+k)),e(o(fe+W)),e(i(ye+k)),e(o(_e+W)),"c"].join(" "))},ee=function(k,W,G,te){for(var ae=2*Math.PI,fe=Math.PI/2;W>G;)W-=ae;var ye=Math.abs(G-W);ye<ae&&te&&(ye=ae-ye);for(var _e=[],Oe=te?-1:1,ke=W;ye>1e-5;){var ze=ke+Oe*Math.min(ye,fe);_e.push(J.call(this,k,ke,ze)),ye-=Math.abs(ze-ke),ke=ze}return _e},J=function(k,W,G){var te=(G-W)/2,ae=k*Math.cos(te),fe=k*Math.sin(te),ye=ae,_e=-fe,Oe=ye*ye+_e*_e,ke=Oe+ye*ae+_e*fe,ze=4/3*(Math.sqrt(2*Oe*ke)-ke)/(ye*fe-_e*ae),qe=ye-ze*_e,ft=_e+ze*ye,Se=qe,X=-ft,St=te+W,ot=Math.cos(St),Le=Math.sin(St);return{x1:k*Math.cos(W),y1:k*Math.sin(W),x2:qe*ot-ft*Le,y2:qe*Le+ft*ot,x3:Se*ot-X*Le,y3:Se*Le+X*ot,x4:k*Math.cos(G),y4:k*Math.sin(G)}},ne=function(k){return 180*k/Math.PI},se=function(k,W,G,te,ae,fe){var ye=k+.5*(G-k),_e=W+.5*(te-W),Oe=ae+.5*(G-ae),ke=fe+.5*(te-fe),ze=Math.min(k,ae,ye,Oe),qe=Math.max(k,ae,ye,Oe),ft=Math.min(W,fe,_e,ke),Se=Math.max(W,fe,_e,ke);return new a(ze,ft,qe-ze,Se-ft)},ce=function(k,W,G,te,ae,fe,ye,_e){var Oe,ke,ze,qe,ft,Se,X,St,ot,Le,Be,Ke,$e,lt,Et=G-k,Tt=te-W,Vt=ae-G,_t=fe-te,Rt=ye-ae,gt=_e-fe;for(ke=0;ke<41;ke++)ot=(X=(ze=k+(Oe=ke/40)*Et)+Oe*((ft=G+Oe*Vt)-ze))+Oe*(ft+Oe*(ae+Oe*Rt-ft)-X),Le=(St=(qe=W+Oe*Tt)+Oe*((Se=te+Oe*_t)-qe))+Oe*(Se+Oe*(fe+Oe*gt-Se)-St),ke==0?(Be=ot,Ke=Le,$e=ot,lt=Le):(Be=Math.min(Be,ot),Ke=Math.min(Ke,Le),$e=Math.max($e,ot),lt=Math.max(lt,Le));return new a(Math.round(Be),Math.round(Ke),Math.round($e-Be),Math.round(lt-Ke))},Ce=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,W,G=(k=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:W}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(yt.API),function(n){var e=function(o){var s,a,u,l,d,f,m,g,b,E;for(/[^\x00-\xFF]/.test(o),a=[],u=0,l=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;l>u;u+=4)(d=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(f=(d=((d=((d=((d=(d-(E=d%85))/85)-(b=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)%85,a.push(f+33,m+33,g+33,b+33,E+33)):a.push(122);return function(D,w){for(var x=w;x>0;x--)D.pop()}(a,s.length),String.fromCharCode.apply(String,a)+"~>"},t=function(o){var s,a,u,l,d,f=String,m="length",g=255,b="charCodeAt",E="slice",D="replace";for(o[E](-2),o=o[E](0,-2)[D](/\s/g,"")[D]("z","!!!!!"),u=[],l=0,d=(o+=s="uuuuu"[E](o[m]%5||5))[m];d>l;l+=5)a=52200625*(o[b](l)-33)+614125*(o[b](l+1)-33)+7225*(o[b](l+2)-33)+85*(o[b](l+3)-33)+(o[b](l+4)-33),u.push(g&a>>24,g&a>>16,g&a>>8,g&a);return function(w,x){for(var F=x;F>0;F--)w.pop()}(u,s[m]),f.fromCharCode.apply(f,u)},r=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var a="",u=0;u<o.length;u+=2)a+=String.fromCharCode("0x"+(o[u]+o[u+1]));return a},i=function(o){for(var s=new Uint8Array(o.length),a=o.length;a--;)s[a]=o.charCodeAt(a);return o=(s=O_(s)).reduce(function(u,l){return u+String.fromCharCode(l)},"")};n.processDataByFilters=function(o,s){var a=0,u=o||"",l=[];for(typeof(s=s||[])=="string"&&(s=[s]),a=0;a<s.length;a+=1)switch(s[a]){case"ASCII85Decode":case"/ASCII85Decode":u=t(u),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=r(u),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[a]+'" is not implemented')}return{data:u,reverseChain:l.reverse().join(" ")}}}(yt.API),function(n){n.loadFile=function(e,t,r){return function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=function(u,l,d){var f=new XMLHttpRequest,m=0,g=function(b){var E=b.length,D=[],w=String.fromCharCode;for(m=0;m<E;m+=1)D.push(w(255&b.charCodeAt(m)));return D.join("")};if(f.open("GET",u,!l),f.overrideMimeType("text/plain; charset=x-user-defined"),l===!1&&(f.onload=function(){f.status===200?d(g(this.responseText)):d(void 0)}),f.send(null),l&&f.status===200)return g(f.responseText)}(i,o,s)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(yt.API),function(n){function e(){return(bt.html2canvas?Promise.resolve(bt.html2canvas):import("./chunk-R7WZ3DQD.js")).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function t(){return(bt.DOMPurify?Promise.resolve(bt.DOMPurify):import("./chunk-CCPSANPE.js")).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var r=function(s){var a=Dn(s);return a==="undefined"?"undefined":a==="string"||s instanceof String?"string":a==="number"||s instanceof Number?"number":a==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(s,a){var u=document.createElement(s);for(var l in a.className&&(u.className=a.className),a.innerHTML&&a.dompurify&&(u.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)u.style[l]=a.style[l];return u},o=function s(a){var u=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),l=s.convert(Promise.resolve(),u);return l=(l=l.setProgress(1,s,1,[s])).set(a)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,a){return s.__proto__=a||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,a){return this.then(function(){switch(a=a||function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(t).then(function(u){return this.set({src:i("div",{innerHTML:s,dompurify:u})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function u(l,d){for(var f=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),m=l.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||f.appendChild(u(m,d));return l.nodeType===1&&(l.nodeName==="CANVAS"?(f.width=l.width,f.height=l.height,f.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(f.value=l.value),f.addEventListener("load",function(){f.scrollTop=l.scrollTop,f.scrollLeft=l.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(a){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,a(this.prop.container,u)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(a){var u=this.opt.jsPDF,l=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=l,l)for(var m=0;m<l.length;++m){var g=l[m],b=g.src.find(function(E){return E.format==="truetype"});b&&u.addFont(b.url,g.ref.name,g.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,u.context2d.save(!0),a(this.prop.container,f)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(s,a,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(s,a):this.outputPdf(s,a)},o.prototype.outputPdf=function(s,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,a)})},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(s){if(r(s)!=="object")return this;var a=Object.keys(s||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=s[u]};switch(u){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[u]=s[u]}}},this);return this.then(function(){return this.thenList(a)})},o.prototype.get=function(s,a){return this.then(function(){var u=s in o.template.prop?this.prop[s]:this.opt[s];return a?a(u):u})},o.prototype.setMargin=function(s){return this.then(function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},o.prototype.setPageSize=function(s){function a(u,l){return Math.floor(u*l/72*96)}return this.then(function(){(s=s||yt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:a(s.inner.width,s.k),height:a(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},o.prototype.setProgress=function(s,a,u,l){return s!=null&&(this.progress.val=s),a!=null&&(this.progress.state=a),u!=null&&(this.progress.n=u),l!=null&&(this.progress.stack=l),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,a,u,l){return this.setProgress(s?this.progress.val+s:null,a||null,u?this.progress.n+u:null,l?this.progress.stack.concat(l):null)},o.prototype.then=function(s,a){var u=this;return this.thenCore(s,a,function(l,d){return u.updateProgress(null,null,1,[l]),Promise.prototype.then.call(this,function(f){return u.updateProgress(null,l),f}).then(l,d).then(function(f){return u.updateProgress(1),f})})},o.prototype.thenCore=function(s,a,u){u=u||Promise.prototype.then,s&&(s=s.bind(this)),a&&(a=a.bind(this));var l=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),d=u.call(l,s,a);return o.convert(d,this.__proto__)},o.prototype.thenExternal=function(s,a){return Promise.prototype.then.call(this,s,a)},o.prototype.thenList=function(s){var a=this;return s.forEach(function(u){a=a.thenCore(u)}),a},o.prototype.catch=function(s){s&&(s=s.bind(this));var a=Promise.prototype.catch.call(this,s);return o.convert(a,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then(function(){throw new Error(s)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,yt.getPageSize=function(s,a,u){if(Dn(s)==="object"){var l=s;s=l.orientation,a=l.unit||a,u=l.format||u}a=a||"mm",u=u||"a4",s=(""+(s||"P")).toLowerCase();var d,f=(""+u).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var g,b=0,E=0;if(m.hasOwnProperty(f))b=m[f][1]/d,E=m[f][0]/d;else try{b=u[1],E=u[0]}catch{throw new Error("Invalid format: "+u)}if(s==="p"||s==="portrait")s="p",E>b&&(g=E,E=b,b=g);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",b>E&&(g=E,E=b,b=g)}return{width:E,height:b,unit:a,k:d,orientation:s}},n.html=function(s,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(FC):null;var u=new o(a);return a.worker?u:u.from(s).doCallback()}}(yt.API),yt.API.addJS=function(n){return WL=n,this.internal.events.subscribe("postPutResources",function(){j_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(j_+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),$L=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+WL+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){j_!==void 0&&$L!==void 0&&this.internal.out("/Names <</JavaScript "+j_+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var u=a[1];t.internal.newObjectDeferredBegin(u,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,d=[];for(o=0;o<l;o++){var f=t.internal.newObject();d.push(f);var m=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<d.length;o++)t.internal.write("(page_"+(o+1)+")"+d[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+g+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var u=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var l=0;l<r.children.length;l++)this.renderItems(r.children[l])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])}(yt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,s,a){var u,l=this.decode.DCT_DECODE,d=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(u=function(f){for(var m,g=256*f.charCodeAt(4)+f.charCodeAt(5),b=f.length,E={width:0,height:0,numcomponents:1},D=4;D<b;D+=2){if(D+=g,e.indexOf(f.charCodeAt(D+1))!==-1){m=256*f.charCodeAt(D+5)+f.charCodeAt(D+6),E={width:256*f.charCodeAt(D+7)+f.charCodeAt(D+8),height:m,numcomponents:f.charCodeAt(D+9)};break}g=256*f.charCodeAt(D+2)+f.charCodeAt(D+3)}return E}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:t,width:u.width,height:u.height,colorSpace:a,bitsPerComponent:8,filter:l,index:r,alias:i}}return d}}(yt.API);NG=function(){var n,e,t;function r(o){var s,a,u,l,d,f,m,g,b,E,D,w,x,F;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(s=this.readUInt32(),b=function(){var z,H;for(H=[],z=0;z<4;++z)H.push(String.fromCharCode(this.data[this.pos++]));return H}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),l=this.readUInt16()||100,f.delay=1e3*d/l,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,s-=4),o=f?.data||this.imgData,w=0;0<=s?w<s:w>s;0<=s?++w:--w)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((E=u-this.transparency.indexed.length)>0)for(x=0;0<=E?x<E:x>E;0<=E?++x:--x)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":m=(D=this.read(s)).indexOf(0),g=String.fromCharCode.apply(String,D.slice(0,m)),this.text[g]=String.fromCharCode.apply(String,D.slice(m+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(F=this.colorType)===4||F===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var s,a;for(a=[],s=0;0<=o?s<o:s>o;0<=o?++s:--s)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var s=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*s),u=0,l=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function d(f,m,g,b){var E,D,w,x,F,z,H,Y,R,I,N,P,C,T,M,B,K,ee,J,ne,se,ce=Math.ceil((l.width-f)/g),Ce=Math.ceil((l.height-m)/b),k=l.width==ce&&l.height==Ce;for(T=s*ce,P=k?a:new Uint8Array(T*Ce),z=o.length,C=0,D=0;C<Ce&&u<z;){switch(o[u++]){case 0:for(x=K=0;K<T;x=K+=1)P[D++]=o[u++];break;case 1:for(x=ee=0;ee<T;x=ee+=1)E=o[u++],F=x<s?0:P[D-s],P[D++]=(E+F)%256;break;case 2:for(x=J=0;J<T;x=J+=1)E=o[u++],w=(x-x%s)/s,M=C&&P[(C-1)*T+w*s+x%s],P[D++]=(M+E)%256;break;case 3:for(x=ne=0;ne<T;x=ne+=1)E=o[u++],w=(x-x%s)/s,F=x<s?0:P[D-s],M=C&&P[(C-1)*T+w*s+x%s],P[D++]=(E+Math.floor((F+M)/2))%256;break;case 4:for(x=se=0;se<T;x=se+=1)E=o[u++],w=(x-x%s)/s,F=x<s?0:P[D-s],C===0?M=B=0:(M=P[(C-1)*T+w*s+x%s],B=w&&P[(C-1)*T+(w-1)*s+x%s]),H=F+M-B,Y=Math.abs(H-F),I=Math.abs(H-M),N=Math.abs(H-B),R=Y<=I&&Y<=N?F:I<=N?M:B,P[D++]=(E+R)%256;break;default:throw new Error("Invalid filter algorithm: "+o[u-1])}if(!k){var W=((m+C*b)*l.width+f)*s,G=C*T;for(x=0;x<ce;x+=1){for(var te=0;te<s;te+=1)a[W++]=P[G++];W+=(g-1)*s}}C++}}return o=kL(o),l.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},r.prototype.decodePalette=function(){var o,s,a,u,l,d,f,m,g;for(a=this.palette,d=this.transparency.indexed||[],l=new Uint8Array((d.length||0)+a.length),u=0,o=0,s=f=0,m=a.length;f<m;s=f+=3)l[u++]=a[s],l[u++]=a[s+1],l[u++]=a[s+2],l[u++]=(g=d[o++])!=null?g:255;return l},r.prototype.copyToImageData=function(o,s){var a,u,l,d,f,m,g,b,E,D,w;if(u=this.colors,E=null,a=this.hasAlphaChannel,this.palette.length&&(E=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),u=4,a=!0),b=(l=o.data||o).length,f=E||s,d=m=0,u===1)for(;d<b;)g=E?4*s[d/4]:m,D=f[g++],l[d++]=D,l[d++]=D,l[d++]=D,l[d++]=a?f[g++]:255,m=g;else for(;d<b;)g=E?4*s[d/4]:m,l[d++]=f[g++],l[d++]=f[g++],l[d++]=f[g++],l[d++]=a?f[g++]:255,m=g},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(bt)==="[object Window]"){try{e=bt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(o){var s;if(i()===!0)return t.width=o.width,t.height=o.height,t.clearRect(0,0,o.width,o.height),t.putImageData(o,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var s,a,u,l,d,f,m,g;if(this.animation){for(g=[],a=d=0,f=(m=this.animation.frames).length;d<f;a=++d)s=m[a],u=o.createImageData(s.width,s.height),l=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(u,l),s.imageData=u,g.push(s.image=n(u));return g}},r.prototype.renderFrame=function(o,s){var a,u,l;return a=(u=this.animation.frames)[s],l=u[s-1],s===0&&o.clearRect(0,0,this.width,this.height),l?.disposeOp===1?o.clearRect(l.xOffset,l.yOffset,l.width,l.height):l?.disposeOp===2&&o.putImageData(l.imageData,l.xOffset,l.yOffset),a.blendOp===0&&o.clearRect(a.xOffset,a.yOffset,a.width,a.height),o.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(o){var s,a,u,l,d,f,m=this;return a=0,f=this.animation,l=f.numFrames,u=f.frames,d=f.numPlays,(s=function(){var g,b;if(g=a++%l,b=u[g],m.renderFrame(o,g),l>1&&a/l<d)return m.animation._timeout=setTimeout(s,b.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var s,a;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,s=o.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(a=s.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),s.putImageData(a,0,0))},r}();(function(n){var e=function(){return typeof O_=="function"},t=function(m,g,b,E){var D=4,w=s;switch(E){case n.image_compression.FAST:D=1,w=o;break;case n.image_compression.MEDIUM:D=6,w=a;break;case n.image_compression.SLOW:D=9,w=u}m=r(m,g,b,w);var x=O_(m,{level:D});return n.__addimage__.arrayBufferToBinaryString(x)},r=function(m,g,b,E){for(var D,w,x,F=m.length/g,z=new Uint8Array(m.length+F),H=d(),Y=0;Y<F;Y+=1){if(x=Y*g,D=m.subarray(x,x+g),E)z.set(E(D,b,w),x+Y);else{for(var R,I=H.length,N=[];R<I;R+=1)N[R]=H[R](D,b,w);var P=f(N.concat());z.set(N[P],x+Y)}w=D}return z},i=function(m){var g=Array.apply([],m);return g.unshift(0),g},o=function(m,g){var b,E=[],D=m.length;E[0]=1;for(var w=0;w<D;w+=1)b=m[w-g]||0,E[w+1]=m[w]-b+256&255;return E},s=function(m,g,b){var E,D=[],w=m.length;D[0]=2;for(var x=0;x<w;x+=1)E=b&&b[x]||0,D[x+1]=m[x]-E+256&255;return D},a=function(m,g,b){var E,D,w=[],x=m.length;w[0]=3;for(var F=0;F<x;F+=1)E=m[F-g]||0,D=b&&b[F]||0,w[F+1]=m[F]+256-(E+D>>>1)&255;return w},u=function(m,g,b){var E,D,w,x,F=[],z=m.length;F[0]=4;for(var H=0;H<z;H+=1)E=m[H-g]||0,D=b&&b[H]||0,w=b&&b[H-g]||0,x=l(E,D,w),F[H+1]=m[H]-x+256&255;return F},l=function(m,g,b){if(m===g&&g===b)return m;var E=Math.abs(g-b),D=Math.abs(m-b),w=Math.abs(m+g-b-b);return E<=D&&E<=w?m:D<=w?g:b},d=function(){return[i,o,s,a,u]},f=function(m){var g=m.map(function(b){return b.reduce(function(E,D){return E+Math.abs(D)},0)});return g.indexOf(Math.min.apply(null,g))};n.processPNG=function(m,g,b,E){var D,w,x,F,z,H,Y,R,I,N,P,C,T,M,B,K=this.decode.FLATE_DECODE,ee="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(x=new NG(m)).imgData,w=x.bits,D=x.colorSpace,z=x.colors,[4,6].indexOf(x.colorType)!==-1){if(x.bits===8){I=(R=x.pixelBitlength==32?new Uint32Array(x.decodePixels().buffer):x.pixelBitlength==16?new Uint16Array(x.decodePixels().buffer):new Uint8Array(x.decodePixels().buffer)).length,P=new Uint8Array(I*x.colors),N=new Uint8Array(I);var J,ne=x.pixelBitlength-x.bits;for(M=0,B=0;M<I;M++){for(T=R[M],J=0;J<ne;)P[B++]=T>>>J&255,J+=x.bits;N[M]=T>>>J&255}}if(x.bits===16){I=(R=new Uint32Array(x.decodePixels().buffer)).length,P=new Uint8Array(I*(32/x.pixelBitlength)*x.colors),N=new Uint8Array(I*(32/x.pixelBitlength)),C=x.colors>1,M=0,B=0;for(var se=0;M<I;)T=R[M++],P[B++]=T>>>0&255,C&&(P[B++]=T>>>16&255,T=R[M++],P[B++]=T>>>0&255),N[se++]=T>>>16&255;w=8}E!==n.image_compression.NONE&&e()?(m=t(P,x.width*x.colors,x.colors,E),Y=t(N,x.width,1,E)):(m=P,Y=N,K=void 0)}if(x.colorType===3&&(D=this.color_spaces.INDEXED,H=x.palette,x.transparency.indexed)){var ce=x.transparency.indexed,Ce=0;for(M=0,I=ce.length;M<I;++M)Ce+=ce[M];if((Ce/=255)===I-1&&ce.indexOf(0)!==-1)F=[ce.indexOf(0)];else if(Ce!==I){for(R=x.decodePixels(),N=new Uint8Array(R.length),M=0,I=R.length;M<I;M++)N[M]=ce[R[M]];Y=t(N,x.width,1)}}var k=function(W){var G;switch(W){case n.image_compression.FAST:G=11;break;case n.image_compression.MEDIUM:G=13;break;case n.image_compression.SLOW:G=14;break;default:G=12}return G}(E);return K===this.decode.FLATE_DECODE&&(ee="/Predictor "+k+" "),ee+="/Colors "+z+" /BitsPerComponent "+w+" /Columns "+x.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(Y&&this.__addimage__.isArrayBuffer(Y)||this.__addimage__.isArrayBufferView(Y))&&(Y=this.__addimage__.arrayBufferToBinaryString(Y)),{alias:b,data:m,index:g,filter:K,decodeParameters:ee,transparency:F,palette:H,sMask:Y,predictor:k,width:x.width,height:x.height,bitsPerComponent:w,colorSpace:D}}}})(yt.API),function(n){n.processGIF89A=function(e,t,r,i){var o=new MG(e),s=o.width,a=o.height,u=[];o.decodeAndBlitFrameRGBA(0,u);var l={data:u,width:s,height:a},d=new MC(100).encode(l,100);return n.processJPEG.call(this,d,t,r,i)},n.processGIF87A=n.processGIF89A}(yt.API),Ss.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ss.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Pn.log("bit decode error:"+t)}},Ss.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var u=this.palette[o>>7-a&1];this.data[s+4*a]=u.blue,this.data[s+4*a+1]=u.green,this.data[s+4*a+2]=u.red,this.data[s+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Ss.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,u=15&o,l=this.palette[a];if(this.data[s]=l.blue,this.data[s+1]=l.green,this.data[s+2]=l.red,this.data[s+3]=255,2*i+1>=this.width)break;l=this.palette[u],this.data[s+4]=l.blue,this.data[s+4+1]=l.green,this.data[s+4+2]=l.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Ss.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},Ss.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,u=(o>>10&e)/e*255|0,l=o>>15?255:0,d=r*this.width*4+4*i;this.data[d]=u,this.data[d+1]=a,this.data[d+2]=s,this.data[d+3]=l}this.pos+=n}},Ss.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,u=(s>>5&t)/t*255|0,l=(s>>11)/e*255|0,d=i*this.width*4+4*o;this.data[d]=l,this.data[d+1]=u,this.data[d+2]=a,this.data[d+3]=255}this.pos+=n}},Ss.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Ss.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},Ss.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var o=new Ss(e,!1),s=o.width,a=o.height,u={data:o.getData(),width:s,height:a},l=new MC(100).encode(u,100);return n.processJPEG.call(this,l,t,r,i)}}(yt.API),ZL.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var o=new ZL(e,!1),s=o.width,a=o.height,u={data:o.getData(),width:s,height:a},l=new MC(100).encode(u,100);return n.processJPEG.call(this,l,t,r,i)}}(yt.API),yt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,u=0,l=0;l<i;l+=4){var d=r[l],f=r[l+1],m=r[l+2],g=r[l+3];o[a++]=d,o[a++]=f,o[a++]=m,s[u++]=g}var b=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:b,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},yt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ff=yt.API,B_=ff.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,u=a.fof?a.fof:1,l=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=l.fof?l.fof:1,f=e.doKerning!==!1,m=0,g=n.length,b=0,E=a[0]||u,D=[];for(t=0;t<g;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?D.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(m=f&&Dn(l[r])==="object"&&!isNaN(parseInt(l[r][b],10))?l[r][b]/d:0,D.push((a[r]||E)/u+m)),b=r;return D},GL=ff.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return ff.processArabic&&(n=ff.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:B_.apply(this,arguments).reduce(function(o,s){return o+s},0)},KL=function(n,e,t,r){for(var i=[],o=0,s=n.length,a=0;o!==s&&a+e[o]<t;)a+=e[o],o++;i.push(n.slice(0,o));var u=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(n.slice(u,o)),a=0,u=o),a+=e[o],o++;return u!==o&&i.push(n.slice(u,o)),i},QL=function(n,e,t){t||(t={});var r,i,o,s,a,u,l,d=[],f=[d],m=t.textIndent||0,g=0,b=0,E=n.split(" "),D=B_.apply(this,[" ",t])[0];if(u=t.lineIndent===-1?E[0].length+2:t.lineIndent||0){var w=Array(u).join(" "),x=[];E.map(function(z){(z=z.split(/\s*\n/)).length>1?x=x.concat(z.map(function(H,Y){return(Y&&H.length?`
`:"")+H})):x.push(z[0])}),E=x,u=GL.apply(this,[w,t])}for(o=0,s=E.length;o<s;o++){var F=0;if(r=E[o],u&&r[0]==`
`&&(r=r.substr(1),F=1),m+g+(b=(i=B_.apply(this,[r,t])).reduce(function(z,H){return z+H},0))>e||F){if(b>e){for(a=KL.apply(this,[r,i,e-(m+g),e]),d.push(a.shift()),d=[a.pop()];a.length;)f.push([a.shift()]);b=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(z,H){return z+H},0)}else d=[r];f.push(d),m=b+u,g=D}else d.push(r),m+=g+b,g=D}return l=u?function(z,H){return(H?w:"")+z.join(" ")}:function(z){return z.join(" ")},f.map(l)},ff.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var a,u,l=[];for(a=0,u=r.length;a<u;a++)l=l.concat(QL.apply(this,[r[a],s,o]));return l},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var o=function(f){return"0x"+parseInt(f,10).toString(16)},s=n.__fontmetrics__.compress=function(f){var m,g,b,E,D=["{"];for(var w in f){if(m=f[w],isNaN(parseInt(w,10))?g="'"+w+"'":(w=parseInt(w,10),g=(g=o(w).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof m=="number")m<0?(b=o(m).slice(3),E="-"):(b=o(m).slice(2),E=""),b=E+b.slice(0,-1)+r[b.slice(-1)];else{if(Dn(m)!=="object")throw new Error("Don't know what to do with value type "+Dn(m)+".");b=s(m)}D.push(g+b)}return D.push("}"),D.join("")},a=n.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,b,E,D={},w=1,x=D,F=[],z="",H="",Y=f.length-1,R=1;R<Y;R+=1)(E=f[R])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(E):E=="{"?(F.push([x,b]),x={},b=void 0):E=="}"?((g=F.pop())[0][g[1]]=x,b=void 0,x=g[0]):E=="-"?w=-1:b===void 0?t.hasOwnProperty(E)?(z+=t[E],b=parseInt(z,16)*w,w=1,z=""):z+=E:t.hasOwnProperty(E)?(H+=t[E],x[b]=parseInt(H,16)*w,w=1,b=void 0,H=""):H+=E;return D},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},l={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(f){var m=f.font,g=d.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var b=l.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])}(yt.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(am(a)),s.metadata=n.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])}(yt),function(n){function e(){return(bt.canvg?Promise.resolve(bt.canvg):import("./chunk-Q3LIHGG2.js")).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}yt.API.addSvgAsImage=function(t,r,i,o,s,a,u,l){if(isNaN(r)||isNaN(i))throw Pn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(s))throw Pn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=o,d.height=s;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(b){return b.fromString(f,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(m)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),r,i,o,s,u,l)})}}(),yt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},yt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),u=[],l=0,d=0,f=0;function m(b,E){var D,w=!1;for(D=0;D<b.length;D+=1)b[D]===E&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var g=a.length;for(f=0;f<g;f+=1)t[a[f]].value=t[a[f]].defaultValue,t[a[f]].explicitSet=!1}if(Dn(n)==="object"){for(i in n)if(o=n[i],m(a,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&m(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(l=0;l<o.length;l+=1)if(r=!0,o[l].length===1&&typeof o[l][0]=="number")u.push(String(o[l]-1));else if(o[l].length>1){for(d=0;d<o[l].length;d+=1)typeof o[l][d]!="number"&&(r=!1);r===!0&&u.push([o[l][0]-1,o[l][1]-1].join(" "))}t[i].value="["+u.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,E=[];for(b in t)t[b].explicitSet===!0&&(t[b].type==="name"?E.push("/"+b+" /"+t[b].value):E.push("/"+b+" "+t[b].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),l=o.length+s.length+a.length+i.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+u),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(yt.API),function(n){var e=n.API,t=e.pdfEscape16=function(o,s){for(var a,u=s.metadata.Unicode.widths,l=["","0","00","000","0000"],d=[""],f=0,m=o.length;f<m;++f){if(a=s.metadata.characterToGlyph(o.charCodeAt(f)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(f),u.indexOf(a)==-1&&(u.push(a),u.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(l[4-a.length],a)}return d.join("")},r=function(o){var s,a,u,l,d,f,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],f=0,m=(a=Object.keys(o).sort(function(g,b){return g-b})).length;f<m;f++)s=a[f],u.length>=100&&(d+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(l=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),u.push("<"+s+"><"+l+">"));return u.length&&(d+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,u=s.out,l=s.newObject,d=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var f=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",b=0;b<m.length;b++)g+=String.fromCharCode(m[b]);var E=l();d({data:g,addLength1:!0,objectId:E}),u("endobj");var D=l();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:D}),u("endobj");var w=l();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+gf(a.fontName)),u("/FontFile2 "+E+" 0 R"),u("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),u("/Flags "+a.metadata.flags),u("/StemV "+a.metadata.stemV),u("/ItalicAngle "+a.metadata.italicAngle),u("/Ascent "+a.metadata.ascender),u("/Descent "+a.metadata.decender),u("/CapHeight "+a.metadata.capHeight),u(">>"),u("endobj");var x=l();u("<<"),u("/Type /Font"),u("/BaseFont /"+gf(a.fontName)),u("/FontDescriptor "+w+" 0 R"),u("/W "+n.API.PDFObject.convert(f)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+a.encoding+")"),u(">>"),u(">>"),u("endobj"),a.objectNumber=l(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+D+" 0 R"),u("/BaseFont /"+gf(a.fontName)),u("/Encoding /"+a.encoding),u("/DescendantFonts ["+x+" 0 R]"),u(">>"),u("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,u=s.out,l=s.newObject,d=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var f=a.metadata.rawData,m="",g=0;g<f.length;g++)m+=String.fromCharCode(f[g]);var b=l();d({data:m,addLength1:!0,objectId:b}),u("endobj");var E=l();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),u("endobj");var D=l();u("<<"),u("/Descent "+a.metadata.decender),u("/CapHeight "+a.metadata.capHeight),u("/StemV "+a.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+b+" 0 R"),u("/Flags 96"),u("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),u("/FontName /"+gf(a.fontName)),u("/ItalicAngle "+a.metadata.italicAngle),u("/Ascent "+a.metadata.ascender),u(">>"),u("endobj"),a.objectNumber=l();for(var w=0;w<a.metadata.hmtx.widths.length;w++)a.metadata.hmtx.widths[w]=parseInt(a.metadata.hmtx.widths[w]*(1e3/a.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+gf(a.fontName)+"/FontDescriptor "+D+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),u("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",u=o.x,l=o.y,d=o.options||{},f=o.mutex||{},m=f.pdfEscape,g=f.activeFontKey,b=f.fonts,E=g,D="",w=0,x="",F=b[E].encoding;if(b[E].encoding!=="Identity-H")return{text:a,x:u,y:l,options:d,mutex:f};for(x=a,E=g,Array.isArray(a)&&(x=a[0]),w=0;w<x.length;w+=1)b[E].metadata.hasOwnProperty("cmap")&&(s=b[E].metadata.cmap.unicode.codeMap[x[w].charCodeAt(0)]),s||x[w].charCodeAt(0)<256&&b[E].metadata.hasOwnProperty("Unicode")?D+=x[w]:D+="";var z="";return parseInt(E.slice(1))<14||F==="WinAnsiEncoding"?z=m(D,E).split("").map(function(H){return H.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(z=t(D,b[E])),f.isHex=!0,{text:z,x:u,y:l,options:d,mutex:f}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],u={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var l=0;for(l=0;l<s.length;l+=1)Array.isArray(s[l])&&s[l].length===3?a.push([i(Object.assign({},u,{text:s[l][0]})).text,s[l][1],s[l][2]]):a.push(i(Object.assign({},u,{text:s[l]})).text);o.text=a}else o.text=i(Object.assign({},u,{text:s})).text}])}(yt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(yt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,s,a,u,l,d,f=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},D=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,F=0;this.__bidiEngine__={};var z=function(C){var T=C.charCodeAt(),M=T>>8,B=E[M];return B!==void 0?f[256*B+(255&T)]:M===252||M===253?"AL":w.test(M)?"L":M===8?"R":"N"},H=function(C){for(var T,M=0;M<C.length;M++){if((T=z(C.charAt(M)))==="L")return!1;if(T==="R")return!0}return!1},Y=function(C,T,M,B){var K,ee,J,ne,se=T[B];switch(se){case"L":case"R":x=!1;break;case"N":case"AN":break;case"EN":x&&(se="AN");break;case"AL":x=!0,se="R";break;case"WS":se="N";break;case"CS":B<1||B+1>=T.length||(K=M[B-1])!=="EN"&&K!=="AN"||(ee=T[B+1])!=="EN"&&ee!=="AN"?se="N":x&&(ee="AN"),se=ee===K?ee:"N";break;case"ES":se=(K=B>0?M[B-1]:"B")==="EN"&&B+1<T.length&&T[B+1]==="EN"?"EN":"N";break;case"ET":if(B>0&&M[B-1]==="EN"){se="EN";break}if(x){se="N";break}for(J=B+1,ne=T.length;J<ne&&T[J]==="ET";)J++;se=J<ne&&T[J]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(ne=T.length,J=B+1;J<ne&&T[J]==="NSM";)J++;if(J<ne){var ce=C[B],Ce=ce>=1425&&ce<=2303||ce===64286;if(K=T[J],Ce&&(K==="R"||K==="AL")){se="R";break}}}se=B<1||(K=T[B-1])==="B"?"N":M[B-1];break;case"B":x=!1,i=!0,se=F;break;case"S":o=!0,se="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"BN":se="N"}return se},R=function(C,T,M){var B=C.split("");return M&&I(B,M,{hiLevel:F}),B.reverse(),T&&T.reverse(),B.join("")},I=function(C,T,M){var B,K,ee,J,ne,se=-1,ce=C.length,Ce=0,k=[],W=F?g:m,G=[];for(x=!1,i=!1,o=!1,K=0;K<ce;K++)G[K]=z(C[K]);for(ee=0;ee<ce;ee++){if(ne=Ce,k[ee]=Y(C,G,k,ee),B=240&(Ce=W[ne][b[k[ee]]]),Ce&=15,T[ee]=J=W[Ce][5],B>0)if(B===16){for(K=se;K<ee;K++)T[K]=1;se=-1}else se=-1;if(W[Ce][6])se===-1&&(se=ee);else if(se>-1){for(K=se;K<ee;K++)T[K]=J;se=-1}G[ee]==="B"&&(T[ee]=0),M.hiLevel|=J}o&&function(te,ae,fe){for(var ye=0;ye<fe;ye++)if(te[ye]==="S"){ae[ye]=F;for(var _e=ye-1;_e>=0&&te[_e]==="WS";_e--)ae[_e]=F}}(G,T,ce)},N=function(C,T,M,B,K){if(!(K.hiLevel<C)){if(C===1&&F===1&&!i)return T.reverse(),void(M&&M.reverse());for(var ee,J,ne,se,ce=T.length,Ce=0;Ce<ce;){if(B[Ce]>=C){for(ne=Ce+1;ne<ce&&B[ne]>=C;)ne++;for(se=Ce,J=ne-1;se<J;se++,J--)ee=T[se],T[se]=T[J],T[J]=ee,M&&(ee=M[se],M[se]=M[J],M[J]=ee);Ce=ne}Ce++}}},P=function(C,T,M){var B=C.split(""),K={hiLevel:F};return M||(M=[]),I(B,M,K),function(ee,J,ne){if(ne.hiLevel!==0&&d)for(var se,ce=0;ce<ee.length;ce++)J[ce]===1&&(se=D.indexOf(ee[ce]))>=0&&(ee[ce]=D[se+1])}(B,M,K),N(2,B,T,M,K),N(1,B,T,M,K),B.join("")};return this.__bidiEngine__.doBidiReorder=function(C,T,M){if(function(K,ee){if(ee)for(var J=0;J<K.length;J++)ee[J]=J;a===void 0&&(a=H(K)),l===void 0&&(l=H(K))}(C,T),s||!u||l)if(s&&u&&a^l)F=a?1:0,C=R(C,T,M);else if(!s&&u&&l)F=a?1:0,C=P(C,T,M),C=R(C,T);else if(!s||a||u||l){if(s&&!u&&a^l)C=R(C,T),a?(F=0,C=P(C,T,M)):(F=1,C=P(C,T,M),C=R(C,T));else if(s&&a&&!u&&l)F=1,C=P(C,T,M),C=R(C,T);else if(!s&&!u&&a^l){var B=d;a?(F=1,C=P(C,T,M),F=0,d=!1,C=P(C,T,M),d=B):(F=0,C=P(C,T,M),C=R(C,T),F=1,d=!1,C=P(C,T,M),d=B,C=R(C,T))}}else F=0,C=P(C,T,M);else F=a?1:0,C=P(C,T,M);return C},this.__bidiEngine__.setOptions=function(C){C&&(s=C.isInputVisual,u=C.isOutputVisual,a=C.isInputRtl,l=C.isOutputRtl,d=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,o=(r.x,r.y,r.options||{}),s=(r.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([t.doBidiReorder(i[a])]);r.text=s}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(yt),yt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new dl(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new WG(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new RG(this.contents),this.head=new kG(this),this.name=new jG(this),this.cmap=new lO(this),this.toUnicode={},this.hhea=new LG(this),this.maxp=new BG(this),this.hmtx=new UG(this),this.post=new FG(this),this.os2=new OG(this),this.loca=new $G(this),this.glyf=new qG(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var s,a,u,l;for(l=[],s=0,a=(u=this.bbox).length;s<a;s++)e=u[s],l.push(Math.round(e*this.scaleFactor));return l}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();dl=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,s,a,u;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),u=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^u)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+u},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n}(),RG=function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,s,a,u,l,d,f,m,g,b,E;for(E in g=Object.keys(t).length,u=Math.log(2),f=16*Math.floor(Math.log(g)/u),s=Math.floor(f/u),d=16*g-f,(i=new dl).writeInt(this.scalarType),i.writeShort(g),i.writeShort(f),i.writeShort(s),i.writeShort(d),o=16*g,l=i.pos+o,a=null,b=[],t)for(m=t[E],i.writeString(E),i.writeInt(n(m)),i.writeInt(l),i.writeInt(m.length),b=b.concat(m),E==="head"&&(a=l),l+=m.length;l%4;)b.push(0),l++;return i.write(b),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,s;for(t=cO.call(t);t.length%4;)t.push(0);for(o=new dl(t),i=0,r=0,s=t.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e}(),PG={}.hasOwnProperty,aa=function(n,e){for(var t in e)PG.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};As=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();kG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,As),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new dl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),JL=function(){function n(e,t){var r,i,o,s,a,u,l,d,f,m,g,b,E,D,w,x,F;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,o=function(){var z,H;for(H=[],u=z=0;0<=m?z<m:z>m;u=0<=m?++z:--z)H.push(e.readUInt16());return H}(),e.pos+=2,E=function(){var z,H;for(H=[],u=z=0;0<=m?z<m:z>m;u=0<=m?++z:--z)H.push(e.readUInt16());return H}(),l=function(){var z,H;for(H=[],u=z=0;0<=m?z<m:z>m;u=0<=m?++z:--z)H.push(e.readUInt16());return H}(),d=function(){var z,H;for(H=[],u=z=0;0<=m?z<m:z>m;u=0<=m?++z:--z)H.push(e.readUInt16());return H}(),i=(this.length-e.pos+this.offset)/2,a=function(){var z,H;for(H=[],u=z=0;0<=i?z<i:z>i;u=0<=i?++z:--z)H.push(e.readUInt16());return H}(),u=w=0,F=o.length;w<F;u=++w)for(D=o[u],r=x=b=E[u];b<=D?x<=D:x>=D;r=b<=D?++x:--x)d[u]===0?s=r+l[u]:(s=a[d[u]/2+(r-b)-(m-u)]||0)!==0&&(s+=l[u]),this.codeMap[r]=65535&s}e.pos=f}return n.encode=function(e,t){var r,i,o,s,a,u,l,d,f,m,g,b,E,D,w,x,F,z,H,Y,R,I,N,P,C,T,M,B,K,ee,J,ne,se,ce,Ce,k,W,G,te,ae,fe,ye,_e,Oe,ke,ze;switch(B=new dl,s=Object.keys(e).sort(function(qe,ft){return qe-ft}),t){case"macroman":for(E=0,D=function(){var qe=[];for(b=0;b<256;++b)qe.push(0);return qe}(),x={0:0},o={},K=0,se=s.length;K<se;K++)x[_e=e[i=s[K]]]==null&&(x[_e]=++E),o[i]={old:e[i],new:x[e[i]]},D[i]=x[e[i]];return B.writeUInt16(1),B.writeUInt16(0),B.writeUInt32(12),B.writeUInt16(0),B.writeUInt16(262),B.writeUInt16(0),B.write(D),{charMap:o,subtable:B.data,maxGlyphID:E+1};case"unicode":for(T=[],f=[],F=0,x={},r={},w=l=null,ee=0,ce=s.length;ee<ce;ee++)x[H=e[i=s[ee]]]==null&&(x[H]=++F),r[i]={old:H,new:x[H]},a=x[H]-i,w!=null&&a===l||(w&&f.push(w),T.push(i),l=a),w=i;for(w&&f.push(w),f.push(65535),T.push(65535),P=2*(N=T.length),I=2*Math.pow(Math.log(N)/Math.LN2,2),m=Math.log(I/2)/Math.LN2,R=2*N-I,u=[],Y=[],g=[],b=J=0,Ce=T.length;J<Ce;b=++J){if(C=T[b],d=f[b],C===65535){u.push(0),Y.push(0);break}if(C-(M=r[C].new)>=32768)for(u.push(0),Y.push(2*(g.length+N-b)),i=ne=C;C<=d?ne<=d:ne>=d;i=C<=d?++ne:--ne)g.push(r[i].new);else u.push(M-C),Y.push(0)}for(B.writeUInt16(3),B.writeUInt16(1),B.writeUInt32(12),B.writeUInt16(4),B.writeUInt16(16+8*N+2*g.length),B.writeUInt16(0),B.writeUInt16(P),B.writeUInt16(I),B.writeUInt16(m),B.writeUInt16(R),fe=0,k=f.length;fe<k;fe++)i=f[fe],B.writeUInt16(i);for(B.writeUInt16(0),ye=0,W=T.length;ye<W;ye++)i=T[ye],B.writeUInt16(i);for(Oe=0,G=u.length;Oe<G;Oe++)a=u[Oe],B.writeUInt16(a);for(ke=0,te=Y.length;ke<te;ke++)z=Y[ke],B.writeUInt16(z);for(ze=0,ae=g.length;ze<ae;ze++)E=g[ze],B.writeUInt16(E);return{charMap:r,subtable:B.data,maxGlyphID:F+1}}},n}(),lO=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,As),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,o;for(t.pos=this.offset,this.version=t.readUInt16(),o=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)r=new JL(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,o;return r==null&&(r="macroman"),i=JL.encode(t,r),(o=new dl).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},e}(),LG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,As),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),OG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,As),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),FG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,As),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,o;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var s;for(i=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],o=[];t.pos<this.offset+this.length;)r=t.readByte(),o.push(this.names.push(t.readString(r)));return o;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=function(){var a,u,l;for(l=[],s=a=0,u=this.file.maxp.numGlyphs;0<=u?a<u:a>u;s=0<=u?++a:--a)l.push(t.readUInt32());return l}.call(this)}},e}(),VG=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},jG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,As),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,o,s,a,u,l,d,f,m,g;for(t.pos=this.offset,t.readShort(),r=t.readShort(),u=t.readShort(),i=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+u+t.readShort()});for(l={},s=f=0,m=i.length;f<m;s=++f)o=i[s],t.pos=o.offset,d=t.readString(o.length),a=new VG(d,o),l[g=o.nameID]==null&&(l[g]=[]),l[o.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},e}(),BG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,As),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),UG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,As),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,o,s,a,u,l;for(t.pos=this.offset,this.metrics=[],r=0,u=this.file.hhea.numberOfMetrics;0<=u?r<u:r>u;r=0<=u?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],r=d=0;0<=o?d<o:d>o;r=0<=o?++d:--d)f.push(t.readInt16());return f}(),this.widths=function(){var d,f,m,g;for(g=[],d=0,f=(m=this.metrics).length;d<f;d++)s=m[d],g.push(s.advance);return g}.call(this),i=this.widths[this.widths.length-1],l=[],r=a=0;0<=o?a<o:a>o;r=0<=o?++a:--a)l.push(this.widths.push(i));return l},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),cO=[].slice,qG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,As),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,o,s,a,u,l,d,f,m;return t in this.cache?this.cache[t]:(s=this.file.loca,r=this.file.contents,i=s.indexOf(t),(o=s.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,a=(u=new dl(r.read(o))).readShort(),d=u.readShort(),m=u.readShort(),l=u.readShort(),f=u.readShort(),this.cache[t]=a===-1?new zG(u,d,m,l,f):new HG(u,a,d,m,l,f),this.cache[t]))},e.prototype.encode=function(t,r,i){var o,s,a,u,l;for(a=[],s=[],u=0,l=r.length;u<l;u++)o=t[r[u]],s.push(a.length),o&&(a=a.concat(o.encode(i)));return s.push(a.length),{table:a,offsets:s}},e}(),HG=function(){function n(e,t,r,i,o,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),zG=function(){function n(e,t,r,i,o){var s,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new dl(cO.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),$G=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,As),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=2)s.push(2*t.readUInt16());return s}.call(this):function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=4)s.push(t.readUInt32());return s}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),o=0,s=0,a=0;a<i.length;++a)if(i[a]=o,s<r.length&&r[s]==a){++s,i[a]=o;var u=this.offsets[a],l=this.offsets[a+1]-u;l>0&&(o+=l)}for(var d=new Array(4*i.length),f=0;f<i.length;++f)d[4*f+3]=255&i[f],d[4*f+2]=(65280&i[f])>>8,d[4*f+1]=(16711680&i[f])>>16,d[4*f]=(4278190080&i[f])>>24;return d},e}(),WG=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,s,a,u;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in u=this.glyphsFor(t))r=u[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,s,a,u,l,d,f,m,g,b,E,D,w;for(i in r=lO.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),g={0:0},w=r.charMap)g[(u=w[i]).old]=u.new;for(b in m=r.maxGlyphID,s)b in g||(g[b]=m++);return d=function(x){var F,z;for(F in z={},x)z[x[F]]=F;return z}(g),f=Object.keys(d).sort(function(x,F){return x-F}),E=function(){var x,F,z;for(z=[],x=0,F=f.length;x<F;x++)a=f[x],z.push(d[a]);return z}(),o=this.font.glyf.encode(s,E,g),l=this.font.loca.encode(o.offsets,E),D={cmap:this.font.cmap.raw(),glyf:o.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(D["OS/2"]=this.font.os2.raw()),this.font.directory.encode(D)},n}();yt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,s;if(Array.isArray(t))return"["+function(){var a,u,l;for(l=[],a=0,u=t.length;a<u;a++)r=t[a],l.push(e.convert(r));return l}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)s=t[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+t},e}();jC=yt});var dO=Yj((nd,UC)=>{"use strict";(function(e,t){if(typeof nd=="object"&&typeof UC=="object")UC.exports=t(function(){try{return H_(),Ux(BC)}catch{}}());else if(typeof define=="function"&&define.amd)define(["jspdf"],t);else{var r=t(typeof nd=="object"?function(){try{return H_(),Ux(BC)}catch{}}():e.jspdf);for(var i in r)(typeof nd=="object"?nd:e)[i]=r[i]}})(typeof globalThis<"u"?globalThis:typeof nd<"u"?nd:typeof window<"u"?window:typeof self<"u"?self:global,function(n){return function(){"use strict";var e={172:function(o,s){var a=this&&this.__extends||function(){var d=function(f,m){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,b){g.__proto__=b}||function(g,b){for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(g[E]=b[E])},d(f,m)};return function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");d(f,m);function g(){this.constructor=f}f.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}();Object.defineProperty(s,"__esModule",{value:!0}),s.CellHookData=s.HookData=void 0;var u=function(){function d(f,m,g){this.table=m,this.pageNumber=m.pageNumber,this.pageCount=this.pageNumber,this.settings=m.settings,this.cursor=g,this.doc=f.getDocument()}return d}();s.HookData=u;var l=function(d){a(f,d);function f(m,g,b,E,D,w){var x=d.call(this,m,g,w)||this;return x.cell=b,x.row=E,x.column=D,x.section=E.section,x}return f}(u);s.CellHookData=l},340:function(o,s,a){Object.defineProperty(s,"__esModule",{value:!0});var u=a(4),l=a(136),d=a(744),f=a(776),m=a(664),g=a(972);function b(E){E.API.autoTable=function(){for(var D=[],w=0;w<arguments.length;w++)D[w]=arguments[w];var x;D.length===1?x=D[0]:(console.error("Use of deprecated autoTable initiation"),x=D[2]||{},x.columns=D[0],x.body=D[1]);var F=(0,f.parseInput)(this,x),z=(0,g.createTable)(this,F);return(0,m.drawTable)(this,z),this},E.API.lastAutoTable=!1,E.API.previousAutoTable=!1,E.API.autoTable.previous=!1,E.API.autoTableText=function(D,w,x,F){(0,l.default)(D,w,x,F,this)},E.API.autoTableSetDefaults=function(D){return d.DocHandler.setDefaults(D,this),this},E.autoTableSetDefaults=function(D,w){d.DocHandler.setDefaults(D,w)},E.API.autoTableHtmlToJson=function(D,w){var x;if(w===void 0&&(w=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var F=new d.DocHandler(this),z=(0,u.parseHtml)(F,D,window,w,!1),H=z.head,Y=z.body,R=((x=H[0])===null||x===void 0?void 0:x.map(function(I){return I.content}))||[];return{columns:R,rows:Y,data:Y}},E.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var D=this.lastAutoTable;return D&&D.finalY?D.finalY:0},E.API.autoTableAddPageContent=function(D){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),E.API.autoTable.globalDefaults||(E.API.autoTable.globalDefaults={}),E.API.autoTable.globalDefaults.addPageContent=D,this},E.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}s.default=b},136:function(o,s){Object.defineProperty(s,"__esModule",{value:!0});function a(u,l,d,f,m){f=f||{};var g=1.15,b=m.internal.scaleFactor,E=m.internal.getFontSize()/b,D=m.getLineHeightFactor?m.getLineHeightFactor():g,w=E*D,x=/\r\n|\r|\n/g,F="",z=1;if((f.valign==="middle"||f.valign==="bottom"||f.halign==="center"||f.halign==="right")&&(F=typeof u=="string"?u.split(x):u,z=F.length||1),d+=E*(2-g),f.valign==="middle"?d-=z/2*w:f.valign==="bottom"&&(d-=z*w),f.halign==="center"||f.halign==="right"){var H=E;if(f.halign==="center"&&(H*=.5),F&&z>=1){for(var Y=0;Y<F.length;Y++)m.text(F[Y],l-m.getStringUnitWidth(F[Y])*H,d),d+=w;return m}l-=m.getStringUnitWidth(u)*H}return f.halign==="justify"?m.text(u,l,d,{maxWidth:f.maxWidth||100,align:"justify"}):m.text(u,l,d),m}s.default=a},420:function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getPageAvailableWidth=s.parseSpacing=s.getFillStyle=s.addTableBorder=s.getStringWidth=void 0;function a(m,g,b){b.applyStyles(g,!0);var E=Array.isArray(m)?m:[m],D=E.map(function(w){return b.getTextWidth(w)}).reduce(function(w,x){return Math.max(w,x)},0);return D}s.getStringWidth=a;function u(m,g,b,E){var D=g.settings.tableLineWidth,w=g.settings.tableLineColor;m.applyStyles({lineWidth:D,lineColor:w});var x=l(D,!1);x&&m.rect(b.x,b.y,g.getWidth(m.pageSize().width),E.y-b.y,x)}s.addTableBorder=u;function l(m,g){var b=m>0,E=g||g===0;return b&&E?"DF":b?"S":E?"F":null}s.getFillStyle=l;function d(m,g){var b,E,D,w;if(m=m||g,Array.isArray(m)){if(m.length>=4)return{top:m[0],right:m[1],bottom:m[2],left:m[3]};if(m.length===3)return{top:m[0],right:m[1],bottom:m[2],left:m[1]};if(m.length===2)return{top:m[0],right:m[1],bottom:m[0],left:m[1]};m.length===1?m=m[0]:m=g}return typeof m=="object"?(typeof m.vertical=="number"&&(m.top=m.vertical,m.bottom=m.vertical),typeof m.horizontal=="number"&&(m.right=m.horizontal,m.left=m.horizontal),{left:(b=m.left)!==null&&b!==void 0?b:g,top:(E=m.top)!==null&&E!==void 0?E:g,right:(D=m.right)!==null&&D!==void 0?D:g,bottom:(w=m.bottom)!==null&&w!==void 0?w:g}):(typeof m!="number"&&(m=g),{top:m,right:m,bottom:m,left:m})}s.parseSpacing=d;function f(m,g){var b=d(g.settings.margin,0);return m.pageSize().width-(b.left+b.right)}s.getPageAvailableWidth=f},796:function(o,s){var a=this&&this.__extends||function(){var f=function(m,g){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,E){b.__proto__=E}||function(b,E){for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(b[D]=E[D])},f(m,g)};return function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");f(m,g);function b(){this.constructor=m}m.prototype=g===null?Object.create(g):(b.prototype=g.prototype,new b)}}();Object.defineProperty(s,"__esModule",{value:!0}),s.getTheme=s.defaultStyles=s.HtmlRowInput=void 0;var u=function(f){a(m,f);function m(g){var b=f.call(this)||this;return b._element=g,b}return m}(Array);s.HtmlRowInput=u;function l(f){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/f,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}s.defaultStyles=l;function d(f){var m={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return m[f]}s.getTheme=d},903:function(o,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.parseCss=void 0;var u=a(420);function l(b,E,D,w,x){var F={},z=1.3333333333333333,H=f(E,function(J){return x.getComputedStyle(J).backgroundColor});H!=null&&(F.fillColor=H);var Y=f(E,function(J){return x.getComputedStyle(J).color});Y!=null&&(F.textColor=Y);var R=g(w,D);R&&(F.cellPadding=R);var I="borderTopColor",N=z*D,P=w.borderTopWidth;if(w.borderBottomWidth===P&&w.borderRightWidth===P&&w.borderLeftWidth===P){var C=(parseFloat(P)||0)/N;C&&(F.lineWidth=C)}else F.lineWidth={top:(parseFloat(w.borderTopWidth)||0)/N,right:(parseFloat(w.borderRightWidth)||0)/N,bottom:(parseFloat(w.borderBottomWidth)||0)/N,left:(parseFloat(w.borderLeftWidth)||0)/N},F.lineWidth.top||(F.lineWidth.right?I="borderRightColor":F.lineWidth.bottom?I="borderBottomColor":F.lineWidth.left&&(I="borderLeftColor"));var T=f(E,function(J){return x.getComputedStyle(J)[I]});T!=null&&(F.lineColor=T);var M=["left","right","center","justify"];M.indexOf(w.textAlign)!==-1&&(F.halign=w.textAlign),M=["middle","bottom","top"],M.indexOf(w.verticalAlign)!==-1&&(F.valign=w.verticalAlign);var B=parseInt(w.fontSize||"");isNaN(B)||(F.fontSize=B/z);var K=d(w);K&&(F.fontStyle=K);var ee=(w.fontFamily||"").toLowerCase();return b.indexOf(ee)!==-1&&(F.font=ee),F}s.parseCss=l;function d(b){var E="";return(b.fontWeight==="bold"||b.fontWeight==="bolder"||parseInt(b.fontWeight)>=700)&&(E="bold"),(b.fontStyle==="italic"||b.fontStyle==="oblique")&&(E+="italic"),E}function f(b,E){var D=m(b,E);if(!D)return null;var w=D.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!w||!Array.isArray(w))return null;var x=[parseInt(w[1]),parseInt(w[2]),parseInt(w[3])],F=parseInt(w[4]);return F===0||isNaN(x[0])||isNaN(x[1])||isNaN(x[2])?null:x}function m(b,E){var D=E(b);return D==="rgba(0, 0, 0, 0)"||D==="transparent"||D==="initial"||D==="inherit"?b.parentElement==null?null:m(b.parentElement,E):D}function g(b,E){var D=[b.paddingTop,b.paddingRight,b.paddingBottom,b.paddingLeft],w=96/(72/E),x=(parseInt(b.lineHeight)-parseInt(b.fontSize))/E/2,F=D.map(function(H){return parseInt(H||"0")/w}),z=(0,u.parseSpacing)(F,0);return x>z.top&&(z.top=x),x>z.bottom&&(z.bottom=x),z}},744:function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.DocHandler=void 0;var a={},u=function(){function l(d){this.jsPDFDocument=d,this.userStyles={textColor:d.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:d.internal.getFontSize(),fontStyle:d.internal.getFont().fontStyle,font:d.internal.getFont().fontName,lineWidth:d.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:d.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return l.setDefaults=function(d,f){f===void 0&&(f=null),f?f.__autoTableDocumentDefaults=d:a=d},l.unifyColor=function(d){return Array.isArray(d)?d:typeof d=="number"?[d,d,d]:typeof d=="string"?[d]:null},l.prototype.applyStyles=function(d,f){var m,g,b;f===void 0&&(f=!1),d.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(d.fontStyle);var E=this.jsPDFDocument.internal.getFont(),D=E.fontStyle,w=E.fontName;if(d.font&&(w=d.font),d.fontStyle){D=d.fontStyle;var x=this.getFontList()[w];x&&x.indexOf(D)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(x[0]),D=x[0])}if(this.jsPDFDocument.setFont(w,D),d.fontSize&&this.jsPDFDocument.setFontSize(d.fontSize),!f){var F=l.unifyColor(d.fillColor);F&&(m=this.jsPDFDocument).setFillColor.apply(m,F),F=l.unifyColor(d.textColor),F&&(g=this.jsPDFDocument).setTextColor.apply(g,F),F=l.unifyColor(d.lineColor),F&&(b=this.jsPDFDocument).setDrawColor.apply(b,F),typeof d.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(d.lineWidth)}},l.prototype.splitTextToSize=function(d,f,m){return this.jsPDFDocument.splitTextToSize(d,f,m)},l.prototype.rect=function(d,f,m,g,b){return this.jsPDFDocument.rect(d,f,m,g,b)},l.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},l.prototype.getTextWidth=function(d){return this.jsPDFDocument.getTextWidth(d)},l.prototype.getDocument=function(){return this.jsPDFDocument},l.prototype.setPage=function(d){this.jsPDFDocument.setPage(d)},l.prototype.addPage=function(){return this.jsPDFDocument.addPage()},l.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},l.prototype.getGlobalOptions=function(){return a||{}},l.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},l.prototype.pageSize=function(){var d=this.jsPDFDocument.internal.pageSize;return d.width==null&&(d={width:d.getWidth(),height:d.getHeight()}),d},l.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},l.prototype.getLineHeightFactor=function(){var d=this.jsPDFDocument;return d.getLineHeightFactor?d.getLineHeightFactor():1.15},l.prototype.getLineHeight=function(d){return d/this.scaleFactor()*this.getLineHeightFactor()},l.prototype.pageNumber=function(){var d=this.jsPDFDocument.internal.getCurrentPageInfo();return d?d.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},l}();s.DocHandler=u},4:function(o,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.parseHtml=void 0;var u=a(903),l=a(796);function d(g,b,E,D,w){var x,F;D===void 0&&(D=!1),w===void 0&&(w=!1);var z;typeof b=="string"?z=E.document.querySelector(b):z=b;var H=Object.keys(g.getFontList()),Y=g.scaleFactor(),R=[],I=[],N=[];if(!z)return console.error("Html table could not be found with input: ",b),{head:R,body:I,foot:N};for(var P=0;P<z.rows.length;P++){var C=z.rows[P],T=(F=(x=C?.parentElement)===null||x===void 0?void 0:x.tagName)===null||F===void 0?void 0:F.toLowerCase(),M=f(H,Y,E,C,D,w);M&&(T==="thead"?R.push(M):T==="tfoot"?N.push(M):I.push(M))}return{head:R,body:I,foot:N}}s.parseHtml=d;function f(g,b,E,D,w,x){for(var F=new l.HtmlRowInput(D),z=0;z<D.cells.length;z++){var H=D.cells[z],Y=E.getComputedStyle(H);if(w||Y.display!=="none"){var R=void 0;x&&(R=(0,u.parseCss)(g,H,b,Y,E)),F.push({rowSpan:H.rowSpan,colSpan:H.colSpan,styles:R,_element:H,content:m(H)})}}var I=E.getComputedStyle(D);if(F.length>0&&(w||I.display!=="none"))return F}function m(g){var b=g.cloneNode(!0);return b.innerHTML=b.innerHTML.replace(/\n/g,"").replace(/ +/g," "),b.innerHTML=b.innerHTML.split(/<br.*?>/).map(function(E){return E.trim()}).join(`
`),b.innerText||b.textContent||""}},776:function(o,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.parseInput=void 0;var u=a(4),l=a(356),d=a(420),f=a(744),m=a(792);function g(z,H){var Y=new f.DocHandler(z),R=Y.getDocumentOptions(),I=Y.getGlobalOptions();(0,m.default)(Y,I,R,H);var N=(0,l.assign)({},I,R,H),P;typeof window<"u"&&(P=window);var C=b(I,R,H),T=E(I,R,H),M=D(Y,N),B=x(Y,N,P);return{id:H.tableId,content:B,hooks:T,styles:C,settings:M}}s.parseInput=g;function b(z,H,Y){for(var R={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},I=function(T){if(T==="columnStyles"){var M=z[T],B=H[T],K=Y[T];R.columnStyles=(0,l.assign)({},M,B,K)}else{var ee=[z,H,Y],J=ee.map(function(ne){return ne[T]||{}});R[T]=(0,l.assign)({},J[0],J[1],J[2])}},N=0,P=Object.keys(R);N<P.length;N++){var C=P[N];I(C)}return R}function E(z,H,Y){for(var R=[z,H,Y],I={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},N=0,P=R;N<P.length;N++){var C=P[N];C.didParseCell&&I.didParseCell.push(C.didParseCell),C.willDrawCell&&I.willDrawCell.push(C.willDrawCell),C.didDrawCell&&I.didDrawCell.push(C.didDrawCell),C.willDrawPage&&I.willDrawPage.push(C.willDrawPage),C.didDrawPage&&I.didDrawPage.push(C.didDrawPage)}return I}function D(z,H){var Y,R,I,N,P,C,T,M,B,K,ee,J,ne=(0,d.parseSpacing)(H.margin,40/z.scaleFactor()),se=(Y=w(z,H.startY))!==null&&Y!==void 0?Y:ne.top,ce;H.showFoot===!0?ce="everyPage":H.showFoot===!1?ce="never":ce=(R=H.showFoot)!==null&&R!==void 0?R:"everyPage";var Ce;H.showHead===!0?Ce="everyPage":H.showHead===!1?Ce="never":Ce=(I=H.showHead)!==null&&I!==void 0?I:"everyPage";var k=(N=H.useCss)!==null&&N!==void 0?N:!1,W=H.theme||(k?"plain":"striped"),G=!!H.horizontalPageBreak,te=(P=H.horizontalPageBreakRepeat)!==null&&P!==void 0?P:null;return{includeHiddenHtml:(C=H.includeHiddenHtml)!==null&&C!==void 0?C:!1,useCss:k,theme:W,startY:se,margin:ne,pageBreak:(T=H.pageBreak)!==null&&T!==void 0?T:"auto",rowPageBreak:(M=H.rowPageBreak)!==null&&M!==void 0?M:"auto",tableWidth:(B=H.tableWidth)!==null&&B!==void 0?B:"auto",showHead:Ce,showFoot:ce,tableLineWidth:(K=H.tableLineWidth)!==null&&K!==void 0?K:0,tableLineColor:(ee=H.tableLineColor)!==null&&ee!==void 0?ee:200,horizontalPageBreak:G,horizontalPageBreakRepeat:te,horizontalPageBreakBehaviour:(J=H.horizontalPageBreakBehaviour)!==null&&J!==void 0?J:"afterAllRows"}}function w(z,H){var Y=z.getLastAutoTable(),R=z.scaleFactor(),I=z.pageNumber(),N=!1;if(Y&&Y.startPageNumber){var P=Y.startPageNumber+Y.pageNumber-1;N=P===I}return typeof H=="number"?H:(H==null||H===!1)&&N&&Y?.finalY!=null?Y.finalY+20/R:null}function x(z,H,Y){var R=H.head||[],I=H.body||[],N=H.foot||[];if(H.html){var P=H.includeHiddenHtml;if(Y){var C=(0,u.parseHtml)(z,H.html,Y,P,H.useCss)||{};R=C.head||R,I=C.body||R,N=C.foot||R}else console.error("Cannot parse html in non browser environment")}var T=H.columns||F(R,I,N);return{columns:T,head:R,body:I,foot:N}}function F(z,H,Y){var R=z[0]||H[0]||Y[0]||[],I=[];return Object.keys(R).filter(function(N){return N!=="_element"}).forEach(function(N){var P=1,C;Array.isArray(R)?C=R[parseInt(N)]:C=R[N],typeof C=="object"&&!Array.isArray(C)&&(P=C?.colSpan||1);for(var T=0;T<P;T++){var M=void 0;Array.isArray(R)?M=I.length:M=N+(T>0?"_".concat(T):"");var B={dataKey:M};I.push(B)}}),I}},792:function(o,s){Object.defineProperty(s,"__esModule",{value:!0});function a(l,d,f,m){for(var g=function(w){w&&typeof w!="object"&&console.error("The options parameter should be of type object, is: "+typeof w),typeof w.extendWidth<"u"&&(w.tableWidth=w.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof w.margins<"u"&&(typeof w.margin>"u"&&(w.margin=w.margins),console.error("Use of deprecated option: margins, use margin instead.")),w.startY&&typeof w.startY!="number"&&(console.error("Invalid value for startY option",w.startY),delete w.startY),!w.didDrawPage&&(w.afterPageContent||w.beforePageContent||w.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),w.didDrawPage=function(N){l.applyStyles(l.userStyles),w.beforePageContent&&w.beforePageContent(N),l.applyStyles(l.userStyles),w.afterPageContent&&w.afterPageContent(N),l.applyStyles(l.userStyles),w.afterPageAdd&&N.pageNumber>1&&N.afterPageAdd(N),l.applyStyles(l.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(N){w[N]&&console.error('The "'.concat(N,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(N){var P=N[0],C=N[1];w[C]&&(console.error("Use of deprecated option ".concat(C,". Use ").concat(P," instead")),w[P]=w[C])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(N){var P=typeof N=="string"?N:N[0],C=typeof N=="string"?N:N[1];typeof w[P]<"u"&&(typeof w.styles[C]>"u"&&(w.styles[C]=w[P]),console.error("Use of deprecated option: "+P+", use the style "+C+" instead."))});for(var x=0,F=["styles","bodyStyles","headStyles","footStyles"];x<F.length;x++){var z=F[x];u(w[z]||{})}for(var H=w.columnStyles||{},Y=0,R=Object.keys(H);Y<R.length;Y++){var I=R[Y];u(H[I]||{})}},b=0,E=[d,f,m];b<E.length;b++){var D=E[b];g(D)}}s.default=a;function u(l){l.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),l.minCellHeight||(l.minCellHeight=l.rowHeight)):l.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),l.cellWidth||(l.cellWidth=l.columnWidth))}},260:function(o,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.Column=s.Cell=s.Row=s.Table=void 0;var u=a(796),l=a(172),d=a(420),f=function(){function E(D,w){this.pageNumber=1,this.pageCount=1,this.id=D.id,this.settings=D.settings,this.styles=D.styles,this.hooks=D.hooks,this.columns=w.columns,this.head=w.head,this.body=w.body,this.foot=w.foot}return E.prototype.getHeadHeight=function(D){return this.head.reduce(function(w,x){return w+x.getMaxCellHeight(D)},0)},E.prototype.getFootHeight=function(D){return this.foot.reduce(function(w,x){return w+x.getMaxCellHeight(D)},0)},E.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},E.prototype.callCellHooks=function(D,w,x,F,z,H){for(var Y=0,R=w;Y<R.length;Y++){var I=R[Y],N=new l.CellHookData(D,this,x,F,z,H),P=I(N)===!1;if(x.text=Array.isArray(x.text)?x.text:[x.text],P)return!1}return!0},E.prototype.callEndPageHooks=function(D,w){D.applyStyles(D.userStyles);for(var x=0,F=this.hooks.didDrawPage;x<F.length;x++){var z=F[x];z(new l.HookData(D,this,w))}},E.prototype.callWillDrawPageHooks=function(D,w){for(var x=0,F=this.hooks.willDrawPage;x<F.length;x++){var z=F[x];z(new l.HookData(D,this,w))}},E.prototype.getWidth=function(D){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var w=this.columns.reduce(function(F,z){return F+z.wrappedWidth},0);return w}else{var x=this.settings.margin;return D-x.left-x.right}},E}();s.Table=f;var m=function(){function E(D,w,x,F,z){z===void 0&&(z=!1),this.height=0,this.raw=D,D instanceof u.HtmlRowInput&&(this.raw=D._element,this.element=D._element),this.index=w,this.section=x,this.cells=F,this.spansMultiplePages=z}return E.prototype.getMaxCellHeight=function(D){var w=this;return D.reduce(function(x,F){var z;return Math.max(x,((z=w.cells[F.index])===null||z===void 0?void 0:z.height)||0)},0)},E.prototype.hasRowSpan=function(D){var w=this;return D.filter(function(x){var F=w.cells[x.index];return F?F.rowSpan>1:!1}).length>0},E.prototype.canEntireRowFit=function(D,w){return this.getMaxCellHeight(w)<=D},E.prototype.getMinimumRowHeight=function(D,w){var x=this;return D.reduce(function(F,z){var H=x.cells[z.index];if(!H)return 0;var Y=w.getLineHeight(H.styles.fontSize),R=H.padding("vertical"),I=R+Y;return I>F?I:F},0)},E}();s.Row=m;var g=function(){function E(D,w,x){var F,z;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=w,this.section=x,this.raw=D;var H=D;D!=null&&typeof D=="object"&&!Array.isArray(D)?(this.rowSpan=D.rowSpan||1,this.colSpan=D.colSpan||1,H=(z=(F=D.content)!==null&&F!==void 0?F:D.title)!==null&&z!==void 0?z:D,D._element&&(this.raw=D._element)):(this.rowSpan=1,this.colSpan=1);var Y=H!=null?""+H:"",R=/\r\n|\r|\n/g;this.text=Y.split(R)}return E.prototype.getTextPos=function(){var D;if(this.styles.valign==="top")D=this.y+this.padding("top");else if(this.styles.valign==="bottom")D=this.y+this.height-this.padding("bottom");else{var w=this.height-this.padding("vertical");D=this.y+w/2+this.padding("top")}var x;if(this.styles.halign==="right")x=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var F=this.width-this.padding("horizontal");x=this.x+F/2+this.padding("left")}else x=this.x+this.padding("left");return{x,y:D}},E.prototype.getContentHeight=function(D,w){w===void 0&&(w=1.15);var x=Array.isArray(this.text)?this.text.length:1,F=this.styles.fontSize/D*w,z=x*F+this.padding("vertical");return Math.max(z,this.styles.minCellHeight)},E.prototype.padding=function(D){var w=(0,d.parseSpacing)(this.styles.cellPadding,0);return D==="vertical"?w.top+w.bottom:D==="horizontal"?w.left+w.right:w[D]},E}();s.Cell=g;var b=function(){function E(D,w,x){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=D,this.raw=w,this.index=x}return E.prototype.getMaxCustomCellWidth=function(D){for(var w=0,x=0,F=D.allRows();x<F.length;x++){var z=F[x],H=z.cells[this.index];H&&typeof H.styles.cellWidth=="number"&&(w=Math.max(w,H.styles.cellWidth))}return w},E}();s.Column=b},356:function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assign=void 0;function a(u,l,d,f,m){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var g=Object(u),b=1;b<arguments.length;b++){var E=arguments[b];if(E!=null)for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(g[D]=E[D])}return g}s.assign=a},972:function(o,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.createTable=void 0;var u=a(744),l=a(260),d=a(324),f=a(796),m=a(356);function g(z,H){var Y=new u.DocHandler(z),R=b(H,Y.scaleFactor()),I=new l.Table(H,R);return(0,d.calculateWidths)(Y,I),Y.applyStyles(Y.userStyles),I}s.createTable=g;function b(z,H){var Y=z.content,R=x(Y.columns);if(Y.head.length===0){var I=D(R,"head");I&&Y.head.push(I)}if(Y.foot.length===0){var I=D(R,"foot");I&&Y.foot.push(I)}var N=z.settings.theme,P=z.styles;return{columns:R,head:E("head",Y.head,R,P,N,H),body:E("body",Y.body,R,P,N,H),foot:E("foot",Y.foot,R,P,N,H)}}function E(z,H,Y,R,I,N){var P={},C=H.map(function(T,M){for(var B=0,K={},ee=0,J=0,ne=0,se=Y;ne<se.length;ne++){var ce=se[ne];if(P[ce.index]==null||P[ce.index].left===0)if(J===0){var Ce=void 0;Array.isArray(T)?Ce=T[ce.index-ee-B]:Ce=T[ce.dataKey];var k={};typeof Ce=="object"&&!Array.isArray(Ce)&&(k=Ce?.styles||{});var W=F(z,ce,M,I,R,N,k),G=new l.Cell(Ce,W,z);K[ce.dataKey]=G,K[ce.index]=G,J=G.colSpan-1,P[ce.index]={left:G.rowSpan-1,times:J}}else J--,ee++;else P[ce.index].left--,J=P[ce.index].times,B++}return new l.Row(T,M,z,K)});return C}function D(z,H){var Y={};return z.forEach(function(R){if(R.raw!=null){var I=w(H,R.raw);I!=null&&(Y[R.dataKey]=I)}}),Object.keys(Y).length>0?Y:null}function w(z,H){if(z==="head"){if(typeof H=="object")return H.header||H.title||null;if(typeof H=="string"||typeof H=="number")return H}else if(z==="foot"&&typeof H=="object")return H.footer;return null}function x(z){return z.map(function(H,Y){var R,I,N;return typeof H=="object"?N=(I=(R=H.dataKey)!==null&&R!==void 0?R:H.key)!==null&&I!==void 0?I:Y:N=Y,new l.Column(N,H,Y)})}function F(z,H,Y,R,I,N,P){var C=(0,f.getTheme)(R),T;z==="head"?T=I.headStyles:z==="body"?T=I.bodyStyles:z==="foot"&&(T=I.footStyles);var M=(0,m.assign)({},C.table,C[z],I.styles,T),B=I.columnStyles[H.dataKey]||I.columnStyles[H.index]||{},K=z==="body"?B:{},ee=z==="body"&&Y%2===0?(0,m.assign)({},C.alternateRow,I.alternateRowStyles):{},J=(0,f.defaultStyles)(N),ne=(0,m.assign)({},J,M,ee,K);return(0,m.assign)(ne,P)}},664:function(o,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.addPage=s.drawTable=void 0;var u=a(420),l=a(260),d=a(744),f=a(356),m=a(136),g=a(224);function b(B,K){var ee=K.settings,J=ee.startY,ne=ee.margin,se={x:ne.left,y:J},ce=K.getHeadHeight(K.columns)+K.getFootHeight(K.columns),Ce=J+ne.bottom+ce;if(ee.pageBreak==="avoid"){var k=K.body,W=k.reduce(function(ae,fe){return ae+fe.height},0);Ce+=W}var G=new d.DocHandler(B);(ee.pageBreak==="always"||ee.startY!=null&&Ce>G.pageSize().height)&&(M(G),se.y=ne.top),K.callWillDrawPageHooks(G,se);var te=(0,f.assign)({},se);K.startPageNumber=G.pageNumber(),ee.horizontalPageBreak?E(G,K,te,se):(G.applyStyles(G.userStyles),(ee.showHead==="firstPage"||ee.showHead==="everyPage")&&K.head.forEach(function(ae){return I(G,K,ae,se,K.columns)}),G.applyStyles(G.userStyles),K.body.forEach(function(ae,fe){var ye=fe===K.body.length-1;R(G,K,ae,ye,te,se,K.columns)}),G.applyStyles(G.userStyles),(ee.showFoot==="lastPage"||ee.showFoot==="everyPage")&&K.foot.forEach(function(ae){return I(G,K,ae,se,K.columns)})),(0,u.addTableBorder)(G,K,te,se),K.callEndPageHooks(G,se),K.finalY=se.y,B.lastAutoTable=K,B.previousAutoTable=K,B.autoTable&&(B.autoTable.previous=K),G.applyStyles(G.userStyles)}s.drawTable=b;function E(B,K,ee,J){var ne=(0,g.calculateAllColumnsCanFitInPage)(B,K),se=K.settings;if(se.horizontalPageBreakBehaviour==="afterAllRows")ne.forEach(function(W,G){B.applyStyles(B.userStyles),G>0?T(B,K,ee,J,W.columns,!0):D(B,K,J,W.columns),w(B,K,ee,J,W.columns),F(B,K,J,W.columns)});else for(var ce=-1,Ce=ne[0],k=function(){var W=ce;if(Ce){B.applyStyles(B.userStyles);var G=Ce.columns;ce>=0?T(B,K,ee,J,G,!0):D(B,K,J,G),W=x(B,K,ce+1,J,G),F(B,K,J,G)}var te=W-ce;ne.slice(1).forEach(function(ae){B.applyStyles(B.userStyles),T(B,K,ee,J,ae.columns,!0),x(B,K,ce+1,J,ae.columns,te),F(B,K,J,ae.columns)}),ce=W};ce<K.body.length-1;)k()}function D(B,K,ee,J){var ne=K.settings;B.applyStyles(B.userStyles),(ne.showHead==="firstPage"||ne.showHead==="everyPage")&&K.head.forEach(function(se){return I(B,K,se,ee,J)})}function w(B,K,ee,J,ne){B.applyStyles(B.userStyles),K.body.forEach(function(se,ce){var Ce=ce===K.body.length-1;R(B,K,se,Ce,ee,J,ne)})}function x(B,K,ee,J,ne,se){B.applyStyles(B.userStyles),se=se??K.body.length;var ce=Math.min(ee+se,K.body.length),Ce=-1;return K.body.slice(ee,ce).forEach(function(k,W){var G=ee+W===K.body.length-1,te=C(B,K,G,J);k.canEntireRowFit(te,ne)&&(I(B,K,k,J,ne),Ce=ee+W)}),Ce}function F(B,K,ee,J){var ne=K.settings;B.applyStyles(B.userStyles),(ne.showFoot==="lastPage"||ne.showFoot==="everyPage")&&K.foot.forEach(function(se){return I(B,K,se,ee,J)})}function z(B,K,ee){var J=ee.getLineHeight(B.styles.fontSize),ne=B.padding("vertical"),se=Math.floor((K-ne)/J);return Math.max(0,se)}function H(B,K,ee,J){var ne={};B.spansMultiplePages=!0,B.height=0;for(var se=0,ce=0,Ce=ee.columns;ce<Ce.length;ce++){var k=Ce[ce],W=B.cells[k.index];if(W){Array.isArray(W.text)||(W.text=[W.text]);var G=new l.Cell(W.raw,W.styles,W.section);G=(0,f.assign)(G,W),G.text=[];var te=z(W,K,J);W.text.length>te&&(G.text=W.text.splice(te,W.text.length));var ae=J.scaleFactor(),fe=J.getLineHeightFactor();W.contentHeight=W.getContentHeight(ae,fe),W.contentHeight>=K&&(W.contentHeight=K,G.styles.minCellHeight-=K),W.contentHeight>B.height&&(B.height=W.contentHeight),G.contentHeight=G.getContentHeight(ae,fe),G.contentHeight>se&&(se=G.contentHeight),ne[k.index]=G}}var ye=new l.Row(B.raw,-1,B.section,ne,!0);ye.height=se;for(var _e=0,Oe=ee.columns;_e<Oe.length;_e++){var k=Oe[_e],G=ye.cells[k.index];G&&(G.height=ye.height);var W=B.cells[k.index];W&&(W.height=B.height)}return ye}function Y(B,K,ee,J){var ne=B.pageSize().height,se=J.settings.margin,ce=se.top+se.bottom,Ce=ne-ce;K.section==="body"&&(Ce-=J.getHeadHeight(J.columns)+J.getFootHeight(J.columns));var k=K.getMinimumRowHeight(J.columns,B),W=k<ee;if(k>Ce)return console.error("Will not be able to print row ".concat(K.index," correctly since it's minimum height is larger than page height")),!0;if(!W)return!1;var G=K.hasRowSpan(J.columns),te=K.getMaxCellHeight(J.columns)>Ce;return te?(G&&console.error("The content of row ".concat(K.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(G||J.settings.rowPageBreak==="avoid")}function R(B,K,ee,J,ne,se,ce){var Ce=C(B,K,J,se);if(ee.canEntireRowFit(Ce,ce))I(B,K,ee,se,ce);else if(Y(B,ee,Ce,K)){var k=H(ee,Ce,K,B);I(B,K,ee,se,ce),T(B,K,ne,se,ce),R(B,K,k,J,ne,se,ce)}else T(B,K,ne,se,ce),R(B,K,ee,J,ne,se,ce)}function I(B,K,ee,J,ne){J.x=K.settings.margin.left;for(var se=0,ce=ne;se<ce.length;se++){var Ce=ce[se],k=ee.cells[Ce.index];if(!k){J.x+=Ce.width;continue}B.applyStyles(k.styles),k.x=J.x,k.y=J.y;var W=K.callCellHooks(B,K.hooks.willDrawCell,k,ee,Ce,J);if(W===!1){J.x+=Ce.width;continue}N(B,k,J);var G=k.getTextPos();(0,m.default)(k.text,G.x,G.y,{halign:k.styles.halign,valign:k.styles.valign,maxWidth:Math.ceil(k.width-k.padding("left")-k.padding("right"))},B.getDocument()),K.callCellHooks(B,K.hooks.didDrawCell,k,ee,Ce,J),J.x+=Ce.width}J.y+=ee.height}function N(B,K,ee){var J=K.styles;if(B.getDocument().setFillColor(B.getDocument().getFillColor()),typeof J.lineWidth=="number"){var ne=(0,u.getFillStyle)(J.lineWidth,J.fillColor);ne&&B.rect(K.x,ee.y,K.width,K.height,ne)}else typeof J.lineWidth=="object"&&(J.fillColor&&B.rect(K.x,ee.y,K.width,K.height,"F"),P(B,K,ee,J.lineWidth))}function P(B,K,ee,J){var ne,se,ce,Ce;J.top&&(ne=ee.x,se=ee.y,ce=ee.x+K.width,Ce=ee.y,J.right&&(ce+=.5*J.right),J.left&&(ne-=.5*J.left),k(J.top,ne,se,ce,Ce)),J.bottom&&(ne=ee.x,se=ee.y+K.height,ce=ee.x+K.width,Ce=ee.y+K.height,J.right&&(ce+=.5*J.right),J.left&&(ne-=.5*J.left),k(J.bottom,ne,se,ce,Ce)),J.left&&(ne=ee.x,se=ee.y,ce=ee.x,Ce=ee.y+K.height,J.top&&(se-=.5*J.top),J.bottom&&(Ce+=.5*J.bottom),k(J.left,ne,se,ce,Ce)),J.right&&(ne=ee.x+K.width,se=ee.y,ce=ee.x+K.width,Ce=ee.y+K.height,J.top&&(se-=.5*J.top),J.bottom&&(Ce+=.5*J.bottom),k(J.right,ne,se,ce,Ce));function k(W,G,te,ae,fe){B.getDocument().setLineWidth(W),B.getDocument().line(G,te,ae,fe,"S")}}function C(B,K,ee,J){var ne=K.settings.margin.bottom,se=K.settings.showFoot;return(se==="everyPage"||se==="lastPage"&&ee)&&(ne+=K.getFootHeight(K.columns)),B.pageSize().height-J.y-ne}function T(B,K,ee,J,ne,se){ne===void 0&&(ne=[]),se===void 0&&(se=!1),B.applyStyles(B.userStyles),K.settings.showFoot==="everyPage"&&!se&&K.foot.forEach(function(Ce){return I(B,K,Ce,J,ne)}),K.callEndPageHooks(B,J);var ce=K.settings.margin;(0,u.addTableBorder)(B,K,ee,J),M(B),K.pageNumber++,K.pageCount++,J.x=ce.left,J.y=ce.top,ee.y=ce.top,K.callWillDrawPageHooks(B,J),K.settings.showHead==="everyPage"&&(K.head.forEach(function(Ce){return I(B,K,Ce,J,ne)}),B.applyStyles(B.userStyles))}s.addPage=T;function M(B){var K=B.pageNumber();B.setPage(K+1);var ee=B.pageNumber();return ee===K?(B.addPage(),!0):!1}},224:function(o,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.calculateAllColumnsCanFitInPage=void 0;var u=a(420);function l(f,m,g){var b;g===void 0&&(g={});var E=(0,u.getPageAvailableWidth)(f,m),D=new Map,w=[],x=[],F=[];m.settings.horizontalPageBreakRepeat,Array.isArray(m.settings.horizontalPageBreakRepeat)?F=m.settings.horizontalPageBreakRepeat:(typeof m.settings.horizontalPageBreakRepeat=="string"||typeof m.settings.horizontalPageBreakRepeat=="number")&&(F=[m.settings.horizontalPageBreakRepeat]),F.forEach(function(R){var I=m.columns.find(function(N){return N.dataKey===R||N.index===R});I&&!D.has(I.index)&&(D.set(I.index,!0),w.push(I.index),x.push(m.columns[I.index]),E-=I.wrappedWidth)});for(var z=!0,H=(b=g?.start)!==null&&b!==void 0?b:0;H<m.columns.length;){if(D.has(H)){H++;continue}var Y=m.columns[H].wrappedWidth;if(z||E>=Y)z=!1,w.push(H),x.push(m.columns[H]),E-=Y;else break;H++}return{colIndexes:w,columns:x,lastIndex:H-1}}function d(f,m){for(var g=[],b=0;b<m.columns.length;b++){var E=l(f,m,{start:b});E.columns.length&&(g.push(E),b=E.lastIndex)}return g}s.calculateAllColumnsCanFitInPage=d},324:function(o,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.ellipsize=s.resizeColumns=s.calculateWidths=void 0;var u=a(420);function l(w,x){d(w,x);var F=[],z=0;x.columns.forEach(function(Y){var R=Y.getMaxCustomCellWidth(x);R?Y.width=R:(Y.width=Y.wrappedWidth,F.push(Y)),z+=Y.width});var H=x.getWidth(w.pageSize().width)-z;H&&(H=f(F,H,function(Y){return Math.max(Y.minReadableWidth,Y.minWidth)})),H&&(H=f(F,H,function(Y){return Y.minWidth})),H=Math.abs(H),!x.settings.horizontalPageBreak&&H>.1/w.scaleFactor()&&(H=H<1?H:Math.round(H),console.warn("Of the table content, ".concat(H," units width could not fit page"))),g(x),b(x,w),m(x)}s.calculateWidths=l;function d(w,x){var F=w.scaleFactor(),z=x.settings.horizontalPageBreak,H=(0,u.getPageAvailableWidth)(w,x);x.allRows().forEach(function(Y){for(var R=0,I=x.columns;R<I.length;R++){var N=I[R],P=Y.cells[N.index];if(P){var C=x.hooks.didParseCell;x.callCellHooks(w,C,P,Y,N,null);var T=P.padding("horizontal");P.contentWidth=(0,u.getStringWidth)(P.text,P.styles,w)+T;var M=(0,u.getStringWidth)(P.text.join(" ").split(/[^\S\u00A0]+/),P.styles,w);if(P.minReadableWidth=M+P.padding("horizontal"),typeof P.styles.cellWidth=="number")P.minWidth=P.styles.cellWidth,P.wrappedWidth=P.styles.cellWidth;else if(P.styles.cellWidth==="wrap"||z===!0)P.contentWidth>H?(P.minWidth=H,P.wrappedWidth=H):(P.minWidth=P.contentWidth,P.wrappedWidth=P.contentWidth);else{var B=10/F;P.minWidth=P.styles.minCellWidth||B,P.wrappedWidth=P.contentWidth,P.minWidth>P.wrappedWidth&&(P.wrappedWidth=P.minWidth)}}}}),x.allRows().forEach(function(Y){for(var R=0,I=x.columns;R<I.length;R++){var N=I[R],P=Y.cells[N.index];if(P&&P.colSpan===1)N.wrappedWidth=Math.max(N.wrappedWidth,P.wrappedWidth),N.minWidth=Math.max(N.minWidth,P.minWidth),N.minReadableWidth=Math.max(N.minReadableWidth,P.minReadableWidth);else{var C=x.styles.columnStyles[N.dataKey]||x.styles.columnStyles[N.index]||{},T=C.cellWidth||C.minCellWidth;T&&typeof T=="number"&&(N.minWidth=T,N.wrappedWidth=T)}P&&(P.colSpan>1&&!N.minWidth&&(N.minWidth=P.minWidth),P.colSpan>1&&!N.wrappedWidth&&(N.wrappedWidth=P.minWidth))}})}function f(w,x,F){for(var z=x,H=w.reduce(function(B,K){return B+K.wrappedWidth},0),Y=0;Y<w.length;Y++){var R=w[Y],I=R.wrappedWidth/H,N=z*I,P=R.width+N,C=F(R),T=P<C?C:P;x-=T-R.width,R.width=T}if(x=Math.round(x*1e10)/1e10,x){var M=w.filter(function(B){return x<0?B.width>F(B):!0});M.length&&(x=f(M,x,F))}return x}s.resizeColumns=f;function m(w){for(var x={},F=1,z=w.allRows(),H=0;H<z.length;H++)for(var Y=z[H],R=0,I=w.columns;R<I.length;R++){var N=I[R],P=x[N.index];if(F>1)F--,delete Y.cells[N.index];else if(P)P.cell.height+=Y.height,F=P.cell.colSpan,delete Y.cells[N.index],P.left--,P.left<=1&&delete x[N.index];else{var C=Y.cells[N.index];if(!C)continue;if(C.height=Y.height,C.rowSpan>1){var T=z.length-H,M=C.rowSpan>T?T:C.rowSpan;x[N.index]={cell:C,left:M,row:Y}}}}}function g(w){for(var x=w.allRows(),F=0;F<x.length;F++)for(var z=x[F],H=null,Y=0,R=0,I=0;I<w.columns.length;I++){var N=w.columns[I];if(R-=1,R>1&&w.columns[I+1])Y+=N.width,delete z.cells[N.index];else if(H){var P=H;delete z.cells[N.index],H=null,P.width=N.width+Y}else{var P=z.cells[N.index];if(!P)continue;if(R=P.colSpan,Y=0,P.colSpan>1){H=P,Y+=N.width;continue}P.width=N.width+Y}}}function b(w,x){for(var F={count:0,height:0},z=0,H=w.allRows();z<H.length;z++){for(var Y=H[z],R=0,I=w.columns;R<I.length;R++){var N=I[R],P=Y.cells[N.index];if(P){x.applyStyles(P.styles,!0);var C=P.width-P.padding("horizontal");if(P.styles.overflow==="linebreak")P.text=x.splitTextToSize(P.text,C+1/x.scaleFactor(),{fontSize:P.styles.fontSize});else if(P.styles.overflow==="ellipsize")P.text=E(P.text,C,P.styles,x,"...");else if(P.styles.overflow==="hidden")P.text=E(P.text,C,P.styles,x,"");else if(typeof P.styles.overflow=="function"){var T=P.styles.overflow(P.text,C);typeof T=="string"?P.text=[T]:P.text=T}P.contentHeight=P.getContentHeight(x.scaleFactor(),x.getLineHeightFactor());var M=P.contentHeight/P.rowSpan;P.rowSpan>1&&F.count*F.height<M*P.rowSpan?F={height:M,count:P.rowSpan}:F&&F.count>0&&F.height>M&&(M=F.height),M>Y.height&&(Y.height=M)}}F.count--}}function E(w,x,F,z,H){return w.map(function(Y){return D(Y,x,F,z,H)})}s.ellipsize=E;function D(w,x,F,z,H){var Y=1e4*z.scaleFactor();if(x=Math.ceil(x*Y)/Y,x>=(0,u.getStringWidth)(w,F,z))return w;for(;x<(0,u.getStringWidth)(w+H,F,z)&&!(w.length<=1);)w=w.substring(0,w.length-1);return w.trim()+H}},964:function(o){if(typeof n>"u"){var s=new Error("Cannot find module 'undefined'");throw s.code="MODULE_NOT_FOUND",s}o.exports=n}},t={};function r(o){var s=t[o];if(s!==void 0)return s.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,r),a.exports}var i={};return function(){var o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.Cell=o.Column=o.Row=o.Table=o.CellHookData=o.__drawTable=o.__createTable=o.applyPlugin=void 0;var s=r(340),a=r(776),u=r(664),l=r(972),d=r(260);Object.defineProperty(o,"Table",{enumerable:!0,get:function(){return d.Table}});var f=r(172);Object.defineProperty(o,"CellHookData",{enumerable:!0,get:function(){return f.CellHookData}});var m=r(260);Object.defineProperty(o,"Cell",{enumerable:!0,get:function(){return m.Cell}}),Object.defineProperty(o,"Column",{enumerable:!0,get:function(){return m.Column}}),Object.defineProperty(o,"Row",{enumerable:!0,get:function(){return m.Row}});function g(x){(0,s.default)(x)}o.applyPlugin=g;function b(x,F){var z=(0,a.parseInput)(x,F),H=(0,l.createTable)(x,z);(0,u.drawTable)(x,H)}function E(x,F){var z=(0,a.parseInput)(x,F);return(0,l.createTable)(x,z)}o.__createTable=E;function D(x,F){(0,u.drawTable)(x,F)}o.__drawTable=D;try{var w=r(964);w.jsPDF&&(w=w.jsPDF),g(w)}catch{}o.default=b}(),i}()})});function rN(n,e){return Object.is(n,e)}var xr=null,Ay=!1,Yb=1,lo=Symbol("SIGNAL");function nn(n){let e=xr;return xr=n,e}function iN(){return xr}var Zp={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xy(n){if(Ay)throw new Error("");if(xr===null)return;xr.consumerOnSignalRead(n);let e=xr.nextProducerIndex++;if(Ry(xr),e<xr.producerNode.length&&xr.producerNode[e]!==n&&Yp(xr)){let t=xr.producerNode[e];My(t,xr.producerIndexOfThis[e])}xr.producerNode[e]!==n&&(xr.producerNode[e]=n,xr.producerIndexOfThis[e]=Yp(xr)?uN(n,xr,e):0),xr.producerLastReadVersion[e]=n.version}function eB(){Yb++}function oN(n){if(!(Yp(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Yb)){if(!n.producerMustRecompute(n)&&!Jb(n)){nN(n);return}n.producerRecomputeValue(n),nN(n)}}function sN(n){if(n.liveConsumerNode===void 0)return;let e=Ay;Ay=!0;try{for(let t of n.liveConsumerNode)t.dirty||tB(t)}finally{Ay=e}}function aN(){return xr?.consumerAllowSignalWrites!==!1}function tB(n){n.dirty=!0,sN(n),n.consumerMarkedDirty?.(n)}function nN(n){n.dirty=!1,n.lastCleanEpoch=Yb}function Ny(n){return n&&(n.nextProducerIndex=0),nn(n)}function Zb(n,e){if(nn(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Yp(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)My(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Jb(n){Ry(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(oN(t),r!==t.version))return!0}return!1}function Xb(n){if(Ry(n),Yp(n))for(let e=0;e<n.producerNode.length;e++)My(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function uN(n,e,t){if(lN(n),n.liveConsumerNode.length===0&&cN(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=uN(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function My(n,e){if(lN(n),n.liveConsumerNode.length===1&&cN(n))for(let r=0;r<n.producerNode.length;r++)My(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ry(i),i.producerIndexOfThis[r]=e}}function Yp(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ry(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function lN(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function cN(n){return n.producerNode!==void 0}function dN(n){let e=Object.create(nB);e.computation=n;let t=()=>{if(oN(e),xy(e),e.value===Ty)throw e.error;return e.value};return t[lo]=e,t}var Kb=Symbol("UNSET"),Qb=Symbol("COMPUTING"),Ty=Symbol("ERRORED"),nB=Ut(Ue({},Zp),{value:Kb,dirty:!0,error:null,equal:rN,kind:"computed",producerMustRecompute(n){return n.value===Kb||n.value===Qb},producerRecomputeValue(n){if(n.value===Qb)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Qb;let t=Ny(n),r,i=!1;try{r=n.computation(),nn(null),i=e!==Kb&&e!==Ty&&r!==Ty&&n.equal(e,r)}catch(o){r=Ty,n.error=o}finally{Zb(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function rB(){throw new Error}var hN=rB;function fN(){hN()}function pN(n){hN=n}var iB=null;function gN(n){let e=Object.create(e2);e.value=n;let t=()=>(xy(e),e.value);return t[lo]=e,t}function Py(n,e){aN()||fN(),n.equal(n.value,e)||(n.value=e,oB(n))}function mN(n,e){aN()||fN(),Py(n,e(n.value))}var e2=Ut(Ue({},Zp),{equal:rN,value:void 0,kind:"signal"});function oB(n){n.version++,eB(),sN(n),iB?.()}function xt(n){return typeof n=="function"}function ph(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ky=ph(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function mc(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var nr=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(xt(r))try{r()}catch(o){e=o instanceof ky?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{vN(o)}catch(s){e=e??[],s instanceof ky?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ky(e)}}add(e){var t;if(e&&e!==this)if(this.closed)vN(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&mc(t,e)}remove(e){let{_finalizers:t}=this;t&&mc(t,e),e instanceof n&&e._removeParent(this)}};nr.EMPTY=(()=>{let n=new nr;return n.closed=!0,n})();var t2=nr.EMPTY;function Ly(n){return n instanceof nr||n&&"closed"in n&&xt(n.remove)&&xt(n.add)&&xt(n.unsubscribe)}function vN(n){xt(n)?n():n.unsubscribe()}var ps={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var gh={setTimeout(n,e,...t){let{delegate:r}=gh;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=gh;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Oy(n){gh.setTimeout(()=>{let{onUnhandledError:e}=ps;if(e)e(n);else throw n})}function vc(){}var yN=n2("C",void 0,void 0);function _N(n){return n2("E",void 0,n)}function wN(n){return n2("N",n,void 0)}function n2(n,e,t){return{kind:n,value:e,error:t}}var yc=null;function mh(n){if(ps.useDeprecatedSynchronousErrorHandling){let e=!yc;if(e&&(yc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=yc;if(yc=null,t)throw r}}else n()}function bN(n){ps.useDeprecatedSynchronousErrorHandling&&yc&&(yc.errorThrown=!0,yc.error=n)}var _c=class extends nr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ly(e)&&e.add(this)):this.destination=uB}static create(e,t,r){return new Ua(e,t,r)}next(e){this.isStopped?i2(wN(e),this):this._next(e)}error(e){this.isStopped?i2(_N(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?i2(yN,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sB=Function.prototype.bind;function r2(n,e){return sB.call(n,e)}var o2=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Fy(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Fy(r)}else Fy(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Fy(t)}}},Ua=class extends _c{constructor(e,t,r){super();let i;if(xt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&ps.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&r2(e.next,o),error:e.error&&r2(e.error,o),complete:e.complete&&r2(e.complete,o)}):i=e}this.destination=new o2(i)}};function Fy(n){ps.useDeprecatedSynchronousErrorHandling?bN(n):Oy(n)}function aB(n){throw n}function i2(n,e){let{onStoppedNotification:t}=ps;t&&gh.setTimeout(()=>t(n,e))}var uB={closed:!0,next:vc,error:aB,complete:vc};var vh=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Wr(n){return n}function s2(...n){return a2(n)}function a2(n){return n.length===0?Wr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Lt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=cB(t)?t:new Ua(t,r,i);return mh(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=EN(r),new r((i,o)=>{let s=new Ua({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[vh](){return this}pipe(...t){return a2(t)(this)}toPromise(t){return t=EN(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function EN(n){var e;return(e=n??ps.Promise)!==null&&e!==void 0?e:Promise}function lB(n){return n&&xt(n.next)&&xt(n.error)&&xt(n.complete)}function cB(n){return n&&n instanceof _c||lB(n)&&Ly(n)}function u2(n){return xt(n?.lift)}function Pt(n){return e=>{if(u2(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Nt(n,e,t,r,i){return new l2(n,e,t,r,i)}var l2=class extends _c{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function yh(){return Pt((n,e)=>{let t=null;n._refCount++;let r=Nt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var _h=class extends Lt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,u2(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nr;let t=this.getSubject();e.add(this.source.subscribe(Nt(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nr.EMPTY)}return e}refCount(){return yh()(this)}};var IN=ph(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Hn=(()=>{class n extends Lt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Vy(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new IN}next(t){mh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){mh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){mh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?t2:(this.currentObservers=null,o.push(t),new nr(()=>{this.currentObservers=null,mc(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Lt;return t.source=this,t}}return n.create=(e,t)=>new Vy(e,t),n})(),Vy=class extends Hn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:t2}};var Gr=class extends Hn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Jp={now(){return(Jp.delegate||Date).now()},delegate:void 0};var Xp=class extends Hn{constructor(e=1/0,t=1/0,r=Jp){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var jy=class extends nr{constructor(e,t){super()}schedule(e,t=0){return this}};var eg={setInterval(n,e,...t){let{delegate:r}=eg;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=eg;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var wh=class extends jy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return eg.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&eg.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,mc(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var bh=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};bh.now=Jp.now;var Eh=class extends bh{constructor(e,t=bh.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var wc=new Eh(wh);var By=class extends wh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Uy=class extends Eh{};var c2=new Uy(By);var ni=new Lt(n=>n.complete());function CN(n){return n&&xt(n.schedule)}function d2(n){return n[n.length-1]}function Ih(n){return xt(d2(n))?n.pop():void 0}function Gs(n){return CN(d2(n))?n.pop():void 0}function SN(n,e){return typeof d2(n)=="number"?n.pop():e}var qy=n=>n&&typeof n.length=="number"&&typeof n!="function";function Hy(n){return xt(n?.then)}function zy(n){return xt(n[vh])}function $y(n){return Symbol.asyncIterator&&xt(n?.[Symbol.asyncIterator])}function Wy(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dB(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Gy=dB();function Ky(n){return xt(n?.[Gy])}function Qy(n){return Hx(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield yy(t.read());if(i)return yield yy(void 0);yield yield yy(r)}}finally{t.releaseLock()}})}function Yy(n){return xt(n?.getReader)}function Mn(n){if(n instanceof Lt)return n;if(n!=null){if(zy(n))return hB(n);if(qy(n))return fB(n);if(Hy(n))return pB(n);if($y(n))return DN(n);if(Ky(n))return gB(n);if(Yy(n))return mB(n)}throw Wy(n)}function hB(n){return new Lt(e=>{let t=n[vh]();if(xt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fB(n){return new Lt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function pB(n){return new Lt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Oy)})}function gB(n){return new Lt(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function DN(n){return new Lt(e=>{vB(n,e).catch(t=>e.error(t))})}function mB(n){return DN(Qy(n))}function vB(n,e){var t,r,i,o;return qx(this,void 0,void 0,function*(){try{for(t=zx(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Hi(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ks(n,e=0){return Pt((t,r)=>{t.subscribe(Nt(r,i=>Hi(r,n,()=>r.next(i),e),()=>Hi(r,n,()=>r.complete(),e),i=>Hi(r,n,()=>r.error(i),e)))})}function qa(n,e=0){return Pt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function AN(n,e){return Mn(n).pipe(qa(e),Ks(e))}function TN(n,e){return Mn(n).pipe(qa(e),Ks(e))}function xN(n,e){return new Lt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function NN(n,e){return new Lt(t=>{let r;return Hi(t,e,()=>{r=n[Gy](),Hi(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>xt(r?.return)&&r.return()})}function Zy(n,e){if(!n)throw new Error("Iterable cannot be null");return new Lt(t=>{Hi(t,e,()=>{let r=n[Symbol.asyncIterator]();Hi(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function MN(n,e){return Zy(Qy(n),e)}function RN(n,e){if(n!=null){if(zy(n))return AN(n,e);if(qy(n))return xN(n,e);if(Hy(n))return TN(n,e);if($y(n))return Zy(n,e);if(Ky(n))return NN(n,e);if(Yy(n))return MN(n,e)}throw Wy(n)}function pn(n,e){return e?RN(n,e):Mn(n)}function vt(...n){let e=Gs(n);return pn(n,e)}function Ch(n,e){let t=xt(n)?n:()=>n,r=i=>i.error(t());return new Lt(e?i=>e.schedule(r,0,i):r)}function h2(n){return!!n&&(n instanceof Lt||xt(n.lift)&&xt(n.subscribe))}var Ha=ph(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ut(n,e){return Pt((t,r)=>{let i=0;t.subscribe(Nt(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:yB}=Array;function _B(n,e){return yB(e)?n(...e):n(e)}function Jy(n){return ut(e=>_B(n,e))}var{isArray:wB}=Array,{getPrototypeOf:bB,prototype:EB,keys:IB}=Object;function Xy(n){if(n.length===1){let e=n[0];if(wB(e))return{args:e,keys:null};if(CB(e)){let t=IB(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function CB(n){return n&&typeof n=="object"&&bB(n)===EB}function e0(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function t0(...n){let e=Gs(n),t=Ih(n),{args:r,keys:i}=Xy(n);if(r.length===0)return pn([],e);let o=new Lt(SB(r,e,i?s=>e0(i,s):Wr));return t?o.pipe(Jy(t)):o}function SB(n,e,t=Wr){return r=>{PN(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)PN(e,()=>{let l=pn(n[u],e),d=!1;l.subscribe(Nt(r,f=>{o[u]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function PN(n,e,t){n?Hi(t,n,e):e()}function kN(n,e,t,r,i,o,s,a){let u=[],l=0,d=0,f=!1,m=()=>{f&&!u.length&&!l&&e.complete()},g=E=>l<r?b(E):u.push(E),b=E=>{o&&e.next(E),l++;let D=!1;Mn(t(E,d++)).subscribe(Nt(e,w=>{i?.(w),o?g(w):e.next(w)},()=>{D=!0},void 0,()=>{if(D)try{for(l--;u.length&&l<r;){let w=u.shift();s?Hi(e,s,()=>b(w)):b(w)}m()}catch(w){e.error(w)}}))};return n.subscribe(Nt(e,g,()=>{f=!0,m()})),()=>{a?.()}}function Nr(n,e,t=1/0){return xt(e)?Nr((r,i)=>ut((o,s)=>e(r,o,i,s))(Mn(n(r,i))),t):(typeof e=="number"&&(t=e),Pt((r,i)=>kN(r,i,n,t)))}function tg(n=1/0){return Nr(Wr,n)}function LN(){return tg(1)}function Sh(...n){return LN()(pn(n,Gs(n)))}function n0(n){return new Lt(e=>{Mn(n()).subscribe(e)})}function f2(...n){let e=Ih(n),{args:t,keys:r}=Xy(n),i=new Lt(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let d=0;d<s;d++){let f=!1;Mn(t[d]).subscribe(Nt(o,m=>{f||(f=!0,l--),a[d]=m},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?e0(r,a):a),o.complete())}))}});return e?i.pipe(Jy(e)):i}function Dh(...n){let e=Gs(n),t=SN(n,1/0),r=n;return r.length?r.length===1?Mn(r[0]):tg(t)(pn(r,e)):ni}function ri(n,e){return Pt((t,r)=>{let i=0;t.subscribe(Nt(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Gu(n){return Pt((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Nt(t,void 0,void 0,s=>{o=Mn(n(s,Gu(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function ON(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(Nt(s,d=>{let f=l++;u=a?n(u,d,f):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Ah(n,e){return xt(e)?Nr(n,e,1):Nr(n,1)}function Ku(n){return Pt((e,t)=>{let r=!1;e.subscribe(Nt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function za(n){return n<=0?()=>ni:Pt((e,t)=>{let r=0;e.subscribe(Nt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ng(n,e=Wr){return n=n??DB,Pt((t,r)=>{let i,o=!0;t.subscribe(Nt(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function DB(n,e){return n===e}function r0(n=AB){return Pt((e,t)=>{let r=!1;e.subscribe(Nt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function AB(){return new Ha}function rg(n){return Pt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function gs(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ri((i,o)=>n(i,o,r)):Wr,za(1),t?Ku(e):r0(()=>new Ha))}function Th(n){return n<=0?()=>ni:Pt((e,t)=>{let r=[];e.subscribe(Nt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function p2(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ri((i,o)=>n(i,o,r)):Wr,Th(1),t?Ku(e):r0(()=>new Ha))}function ig(){return Pt((n,e)=>{let t,r=!1;n.subscribe(Nt(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Qs(n,e){return Pt(ON(n,e,arguments.length>=2,!0))}function og(n={}){let{connector:e=()=>new Hn,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,d=!1,f=!1,m=()=>{a?.unsubscribe(),a=void 0},g=()=>{m(),s=u=void 0,d=f=!1},b=()=>{let E=s;g(),E?.unsubscribe()};return Pt((E,D)=>{l++,!f&&!d&&m();let w=u=u??e();D.add(()=>{l--,l===0&&!f&&!d&&(a=g2(b,i))}),w.subscribe(D),!s&&l>0&&(s=new Ua({next:x=>w.next(x),error:x=>{f=!0,m(),a=g2(g,t,x),w.error(x)},complete:()=>{d=!0,m(),a=g2(g,r),w.complete()}}),Mn(E).subscribe(s))})(o)}}function g2(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Ua({next:()=>{r.unsubscribe(),n()}});return Mn(e(...t)).subscribe(r)}function i0(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,og({connector:()=>new Xp(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function m2(n){return Pt((e,t)=>{let r=!1,i=0;e.subscribe(Nt(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}function bc(...n){let e=Gs(n);return Pt((t,r)=>{(e?Sh(n,t,e):Sh(n,t)).subscribe(r)})}function Kn(n,e){return Pt((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Nt(r,u=>{i?.unsubscribe();let l=0,d=o++;Mn(n(u,d)).subscribe(i=Nt(r,f=>r.next(e?e(u,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function o0(n,e){return xt(e)?Kn(()=>n,e):Kn(()=>n)}function v2(n){return Pt((e,t)=>{Mn(n).subscribe(Nt(t,()=>t.complete(),vc)),!t.closed&&e.subscribe(t)})}function Kr(n,e,t){let r=xt(n)||e||t?{next:n,error:e,complete:t}:n;return r?Pt((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Nt(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Wr}function y2(...n){let e=Ih(n);return Pt((t,r)=>{let i=n.length,o=new Array(i),s=n.map(()=>!1),a=!1;for(let u=0;u<i;u++)Mn(n[u]).subscribe(Nt(r,l=>{o[u]=l,!a&&!s[u]&&(s[u]=!0,(a=s.every(Wr))&&(s=null))},vc));t.subscribe(Nt(r,u=>{if(a){let l=[u,...o];r.next(e?e(...l):l)}}))})}var TB="https://g.co/ng/security#xss",ht=class extends Error{code;constructor(e,t){super(_E(e,t)),this.code=e}};function _E(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var CM=Symbol("InputSignalNode#UNSET"),xB=Ut(Ue({},e2),{transformFn:void 0,applyValueToInputSignal(n,e){Py(n,e)}});function SM(n,e){let t=Object.create(xB);t.value=n,t.transformFn=e?.transform;function r(){if(xy(t),t.value===CM)throw new ht(-950,!1);return t.value}return r[lo]=t,r}function _g(n){return{toString:n}.toString()}var s0="__parameters__";function NB(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function DM(n,e,t){return _g(()=>{let r=NB(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,d){let f=u.hasOwnProperty(s0)?u[s0]:Object.defineProperty(u,s0,{value:[]})[s0];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var ag=globalThis;function Rn(n){for(let e in n)if(n[e]===Rn)return e;throw Error("Could not find renamed property on target object.")}function MB(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function bi(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(bi).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function FN(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var RB=Rn({__forward_ref__:Rn});function Ka(n){return n.__forward_ref__=Ka,n.toString=function(){return bi(this())},n}function wi(n){return AM(n)?n():n}function AM(n){return typeof n=="function"&&n.hasOwnProperty(RB)&&n.__forward_ref__===Ka}function dt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function fo(n){return{providers:n.providers||[],imports:n.imports||[]}}function B0(n){return VN(n,xM)||VN(n,NM)}function TM(n){return B0(n)!==null}function VN(n,e){return n.hasOwnProperty(e)?n[e]:null}function PB(n){let e=n&&(n[xM]||n[NM]);return e||null}function jN(n){return n&&(n.hasOwnProperty(BN)||n.hasOwnProperty(kB))?n[BN]:null}var xM=Rn({\u0275prov:Rn}),BN=Rn({\u0275inj:Rn}),NM=Rn({ngInjectableDef:Rn}),kB=Rn({ngInjectorDef:Rn}),nt=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=dt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function MM(n){return n&&!!n.\u0275providers}var LB=Rn({\u0275cmp:Rn}),OB=Rn({\u0275dir:Rn}),FB=Rn({\u0275pipe:Rn}),VB=Rn({\u0275mod:Rn}),p0=Rn({\u0275fac:Rn}),cg=Rn({__NG_ELEMENT_ID__:Rn}),UN=Rn({__NG_ENV_ID__:Rn});function wE(n){return typeof n=="string"?n:n==null?"":String(n)}function jB(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():wE(n)}function BB(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ht(-200,n)}function bE(n,e){throw new ht(-201,!1)}var zt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(zt||{}),R2;function RM(){return R2}function zi(n){let e=R2;return R2=n,e}function PM(n,e,t){let r=B0(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&zt.Optional)return null;if(e!==void 0)return e;bE(n,"Injector")}var UB={},dg=UB,P2="__NG_DI_FLAG__",g0="ngTempTokenPath",qB="ngTokenPath",HB=/\n/gm,zB="\u0275",qN="__source",Rh;function $B(){return Rh}function Qu(n){let e=Rh;return Rh=n,e}function WB(n,e=zt.Default){if(Rh===void 0)throw new ht(-203,!1);return Rh===null?PM(n,void 0,e):Rh.get(n,e&zt.Optional?null:void 0,e)}function je(n,e=zt.Default){return(RM()||WB)(wi(n),e)}function Fe(n,e=zt.Default){return je(n,U0(e))}function U0(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function k2(n){let e=[];for(let t=0;t<n.length;t++){let r=wi(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ht(900,!1);let i,o=zt.Default;for(let s=0;s<r.length;s++){let a=r[s],u=GB(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(je(i,o))}else e.push(je(r))}return e}function kM(n,e){return n[P2]=e,n.prototype[P2]=e,n}function GB(n){return n[P2]}function KB(n,e,t,r){let i=n[g0];throw e[qN]&&i.unshift(e[qN]),n.message=QB(`
`+n.message,i,t,r),n[qB]=i,n[g0]=null,n}function QB(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==zB?n.slice(2):n;let i=bi(e);if(Array.isArray(e))i=e.map(bi).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):bi(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(HB,`
  `)}`}var q0=kM(DM("Optional"),8);var YB=kM(DM("SkipSelf"),4);function Cc(n,e){let t=n.hasOwnProperty(p0);return t?n[p0]:null}function EE(n,e){n.forEach(t=>Array.isArray(t)?EE(t,e):e(t))}function LM(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function m0(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ZB(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function JB(n,e,t){let r=wg(n,e);return r>=0?n[r|1]=t:(r=~r,ZB(n,r,e,t)),r}function _2(n,e){let t=wg(n,e);if(t>=0)return n[t|1]}function wg(n,e){return XB(n,e,1)}function XB(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var kh={},qo=[],Lh=new nt(""),OM=new nt("",-1),FM=new nt(""),v0=class{get(e,t=dg){if(t===dg){let r=new Error(`NullInjectorError: No provider for ${bi(e)}!`);throw r.name="NullInjectorError",r}return t}};function VM(n,e){let t=n[VB]||null;if(!t&&e===!0)throw new Error(`Type ${bi(n)} does not have '\u0275mod' property.`);return t}function Sc(n){return n[LB]||null}function jM(n){return n[OB]||null}function BM(n){return n[FB]||null}function UM(n){let e=Sc(n)||jM(n)||BM(n);return e!==null&&e.standalone}function IE(n){return{\u0275providers:n}}function CE(...n){return{\u0275providers:qM(!0,n),\u0275fromNgModule:!0}}function qM(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return EE(e,s=>{let a=s;L2(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&HM(i,o),t}function HM(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];SE(i,o=>{e(o,r)})}}function L2(n,e,t,r){if(n=wi(n),!n)return!1;let i=null,o=jN(n),s=!o&&Sc(n);if(!o&&!s){let u=n.ngModule;if(o=jN(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)L2(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{EE(o.imports,d=>{L2(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&HM(l,e)}if(!a){let l=Cc(i)||(()=>new i);e({provide:i,useFactory:l,deps:qo},i),e({provide:FM,useValue:i,multi:!0},i),e({provide:Lh,useValue:()=>je(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;SE(u,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function SE(n,e){for(let t of n)MM(t)&&(t=t.\u0275providers),Array.isArray(t)?SE(t,e):e(t)}var e7=Rn({provide:String,useValue:Rn});function zM(n){return n!==null&&typeof n=="object"&&e7 in n}function t7(n){return!!(n&&n.useExisting)}function n7(n){return!!(n&&n.useFactory)}function Oh(n){return typeof n=="function"}function r7(n){return!!n.useClass}var H0=new nt(""),l0={},i7={},w2;function DE(){return w2===void 0&&(w2=new v0),w2}var lr=class{},hg=class extends lr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,F2(e,s=>this.processProvider(s)),this.records.set(OM,xh(void 0,this)),i.has("environment")&&this.records.set(lr,xh(void 0,this));let o=this.records.get(H0);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(FM,qo,zt.Self))}destroy(){ug(this),this._destroyed=!0;let e=nn(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),nn(e)}}onDestroy(e){return ug(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ug(this);let t=Qu(this),r=zi(void 0),i;try{return e()}finally{Qu(t),zi(r)}}get(e,t=dg,r=zt.Default){if(ug(this),e.hasOwnProperty(UN))return e[UN](this);r=U0(r);let i,o=Qu(this),s=zi(void 0);try{if(!(r&zt.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=l7(e)&&B0(e);l&&this.injectableDefInScope(l)?u=xh(O2(e),l0):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&zt.Self?DE():this.parent;return t=r&zt.Optional&&t===dg?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[g0]=a[g0]||[]).unshift(bi(e)),o)throw a;return KB(a,e,"R3InjectorError",this.source)}else throw a}finally{zi(s),Qu(o)}}resolveInjectorInitializers(){let e=nn(null),t=Qu(this),r=zi(void 0),i;try{let o=this.get(Lh,qo,zt.Self);for(let s of o)s()}finally{Qu(t),zi(r),nn(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(bi(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=wi(e);let t=Oh(e)?e:wi(e&&e.provide),r=s7(e);if(!Oh(e)&&e.multi===!0){let i=this.records.get(t);i||(i=xh(void 0,l0,!0),i.factory=()=>k2(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=nn(null);try{return t.value===l0&&(t.value=i7,t.value=t.factory()),typeof t.value=="object"&&t.value&&u7(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{nn(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=wi(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function O2(n){let e=B0(n),t=e!==null?e.factory:Cc(n);if(t!==null)return t;if(n instanceof nt)throw new ht(204,!1);if(n instanceof Function)return o7(n);throw new ht(204,!1)}function o7(n){if(n.length>0)throw new ht(204,!1);let t=PB(n);return t!==null?()=>t.factory(n):()=>new n}function s7(n){if(zM(n))return xh(void 0,n.useValue);{let e=$M(n);return xh(e,l0)}}function $M(n,e,t){let r;if(Oh(n)){let i=wi(n);return Cc(i)||O2(i)}else if(zM(n))r=()=>wi(n.useValue);else if(n7(n))r=()=>n.useFactory(...k2(n.deps||[]));else if(t7(n))r=()=>je(wi(n.useExisting));else{let i=wi(n&&(n.useClass||n.provide));if(a7(n))r=()=>new i(...k2(n.deps));else return Cc(i)||O2(i)}return r}function ug(n){if(n.destroyed)throw new ht(205,!1)}function xh(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function a7(n){return!!n.deps}function u7(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function l7(n){return typeof n=="function"||typeof n=="object"&&n instanceof nt}function F2(n,e){for(let t of n)Array.isArray(t)?F2(t,e):t&&MM(t)?F2(t.\u0275providers,e):e(t)}function $o(n,e){n instanceof hg&&ug(n);let t,r=Qu(n),i=zi(void 0);try{return e()}finally{Qu(r),zi(i)}}function WM(){return RM()!==void 0||$B()!=null}function GM(n){if(!WM())throw new ht(-203,!1)}function c7(n){return typeof n=="function"}var Qa=0,rn=1,Ot=2,Ei=3,vs=4,ws=5,y0=6,_0=7,ys=8,fg=9,Ju=10,br=11,pg=12,HN=13,Hh=14,Zs=15,Fh=16,Nh=17,Vh=18,z0=19,KM=20,Yu=21,b2=22,w0=23,co=24,_s=25,QM=1;var Dc=7,b0=8,E0=9,zo=10;function Zu(n){return Array.isArray(n)&&typeof n[QM]=="object"}function Ya(n){return Array.isArray(n)&&n[QM]===!0}function YM(n){return(n.flags&4)!==0}function Pc(n){return n.componentOffset>-1}function AE(n){return(n.flags&1)===1}function $a(n){return!!n.template}function I0(n){return(n[Ot]&512)!==0}function bg(n){return(n[Ot]&256)===256}var V2=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function ZM(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var zh=(()=>{let n=()=>JM;return n.ngInherit=!0,n})();function JM(n){return n.type.prototype.ngOnChanges&&(n.setInput=h7),d7}function d7(){let n=eR(this),e=n?.current;if(e){let t=n.previous;if(t===kh)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function h7(n,e,t,r,i){let o=this.declaredInputs[r],s=eR(n)||f7(n,{previous:kh,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new V2(l&&l.currentValue,t,u===kh),ZM(n,e,i,t)}var XM="__ngSimpleChanges__";function eR(n){return n[XM]||null}function f7(n,e){return n[XM]=e}var zN=null;var Ho=function(n,e,t){zN?.(n,e,t)},p7="svg",g7="math";function Js(n){for(;Array.isArray(n);)n=n[Qa];return n}function tR(n,e){return Js(e[n])}function bs(n,e){return Js(e[n.index])}function nR(n,e){return n.data[e]}function m7(n,e){return n[e]}function Xs(n,e){let t=e[n];return Zu(t)?t:t[Qa]}function TE(n){return(n[Ot]&128)===128}function v7(n){return Ya(n[Ei])}function C0(n,e){return e==null?null:n[e]}function rR(n){n[Nh]=0}function xE(n){n[Ot]&1024||(n[Ot]|=1024,TE(n)&&W0(n))}function y7(n,e){for(;n>0;)e=e[Hh],n--;return e}function $0(n){return!!(n[Ot]&9216||n[co]?.dirty)}function j2(n){n[Ju].changeDetectionScheduler?.notify(9),n[Ot]&64&&(n[Ot]|=1024),$0(n)&&W0(n)}function W0(n){n[Ju].changeDetectionScheduler?.notify(0);let e=Ac(n);for(;e!==null&&!(e[Ot]&8192||(e[Ot]|=8192,!TE(e)));)e=Ac(e)}function iR(n,e){if(bg(n))throw new ht(911,!1);n[Yu]===null&&(n[Yu]=[]),n[Yu].push(e)}function _7(n,e){if(n[Yu]===null)return;let t=n[Yu].indexOf(e);t!==-1&&n[Yu].splice(t,1)}function Ac(n){let e=n[Ei];return Ya(e)?e[Ei]:e}function w7(n){return n[_0]??=[]}function b7(n){return n.cleanup??=[]}var en={lFrame:dR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var B2=!1;function E7(){return en.lFrame.elementDepthCount}function I7(){en.lFrame.elementDepthCount++}function C7(){en.lFrame.elementDepthCount--}function NE(){return en.bindingsEnabled}function S7(){return en.skipHydrationRootTNode!==null}function D7(n){return en.skipHydrationRootTNode===n}function A7(){en.skipHydrationRootTNode=null}function zn(){return en.lFrame.lView}function Ii(){return en.lFrame.tView}function Wo(){let n=oR();for(;n!==null&&n.type===64;)n=n.parent;return n}function oR(){return en.lFrame.currentTNode}function T7(){let n=en.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Eg(n,e){let t=en.lFrame;t.currentTNode=n,t.isParent=e}function sR(){return en.lFrame.isParent}function x7(){en.lFrame.isParent=!1}function aR(){return B2}function $N(n){let e=B2;return B2=n,e}function N7(){let n=en.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function M7(n){return en.lFrame.bindingIndex=n}function G0(){return en.lFrame.bindingIndex++}function R7(n){let e=en.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function P7(){return en.lFrame.inI18n}function k7(n,e){let t=en.lFrame;t.bindingIndex=t.bindingRootIndex=n,U2(e)}function L7(){return en.lFrame.currentDirectiveIndex}function U2(n){en.lFrame.currentDirectiveIndex=n}function O7(n){let e=en.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function uR(n){en.lFrame.currentQueryIndex=n}function F7(n){let e=n[rn];return e.type===2?e.declTNode:e.type===1?n[ws]:null}function lR(n,e,t){if(t&zt.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&zt.Host);)if(i=F7(o),i===null||(o=o[Hh],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=en.lFrame=cR();return r.currentTNode=e,r.lView=n,!0}function ME(n){let e=cR(),t=n[rn];en.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function cR(){let n=en.lFrame,e=n===null?null:n.child;return e===null?dR(n):e}function dR(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function hR(){let n=en.lFrame;return en.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var fR=hR;function RE(){let n=hR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function V7(n){return(en.lFrame.contextLView=y7(n,en.lFrame.contextLView))[ys]}function $h(){return en.lFrame.selectedIndex}function Tc(n){en.lFrame.selectedIndex=n}function K0(){let n=en.lFrame;return nR(n.tView,n.selectedIndex)}function j7(){return en.lFrame.currentNamespace}var pR=!0;function PE(){return pR}function kE(n){pR=n}function B7(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=JM(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function gR(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function c0(n,e,t){mR(n,e,3,t)}function d0(n,e,t,r){(n[Ot]&3)===t&&mR(n,e,t,r)}function E2(n,e){let t=n[Ot];(t&3)===e&&(t&=16383,t+=1,n[Ot]=t)}function mR(n,e,t,r){let i=r!==void 0?n[Nh]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Nh]+=65536),(a<o||o==-1)&&(U7(n,t,e,u),n[Nh]=(n[Nh]&4294901760)+u+2),u++}function WN(n,e){Ho(4,n,e);let t=nn(null);try{e.call(n)}finally{nn(t),Ho(5,n,e)}}function U7(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Ot]>>14<n[Nh]>>16&&(n[Ot]&3)===e&&(n[Ot]+=16384,WN(a,o)):WN(a,o)}var Ph=-1,xc=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function q7(n){return n instanceof xc}function H7(n){return(n.flags&8)!==0}function z7(n){return(n.flags&16)!==0}function $7(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];G7(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function W7(n){return n===3||n===4||n===6}function G7(n){return n.charCodeAt(0)===64}function gg(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?GN(n,t,i,null,e[++r]):GN(n,t,i,null,null))}}return n}function GN(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var I2={},q2=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=U0(r);let i=this.injector.get(e,I2,r);return i!==I2||t===I2?i:this.parentInjector.get(e,t,r)}};function vR(n){return n!==Ph}function S0(n){return n&32767}function K7(n){return n>>16}function D0(n,e){let t=K7(n),r=e;for(;t>0;)r=r[Hh],t--;return r}var H2=!0;function A0(n){let e=H2;return H2=n,e}var Q7=256,yR=Q7-1,_R=5,Y7=0,Ys={};function Z7(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(cg)&&(r=t[cg]),r==null&&(r=t[cg]=Y7++);let i=r&yR,o=1<<i;e.data[n+(i>>_R)]|=o}function T0(n,e){let t=wR(n,e);if(t!==-1)return t;let r=e[rn];r.firstCreatePass&&(n.injectorIndex=e.length,C2(r.data,n),C2(e,null),C2(r.blueprint,null));let i=LE(n,e),o=n.injectorIndex;if(vR(i)){let s=S0(i),a=D0(i,e),u=a[rn].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function C2(n,e){n.push(0,0,0,0,0,0,0,0,e)}function wR(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function LE(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=SR(i),r===null)return Ph;if(t++,i=i[Hh],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ph}function z2(n,e,t){Z7(n,e,t)}function bR(n,e,t){if(t&zt.Optional||n!==void 0)return n;bE(e,"NodeInjector")}function ER(n,e,t,r){if(t&zt.Optional&&r===void 0&&(r=null),!(t&(zt.Self|zt.Host))){let i=n[fg],o=zi(void 0);try{return i?i.get(e,r,t&zt.Optional):PM(e,r,t&zt.Optional)}finally{zi(o)}}return bR(r,e,t)}function IR(n,e,t,r=zt.Default,i){if(n!==null){if(e[Ot]&2048&&!(r&zt.Self)){let s=nU(n,e,t,r,Ys);if(s!==Ys)return s}let o=CR(n,e,t,r,Ys);if(o!==Ys)return o}return ER(e,t,r,i)}function CR(n,e,t,r,i){let o=eU(t);if(typeof o=="function"){if(!lR(e,n,r))return r&zt.Host?bR(i,t,r):ER(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&zt.Optional))bE(t);else return s}finally{fR()}}else if(typeof o=="number"){let s=null,a=wR(n,e),u=Ph,l=r&zt.Host?e[Zs][ws]:null;for((a===-1||r&zt.SkipSelf)&&(u=a===-1?LE(n,e):e[a+8],u===Ph||!QN(r,!1)?a=-1:(s=e[rn],a=S0(u),e=D0(u,e)));a!==-1;){let d=e[rn];if(KN(o,a,d.data)){let f=J7(a,e,t,s,r,l);if(f!==Ys)return f}u=e[a+8],u!==Ph&&QN(r,e[rn].data[a+8]===l)&&KN(o,a,e)?(s=d,a=S0(u),e=D0(u,e)):a=-1}}return i}function J7(n,e,t,r,i,o){let s=e[rn],a=s.data[n+8],u=r==null?Pc(a)&&H2:r!=s&&(a.type&3)!==0,l=i&zt.Host&&o===a,d=X7(a,s,t,u,l);return d!==null?x0(e,s,d,a):Ys}function X7(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,m=i?a+d:l;for(let g=f;g<m;g++){let b=s[g];if(g<u&&t===b||g>=u&&b.type===t)return g}if(i){let g=s[u];if(g&&$a(g)&&g.type===t)return u}return null}function x0(n,e,t,r){let i=n[t],o=e.data;if(q7(i)){let s=i;s.resolving&&BB(jB(o[t]));let a=A0(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?zi(s.injectImpl):null,d=lR(n,r,zt.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&B7(t,o[t],e)}finally{l!==null&&zi(l),A0(a),s.resolving=!1,fR()}}return i}function eU(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(cg)?n[cg]:void 0;return typeof e=="number"?e>=0?e&yR:tU:e}function KN(n,e,t){let r=1<<n;return!!(t[e+(n>>_R)]&r)}function QN(n,e){return!(n&zt.Self)&&!(n&zt.Host&&e)}var Ic=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return IR(this._tNode,this._lView,e,U0(r),t)}};function tU(){return new Ic(Wo(),zn())}function Za(n){return _g(()=>{let e=n.prototype.constructor,t=e[p0]||$2(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[p0]||$2(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function $2(n){return AM(n)?()=>{let e=$2(wi(n));return e&&e()}:Cc(n)}function nU(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Ot]&2048&&!I0(s);){let a=CR(o,s,t,r|zt.Self,Ys);if(a!==Ys)return a;let u=o.parent;if(!u){let l=s[KM];if(l){let d=l.get(t,Ys,r);if(d!==Ys)return d}u=SR(s),s=s[Hh]}o=u}return i}function SR(n){let e=n[rn],t=e.type;return t===2?e.declTNode:t===1?n[ws]:null}function YN(n,e=null,t=null,r){let i=DR(n,e,t,r);return i.resolveInjectorInitializers(),i}function DR(n,e=null,t=null,r,i=new Set){let o=[t||qo,CE(n)];return r=r||(typeof n=="object"?void 0:bi(n)),new hg(o,e||DE(),r||null,i)}var ho=class n{static THROW_IF_NOT_FOUND=dg;static NULL=new v0;static create(e,t){if(Array.isArray(e))return YN({name:""},t,e,"");{let r=e.name??"";return YN({name:r},e.parent,e.providers,r)}}static \u0275prov=dt({token:n,providedIn:"any",factory:()=>je(OM)});static __NG_ELEMENT_ID__=-1};var rU=new nt("");rU.__NG_ELEMENT_ID__=n=>{let e=Wo();if(e===null)throw new ht(204,!1);if(e.type&2)return e.value;if(n&zt.Optional)return null;throw new ht(204,!1)};var AR=!1,Ig=(()=>{class n{static __NG_ELEMENT_ID__=iU;static __NG_ENV_ID__=t=>t}return n})(),W2=class extends Ig{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return iR(this._lView,e),()=>_7(this._lView,e)}};function iU(){return new W2(zn())}var jh=class{},OE=new nt("",{providedIn:"root",factory:()=>!1});var TR=new nt(""),xR=new nt(""),kc=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Gr(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=dt({token:n,providedIn:"root",factory:()=>new n})}return n})(),FE=(()=>{class n{internalPendingTasks=Fe(kc);scheduler=Fe(jh);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(12),this.internalPendingTasks.remove(t))}}run(t){return Ee(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=dt({token:n,providedIn:"root",factory:()=>new n})}return n})(),G2=class extends Hn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,WM()&&(this.destroyRef=Fe(Ig,{optional:!0})??void 0,this.pendingTasks=Fe(kc,{optional:!0})??void 0)}emit(e){let t=nn(null);try{super.next(e)}finally{nn(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof nr&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Qr=G2;function N0(...n){}function NR(n){let e,t;function r(){n=N0;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function ZN(n){return queueMicrotask(()=>n()),()=>{n=N0}}var VE="isAngularZone",M0=VE+"_ID",oU=0,un=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Qr(!1);onMicrotaskEmpty=new Qr(!1);onStable=new Qr(!1);onError=new Qr(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=AR}=e;if(typeof Zone>"u")throw new ht(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,uU(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(VE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ht(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ht(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,sU,N0,N0);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},sU={};function jE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function aU(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){NR(()=>{n.callbackScheduled=!1,K2(n),n.isCheckStableRunning=!0,jE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),K2(n)}function uU(n){let e=()=>{aU(n)},t=oU++;n._inner=n._inner.fork({name:"angular",properties:{[VE]:!0,[M0]:t,[M0+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(lU(u))return r.invokeTask(o,s,a,u);try{return JN(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),XN(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return JN(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!cU(u)&&e(),XN(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,K2(n),jE(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function K2(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function JN(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function XN(n){n._nesting--,jE(n)}var Q2=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Qr;onMicrotaskEmpty=new Qr;onStable=new Qr;onError=new Qr;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function lU(n){return MR(n,"__ignore_ng_zone__")}function cU(n){return MR(n,"__scheduler_tick__")}function MR(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Xu=class{_console=console;handleError(e){this._console.error("ERROR",e)}},dU=new nt("",{providedIn:"root",factory:()=>{let n=Fe(un),e=Fe(Xu);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function eM(n,e){return SM(n,e)}function hU(n){return SM(CM,n)}var RR=(eM.required=hU,eM);function fU(){return Q0(Wo(),zn())}function Q0(n,e){return new ta(bs(n,e))}var ta=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=fU}return n})();var tM=new Set;function Y0(n){tM.has(n)||(tM.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function pU(n){return typeof n=="function"&&n[lo]!==void 0}function Cg(n,e){Y0("NgSignals");let t=gN(n),r=t[lo];return e?.equal&&(r.equal=e.equal),t.set=i=>Py(r,i),t.update=i=>mN(r,i),t.asReadonly=gU.bind(t),t}function gU(){let n=this[lo];if(n.readonlyFn===void 0){let e=()=>this();e[lo]=n,n.readonlyFn=e}return n.readonlyFn}function PR(n){return pU(n)&&typeof n.set=="function"}function kR(n){return(n.flags&128)===128}var LR=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(LR||{}),OR=new Map,mU=0;function vU(){return mU++}function yU(n){OR.set(n[z0],n)}function Y2(n){OR.delete(n[z0])}var nM="__ngContext__";function Wh(n,e){Zu(e)?(n[nM]=e[z0],yU(e)):n[nM]=e}function FR(n){return jR(n[pg])}function VR(n){return jR(n[vs])}function jR(n){for(;n!==null&&!Ya(n);)n=n[vs];return n}var Z2;function BR(n){Z2=n}function _U(){if(Z2!==void 0)return Z2;if(typeof document<"u")return document;throw new ht(210,!1)}var BE=new nt("",{providedIn:"root",factory:()=>wU}),wU="ng",UE=new nt(""),po=new nt("",{providedIn:"platform",factory:()=>"unknown"});var qE=new nt("",{providedIn:"root",factory:()=>_U().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var bU="h",EU="b";var UR=!1,IU=new nt("",{providedIn:"root",factory:()=>UR});var qR=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(qR||{}),Z0=new nt("");var CU=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=dt({token:n,providedIn:"root",factory:()=>new n})}return n})();var SU=()=>null;function HR(n,e,t=!1){return SU(n,e,t)}function zR(n,e){let t=n.contentQueries;if(t!==null){let r=nn(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];uR(o),a.contentQueries(2,e[s],s)}}}finally{nn(r)}}}function J2(n,e,t){uR(0);let r=nn(null);try{e(n,t)}finally{nn(r)}}function $R(n,e,t){if(YM(e)){let r=nn(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{nn(r)}}}var ea=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ea||{});var X2=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${TB})`}};function HE(n){return n instanceof X2?n.changingThisBreaksApplicationSecurity:n}function WR(n){return n instanceof Function?n():n}function DU(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var GR="ng-template";function AU(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&DU(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(zE(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function zE(n){return n.type===4&&n.value!==GR}function TU(n,e,t){let r=n.type===4&&!t?GR:n.value;return e===r}function xU(n,e,t){let r=4,i=n.attrs,o=i!==null?RU(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!ms(r)&&!ms(u))return!1;if(s&&ms(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!TU(n,u,t)||u===""&&e.length===1){if(ms(r))return!1;s=!0}}else if(r&8){if(i===null||!AU(n,i,u,t)){if(ms(r))return!1;s=!0}}else{let l=e[++a],d=NU(u,i,zE(n),t);if(d===-1){if(ms(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(ms(r))return!1;s=!0}}}}return ms(r)||s}function ms(n){return(n&1)===0}function NU(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return PU(e,n)}function MU(n,e,t=!1){for(let r=0;r<e.length;r++)if(xU(n,e[r],t))return!0;return!1}function RU(n){for(let e=0;e<n.length;e++){let t=n[e];if(W7(t))return e}return n.length}function PU(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function rM(n,e){return n?":not("+e.trim()+")":e}function kU(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ms(s)&&(e+=rM(o,i),i=""),r=s,o=o||!ms(r);t++}return i!==""&&(e+=rM(o,i)),e}function LU(n){return n.map(kU).join(",")}function OU(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!ms(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var rl={};function FU(n,e){return n.createText(e)}function VU(n,e,t){n.setValue(e,t)}function KR(n,e,t){return n.createElement(e,t)}function R0(n,e,t,r,i){n.insertBefore(e,t,r,i)}function QR(n,e,t){n.appendChild(e,t)}function iM(n,e,t,r,i){r!==null?R0(n,e,t,r,i):QR(n,e,t)}function jU(n,e,t){n.removeChild(null,e,t)}function BU(n,e,t){n.setAttribute(e,"style",t)}function UU(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function YR(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&$7(n,e,r),i!==null&&UU(n,e,i),o!==null&&BU(n,e,o)}function Zt(n=1){ZR(Ii(),zn(),$h()+n,!1)}function ZR(n,e,t,r){if(!r)if((e[Ot]&3)===3){let o=n.preOrderCheckHooks;o!==null&&c0(e,o,t)}else{let o=n.preOrderHooks;o!==null&&d0(e,o,0,t)}Tc(t)}var el=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(el||{});function JR(n,e,t,r,i,o){let s=nn(null);try{let a=null;i&el.SignalBased&&(a=e[r][lo]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&el.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):ZM(e,a,r,o)}finally{nn(s)}}function $E(n,e,t,r,i,o,s,a,u,l,d){let f=e.blueprint.slice();return f[Qa]=i,f[Ot]=r|4|128|8|64|1024,(l!==null||n&&n[Ot]&2048)&&(f[Ot]|=2048),rR(f),f[Ei]=f[Hh]=n,f[ys]=t,f[Ju]=s||n&&n[Ju],f[br]=a||n&&n[br],f[fg]=u||n&&n[fg]||null,f[ws]=o,f[z0]=vU(),f[y0]=d,f[KM]=l,f[Zs]=e.type==2?n[Zs]:f,f}function XR(n,e,t,r,i){let o=$h(),s=r&2;try{Tc(-1),s&&e.length>_s&&ZR(n,e,_s,!1),Ho(s?2:0,i),t(r,i)}finally{Tc(o),Ho(s?3:1,i)}}function eP(n,e,t){NE()&&(Wh(bs(t,e),e),tP(n,e,t))}function tP(n,e,t){QU(n,e,t),(t.flags&64)===64&&YU(n,e,t)}function nP(n,e,t=bs){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function qU(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=WE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function WE(n,e,t,r,i,o,s,a,u,l,d){let f=_s+r,m=f+i,g=HU(f,m),b=typeof l=="function"?l():l;return g[rn]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:d}}function HU(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:rl);return t}function zU(n,e,t,r){let o=r.get(IU,UR)||t===ea.ShadowDom,s=n.selectRootElement(e,o);return $U(s),s}function $U(n){WU(n)}var WU=()=>null;function GU(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function GE(n,e,t,r,i,o,s,a){let u=bs(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(QE(n,t,d,r,i),Pc(e)&&KU(t,e.index)):e.type&3?(r=GU(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function KU(n,e){let t=Xs(e,n);t[Ot]&16||(t[Ot]|=64)}function QU(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Pc(t)&&JU(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||T0(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=x0(e,n,s,t);if(Wh(u,e),o!==null&&t9(e,s-r,u,a,t,o),$a(a)){let l=Xs(t.index,e);l[ys]=x0(e,n,s,t)}}}function YU(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=L7();try{Tc(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];U2(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&ZU(u,l)}}finally{Tc(-1),U2(s)}}function ZU(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function rP(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];MU(e,o.selectors,!1)&&(r??=[],$a(o)?r.unshift(o):r.push(o))}return r}function iP(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function JU(n,e,t){let r=bs(e,n),i=qU(t),o=n[Ju].rendererFactory,s=KE(n,$E(n,i,null,iP(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function XU(n,e,t,r,i,o){let s=bs(n,e);e9(e[br],s,o,n.value,t,r,i)}function e9(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?wE(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function t9(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],d=s[a++],f=s[a++];JR(r,t,u,l,d,f)}}function oP(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function KE(n,e){return n[pg]?n[HN][vs]=e:n[pg]=e,n[HN]=e,e}function sP(n,e){let t=n[fg],r=t?t.get(Xu,null):null;r&&r.handleError(e)}function QE(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],d=n.data[s];JR(d,l,r,a,u,i)}}function n9(n,e){let t=Xs(e,n),r=t[rn];r9(r,t);let i=t[Qa];i!==null&&t[y0]===null&&(t[y0]=HR(i,t[fg])),YE(r,t,t[ys])}function r9(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function YE(n,e,t){ME(e);try{let r=n.viewQuery;r!==null&&J2(1,r,t);let i=n.template;i!==null&&XR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Vh]?.finishViewCreation(n),n.staticContentQueries&&zR(n,e),n.staticViewQueries&&J2(2,n.viewQuery,t);let o=n.components;o!==null&&i9(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ot]&=-5,RE()}}function i9(n,e){for(let t=0;t<e.length;t++)n9(n,e[t])}var Wa=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Wa||{}),o9;function ZE(n,e){return o9(n,e)}function aP(n){return(n.flags&32)===32}function Mh(n,e,t,r,i){if(r!=null){let o,s=!1;Ya(r)?o=r:Zu(r)&&(s=!0,r=r[Qa]);let a=Js(r);n===0&&t!==null?i==null?QR(e,t,a):R0(e,t,a,i||null,!0):n===1&&t!==null?R0(e,t,a,i||null,!0):n===2?jU(e,a,s):n===3&&e.destroyNode(a),o!=null&&y9(e,n,o,t,i)}}function s9(n,e){uP(n,e),e[Qa]=null,e[ws]=null}function a9(n,e,t,r,i,o){r[Qa]=i,r[ws]=e,J0(n,r,t,1,i,o)}function uP(n,e){e[Ju].changeDetectionScheduler?.notify(10),J0(n,e,e[br],2,null,null)}function u9(n){let e=n[pg];if(!e)return S2(n[rn],n);for(;e;){let t=null;if(Zu(e))t=e[pg];else{let r=e[zo];r&&(t=r)}if(!t){for(;e&&!e[vs]&&e!==n;)Zu(e)&&S2(e[rn],e),e=e[Ei];e===null&&(e=n),Zu(e)&&S2(e[rn],e),t=e&&e[vs]}e=t}}function l9(n,e,t,r){let i=zo+r,o=t.length;r>0&&(t[i-1][vs]=e),r<o-zo?(e[vs]=t[i],LM(t,zo+r,e)):(t.push(e),e[vs]=null),e[Ei]=t;let s=e[Fh];s!==null&&t!==s&&lP(s,e);let a=e[Vh];a!==null&&a.insertView(n),j2(e),e[Ot]|=128}function lP(n,e){let t=n[E0],r=e[Ei];if(Zu(r))n[Ot]|=2;else{let i=r[Ei][Zs];e[Zs]!==i&&(n[Ot]|=2)}t===null?n[E0]=[e]:t.push(e)}function JE(n,e){let t=n[E0],r=t.indexOf(e);t.splice(r,1)}function eE(n,e){if(n.length<=zo)return;let t=zo+e,r=n[t];if(r){let i=r[Fh];i!==null&&i!==n&&JE(i,r),e>0&&(n[t-1][vs]=r[vs]);let o=m0(n,zo+e);s9(r[rn],r);let s=o[Vh];s!==null&&s.detachView(o[rn]),r[Ei]=null,r[vs]=null,r[Ot]&=-129}return r}function cP(n,e){if(bg(e))return;let t=e[br];t.destroyNode&&J0(n,e,t,3,null,null),u9(e)}function S2(n,e){if(bg(e))return;let t=nn(null);try{e[Ot]&=-129,e[Ot]|=256,e[co]&&Xb(e[co]),d9(n,e),c9(n,e),e[rn].type===1&&e[br].destroy();let r=e[Fh];if(r!==null&&Ya(e[Ei])){r!==e[Ei]&&JE(r,e);let i=e[Vh];i!==null&&i.detachView(n)}Y2(e)}finally{nn(t)}}function c9(n,e){let t=n.cleanup,r=e[_0];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[_0]=null);let i=e[Yu];if(i!==null){e[Yu]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[w0];if(o!==null){e[w0]=null;for(let s of o)s.destroy()}}function d9(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof xc)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ho(4,a,u);try{u.call(a)}finally{Ho(5,a,u)}}else{Ho(4,i,o);try{o.call(i)}finally{Ho(5,i,o)}}}}}function h9(n,e,t){return f9(n,e.parent,t)}function f9(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Qa];if(Pc(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ea.None||i===ea.Emulated)return null}return bs(r,t)}function p9(n,e,t){return m9(n,e,t)}function g9(n,e,t){return n.type&40?bs(n,t):null}var m9=g9,oM;function XE(n,e,t,r){let i=h9(n,r,e),o=e[br],s=r.parent||e[ws],a=p9(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)iM(o,i,t[u],a,!1);else iM(o,i,t,a,!1);oM!==void 0&&oM(o,r,e,t,i)}function lg(n,e){if(e!==null){let t=e.type;if(t&3)return bs(e,n);if(t&4)return tE(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return lg(n,r);{let i=n[e.index];return Ya(i)?tE(-1,i):Js(i)}}else{if(t&128)return lg(n,e.next);if(t&32)return ZE(e,n)()||Js(n[e.index]);{let r=dP(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ac(n[Zs]);return lg(i,r)}else return lg(n,e.next)}}}return null}function dP(n,e){if(e!==null){let r=n[Zs][ws],i=e.projection;return r.projection[i]}return null}function tE(n,e){let t=zo+n+1;if(t<e.length){let r=e[t],i=r[rn].firstChild;if(i!==null)return lg(r,i)}return e[Dc]}function eI(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Wh(Js(a),r),t.flags|=2),!aP(t))if(u&8)eI(n,e,t.child,r,i,o,!1),Mh(e,n,i,a,o);else if(u&32){let l=ZE(t,r),d;for(;d=l();)Mh(e,n,i,d,o);Mh(e,n,i,a,o)}else u&16?v9(n,e,r,t,i,o):Mh(e,n,i,a,o);t=s?t.projectionNext:t.next}}function J0(n,e,t,r,i,o){eI(t,r,n.firstChild,e,i,o,!1)}function v9(n,e,t,r,i,o){let s=t[Zs],u=s[ws].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let d=u[l];Mh(e,n,i,d,o)}else{let l=u,d=s[Ei];kR(r)&&(l.flags|=128),eI(n,e,l,d,i,o,!0)}}function y9(n,e,t,r,i){let o=t[Dc],s=Js(t);o!==s&&Mh(e,n,r,o,i);for(let a=zo;a<t.length;a++){let u=t[a];J0(u[rn],u,n,e,r,o)}}function _9(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Wa.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Wa.Important),n.setStyle(t,r,i,o))}}function w9(n,e,t,r){let i=nn(null);try{let o=e.tView,a=n[Ot]&4096?4096:16,u=$E(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Fh]=l;let d=n[Vh];return d!==null&&(u[Vh]=d.createEmbeddedView(o)),YE(o,u,t),u}finally{nn(i)}}function sM(n,e){return!e||e.firstChild===null||kR(n)}function b9(n,e,t,r=!0){let i=e[rn];if(l9(i,e,n,t),r){let s=tE(t,n),a=e[br],u=a.parentNode(n[Dc]);u!==null&&a9(i,n[ws],a,e,u,s)}let o=e[y0];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function P0(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Js(o)),Ya(o)&&E9(o,r);let s=t.type;if(s&8)P0(n,e,t.child,r);else if(s&32){let a=ZE(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=dP(e,t);if(Array.isArray(a))r.push(...a);else{let u=Ac(e[Zs]);P0(u[rn],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function E9(n,e){for(let t=zo;t<n.length;t++){let r=n[t],i=r[rn].firstChild;i!==null&&P0(r[rn],r,i,e)}n[Dc]!==n[Qa]&&e.push(n[Dc])}var hP=[];function I9(n){return n[co]??C9(n)}function C9(n){let e=hP.pop()??Object.create(D9);return e.lView=n,e}function S9(n){n.lView[co]!==n&&(n.lView=null,hP.push(n))}var D9=Ut(Ue({},Zp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{W0(n.lView)},consumerOnSignalRead(){this.lView[co]=this}});function A9(n){let e=n[co]??Object.create(T9);return e.lView=n,e}var T9=Ut(Ue({},Zp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Ac(n.lView);for(;e&&!fP(e[rn]);)e=Ac(e);e&&xE(e)},consumerOnSignalRead(){this.lView[co]=this}});function fP(n){return n.type!==2}function pP(n){if(n[w0]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[w0])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Ot]&8192)}}var x9=100;function gP(n,e=!0,t=0){let i=n[Ju].rendererFactory,o=!1;o||i.begin?.();try{N9(n,t)}catch(s){throw e&&sP(n,s),s}finally{o||i.end?.()}}function N9(n,e){let t=aR();try{$N(!0),nE(n,e);let r=0;for(;$0(n);){if(r===x9)throw new ht(103,!1);r++,nE(n,1)}}finally{$N(t)}}function M9(n,e,t,r){if(bg(e))return;let i=e[Ot],o=!1,s=!1;ME(e);let a=!0,u=null,l=null;o||(fP(n)?(l=I9(e),u=Ny(l)):iN()===null?(a=!1,l=A9(e),u=Ny(l)):e[co]&&(Xb(e[co]),e[co]=null));try{rR(e),M7(n.bindingStartIndex),t!==null&&XR(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let g=n.preOrderCheckHooks;g!==null&&c0(e,g,null)}else{let g=n.preOrderHooks;g!==null&&d0(e,g,0,null),E2(e,0)}if(s||R9(e),pP(e),mP(e,0),n.contentQueries!==null&&zR(n,e),!o)if(d){let g=n.contentCheckHooks;g!==null&&c0(e,g)}else{let g=n.contentHooks;g!==null&&d0(e,g,1),E2(e,1)}k9(n,e);let f=n.components;f!==null&&yP(e,f,0);let m=n.viewQuery;if(m!==null&&J2(2,m,r),!o)if(d){let g=n.viewCheckHooks;g!==null&&c0(e,g)}else{let g=n.viewHooks;g!==null&&d0(e,g,2),E2(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[b2]){for(let g of e[b2])g();e[b2]=null}o||(e[Ot]&=-73)}catch(d){throw o||W0(e),d}finally{l!==null&&(Zb(l,u),a&&S9(l)),RE()}}function mP(n,e){for(let t=FR(n);t!==null;t=VR(t))for(let r=zo;r<t.length;r++){let i=t[r];vP(i,e)}}function R9(n){for(let e=FR(n);e!==null;e=VR(e)){if(!(e[Ot]&2))continue;let t=e[E0];for(let r=0;r<t.length;r++){let i=t[r];xE(i)}}}function P9(n,e,t){let r=Xs(e,n);vP(r,t)}function vP(n,e){TE(n)&&nE(n,e)}function nE(n,e){let r=n[rn],i=n[Ot],o=n[co],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Jb(o)),s||=!1,o&&(o.dirty=!1),n[Ot]&=-9217,s)M9(r,n,r.template,n[ys]);else if(i&8192){pP(n),mP(n,1);let a=r.components;a!==null&&yP(n,a,1)}}function yP(n,e,t){for(let r=0;r<e.length;r++)P9(n,e[r],t)}function k9(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Tc(~i);else{let o=i,s=t[++r],a=t[++r];k7(s,o);let u=e[o];Ho(24,u),a(2,u),Ho(25,u)}}}finally{Tc(-1)}}function tI(n,e){let t=aR()?64:1088;for(n[Ju].changeDetectionScheduler?.notify(e);n;){n[Ot]|=t;let r=Ac(n);if(I0(n)&&!r)return n;n=r}return null}var Nc=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[rn];return P0(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[ys]}get dirty(){return!!(this._lView[Ot]&9280)||!!this._lView[co]?.dirty}set context(e){this._lView[ys]=e}get destroyed(){return bg(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ei];if(Ya(e)){let t=e[b0],r=t?t.indexOf(this):-1;r>-1&&(eE(e,r),m0(t,r))}this._attachedToViewContainer=!1}cP(this._lView[rn],this._lView)}onDestroy(e){iR(this._lView,e)}markForCheck(){tI(this._cdRefInjectingView||this._lView,4)}markForRefresh(){xE(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ot]&=-129}reattach(){j2(this._lView),this._lView[Ot]|=128}detectChanges(){this._lView[Ot]|=1024,gP(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ht(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=I0(this._lView),t=this._lView[Fh];t!==null&&!e&&JE(t,this._lView),uP(this._lView[rn],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ht(902,!1);this._appRef=e;let t=I0(this._lView),r=this._lView[Fh];r!==null&&!t&&lP(r,this._lView),j2(this._lView)}},X0=(()=>{class n{static __NG_ELEMENT_ID__=F9}return n})(),L9=X0,O9=class extends L9{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=w9(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Nc(i)}};function F9(){return V9(Wo(),zn())}function V9(n,e){return n.type&4?new O9(e,n,Q0(n,e)):null}function nI(n,e,t,r,i){let o=n.data[e];if(o===null)o=j9(n,e,t,r,i),P7()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=T7();o.injectorIndex=s===null?-1:s.injectorIndex}return Eg(o,!0),o}function j9(n,e,t,r,i){let o=oR(),s=sR(),a=s?o:o&&o.parent,u=n.data[e]=U9(n,a,t,e,r,i);return B9(n,u,o,s),u}function B9(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function U9(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return S7()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var hae=new RegExp(`^(\\d+)*(${EU}|${bU})*(.*)`);var q9=()=>null;function aM(n,e){return q9(n,e)}var rE=class{},k0=class{},iE=class{resolveComponentFactory(e){throw Error(`No component factory found for ${bi(e)}.`)}},Bh=class{static NULL=new iE},Uh=class{},Ja=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>H9()}return n})();function H9(){let n=zn(),e=Wo(),t=Xs(e.index,n);return(Zu(t)?t:n)[br]}var z9=(()=>{class n{static \u0275prov=dt({token:n,providedIn:"root",factory:()=>null})}return n})();function uM(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=FN(i,a);else if(o==2){let u=a,l=e[++s];r=FN(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function tn(n,e=zt.Default){let t=zn();if(t===null)return je(n,e);let r=Wo();return IR(r,t,wi(n),e)}function _P(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function wP(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let[a,u]=W9(n,t,s);K9(n,e,t,a,o,u)}o!==null&&r!==null&&$9(t,r,o)}function $9(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ht(-301,!1);r.push(e[i],o)}}function W9(n,e,t){let r=[],i=null;for(let o of t)o.findHostDirectiveDefs!==null&&(i??=new Map,o.findHostDirectiveDefs(o,r,i)),$a(o)&&(r.push(o),G9(n,e,r.length-1));return Pc(e)?r.push(...t.slice(1)):r.push(...t),[r,i]}function G9(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function K9(n,e,t,r,i,o){for(let l=0;l<r.length;l++)z2(T0(t,e),n,r[l].type);tq(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=_P(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=gg(t.mergedAttrs,d.hostAttrs),Z9(n,t,e,u,d),eq(u,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}Q9(n,t,o)}function Q9(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let d=r;d<i;d++){let f=o[d],m=t?t.get(f):null,g=m?m.inputs:null,b=m?m.outputs:null;u=lM(0,f.inputs,d,u,g),l=lM(1,f.outputs,d,l,b);let E=u!==null&&s!==null&&!zE(e)?Y9(u,d,s):null;a.push(E)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function lM(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=el.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?cM(r,t,l,a,u):cM(r,t,l,a)}return r}function cM(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function Y9(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function Z9(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Cc(i.type,!0)),s=new xc(o,$a(i),tn);n.blueprint[r]=s,t[r]=s,J9(n,e,r,_P(n,t,i.hostVars,rl),i)}function J9(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;X9(s)!=a&&s.push(a),s.push(t,r,o)}}function X9(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function eq(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;$a(e)&&(t[""]=n)}}function tq(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function bP(n,e,t,r,i,o,s,a){let u=e.consts,l=C0(u,s),d=nI(e,n,2,r,l);return o&&wP(e,t,d,C0(u,a),i),d.mergedAttrs=gg(d.mergedAttrs,d.attrs),d.attrs!==null&&uM(d,d.attrs,!1),d.mergedAttrs!==null&&uM(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function EP(n,e){gR(n,e),YM(e)&&n.queries.elementEnd(e)}var L0=class extends Bh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Sc(e);return new mg(t,this.ngModule)}};function dM(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:el.None;e?t.push({propName:s,templateName:r,isSignal:(a&el.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function nq(n,e,t){let r=e instanceof lr?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new q2(t,r):t}function rq(n){let e=n.get(Uh,null);if(e===null)throw new ht(407,!1);let t=n.get(z9,null),r=n.get(jh,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function iq(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return KR(e,t,t==="svg"?p7:t==="math"?g7:null)}var mg=class extends k0{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let e=this.componentDef,t=e.inputTransforms,r=dM(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return dM(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=LU(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){let o=nn(null);try{let s=this.componentDef,a=r?["ng-version","19.1.6"]:OU(this.componentDef.selectors[0]),u=WE(0,null,null,1,0,null,null,null,null,[a],null),l=nq(s,i||this.ngModule,e),d=rq(l),f=d.rendererFactory.createRenderer(null,s),m=r?zU(f,r,s.encapsulation,l):iq(s,f),g=$E(null,u,null,512|iP(s),null,null,d,f,l,null,HR(m,l,!0));g[_s]=m,ME(g);let b=null;try{let E=bP(_s,u,g,"#host",()=>[this.componentDef],!0,0);m&&(YR(f,m,E),Wh(m,g)),tP(u,g,E),$R(u,E,g),EP(u,E),t!==void 0&&oq(E,this.ngContentSelectors,t),b=Xs(E.index,g),g[ys]=b[ys],YE(u,g,null)}catch(E){throw b!==null&&Y2(b),Y2(g),E}finally{RE()}return new oE(this.componentType,g)}finally{nn(o)}}},oE=class extends rE{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=nR(t[rn],_s),this.location=Q0(this._tNode,t),this.instance=Xs(this._tNode.index,t)[ys],this.hostView=this.changeDetectorRef=new Nc(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;QE(o[rn],o,i,e,t),this.previousInputValues.set(e,t);let s=Xs(this._tNode.index,o);tI(s,1)}}get injector(){return new Ic(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function oq(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Gh=(()=>{class n{static __NG_ELEMENT_ID__=sq}return n})();function sq(){let n=Wo();return uq(n,zn())}var aq=Gh,IP=class extends aq{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Q0(this._hostTNode,this._hostLView)}get injector(){return new Ic(this._hostTNode,this._hostLView)}get parentInjector(){let e=LE(this._hostTNode,this._hostLView);if(vR(e)){let t=D0(e,this._hostLView),r=S0(e),i=t[rn].data[r+8];return new Ic(i,t)}else return new Ic(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=hM(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-zo}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=aM(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,sM(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!c7(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new mg(Sc(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let E=(s?l:this.parentInjector).get(lr,null);E&&(o=E)}let d=Sc(u.componentType??{}),f=aM(this._lContainer,d?.id??null),m=f?.firstChild??null,g=u.create(l,i,m,o);return this.insertImpl(g.hostView,a,sM(this._hostTNode,f)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(v7(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ei],l=new IP(u,u[ws],u[Ei]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return b9(s,i,o,r),e.attachToViewContainerRef(),LM(D2(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=hM(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=eE(this._lContainer,t);r&&(m0(D2(this._lContainer),t),cP(r[rn],r))}detach(e){let t=this._adjustIndex(e,-1),r=eE(this._lContainer,t);return r&&m0(D2(this._lContainer),t)!=null?new Nc(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function hM(n){return n[b0]}function D2(n){return n[b0]||(n[b0]=[])}function uq(n,e){let t,r=e[n.index];return Ya(r)?t=r:(t=oP(r,e,null,n),e[n.index]=t,KE(e,t)),cq(t,e,n,r),new IP(t,n,e)}function lq(n,e){let t=n[br],r=t.createComment(""),i=bs(e,n),o=t.parentNode(i);return R0(t,o,r,t.nextSibling(i),!1),r}var cq=fq,dq=()=>!1;function hq(n,e,t){return dq(n,e,t)}function fq(n,e,t,r){if(n[Dc])return;let i;t.type&8?i=Js(r):i=lq(e,t),n[Dc]=i}var tl=class{},vg=class{};var sE=class extends tl{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new L0(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=VM(e);this._bootstrapComponents=WR(o.bootstrap),this._r3Injector=DR(e,t,[{provide:tl,useValue:this},{provide:Bh,useValue:this.componentFactoryResolver},...r],bi(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},aE=class extends vg{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new sE(this.moduleType,e,[])}};var O0=class extends tl{injector;componentFactoryResolver=new L0(this);instance=null;constructor(e){super();let t=new hg([...e.providers,{provide:tl,useValue:this},{provide:Bh,useValue:this.componentFactoryResolver}],e.parent||DE(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function rI(n,e,t=null){return new O0({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var pq=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=qM(!1,t.type),i=r.length>0?rI([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=dt({token:n,providedIn:"environment",factory:()=>new n(je(lr))})}return n})();function Kh(n){return _g(()=>{let e=SP(n),t=Ut(Ue({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===LR.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(pq).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ea.Emulated,styles:n.styles||qo,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Y0("NgStandalone"),DP(t);let r=n.dependencies;return t.directiveDefs=pM(r,!1),t.pipeDefs=pM(r,!0),t.id=vq(t),t})}function gq(n){return Sc(n)||jM(n)}function mq(n){return n!==null}function go(n){return _g(()=>({type:n.type,bootstrap:n.bootstrap||qo,declarations:n.declarations||qo,imports:n.imports||qo,exports:n.exports||qo,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function fM(n,e){if(n==null)return kh;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=el.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==el.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Mr(n){return _g(()=>{let e=SP(n);return DP(e),e})}function CP(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function SP(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||kh,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||qo,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fM(n.inputs,e),outputs:fM(n.outputs),debugInfo:null}}function DP(n){n.features?.forEach(e=>e(n))}function pM(n,e){if(!n)return null;let t=e?BM:gq;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(mq)}function vq(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function yq(n){return Object.getPrototypeOf(n.prototype).constructor}function na(n){let e=yq(n.type),t=!0,r=[n];for(;e;){let i;if($a(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ht(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=a0(n.inputs),s.inputTransforms=a0(n.inputTransforms),s.declaredInputs=a0(n.declaredInputs),s.outputs=a0(n.outputs);let a=i.hostBindings;a&&Iq(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&bq(n,u),l&&Eq(n,l),_q(n,i),MB(n.outputs,i.outputs),$a(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===na&&(t=!1)}}e=Object.getPrototypeOf(e)}wq(r)}function _q(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function wq(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=gg(i.hostAttrs,t=gg(t,i.hostAttrs))}}function a0(n){return n===kh?{}:n===qo?[]:n}function bq(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Eq(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function Iq(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function AP(n){return Sq(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Cq(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Sq(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Dq(n,e,t){return n[e]=t}function Mc(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Aq(n,e,t,r){let i=Mc(n,e,t);return Mc(n,e+1,r)||i}function Tq(n,e,t,r,i,o,s,a,u){let l=e.consts,d=nI(e,n,4,s||null,a||null);NE()&&wP(e,t,d,C0(l,u),rP),d.mergedAttrs=gg(d.mergedAttrs,d.attrs),gR(e,d);let f=d.tView=WE(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function xq(n,e,t,r,i,o,s,a,u,l){let d=t+_s,f=e.firstCreatePass?Tq(d,e,n,r,i,o,s,a,u):e.data[d];Eg(f,!1);let m=Nq(e,n,f,t);PE()&&XE(e,n,m,f),Wh(m,n);let g=oP(m,n,m,f);return n[d]=g,KE(n,g),hq(g,f,n),AE(f)&&eP(e,n,f),u!=null&&nP(n,f,l),f}function Qh(n,e,t,r,i,o,s,a){let u=zn(),l=Ii(),d=C0(l.consts,o);return xq(u,l,n,e,t,r,i,d,s,a),Qh}var Nq=Mq;function Mq(n,e,t,r){return kE(!0),e[br].createComment("")}var iI=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var TP=new nt("");function Lc(n){return!!n&&typeof n.then=="function"}function xP(n){return!!n&&typeof n.subscribe=="function"}var NP=new nt("");var MP=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=Fe(NP,{optional:!0})??[];injector=Fe(ho);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=$o(this.injector,i);if(Lc(o))t.push(o);else if(xP(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rq=(()=>{class n{static \u0275prov=dt({token:n,providedIn:"root",factory:()=>new uE})}return n})(),uE=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},oI=new nt("");function Pq(){pN(()=>{throw new ht(600,!1)})}function kq(n){return n.isBoundToModule}var Lq=10;var nl=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Fe(dU);afterRenderManager=Fe(CU);zonelessEnabled=Fe(OE);rootEffectScheduler=Fe(Rq);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Hn;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=Fe(kc).hasPendingTasks.pipe(ut(t=>!t));constructor(){Fe(Z0,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=Fe(lr);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){let i=t instanceof k0;if(!this._injector.get(MP).done){let m=!i&&UM(t),g=!1;throw new ht(405,g)}let s;i?s=t:s=this._injector.get(Bh).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=kq(s)?void 0:this._injector.get(tl),u=r||s.selector,l=s.create(ho.NULL,[],u,a),d=l.location.nativeElement,f=l.injector.get(TP,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),h0(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(qR.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new ht(101,!1);let t=nn(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,nn(t),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Uh,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let t=0;for(;this.dirtyFlags!==0&&t++<Lq;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)Oq(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>$0(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;h0(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(oI,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>h0(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ht(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function h0(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Oq(n,e,t,r){if(!t&&!$0(n))return;gP(n,e,t&&!r?0:1)}function e_(n,e,t,r){let i=zn(),o=G0();if(Mc(i,o,e)){let s=Ii(),a=K0();XU(a,i,n,e,t,r)}return e_}function RP(n,e,t,r){return Mc(n,G0(),t)?e+wE(t)+r:rl}function u0(n,e){return n<<17|e<<2}function Rc(n){return n>>17&32767}function Fq(n){return(n&2)==2}function Vq(n,e){return n&131071|e<<17}function lE(n){return n|2}function qh(n){return(n&131068)>>2}function A2(n,e){return n&-131069|e<<2}function jq(n){return(n&1)===1}function cE(n){return n|1}function Bq(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Rc(s),u=qh(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||wg(f,d)>0)&&(l=!0)}else d=t;if(i)if(u!==0){let m=Rc(n[a+1]);n[r+1]=u0(m,a),m!==0&&(n[m+1]=A2(n[m+1],r)),n[a+1]=Vq(n[a+1],r)}else n[r+1]=u0(a,0),a!==0&&(n[a+1]=A2(n[a+1],r)),a=r;else n[r+1]=u0(u,0),a===0?a=r:n[u+1]=A2(n[u+1],r),u=r;l&&(n[r+1]=lE(n[r+1])),gM(n,d,r,!0),gM(n,d,r,!1),Uq(e,d,n,r,o),s=u0(a,u),o?e.classBindings=s:e.styleBindings=s}function Uq(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&wg(o,e)>=0&&(t[r+1]=cE(t[r+1]))}function gM(n,e,t,r){let i=n[t+1],o=e===null,s=r?Rc(i):qh(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];qq(u,e)&&(a=!0,n[s+1]=r?cE(l):lE(l)),s=r?Rc(l):qh(l)}a&&(n[t+1]=r?lE(i):cE(i))}function qq(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?wg(n,e)>=0:!1}function Ci(n,e,t){let r=zn(),i=G0();if(Mc(r,i,e)){let o=Ii(),s=K0();GE(o,s,r,n,e,r[br],t,!1)}return Ci}function mM(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";QE(n,t,o[s],s,r)}function sI(n,e){return Hq(n,e,null,!0),sI}function Hq(n,e,t,r){let i=zn(),o=Ii(),s=R7(2);if(o.firstUpdatePass&&$q(o,n,s,r),e!==rl&&Mc(i,s,e)){let a=o.data[$h()];Yq(o,a,i,i[br],n,i[s+1]=Zq(e,t),r,s)}}function zq(n,e){return e>=n.expandoStartIndex}function $q(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[$h()],s=zq(n,t);Jq(o,r)&&e===null&&!s&&(e=!1),e=Wq(i,o,e,r),Bq(i,o,e,t,s,r)}}function Wq(n,e,t,r){let i=O7(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=T2(null,n,e,t,r),t=yg(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=T2(i,n,e,t,r),o===null){let u=Gq(n,e,r);u!==void 0&&Array.isArray(u)&&(u=T2(null,n,e,u[1],r),u=yg(u,e.attrs,r),Kq(n,e,r,u))}else o=Qq(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Gq(n,e,t){let r=t?e.classBindings:e.styleBindings;if(qh(r)!==0)return n[Rc(r)]}function Kq(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Rc(i)]=r}function Qq(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=yg(r,s,t)}return yg(r,e.attrs,t)}function T2(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=yg(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function yg(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),JB(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Yq(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],d=jq(l)?vM(u,e,t,i,qh(l),s):void 0;if(!F0(d)){F0(o)||Fq(l)&&(o=vM(u,null,t,i,a,s));let f=tR($h(),t);_9(r,s,f,i,o)}}function vM(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),d=l?u[1]:u,f=d===null,m=t[i+1];m===rl&&(m=f?qo:void 0);let g=f?_2(m,r):d===r?m:void 0;if(l&&!F0(g)&&(g=_2(u,r)),F0(g)&&(a=g,s))return a;let b=n[i+1];i=s?Rc(b):qh(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=_2(u,r))}return a}function F0(n){return n!==void 0}function Zq(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=bi(HE(n)))),n}function Jq(n,e){return(n.flags&(e?8:16))!==0}function Xe(n,e,t,r){let i=zn(),o=Ii(),s=_s+n,a=i[br],u=o.firstCreatePass?bP(s,o,i,e,rP,NE(),t,r):o.data[s],l=Xq(o,i,u,a,e,n);i[s]=l;let d=AE(u);return Eg(u,!0),YR(a,l,u),!aP(u)&&PE()&&XE(o,i,l,u),E7()===0&&Wh(l,i),I7(),d&&(eP(o,i,u),$R(o,u,i)),r!==null&&nP(i,u),Xe}function Je(){let n=Wo();sR()?x7():(n=n.parent,Eg(n,!1));let e=n;D7(e)&&A7(),C7();let t=Ii();return t.firstCreatePass&&EP(t,e),e.classesWithoutHost!=null&&H7(e)&&mM(t,e,zn(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&z7(e)&&mM(t,e,zn(),e.stylesWithoutHost,!1),Je}function Oc(n,e,t,r){return Xe(n,e,t,r),Je(),Oc}var Xq=(n,e,t,r,i,o)=>(kE(!0),KR(r,i,j7()));var Ec=void 0;function eH(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var tH=["en",[["a","p"],["AM","PM"],Ec],[["AM","PM"],Ec,Ec],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ec,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ec,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ec,"{1} 'at' {0}",Ec],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",eH],x2={};function aI(n){let e=nH(n),t=yM(e);if(t)return t;let r=e.split("-")[0];if(t=yM(r),t)return t;if(r==="en")return tH;throw new ht(701,!1)}function yM(n){return n in x2||(x2[n]=ag.ng&&ag.ng.common&&ag.ng.common.locales&&ag.ng.common.locales[n]),x2[n]}var Yh=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Yh||{});function nH(n){return n.toLowerCase().replace(/_/g,"-")}var V0="en-US";var rH=V0;function iH(n){typeof n=="string"&&(rH=n.toLowerCase().replace(/_/g,"-"))}var oH=(n,e,t)=>{};function $i(n,e,t,r){let i=zn(),o=Ii(),s=Wo();return PP(o,i,i[br],s,n,e,r),$i}function sH(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[_0],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function PP(n,e,t,r,i,o,s){let a=AE(r),l=n.firstCreatePass&&b7(n),d=e[ys],f=w7(e),m=!0;if(r.type&3||s){let E=bs(r,e),D=s?s(E):E,w=f.length,x=s?z=>s(Js(z[r.index])):r.index,F=null;if(!s&&a&&(F=sH(n,e,i,r.index)),F!==null){let z=F.__ngLastListenerFn__||F;z.__ngNextListenerFn__=o,F.__ngLastListenerFn__=o,m=!1}else{o=wM(r,e,d,o),oH(E,i,o);let z=t.listen(D,i,o);f.push(o,z),l&&l.push(i,x,w,w+1)}}else o=wM(r,e,d,o);let g=r.outputs,b;if(m&&g!==null&&(b=g[i])){let E=b.length;if(E)for(let D=0;D<E;D+=2){let w=b[D],x=b[D+1],H=e[w][x].subscribe(o),Y=f.length;f.push(o,H),l&&l.push(i,r.index,Y,-(Y+1))}}}function _M(n,e,t,r){let i=nn(null);try{return Ho(6,e,t),t(r)!==!1}catch(o){return sP(n,o),!1}finally{Ho(7,e,t),nn(i)}}function wM(n,e,t,r){return function i(o){if(o===Function)return r;let s=Pc(n)?Xs(n.index,e):e;tI(s,5);let a=_M(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=_M(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function uI(n=1){return V7(n)}function lI(n,e,t,r,i){let o=zn(),s=RP(o,e,t,r);if(s!==rl){let a=Ii(),u=K0();GE(a,u,o,n,s,o[br],i,!1)}return lI}function aH(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function at(n,e=""){let t=zn(),r=Ii(),i=n+_s,o=r.firstCreatePass?nI(r,i,1,e,null):r.data[i],s=uH(r,t,o,e,n);t[i]=s,PE()&&XE(r,t,s,o),Eg(o,!1)}var uH=(n,e,t,r,i)=>(kE(!0),FU(e[br],r));function il(n){return Si("",n,""),il}function Si(n,e,t){let r=zn(),i=RP(r,n,e,t);return i!==rl&&lH(r,$h(),i),Si}function lH(n,e,t){let r=tR(e,n);VU(n[br],r,t)}function Fc(n,e,t){PR(e)&&(e=e());let r=zn(),i=G0();if(Mc(r,i,e)){let o=Ii(),s=K0();GE(o,s,r,n,e,r[br],t,!1)}return Fc}function Zh(n,e){let t=PR(n);return t&&n.set(e),t}function Vc(n,e){let t=zn(),r=Ii(),i=Wo();return PP(r,t,t[br],i,n,e),Vc}function cH(n,e,t){let r=Ii();if(r.firstCreatePass){let i=$a(n);dE(t,r.data,r.blueprint,i,!0),dE(e,r.data,r.blueprint,i,!1)}}function dE(n,e,t,r,i){if(n=wi(n),Array.isArray(n))for(let o=0;o<n.length;o++)dE(n[o],e,t,r,i);else{let o=Ii(),s=zn(),a=Wo(),u=Oh(n)?n:wi(n.provide),l=$M(n),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Oh(n)||!n.multi){let g=new xc(l,i,tn),b=M2(u,e,i?d:d+m,f);b===-1?(z2(T0(a,s),o,u),N2(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[b]=g,s[b]=g)}else{let g=M2(u,e,d+m,f),b=M2(u,e,d,d+m),E=g>=0&&t[g],D=b>=0&&t[b];if(i&&!D||!i&&!E){z2(T0(a,s),o,u);let w=fH(i?hH:dH,t.length,i,r,l);!i&&D&&(t[b].providerFactory=w),N2(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(w),s.push(w)}else{let w=kP(t[i?b:g],l,!i&&r);N2(o,n,g>-1?g:b,w)}!i&&r&&D&&t[b].componentProviders++}}}function N2(n,e,t,r){let i=Oh(e),o=r7(e);if(i||o){let u=(o?wi(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,u]):l[d+1].push(r,u)}else l.push(t,u)}}}function kP(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function M2(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function dH(n,e,t,r){return hE(this.multi,[])}function hH(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=x0(t,t[rn],this.providerFactory.index,r);o=a.slice(0,s),hE(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],hE(i,o);return o}function hE(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function fH(n,e,t,r,i){let o=new xc(n,t,tn);return o.multi=[],o.index=e,o.componentProviders=0,kP(o,i,r&&!t),o}function jc(n,e=[]){return t=>{t.providersResolver=(r,i)=>cH(r,i?i(n):n,e)}}function pH(n,e){let t=n[e];return t===rl?void 0:t}function gH(n,e,t,r,i,o,s){let a=e+t;return Aq(n,a,i,o)?Dq(n,a+2,s?r.call(s,i,o):r(i,o)):pH(n,a+2)}function Bc(n,e){let t=Ii(),r,i=n+_s;t.firstCreatePass?(r=mH(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Cc(r.type,!0)),s,a=zi(tn);try{let u=A0(!1),l=o();return A0(u),aH(t,zn(),i,l),l}finally{zi(a)}}function mH(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Uc(n,e,t,r){let i=n+_s,o=zn(),s=m7(o,i);return vH(o,i)?gH(o,N7(),e,s.transform,t,r,s):s.transform(t,r)}function vH(n,e){return n[rn].data[e].pure}var Ga=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},LP=new Ga("19.1.6"),fE=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},cI=(()=>{class n{compileModuleSync(t){return new aE(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=VM(t),o=WR(i.declarations).reduce((s,a)=>{let u=Sc(a);return u&&s.push(new mg(u)),s},[]);return new fE(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yH=(()=>{class n{zone=Fe(un);changeDetectionScheduler=Fe(jh);applicationRef=Fe(nl);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _H({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new un(Ut(Ue({},wH()),{scheduleInRootZone:t})),[{provide:un,useFactory:n},{provide:Lh,multi:!0,useFactory:()=>{let r=Fe(yH,{optional:!0});return()=>r.initialize()}},{provide:Lh,multi:!0,useFactory:()=>{let r=Fe(bH);return()=>{r.initialize()}}},e===!0?{provide:TR,useValue:!0}:[],{provide:xR,useValue:t??AR}]}function wH(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var bH=(()=>{class n{subscription=new nr;initialized=!1;zone=Fe(un);pendingTasks=Fe(kc);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{un.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{un.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var EH=(()=>{class n{appRef=Fe(nl);taskService=Fe(kc);ngZone=Fe(un);zonelessEnabled=Fe(OE);tracing=Fe(Z0,{optional:!0});disableScheduling=Fe(TR,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new nr;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(M0):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Fe(xR,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Q2||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?ZN:NR;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(M0+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ZN(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function IH(){return typeof $localize<"u"&&$localize.locale||V0}var t_=new nt("",{providedIn:"root",factory:()=>Fe(t_,zt.Optional|zt.SkipSelf)||IH()});var pE=new nt(""),CH=new nt("");function sg(n){return!n.moduleRef}function SH(n){let e=sg(n)?n.r3Injector:n.moduleRef.injector,t=e.get(un);return t.run(()=>{sg(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Xu,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),sg(n)){let o=()=>e.destroy(),s=n.platformInjector.get(pE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(pE);s.add(o),n.moduleRef.onDestroy(()=>{h0(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return AH(r,t,()=>{let o=e.get(MP);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(t_,V0);if(iH(s||V0),!e.get(CH,!0))return sg(n)?e.get(nl):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(sg(n)){let u=e.get(nl);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return DH(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function DH(n,e){let t=n.injector.get(nl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ht(-403,!1);e.push(n)}function AH(n,e,t){try{let r=t();return Lc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var f0=null;function TH(n=[],e){return ho.create({name:e,providers:[{provide:H0,useValue:"platform"},{provide:pE,useValue:new Set([()=>f0=null])},...n]})}function xH(n=[]){if(f0)return f0;let e=TH(n);return f0=e,Pq(),NH(e),e}function NH(n){let e=n.get(UE,null);$o(n,()=>{e?.forEach(t=>t())})}function Sg(){return!1}var qc=(()=>{class n{static __NG_ELEMENT_ID__=MH}return n})();function MH(n){return RH(Wo(),zn(),(n&16)===16)}function RH(n,e,t){if(Pc(n)&&!t){let r=Xs(n.index,e);return new Nc(r,r)}else if(n.type&175){let r=e[Zs];return new Nc(r,e)}return null}var gE=class{constructor(){}supports(e){return AP(e)}create(e){return new mE(e)}},PH=(n,e)=>e,mE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||PH}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<bM(r,i,o)?t:r,a=bM(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=u-i;if(l!=d){for(let m=0;m<l;m++){let g=m<o.length?o[m]:o[m]=0,b=g+m;d<=b&&b<l&&(o[m]=g+1)}let f=s.previousIndex;o[f]=d-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!AP(e))throw new ht(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,Cq(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new vE(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new j0),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new j0),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},vE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},yE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},j0=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new yE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function bM(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function EM(){return new dI([new gE])}var dI=(()=>{class n{factories;static \u0275prov=dt({token:n,providedIn:"root",factory:EM});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||EM()),deps:[[n,new YB,new q0]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ht(901,!1)}}return n})();function OP(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=xH(r),o=[_H({}),{provide:jh,useExisting:EH},...t||[]],s=new O0({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return SH({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function n_(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Dg(n,e){Y0("NgSignals");let t=dN(n);return e?.equal&&(t[lo].equal=e.equal),t}function Xa(n){let e=nn(null);try{return n()}finally{nn(e)}}var IM=class{[lo];constructor(e){this[lo]=e}destroy(){this[lo].destroy()}};var HP=null;function tu(){return HP}function zP(n){HP??=n}var r_=class{};var Ko=new nt(""),$P=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:()=>Fe(OH),providedIn:"platform"})}return n})();var OH=(()=>{class n extends $P{_location;_history;_doc=Fe(Ko);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return tu().getBaseHref(this._doc)}onPopState(t){let r=tu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=tu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function WP(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function FP(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Hc(n){return n&&n[0]!=="?"?"?"+n:n}var s_=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:()=>Fe(GP),providedIn:"root"})}return n})(),FH=new nt(""),GP=(()=>{class n extends s_{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Fe(Ko).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return WP(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Hc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Hc(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Hc(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(je($P),je(FH,8))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xg=(()=>{class n{_subject=new Hn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=BH(FP(VP(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Hc(r))}normalize(t){return n.stripTrailingSlash(jH(this._basePath,VP(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Hc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Hc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Hc;static joinWithSlash=WP;static stripTrailingSlash=FP;static \u0275fac=function(r){return new(r||n)(je(s_))};static \u0275prov=dt({token:n,factory:()=>VH(),providedIn:"root"})}return n})();function VH(){return new xg(je(s_))}function jH(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function VP(n){return n.replace(/\/index.html$/,"")}function BH(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var KP=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(KP||{});var eu={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ag(n,e){let t=aI(n),r=t[Yh.NumberSymbols][e];if(typeof r>"u"){if(e===eu.CurrencyDecimal)return t[Yh.NumberSymbols][eu.Decimal];if(e===eu.CurrencyGroup)return t[Yh.NumberSymbols][eu.Group]}return r}function UH(n,e){return aI(n)[Yh.NumberFormats][e]}var qH=/^(\d+)?\.((\d+)(-(\d+))?)?$/,jP=22,i_=".",Tg="0",HH=";",zH=",",hI="#";function $H(n,e,t,r,i,o,s=!1){let a="",u=!1;if(!isFinite(n))a=Ag(t,eu.Infinity);else{let l=QH(n);s&&(l=KH(l));let d=e.minInt,f=e.minFrac,m=e.maxFrac;if(o){let x=o.match(qH);if(x===null)throw new Error(`${o} is not a valid digit info`);let F=x[1],z=x[3],H=x[5];F!=null&&(d=fI(F)),z!=null&&(f=fI(z)),H!=null?m=fI(H):z!=null&&f>m&&(m=f)}YH(l,f,m);let g=l.digits,b=l.integerLen,E=l.exponent,D=[];for(u=g.every(x=>!x);b<d;b++)g.unshift(0);for(;b<0;b++)g.unshift(0);b>0?D=g.splice(b,g.length):(D=g,g=[0]);let w=[];for(g.length>=e.lgSize&&w.unshift(g.splice(-e.lgSize,g.length).join(""));g.length>e.gSize;)w.unshift(g.splice(-e.gSize,g.length).join(""));g.length&&w.unshift(g.join("")),a=w.join(Ag(t,r)),D.length&&(a+=Ag(t,i)+D.join("")),E&&(a+=Ag(t,eu.Exponential)+"+"+E)}return n<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function WH(n,e,t){let r=UH(e,KP.Decimal),i=GH(r,Ag(e,eu.MinusSign));return $H(n,i,e,eu.Group,eu.Decimal,t)}function GH(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(HH),i=r[0],o=r[1],s=i.indexOf(i_)!==-1?i.split(i_):[i.substring(0,i.lastIndexOf(Tg)+1),i.substring(i.lastIndexOf(Tg)+1)],a=s[0],u=s[1]||"";t.posPre=a.substring(0,a.indexOf(hI));for(let d=0;d<u.length;d++){let f=u.charAt(d);f===Tg?t.minFrac=t.maxFrac=d+1:f===hI?t.maxFrac=d+1:t.posSuf+=f}let l=a.split(zH);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let d=i.length-t.posPre.length-t.posSuf.length,f=o.indexOf(hI);t.negPre=o.substring(0,f).replace(/'/g,""),t.negSuf=o.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function KH(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function QH(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(i_))>-1&&(e=e.replace(i_,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Tg;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Tg;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>jP&&(r=r.splice(0,jP-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function YH(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+n.integerLen,d=r.reduceRight(function(f,m,g,b){return m=m+f,b[g]=m<10?m:m-10,u&&(b[g]===0&&g>=l?b.pop():u=!1),m>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function fI(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function QP(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var pI=/\s+/,BP=[],YP=(()=>{class n{_ngEl;_renderer;initialClasses=BP;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(pI):BP}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(pI):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(pI).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(tn(ta),tn(Ja))};static \u0275dir=Mr({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var gI=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ZP=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new gI(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),UP(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);UP(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(tn(Gh),tn(X0),tn(dI))};static \u0275dir=Mr({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function UP(n,e){n.context.$implicit=e.item}var JP=(()=>{class n{_viewContainer;_context=new mI;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qP("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qP("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(tn(Gh),tn(X0))};static \u0275dir=Mr({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),mI=class{$implicit=null;ngIf=null};function qP(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${bi(e)}'.`)}function ZH(n,e){return new ht(2100,!1)}var XP=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!JH(t))return null;i||=this._locale;try{let o=XH(t);return WH(o,i,r)}catch(o){throw ZH(n,o.message)}}static \u0275fac=function(r){return new(r||n)(tn(t_,16))};static \u0275pipe=CP({name:"number",type:n,pure:!0})}return n})();function JH(n){return!(n==null||n===""||n!==n)}function XH(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Ng=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=go({type:n});static \u0275inj=fo({})}return n})(),ek="browser",ez="server";function zc(n){return n===ez}var o_=class{};var yI=class extends r_{supportsDOMEvents=!0},_I=class n extends yI{static makeCurrent(){zP(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=nz();return t==null?null:rz(t)}resetBaseElement(){Mg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return QP(document.cookie,e)}},Mg=null;function nz(){return Mg=Mg||document.querySelector("base"),Mg?Mg.getAttribute("href"):null}function rz(n){return new URL(n,document.baseURI).pathname}var iz=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac})}return n})(),wI=new nt(""),sk=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ht(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(je(wI),je(un))};static \u0275prov=dt({token:n,factory:n.\u0275fac})}return n})(),u_=class{_doc;constructor(e){this._doc=e}manager},a_="ng-app-id";function tk(n){for(let e of n)e.remove()}function nk(n,e){let t=e.createElement("style");return t.textContent=n,t}function oz(n,e,t,r){let i=n.head?.querySelectorAll(`style[${a_}="${e}"],link[${a_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(a_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function bI(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var ak=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=zc(o),oz(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,nk);r?.forEach(i=>this.addUsage(i,this.external,bI))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(tk(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])tk(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,nk(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,bI(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(a_,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(je(Ko),je(BE),je(qE,8),je(po))};static \u0275prov=dt({token:n,factory:n.\u0275fac})}return n})(),vI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},II=/%COMP%/g;var uk="%COMP%",sz=`_nghost-${uk}`,az=`_ngcontent-${uk}`,uz=!0,lz=new nt("",{providedIn:"root",factory:()=>uz});function cz(n){return az.replace(II,n)}function dz(n){return sz.replace(II,n)}function lk(n,e){return e.map(t=>t.replace(II,n))}var rk=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=d,this.platformIsServer=zc(a),this.defaultRenderer=new Rg(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ea.ShadowDom&&(r=Ut(Ue({},r),{encapsulation:ea.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof l_?i.applyToHost(t):i instanceof Pg&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case ea.Emulated:o=new l_(u,l,r,this.appId,d,s,a,f,m);break;case ea.ShadowDom:return new EI(u,l,t,r,s,a,this.nonce,f,m);default:o=new Pg(u,l,r,d,s,a,f,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(je(sk),je(ak),je(BE),je(lz),je(Ko),je(po),je(un),je(qE),je(Z0,8))};static \u0275prov=dt({token:n,factory:n.\u0275fac})}return n})(),Rg=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(vI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ik(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ik(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ht(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=vI[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=vI[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Wa.DashCase|Wa.Important)?e.style.setProperty(t,r,i&Wa.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Wa.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=tu().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);let o=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function ik(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var EI=class extends Rg{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=lk(i.id,d);for(let m of d){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=m,this.shadowRoot.appendChild(g)}let f=i.getExternalStyles?.();if(f)for(let m of f){let g=bI(m,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Pg=class extends Rg{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=l?lk(l,d):d,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},l_=class extends Pg{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let d=i+"-"+r.id;super(e,t,r,o,s,a,u,l,d),this.contentAttr=cz(d),this.hostAttr=dz(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},hz=(()=>{class n extends u_{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(je(Ko))};static \u0275prov=dt({token:n,factory:n.\u0275fac})}return n})(),ok=["alt","control","meta","shift"],fz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pz={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},gz=(()=>{class n extends u_{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>tu().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),ok.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=fz[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ok.forEach(s=>{if(s!==i){let a=pz[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(je(Ko))};static \u0275prov=dt({token:n,factory:n.\u0275fac})}return n})();function ck(n,e){return OP(Ue({rootComponent:n},mz(e)))}function mz(n){return{appProviders:[...bz,...n?.providers??[]],platformProviders:wz}}function vz(){_I.makeCurrent()}function yz(){return new Xu}function _z(){return BR(document),document}var wz=[{provide:po,useValue:ek},{provide:UE,useValue:vz,multi:!0},{provide:Ko,useFactory:_z,deps:[]}];var bz=[{provide:H0,useValue:"root"},{provide:Xu,useFactory:yz,deps:[]},{provide:wI,useClass:hz,multi:!0,deps:[Ko]},{provide:wI,useClass:gz,multi:!0,deps:[Ko]},rk,ak,sk,{provide:Uh,useExisting:rk},{provide:o_,useClass:iz,deps:[]},[]];var dk=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(je(Ko))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var qt="primary",Qg=Symbol("RouteTitle"),TI=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function rf(n){return new TI(n)}function Iz(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Cz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ra(n[t],e[t]))return!1;return!0}function ra(n,e){let t=n?xI(n):void 0,r=e?xI(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!_k(n[i],e[i]))return!1;return!0}function xI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function _k(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function wk(n){return n.length>0?n[n.length-1]:null}function ol(n){return h2(n)?n:Lc(n)?pn(Promise.resolve(n)):vt(n)}var Sz={exact:Ek,subset:Ik},bk={exact:Dz,subset:Az,ignored:()=>!0};function hk(n,e,t){return Sz[t.paths](n.root,e.root,t.matrixParams)&&bk[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Dz(n,e){return ra(n,e)}function Ek(n,e,t){if(!Wc(n.segments,e.segments)||!h_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Ek(n.children[r],e.children[r],t))return!1;return!0}function Az(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>_k(n[t],e[t]))}function Ik(n,e,t){return Ck(n,e,e.segments,t)}function Ck(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Wc(i,t)||e.hasChildren()||!h_(i,t,r))}else if(n.segments.length===t.length){if(!Wc(n.segments,t)||!h_(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Ik(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Wc(n.segments,i)||!h_(n.segments,i,r)||!n.children[qt]?!1:Ck(n.children[qt],e,o,r)}}function h_(n,e,t){return e.every((r,i)=>bk[t](n[i].parameters,r.parameters))}var ru=class{root;queryParams;fragment;_queryParamMap;constructor(e=new yn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=rf(this.queryParams),this._queryParamMap}toString(){return Nz.serialize(this)}},yn=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return f_(this)}},$c=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=rf(this.parameters),this._parameterMap}toString(){return Dk(this)}};function Tz(n,e){return Wc(n,e)&&n.every((t,r)=>ra(t.parameters,e[r].parameters))}function Wc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function xz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===qt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==qt&&(t=t.concat(e(i,r)))}),t}var tC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:()=>new jg,providedIn:"root"})}return n})(),jg=class{parse(e){let t=new MI(e);return new ru(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${kg(e.root,!0)}`,r=Pz(e.queryParams),i=typeof e.fragment=="string"?`#${Mz(e.fragment)}`:"";return`${t}${r}${i}`}},Nz=new jg;function f_(n){return n.segments.map(e=>Dk(e)).join("/")}function kg(n,e){if(!n.hasChildren())return f_(n);if(e){let t=n.children[qt]?kg(n.children[qt],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==qt&&r.push(`${i}:${kg(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=xz(n,(r,i)=>i===qt?[kg(n.children[qt],!1)]:[`${i}:${kg(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[qt]!=null?`${f_(n)}/${t[0]}`:`${f_(n)}/(${t.join("//")})`}}function Sk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function c_(n){return Sk(n).replace(/%3B/gi,";")}function Mz(n){return encodeURI(n)}function NI(n){return Sk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function p_(n){return decodeURIComponent(n)}function fk(n){return p_(n.replace(/\+/g,"%20"))}function Dk(n){return`${NI(n.path)}${Rz(n.parameters)}`}function Rz(n){return Object.entries(n).map(([e,t])=>`;${NI(e)}=${NI(t)}`).join("")}function Pz(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${c_(t)}=${c_(i)}`).join("&"):`${c_(t)}=${c_(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var kz=/^[^\/()?;#]+/;function CI(n){let e=n.match(kz);return e?e[0]:""}var Lz=/^[^\/()?;=#]+/;function Oz(n){let e=n.match(Lz);return e?e[0]:""}var Fz=/^[^=?&#]+/;function Vz(n){let e=n.match(Fz);return e?e[0]:""}var jz=/^[^&#]+/;function Bz(n){let e=n.match(jz);return e?e[0]:""}var MI=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new yn([],{}):new yn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qt]=new yn(e,t)),r}parseSegment(){let e=CI(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ht(4009,!1);return this.capture(e),new $c(p_(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Oz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=CI(this.remaining);i&&(r=i,this.capture(r))}e[p_(t)]=p_(r)}parseQueryParam(e){let t=Vz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Bz(this.remaining);s&&(r=s,this.capture(r))}let i=fk(t),o=fk(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=CI(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ht(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=qt);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[qt]:new yn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ht(4011,!1)}};function Ak(n){return n.segments.length>0?new yn([],{[qt]:n}):n}function Tk(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=Tk(i);if(r===qt&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new yn(n.segments,e);return Uz(t)}function Uz(n){if(n.numberOfChildren===1&&n.children[qt]){let e=n.children[qt];return new yn(n.segments.concat(e.segments),e.children)}return n}function Bg(n){return n instanceof ru}function qz(n,e,t=null,r=null){let i=xk(n);return Nk(i,e,t,r)}function xk(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new yn(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=Ak(r);return e??i}function Nk(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return SI(i,i,i,t,r);let o=Hz(e);if(o.toRoot())return SI(i,i,new yn([],{}),t,r);let s=zz(o,i,n),a=s.processChildren?Og(s.segmentGroup,s.index,o.commands):Rk(s.segmentGroup,s.index,o.commands);return SI(i,s.segmentGroup,a,t,r)}function g_(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ug(n){return typeof n=="object"&&n!=null&&n.outlets}function SI(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=Mk(n,e,t);let a=Ak(Tk(s));return new ru(a,o,i)}function Mk(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=Mk(o,e,t)}),new yn(n.segments,r)}var m_=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&g_(r[0]))throw new ht(4003,!1);let i=r.find(Ug);if(i&&i!==wk(r))throw new ht(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Hz(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new m_(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new m_(t,e,r)}var ef=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function zz(n,e,t){if(n.isAbsolute)return new ef(e,!0,0);if(!t)return new ef(e,!1,NaN);if(t.parent===null)return new ef(t,!0,0);let r=g_(n.commands[0])?0:1,i=t.segments.length-1+r;return $z(t,i,n.numberOfDoubleDots)}function $z(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ht(4005,!1);i=r.segments.length}return new ef(r,!1,i-o)}function Wz(n){return Ug(n[0])?n[0].outlets:{[qt]:n}}function Rk(n,e,t){if(n??=new yn([],{}),n.segments.length===0&&n.hasChildren())return Og(n,e,t);let r=Gz(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new yn(n.segments.slice(0,r.pathIndex),{});return o.children[qt]=new yn(n.segments.slice(r.pathIndex),n.children),Og(o,0,i)}else return r.match&&i.length===0?new yn(n.segments,{}):r.match&&!n.hasChildren()?RI(n,e,t):r.match?Og(n,0,i):RI(n,e,t)}function Og(n,e,t){if(t.length===0)return new yn(n.segments,{});{let r=Wz(t),i={};if(Object.keys(r).some(o=>o!==qt)&&n.children[qt]&&n.numberOfChildren===1&&n.children[qt].segments.length===0){let o=Og(n.children[qt],e,t);return new yn(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Rk(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new yn(n.segments,i)}}function Gz(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Ug(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!gk(u,l,s))return o;r+=2}else{if(!gk(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function RI(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ug(o)){let u=Kz(o.outlets);return new yn(r,u)}if(i===0&&g_(t[0])){let u=n.segments[e];r.push(new $c(u.path,pk(t[0]))),i++;continue}let s=Ug(o)?o.outlets[qt]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&g_(a)?(r.push(new $c(s,pk(a))),i+=2):(r.push(new $c(s,{})),i++)}return new yn(r,{})}function Kz(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=RI(new yn([],{}),0,r))}),e}function pk(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function gk(n,e,t){return n==t.path&&ra(e,t.parameters)}var Fg="imperative",Yr=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Yr||{}),Qo=class{id;url;constructor(e,t){this.id=e,this.url=t}},qg=class extends Qo{type=Yr.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gc=class extends Qo{urlAfterRedirects;type=Yr.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(vo||{}),PI=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(PI||{}),nu=class extends Qo{reason;code;type=Yr.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Kc=class extends Qo{reason;code;type=Yr.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Hg=class extends Qo{error;target;type=Yr.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},v_=class extends Qo{urlAfterRedirects;state;type=Yr.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kI=class extends Qo{urlAfterRedirects;state;type=Yr.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},LI=class extends Qo{urlAfterRedirects;state;shouldActivate;type=Yr.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},OI=class extends Qo{urlAfterRedirects;state;type=Yr.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},FI=class extends Qo{urlAfterRedirects;state;type=Yr.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},VI=class{route;type=Yr.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},jI=class{route;type=Yr.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},BI=class{snapshot;type=Yr.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},UI=class{snapshot;type=Yr.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qI=class{snapshot;type=Yr.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},HI=class{snapshot;type=Yr.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var zg=class{},of=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Qz(n,e){return n.providers&&!n._injector&&(n._injector=rI(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Es(n){return n.outlet||qt}function Yz(n,e){let t=n.filter(r=>Es(r)===e);return t.push(...n.filter(r=>Es(r)!==e)),t}function Yg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var zI=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Yg(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new C_(this.rootInjector)}},C_=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new zI(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(je(lr))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),y_=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=$I(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=$I(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=WI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return WI(e,this._root).map(t=>t.value)}};function $I(n,e){if(n===e.value)return e;for(let t of e.children){let r=$I(n,t);if(r)return r}return null}function WI(n,e){if(n===e.value)return[e];for(let t of e.children){let r=WI(n,t);if(r.length)return r.unshift(e),r}return[]}var mo=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Xh(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var __=class extends y_{snapshot;constructor(e,t){super(e),this.snapshot=t,nC(this,e)}toString(){return this.snapshot.toString()}};function Pk(n){let e=Zz(n),t=new Gr([new $c("",{})]),r=new Gr({}),i=new Gr({}),o=new Gr({}),s=new Gr(""),a=new sf(t,r,o,s,i,qt,n,e.root);return a.snapshot=e.root,new __(new mo(a,[]),e)}function Zz(n){let e={},t={},r={},i="",o=new tf([],e,r,i,t,qt,n,null,{});return new b_("",new mo(o,[]))}var sf=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ut(l=>l[Qg]))??vt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ut(e=>rf(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ut(e=>rf(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function w_(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Ue(Ue({},e.params),n.params),data:Ue(Ue({},e.data),n.data),resolve:Ue(Ue(Ue(Ue({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Ue({},n.params),data:Ue({},n.data),resolve:Ue(Ue({},n.data),n._resolvedData??{})},i&&Lk(i)&&(r.resolve[Qg]=i.title),r}var tf=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Qg]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=rf(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=rf(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},b_=class extends y_{url;constructor(e,t){super(t),this.url=e,nC(this,t)}toString(){return kk(this._root)}};function nC(n,e){e.value._routerState=n,e.children.forEach(t=>nC(n,t))}function kk(n){let e=n.children.length>0?` { ${n.children.map(kk).join(", ")} } `:"";return`${n.value}${e}`}function DI(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ra(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ra(e.params,t.params)||n.paramsSubject.next(t.params),Cz(e.url,t.url)||n.urlSubject.next(t.url),ra(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function GI(n,e){let t=ra(n.params,e.params)&&Tz(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||GI(n.parent,e.parent))}function Lk(n){return typeof n.title=="string"||n.title===null}var Jz=new nt(""),rC=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=qt;activateEvents=new Qr;deactivateEvents=new Qr;attachEvents=new Qr;detachEvents=new Qr;routerOutletData=RR(void 0);parentContexts=Fe(C_);location=Fe(Gh);changeDetector=Fe(qc);inputBinder=Fe(iC,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ht(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ht(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ht(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ht(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new KI(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Mr({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[zh]})}return n})(),KI=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===sf?this.route:e===C_?this.childContexts:e===Jz?this.outletData:this.parent.get(e,t)}},iC=new nt("");function Xz(n,e,t){let r=$g(n,e._root,t?t._root:void 0);return new __(r,e)}function $g(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=e$(n,e,t);return new mo(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>$g(n,a)),s}}let r=t$(e.value),i=e.children.map(o=>$g(n,o));return new mo(r,i)}}function e$(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return $g(n,r,i);return $g(n,r)})}function t$(n){return new sf(new Gr(n.url),new Gr(n.params),new Gr(n.queryParams),new Gr(n.fragment),new Gr(n.data),n.outlet,n.component,n)}var Wg=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Ok="ngNavigationCancelingError";function E_(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Bg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Fk(!1,vo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Fk(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Ok]=!0,t.cancellationCode=e,t}function n$(n){return Vk(n)&&Bg(n.url)}function Vk(n){return!!n&&n[Ok]}var r$=(n,e,t,r)=>ut(i=>(new QI(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),QI=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),DI(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Xh(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Xh(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Xh(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Xh(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new HI(o.value.snapshot))}),e.children.length&&this.forwardEvent(new UI(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(DI(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),DI(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},I_=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},nf=class{component;route;constructor(e,t){this.component=e,this.route=t}};function i$(n,e,t){let r=n._root,i=e?e._root:null;return Lg(r,i,t,[r.value])}function o$(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function uf(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!TM(n)?n:e.get(n):r}function Lg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Xh(e);return n.children.forEach(s=>{s$(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Vg(a,t.getContext(s),i)),i}function s$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=a$(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new I_(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Lg(n,e,a?a.children:null,r,i):Lg(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new nf(a.outlet.component,s))}else s&&Vg(e,a,i),i.canActivateChecks.push(new I_(r)),o.component?Lg(n,null,a?a.children:null,r,i):Lg(n,null,t,r,i);return i}function a$(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Wc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wc(n.url,e.url)||!ra(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!GI(n,e)||!ra(n.queryParams,e.queryParams);case"paramsChange":default:return!GI(n,e)}}function Vg(n,e,t){let r=Xh(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Vg(s,e.children.getContext(o),t):Vg(s,null,t):Vg(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new nf(e.outlet.component,i)):t.canDeactivateChecks.push(new nf(null,i)):t.canDeactivateChecks.push(new nf(null,i))}function Zg(n){return typeof n=="function"}function u$(n){return typeof n=="boolean"}function l$(n){return n&&Zg(n.canLoad)}function c$(n){return n&&Zg(n.canActivate)}function d$(n){return n&&Zg(n.canActivateChild)}function h$(n){return n&&Zg(n.canDeactivate)}function f$(n){return n&&Zg(n.canMatch)}function jk(n){return n instanceof Ha||n?.name==="EmptyError"}var d_=Symbol("INITIAL_VALUE");function af(){return Kn(n=>t0(n.map(e=>e.pipe(za(1),bc(d_)))).pipe(ut(e=>{for(let t of e)if(t!==!0){if(t===d_)return d_;if(t===!1||p$(t))return t}return!0}),ri(e=>e!==d_),za(1)))}function p$(n){return Bg(n)||n instanceof Wg}function g$(n,e){return Nr(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?vt(Ut(Ue({},t),{guardsResult:!0})):m$(s,r,i,n).pipe(Nr(a=>a&&u$(a)?v$(r,o,n,e):vt(a)),ut(a=>Ut(Ue({},t),{guardsResult:a})))})}function m$(n,e,t,r){return pn(n).pipe(Nr(i=>E$(i.component,i.route,t,e,r)),gs(i=>i!==!0,!0))}function v$(n,e,t,r){return pn(e).pipe(Ah(i=>Sh(_$(i.route.parent,r),y$(i.route,r),b$(n,i.path,t),w$(n,i.route,t))),gs(i=>i!==!0,!0))}function y$(n,e){return n!==null&&e&&e(new qI(n)),vt(!0)}function _$(n,e){return n!==null&&e&&e(new BI(n)),vt(!0)}function w$(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return vt(!0);let i=r.map(o=>n0(()=>{let s=Yg(e)??t,a=uf(o,s),u=c$(a)?a.canActivate(e,n):$o(s,()=>a(e,n));return ol(u).pipe(gs())}));return vt(i).pipe(af())}function b$(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>o$(s)).filter(s=>s!==null).map(s=>n0(()=>{let a=s.guards.map(u=>{let l=Yg(s.node)??t,d=uf(u,l),f=d$(d)?d.canActivateChild(r,n):$o(l,()=>d(r,n));return ol(f).pipe(gs())});return vt(a).pipe(af())}));return vt(o).pipe(af())}function E$(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return vt(!0);let s=o.map(a=>{let u=Yg(e)??i,l=uf(a,u),d=h$(l)?l.canDeactivate(n,e,t,r):$o(u,()=>l(n,e,t,r));return ol(d).pipe(gs())});return vt(s).pipe(af())}function I$(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return vt(!0);let o=i.map(s=>{let a=uf(s,n),u=l$(a)?a.canLoad(e,t):$o(n,()=>a(e,t));return ol(u)});return vt(o).pipe(af(),Bk(r))}function Bk(n){return s2(Kr(e=>{if(typeof e!="boolean")throw E_(n,e)}),ut(e=>e===!0))}function C$(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return vt(!0);let o=i.map(s=>{let a=uf(s,n),u=f$(a)?a.canMatch(e,t):$o(n,()=>a(e,t));return ol(u)});return vt(o).pipe(af(),Bk(r))}var Gg=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Kg=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Jh(n){return Ch(new Gg(n))}function S$(n){return Ch(new ht(4e3,!1))}function D$(n){return Ch(Fk(!1,vo.GuardRejected))}var YI=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return vt(r);if(i.numberOfChildren>1||!i.children[qt])return S$(`${e.redirectTo}`);i=i.children[qt]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:d,url:f,outlet:m,params:g,data:b,title:E}=i,D=$o(o,()=>a({params:g,data:b,queryParams:u,fragment:l,routeConfig:d,url:f,outlet:m,title:E}));if(D instanceof ru)throw new Kg(D);t=D}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Kg(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ru(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new yn(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ht(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},ZI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function A$(n,e,t,r,i){let o=Uk(n,e,t);return o.matched?(r=Qz(e,r),C$(r,e,t,i).pipe(ut(s=>s===!0?o:Ue({},ZI)))):vt(o)}function Uk(n,e,t){if(e.path==="**")return T$(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Ue({},ZI):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Iz)(t,n,e);if(!i)return Ue({},ZI);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?Ue(Ue({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function T$(n){return{matched:!0,parameters:n.length>0?wk(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function mk(n,e,t,r){return t.length>0&&M$(n,t,r)?{segmentGroup:new yn(e,N$(r,new yn(t,n.children))),slicedSegments:[]}:t.length===0&&R$(n,t,r)?{segmentGroup:new yn(n.segments,x$(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new yn(n.segments,n.children),slicedSegments:t}}function x$(n,e,t,r){let i={};for(let o of t)if(S_(n,e,o)&&!r[Es(o)]){let s=new yn([],{});i[Es(o)]=s}return Ue(Ue({},r),i)}function N$(n,e){let t={};t[qt]=e;for(let r of n)if(r.path===""&&Es(r)!==qt){let i=new yn([],{});t[Es(r)]=i}return t}function M$(n,e,t){return t.some(r=>S_(n,e,r)&&Es(r)!==qt)}function R$(n,e,t){return t.some(r=>S_(n,e,r))}function S_(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function P$(n,e,t){return e.length===0&&!n.children[t]}var JI=class{};function k$(n,e,t,r,i,o,s="emptyOnly"){return new XI(n,e,t,r,i,s,o).recognize()}var L$=31,XI=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new YI(this.urlSerializer,this.urlTree)}noMatchError(e){return new ht(4002,`'${e.segmentGroup}'`)}recognize(){let e=mk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ut(({children:t,rootSnapshot:r})=>{let i=new mo(r,t),o=new b_("",i),s=qz(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new tf([],Object.freeze({}),Object.freeze(Ue({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),qt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,qt,t).pipe(ut(r=>({children:r,rootSnapshot:t})),Gu(r=>{if(r instanceof Kg)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Gg?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ut(s=>s instanceof mo?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return pn(o).pipe(Ah(s=>{let a=r.children[s],u=Yz(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Qs((s,a)=>(s.push(...a),s)),Ku(null),p2(),Nr(s=>{if(s===null)return Jh(r);let a=qk(s);return O$(a),vt(a)}))}processSegment(e,t,r,i,o,s,a){return pn(t).pipe(Ah(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Gu(l=>{if(l instanceof Gg)return vt(null);throw l}))),gs(u=>!!u),Gu(u=>{if(jk(u))return P$(r,i,o)?vt(new JI):Jh(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Es(r)!==s&&(s===qt||!S_(i,o,r))?Jh(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Jh(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:m}=Uk(t,i,o);if(!u)return Jh(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>L$&&(this.allowRedirects=!1));let g=new tf(o,l,Object.freeze(Ue({},this.urlTree.queryParams)),this.urlTree.fragment,vk(i),Es(i),i.component??i._loadedComponent??null,i,yk(i)),b=w_(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(b.params),g.data=Object.freeze(b.data);let E=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,g,e);return this.applyRedirects.lineralizeSegments(i,E).pipe(Nr(D=>this.processSegment(e,r,t,D.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=A$(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Kn(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Kn(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:m,remainingSegments:g}=u,b=new tf(m,f,Object.freeze(Ue({},this.urlTree.queryParams)),this.urlTree.fragment,vk(r),Es(r),r.component??r._loadedComponent??null,r,yk(r)),E=w_(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(E.params),b.data=Object.freeze(E.data);let{segmentGroup:D,slicedSegments:w}=mk(t,m,g,l);if(w.length===0&&D.hasChildren())return this.processChildren(d,l,D,b).pipe(ut(F=>new mo(b,F)));if(l.length===0&&w.length===0)return vt(new mo(b,[]));let x=Es(r)===o;return this.processSegment(d,l,D,w,x?qt:o,!0,b).pipe(ut(F=>new mo(b,F instanceof mo?[F]:[])))}))):Jh(t)))}getChildConfig(e,t,r){return t.children?vt({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?vt({routes:t._loadedRoutes,injector:t._loadedInjector}):I$(e,t,r,this.urlSerializer).pipe(Nr(i=>i?this.configLoader.loadChildren(e,t).pipe(Kr(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):D$(t))):vt({routes:[],injector:e})}};function O$(n){n.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}function F$(n){let e=n.value.routeConfig;return e&&e.path===""}function qk(n){let e=[],t=new Set;for(let r of n){if(!F$(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=qk(r.children);e.push(new mo(r.value,i))}return e.filter(r=>!t.has(r))}function vk(n){return n.data||{}}function yk(n){return n.resolve||{}}function V$(n,e,t,r,i,o){return Nr(s=>k$(n,e,t,r,s.extractedUrl,i,o).pipe(ut(({state:a,tree:u})=>Ut(Ue({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function j$(n,e){return Nr(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return vt(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of Hk(u))s.add(l);let a=0;return pn(s).pipe(Ah(u=>o.has(u)?B$(u,r,n,e):(u.data=w_(u,u.parent,n).resolve,vt(void 0))),Kr(()=>a++),Th(1),Nr(u=>a===s.size?vt(t):ni))})}function Hk(n){let e=n.children.map(t=>Hk(t)).flat();return[n,...e]}function B$(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Lk(i)&&(o[Qg]=i.title),U$(o,n,e,r).pipe(ut(s=>(n._resolvedData=s,n.data=w_(n,n.parent,t).resolve,null)))}function U$(n,e,t,r){let i=xI(n);if(i.length===0)return vt({});let o={};return pn(i).pipe(Nr(s=>q$(n[s],e,t,r).pipe(gs(),Kr(a=>{if(a instanceof Wg)throw E_(new jg,a);o[s]=a}))),Th(1),ut(()=>o),Gu(s=>jk(s)?ni:Ch(s)))}function q$(n,e,t,r){let i=Yg(e)??r,o=uf(n,i),s=o.resolve?o.resolve(e,t):$o(i,()=>o(e,t));return ol(s)}function AI(n){return Kn(e=>{let t=n(e);return t?pn(t).pipe(ut(()=>e)):vt(e)})}var zk=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===qt);return r}getResolvedTitleForRoute(t){return t.data[Qg]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:()=>Fe(H$),providedIn:"root"})}return n})(),H$=(()=>{class n extends zk{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(je(dk))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oC=new nt("",{providedIn:"root",factory:()=>({})}),z$=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kh({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Oc(0,"router-outlet")},dependencies:[rC],encapsulation:2})}return n})();function sC(n){let e=n.children&&n.children.map(sC),t=e?Ut(Ue({},n),{children:e}):Ue({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=z$),t}var aC=new nt(""),$$=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Fe(cI);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return vt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ol(t.loadComponent()).pipe(ut($k),Kr(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),rg(()=>{this.componentLoaders.delete(t)})),i=new _h(r,()=>new Hn).pipe(yh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return vt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=W$(r,this.compiler,t,this.onLoadEndListener).pipe(rg(()=>{this.childrenLoaders.delete(r)})),s=new _h(o,()=>new Hn).pipe(yh());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function W$(n,e,t,r){return ol(n.loadChildren()).pipe(ut($k),Nr(i=>i instanceof vg||Array.isArray(i)?vt(i):pn(e.compileModuleAsync(i))),ut(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(aC,[],{optional:!0,self:!0}).flat()),{routes:s.map(sC),injector:o}}))}function G$(n){return n&&typeof n=="object"&&"default"in n}function $k(n){return G$(n)?n.default:n}var uC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:()=>Fe(K$),providedIn:"root"})}return n})(),K$=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Q$=new nt("");var Y$=new nt(""),Z$=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Hn;transitionAbortSubject=new Hn;configLoader=Fe($$);environmentInjector=Fe(lr);destroyRef=Fe(Ig);urlSerializer=Fe(tC);rootContexts=Fe(C_);location=Fe(xg);inputBindingEnabled=Fe(iC,{optional:!0})!==null;titleStrategy=Fe(zk);options=Fe(oC,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Fe(uC);createViewTransition=Fe(Q$,{optional:!0});navigationErrorHandler=Fe(Y$,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>vt(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new VI(i)),r=i=>this.events.next(new jI(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ut(Ue(Ue({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Gr({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Fg,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ri(o=>o.id!==0),ut(o=>Ut(Ue({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Kn(o=>{let s=!1,a=!1;return vt(o).pipe(Kn(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",vo.SupersededByNewNavigation),ni;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Ut(Ue({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new Kc(u.id,this.urlSerializer.serialize(u.rawUrl),f,PI.IgnoredSameUrlNavigation)),u.resolve(!1),ni}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return vt(u).pipe(Kn(f=>{let m=this.transitions?.getValue();return this.events.next(new qg(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),m!==this.transitions?.getValue()?ni:Promise.resolve(f)}),V$(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Kr(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Ut(Ue({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let m=new v_(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:m,source:g,restoredState:b,extras:E}=u,D=new qg(f,this.urlSerializer.serialize(m),g,b);this.events.next(D);let w=Pk(this.rootComponentType).snapshot;return this.currentTransition=o=Ut(Ue({},u),{targetSnapshot:w,urlAfterRedirects:m,extras:Ut(Ue({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,vt(o)}else{let f="";return this.events.next(new Kc(u.id,this.urlSerializer.serialize(u.extractedUrl),f,PI.IgnoredByUrlHandlingStrategy)),u.resolve(!1),ni}}),Kr(u=>{let l=new kI(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ut(u=>(this.currentTransition=o=Ut(Ue({},u),{guards:i$(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),g$(this.environmentInjector,u=>this.events.next(u)),Kr(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw E_(this.urlSerializer,u.guardsResult);let l=new LI(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),ri(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",vo.GuardRejected),!1)),AI(u=>{if(u.guards.canActivateChecks.length)return vt(u).pipe(Kr(l=>{let d=new OI(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Kn(l=>{let d=!1;return vt(l).pipe(j$(this.paramsInheritanceStrategy,this.environmentInjector),Kr({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",vo.NoDataFromResolver)}}))}),Kr(l=>{let d=new FI(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),AI(u=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Kr(m=>{d.component=m}),ut(()=>{})));for(let m of d.children)f.push(...l(m));return f};return t0(l(u.targetSnapshot.root)).pipe(Ku(null),za(1))}),AI(()=>this.afterPreactivation()),Kn(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?pn(d).pipe(ut(()=>o)):vt(o)}),ut(u=>{let l=Xz(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=Ut(Ue({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Kr(()=>{this.events.next(new zg)}),r$(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),za(1),Kr({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),v2(this.transitionAbortSubject.pipe(Kr(u=>{throw u}))),rg(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",vo.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Gu(u=>{if(this.destroyed)return o.resolve(!1),ni;if(a=!0,Vk(u))this.events.next(new nu(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),n$(u)?this.events.next(new of(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Hg(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let d=$o(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof Wg){let{message:f,cancellationCode:m}=E_(this.urlSerializer,d);this.events.next(new nu(o.id,this.urlSerializer.serialize(o.extractedUrl),f,m)),this.events.next(new of(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(l),u}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return ni}))}))}cancelNavigationTransition(t,r,i){let o=new nu(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function J$(n){return n!==Fg}var X$=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:()=>Fe(eW),providedIn:"root"})}return n})(),eC=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},eW=(()=>{class n extends eC{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Za(n)))(i||n)}})();static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wk=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:()=>Fe(tW),providedIn:"root"})}return n})(),tW=(()=>{class n extends Wk{location=Fe(xg);urlSerializer=Fe(tC);options=Fe(oC,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=Fe(uC);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ru;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=Pk(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof qg)this.stateMemento=this.createStateMemento();else if(t instanceof Kc)this.rawUrlTree=r.initialUrl;else if(t instanceof v_){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof zg?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof nu&&(t.code===vo.GuardRejected||t.code===vo.NoDataFromResolver)?this.restoreHistory(r):t instanceof Hg?this.restoreHistory(r,!0):t instanceof Gc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof ru?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=Ue(Ue({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=Ue(Ue({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Za(n)))(i||n)}})();static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nW(n,e){n.events.pipe(ri(t=>t instanceof Gc||t instanceof nu||t instanceof Hg||t instanceof Kc),ut(t=>t instanceof Gc||t instanceof Kc?0:(t instanceof nu?t.code===vo.Redirect||t.code===vo.SupersededByNewNavigation:!1)?2:1),ri(t=>t!==2),za(1)).subscribe(()=>{e()})}var rW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Gk=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Fe(iI);stateManager=Fe(Wk);options=Fe(oC,{optional:!0})||{};pendingTasks=Fe(kc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Fe(Z$);urlSerializer=Fe(tC);location=Fe(xg);urlHandlingStrategy=Fe(uC);_events=new Hn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Fe(X$);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Fe(aC,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Fe(iC,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new nr;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof nu&&r.code!==vo.Redirect&&r.code!==vo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Gc)this.navigated=!0;else if(r instanceof of){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=Ue({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||J$(i.source)},s);this.scheduleNavigation(a,Fg,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}sW(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fg,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=Ue({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(sC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=Ue(Ue({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let m=i?i.snapshot:this.routerState.snapshot.root;f=xk(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return Nk(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Bg(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Fg,null,r)}navigate(t,r={skipLocationChange:!1}){return oW(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Ue({},rW):r===!1?i=Ue({},iW):i=r,Bg(t))return hk(this.currentUrlTree,t,i);let o=this.parseUrl(t);return hk(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((f,m)=>{a=f,u=m});let d=this.pendingTasks.add();return nW(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oW(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ht(4008,!1)}function sW(n){return!(n instanceof zg)&&!(n instanceof of)}var aW=new nt("");function Kk(n,...e){return IE([{provide:aC,multi:!0,useValue:n},[],{provide:sf,useFactory:uW,deps:[Gk]},{provide:oI,multi:!0,useFactory:lW},e.map(t=>t.\u0275providers)])}function uW(n){return n.routerState.root}function lW(){let n=Fe(ho);return e=>{let t=n.get(nl);if(e!==t.components[0])return;let r=n.get(Gk),i=n.get(cW);n.get(dW)===1&&r.initialNavigation(),n.get(hW,null,zt.Optional)?.setUpPreloading(),n.get(aW,null,zt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var cW=new nt("",{factory:()=>new Hn}),dW=new nt("",{providedIn:"root",factory:()=>1});var hW=new nt("");var oL=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(tn(Ja),tn(ta))};static \u0275dir=Mr({type:n})}return n})(),N_=(()=>{class n extends oL{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Za(n)))(i||n)}})();static \u0275dir=Mr({type:n,features:[na]})}return n})(),rm=new nt("");var fW={provide:rm,useExisting:Ka(()=>M_),multi:!0};function pW(){let n=tu()?tu().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var gW=new nt(""),M_=(()=>{class n extends oL{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!pW())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(tn(Ja),tn(ta),tn(gW,8))};static \u0275dir=Mr({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&$i("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[jc([fW]),na]})}return n})();function Qk(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var sL=new nt(""),mW=new nt("");function vW(n){return e=>{if(Qk(e.value)||Qk(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Yk(n){return null}function aL(n){return n!=null}function uL(n){return Lc(n)?pn(n):n}function lL(n){let e={};return n.forEach(t=>{e=t!=null?Ue(Ue({},e),t):e}),Object.keys(e).length===0?null:e}function cL(n,e){return e.map(t=>t(n))}function yW(n){return!n.validate}function dL(n){return n.map(e=>yW(e)?e:t=>e.validate(t))}function _W(n){if(!n)return null;let e=n.filter(aL);return e.length==0?null:function(t){return lL(cL(t,e))}}function hL(n){return n!=null?_W(dL(n)):null}function wW(n){if(!n)return null;let e=n.filter(aL);return e.length==0?null:function(t){let r=cL(t,e).map(uL);return f2(r).pipe(ut(lL))}}function fL(n){return n!=null?wW(dL(n)):null}function Zk(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bW(n){return n._rawValidators}function EW(n){return n._rawAsyncValidators}function lC(n){return n?Array.isArray(n)?n:[n]:[]}function A_(n,e){return Array.isArray(n)?n.includes(e):n===e}function Jk(n,e){let t=lC(e);return lC(n).forEach(i=>{A_(t,i)||t.push(i)}),t}function Xk(n,e){return lC(e).filter(t=>!A_(n,t))}var T_=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hL(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},cC=class extends T_{name;get formDirective(){return null}get path(){return null}},nm=class extends T_{_parent=null;name=null;valueAccessor=null},dC=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},IW={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ile=Ut(Ue({},IW),{"[class.ng-submitted]":"isSubmitted"}),pL=(()=>{class n extends dC{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(tn(nm,2))};static \u0275dir=Mr({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&sI("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[na]})}return n})();var Jg="VALID",D_="INVALID",lf="PENDING",Xg="DISABLED",df=class{},x_=class extends df{value;source;constructor(e,t){super(),this.value=e,this.source=t}},em=class extends df{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},tm=class extends df{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},cf=class extends df{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function CW(n){return(R_(n)?n.validators:n)||null}function SW(n){return Array.isArray(n)?hL(n):n||null}function DW(n,e){return(R_(e)?e.asyncValidators:n)||null}function AW(n){return Array.isArray(n)?fL(n):n||null}function R_(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var hC=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Xa(this.statusReactive)}set status(e){Xa(()=>this.statusReactive.set(e))}_status=Dg(()=>this.statusReactive());statusReactive=Cg(void 0);get valid(){return this.status===Jg}get invalid(){return this.status===D_}get pending(){return this.status==lf}get disabled(){return this.status===Xg}get enabled(){return this.status!==Xg}errors;get pristine(){return Xa(this.pristineReactive)}set pristine(e){Xa(()=>this.pristineReactive.set(e))}_pristine=Dg(()=>this.pristineReactive());pristineReactive=Cg(!0);get dirty(){return!this.pristine}get touched(){return Xa(this.touchedReactive)}set touched(e){Xa(()=>this.touchedReactive.set(e))}_touched=Dg(()=>this.touchedReactive());touchedReactive=Cg(!1);get untouched(){return!this.touched}_events=new Hn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Jk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Jk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Xk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Xk(e,this._rawAsyncValidators))}hasValidator(e){return A_(this._rawValidators,e)}hasAsyncValidator(e){return A_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ut(Ue({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new tm(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new tm(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ut(Ue({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new em(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new em(!0,r))}markAsPending(e={}){this.status=lf;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new cf(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ut(Ue({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Xg,this.errors=null,this._forEachChild(i=>{i.disable(Ut(Ue({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new x_(this.value,r)),this._events.next(new cf(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ut(Ue({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Jg,this._forEachChild(r=>{r.enable(Ut(Ue({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ut(Ue({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jg||this.status===lf)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new x_(this.value,t)),this._events.next(new cf(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ut(Ue({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xg:Jg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=lf,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=uL(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new cf(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Qr,this.statusChanges=new Qr}_calculateStatus(){return this._allControlsDisabled()?Xg:this.errors?D_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lf)?lf:this._anyControlsHaveStatus(D_)?D_:Jg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new em(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new tm(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){R_(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=SW(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=AW(this._rawAsyncValidators)}};var gL=new nt("",{providedIn:"root",factory:()=>fC}),fC="always";function TW(n,e){return[...e.path,n]}function xW(n,e,t=fC){MW(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),RW(n,e),kW(n,e),PW(n,e),NW(n,e)}function eL(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function NW(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function MW(n,e){let t=bW(n);e.validator!==null?n.setValidators(Zk(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=EW(n);e.asyncValidator!==null?n.setAsyncValidators(Zk(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();eL(e._rawValidators,i),eL(e._rawAsyncValidators,i)}function RW(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&mL(n,e)})}function PW(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&mL(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function mL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kW(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function LW(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function OW(n){return Object.getPrototypeOf(n.constructor)===N_}function FW(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===M_?t=o:OW(o)?r=o:i=o}),i||r||t||null}function tL(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function nL(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var VW=class extends hC{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(CW(t),DW(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),R_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(nL(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){tL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){tL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){nL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var jW={provide:nm,useExisting:Ka(()=>pC)},rL=Promise.resolve(),pC=(()=>{class n extends nm{_changeDetectorRef;callSetDisabledState;control=new VW;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Qr;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=FW(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),LW(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){xW(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){rL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&n_(r);rL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?TW(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(tn(cC,9),tn(sL,10),tn(mW,10),tn(rm,10),tn(qc,8),tn(gL,8))};static \u0275dir=Mr({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[jc([jW]),na,zh]})}return n})();var BW={provide:rm,useExisting:Ka(()=>gC),multi:!0},gC=(()=>{class n extends N_{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Za(n)))(i||n)}})();static \u0275dir=Mr({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&$i("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[jc([BW]),na]})}return n})();var UW={provide:rm,useExisting:Ka(()=>P_),multi:!0};function vL(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function qW(n){return n.split(":")[0]}var P_=(()=>{class n extends N_{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=vL(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=qW(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Za(n)))(i||n)}})();static \u0275dir=Mr({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&$i("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[jc([UW]),na]})}return n})(),yL=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(vL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(tn(ta),tn(Ja),tn(P_,9))};static \u0275dir=Mr({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),HW={provide:rm,useExisting:Ka(()=>_L),multi:!0};function iL(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function zW(n){return n.split(":")[0]}var _L=(()=>{class n extends N_{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=zW(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Za(n)))(i||n)}})();static \u0275dir=Mr({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&$i("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[jc([HW]),na]})}return n})(),wL=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(iL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(iL(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(tn(ta),tn(Ja),tn(_L,9))};static \u0275dir=Mr({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function $W(n){return typeof n=="number"?n:parseFloat(n)}var WW=(()=>{class n{_validator=Yk;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Yk,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Mr({type:n,features:[zh]})}return n})();var GW={provide:sL,useExisting:Ka(()=>mC),multi:!0},mC=(()=>{class n extends WW{min;inputName="min";normalizeInput=t=>$W(t);createValidator=t=>vW(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Za(n)))(i||n)}})();static \u0275dir=Mr({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&e_("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[jc([GW]),na]})}return n})();var KW=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=go({type:n});static \u0275inj=fo({})}return n})();var bL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:gL,useValue:t.callSetDisabledState??fC}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=go({type:n});static \u0275inj=fo({imports:[KW]})}return n})();H_();var e3=Jj(dO());var GG="firebase",KG="11.3.1";fs(GG,KG,"app");function ir(n){n===void 0&&(GM(ir),n=Fe(ho));let e=n.get(FE);return t=>new Lt(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var mf=new Ga("ANGULARFIRE2_VERSION");var hO=(n,e)=>{let t=e?[e]:tN(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},qC=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(qC||{}),Dle=Sg()&&typeof Zone<"u"?qC.WARN:qC.SILENT;var z_=class{zone;delegate;constructor(e,t=c2){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},rd=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=Fe(un);this.outsideAngular=t.runOutsideAngular(()=>new z_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new z_(typeof Zone>"u"?void 0:Zone.current,wc))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var QG=new Map,YG={activated:!1,tokenObservers:[]},ZG={initialized:!1,enabled:!1};function Ts(n){return QG.get(n)||Object.assign({},YG)}function _O(){return ZG}var JG="https://content-firebaseappcheck.googleapis.com/v1";var XG="exchangeDebugToken",fO={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},kle=24*60*60*1e3;var $C=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return Ee(this,null,function*(){this.stop();try{this.pending=new Vr,this.pending.promise.catch(t=>{}),yield eK(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Vr,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function eK(n){return new Promise(e=>{setTimeout(e,n)})}var tK={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},hl=new Qx("appCheck","AppCheck",tK);function wO(n){if(!Ts(n).activated)throw hl.create("use-before-activation",{appName:n.name})}function bO(r,i){return Ee(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let g=yield s.getHeartbeatsHeader();g&&(o["X-Firebase-Client"]=g)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(g){throw hl.create("fetch-network-error",{originalErrorMessage:g?.message})}if(u.status!==200)throw hl.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(g){throw hl.create("fetch-parse-error",{originalErrorMessage:g?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw hl.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function EO(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${JG}/projects/${t}/apps/${r}:${XG}?key=${i}`,body:{debug_token:e}}}var nK="firebase-app-check-database",rK=1,WC="firebase-app-check-store";var $_=null;function iK(){return $_||($_=new Promise((n,e)=>{try{let t=indexedDB.open(nK,rK);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(hl.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(WC,{keyPath:"compositeKey"})}}}catch(t){e(hl.create("storage-open",{originalErrorMessage:t?.message}))}}),$_)}function oK(n,e){return sK(aK(n),e)}function sK(n,e){return Ee(this,null,function*(){let r=(yield iK()).transaction(WC,"readwrite"),o=r.objectStore(WC).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(hl.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function aK(n){return`${n.options.appId}-${n.name}`}var GC=new Wu("@firebase/app-check");function zC(n,e){return by()?oK(n,e).catch(t=>{GC.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function IO(){return _O().enabled}function CO(){return Ee(this,null,function*(){let n=_O();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var uK={error:"UNKNOWN_ERROR"};function lK(n){return _y.encodeString(JSON.stringify(n),!1)}function KC(n,e=!1){return Ee(this,null,function*(){let t=n.app;wO(t);let r=Ts(t),i=r.token,o;if(i&&!fm(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(fm(u)?i=u:yield zC(t,void 0))}if(!e&&i&&fm(i))return{token:i.token};let s=!1;if(IO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=bO(EO(t,yield CO()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield zC(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Ts(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?GC.warn(u.message):GC.error(u),o=u}let a;return i?o?fm(i)?a={token:i.token,internalError:o}:a=gO(o):(a={token:i.token},r.token=i,yield zC(t,i)):a=gO(o),s&&fK(t,a),a})}function cK(n){return Ee(this,null,function*(){let e=n.app;wO(e);let{provider:t}=Ts(e);if(IO()){let r=yield CO(),{token:i}=yield bO(EO(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function dK(n,e,t,r){let{app:i}=n,o=Ts(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&fm(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),pO(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>pO(n))}function SO(n,e){let t=Ts(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function pO(n){let{app:e}=n,t=Ts(e),r=t.tokenRefresher;r||(r=hK(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function hK(n){let{app:e}=n;return new $C(()=>Ee(this,null,function*(){let t=Ts(e),r;if(t.token?r=yield KC(n,!0):r=yield KC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Ts(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},fO.RETRIAL_MIN_WAIT,fO.RETRIAL_MAX_WAIT)}function fK(n,e){let t=Ts(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function fm(n){return n.expireTimeMillis-Date.now()>0}function gO(n){return{token:lK(uK),error:n}}var QC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Ts(this.app);for(let t of e)SO(this.app,t.next);return Promise.resolve()}};function pK(n,e){return new QC(n,e)}function gK(n){return{getToken:e=>KC(n,e),getLimitedUseToken:()=>cK(n),addTokenListener:e=>dK(n,"INTERNAL",e),removeTokenListener:e=>SO(n.app,e)}}var mK="@firebase/app-check",vK="0.8.11";var yK="app-check",mO="app-check-internal";function _K(){gc(new uo(yK,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return pK(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(mO).initialize()})),gc(new uo(mO,n=>{let e=n.getProvider("app-check").getImmediate();return gK(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),fs(mK,vK)}_K();var wK="app-check";var fl=class{constructor(){return hO(wK)}};var bK=["localhost","0.0.0.0","127.0.0.1"],Qle=typeof window<"u"&&bK.includes(window.location.hostname);var EK="firebase",IK="11.3.1";$r.registerVersion(EK,IK,"app-compat");var CK=["ngOnDestroy"],AO=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(CK.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var W_=class{constructor(e){return e}},pl=new nt("angularfire2.app.options"),gl=new nt("angularfire2.app.name");function id(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=$r.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>$r.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;SK("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new W_(s)}var SK=(n,...e)=>{Sg()&&typeof console<"u"&&console[n](...e)},DK={provide:W_,useFactory:id,deps:[pl,un,[new q0,gl]]},TO=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:pl,useValue:t},{provide:gl,useValue:r}]}}constructor(t){$r.registerVersion("angularfire",mf.full,"core"),$r.registerVersion("angularfire",mf.full,"app-compat"),$r.registerVersion("angular",LP.full,t.toString())}static \u0275fac=function(r){return new(r||n)(je(po))};static \u0275mod=go({type:n});static \u0275inj=fo({providers:[DK]})}return n})();function vf(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return AK(i,s)||(DO("error",`${e} was already initialized on the ${t} Firebase App with different settings.${TK?" You may need to reload as Firebase is not HMR aware.":""}`),DO("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function AK(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var TK=typeof module<"u"&&!!module.hot,DO=(n,...e)=>{Sg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var pm=new nt("angularfire2.auth.use-emulator"),gm=new nt("angularfire2.auth.settings"),mm=new nt("angularfire2.auth.tenant-id"),vm=new nt("angularfire2.auth.langugage-code"),ym=new nt("angularfire2.auth.use-device-language"),_m=new nt("angularfire.auth.persistence"),wm=(n,e,t,r,i,o,s,a)=>vf(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))u.settings[l]=d;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),bm=(()=>{class n{injector=Fe(lr);authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,d,f,m,g){let b=new Hn,E=vt(void 0).pipe(Ks(s.outsideAngular),Kn(()=>o.runOutsideAngular(()=>import("./chunk-TYGDE4YO.js"))),ut(()=>id(t,o,r)),ut(D=>wm(D,o,a,l,d,f,u,m)),i0({bufferSize:1,refCount:!1}));if(zc(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=vt(null);else{E.pipe(gs()).subscribe();let D=E.pipe(Kn(F=>F.getRedirectResult().then(z=>z,()=>null)),ir(this.injector),i0({bufferSize:1,refCount:!1})),w=E.pipe(Kn(F=>new Lt(z=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(H=>z.next(H),H=>z.error(H),()=>z.complete()))})))),x=E.pipe(Kn(F=>new Lt(z=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(H=>z.next(H),H=>z.error(H),()=>z.complete()))}))));this.authState=D.pipe(o0(w),qa(s.outsideAngular),Ks(s.insideAngular)),this.user=D.pipe(o0(x),qa(s.outsideAngular),Ks(s.insideAngular)),this.idToken=this.user.pipe(Kn(F=>F?pn(F.getIdToken()):vt(null))),this.idTokenResult=this.user.pipe(Kn(F=>F?pn(F.getIdTokenResult()):vt(null))),this.credential=Dh(D,b,this.authState.pipe(ri(F=>!F))).pipe(ut(F=>F?.user?F:null),qa(s.outsideAngular),Ks(s.insideAngular))}return AO(this,E,o,{spy:{apply:(D,w,x)=>{(D.startsWith("signIn")||D.startsWith("createUser"))&&x.then(F=>b.next(F))}}})}static \u0275fac=function(r){return new(r||n)(je(pl),je(gl,8),je(po),je(un),je(rd),je(pm,8),je(gm,8),je(mm,8),je(vm,8),je(ym,8),je(_m,8),je(fl,8))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),xO=(()=>{class n{constructor(){$r.registerVersion("angularfire",mf.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=go({type:n});static \u0275inj=fo({providers:[bm]})}return n})();var MO="@firebase/database",RO="1.0.12";var uD="";function lD(n){uD=n}var iS=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),wr(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Ey(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var oS=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Bo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var lF=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new iS(e)}}catch{}return new oS},sd=lF("localStorage"),sS=lF("sessionStorage");var bf=new Wu("@firebase/database"),cF=function(){let n=1;return function(){return n++}}(),dF=function(n){let e=eN(n),t=new Xx;t.update(e);let r=t.digest();return _y.encodeByteArray(r)},$m=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=$m.apply(null,r):typeof r=="object"?e+=wr(r):e+=r,e+=" "}return e},ad=null,PO=!0,hF=function(n,e){Ve(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(bf.logLevel=Uo.VERBOSE,ad=bf.log.bind(bf),e&&sS.set("logging_enabled",!0)):typeof n=="function"?ad=n:(ad=null,sS.remove("logging_enabled"))},jr=function(...n){if(PO===!0&&(PO=!1,ad===null&&sS.get("logging_enabled")===!0&&hF(!0)),ad){let e=$m.apply(null,n);ad(e)}},Wm=function(n){return function(...e){jr(n,...e)}},aS=function(...n){let e="FIREBASE INTERNAL ERROR: "+$m(...n);bf.error(e)},ca=function(...n){let e=`FIREBASE FATAL ERROR: ${$m(...n)}`;throw bf.error(e),new Error(e)},li=function(...n){let e="FIREBASE WARNING: "+$m(...n);bf.warn(e)},NK=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&li("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ww=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},MK=function(n){if(Ws()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},_l="[MIN_NAME]",su="[MAX_NAME]",ld=function(n,e){if(n===e)return 0;if(n===_l||e===su)return-1;if(e===_l||n===su)return 1;{let t=kO(n),r=kO(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},RK=function(n,e){return n===e?0:n<e?-1:1},Em=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+wr(e))},cD=function(n){if(typeof n!="object"||n===null)return wr(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=wr(e[r]),t+=":",t+=cD(n[e[r]]);return t+="}",t},fF=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Br(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var pF=function(n){Ve(!ww(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,o,s,a,u;n===0?(o=0,s=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(o=0,s=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(u=t;u;u-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(u=e;u;u-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(u=0;u<64;u+=8){let m=parseInt(d.substr(u,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},PK=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},kK=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function LK(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var OK=new RegExp("^-?(0*)\\d{1,10}$"),FK=-2147483648,VK=2147483647,kO=function(n){if(OK.test(n)){let e=Number(n);if(e>=FK&&e<=VK)return e}return null},Nf=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw li("Exception was thrown by user callback.",t),e},Math.floor(0))}},jK=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Dm=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var uS=class{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Sy(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){li(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var lS=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(jr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',li(e)}},Am=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),K_="5",gF="v",mF="s",vF="r",yF="f",_F=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wF="ls",bF="p",cS="ac",EF="websocket",IF="long_polling";var Q_=class{constructor(e,t,r,i,o=!1,s="",a=!1,u=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sd.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&sd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function BK(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function CF(n,e,t){Ve(typeof e=="string","typeof type must == string"),Ve(typeof t=="object","typeof params must == object");let r;if(e===EF)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===IF)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);BK(n)&&(t.ns=n.namespace);let i=[];return Br(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var dS=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Bo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Wx(this.counters_)}};var ZC={},JC={};function dD(n){let e=n.toString();return ZC[e]||(ZC[e]=new dS),ZC[e]}function UK(n,e){let t=n.toString();return JC[t]||(JC[t]=e()),JC[t]}var hS=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Nf(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var LO="start",qK="close",HK="pLPCommand",zK="pRTLPCB",SF="id",DF="pw",AF="ser",$K="cb",WK="seg",GK="ts",KK="d",QK="dframe",TF=1870,xF=30,YK=TF-xF,ZK=25e3,JK=3e4,Mm=class n{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Wm(e),this.stats_=dD(t),this.urlFn=u=>(this.appCheckToken&&(u[cS]=this.appCheckToken),CF(t,IF,u))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new hS(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(JK)),MK(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fS((...o)=>{let[s,a,u,l,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===LO)this.id=a,this.password=u;else if(s===qK)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[LO]="t",r[AF]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[$K]=this.scriptTagHolder.uniqueCallbackIdentifier),r[gF]=K_,this.transportSessionId&&(r[mF]=this.transportSessionId),this.lastSessionId&&(r[wF]=this.lastSessionId),this.applicationId&&(r[bF]=this.applicationId),this.appCheckToken&&(r[cS]=this.appCheckToken),typeof location<"u"&&location.hostname&&_F.test(location.hostname)&&(r[vF]=yF);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Ws()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!PK()&&!kK()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=wr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=$x(t),i=fF(r,YK);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Ws())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[QK]="t",r[SF]=e,r[DF]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=wr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},fS=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ws())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=cF(),window[HK+this.uniqueCallbackIdentifier]=e,window[zK+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){jr("frame writing exception"),a.stack&&jr(a.stack),jr(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||jr("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[SF]=this.myID,e[DF]=this.myPW,e[AF]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+xF+r.length<=TF;){let s=this.pendingSegs.shift();r=r+"&"+WK+i+"="+s.seg+"&"+GK+i+"="+s.ts+"&"+KK+i+"="+s.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(ZK)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,t){Ws()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{jr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var XK=16384,eQ=45e3,Y_=null;typeof MozWebSocket<"u"?Y_=MozWebSocket:typeof WebSocket<"u"&&(Y_=WebSocket);var _f=(()=>{class n{constructor(t,r,i,o,s,a,u){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Wm(this.connId),this.stats_=dD(r),this.connURL=n.connectionURL_(r,a,u,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){let a={};return a[gF]=K_,!Ws()&&typeof location<"u"&&location.hostname&&_F.test(location.hostname)&&(a[vF]=yF),r&&(a[mF]=r),i&&(a[wF]=i),o&&(a[cS]=o),s&&(a[bF]=s),CF(t,EF,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sd.set("previous_websocket_failure",!0);try{let i;if(Ws()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${K_}/${uD}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Y_(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Y_!==null&&!n.forceDisallow_}static previouslyFailed(){return sd.isInMemoryStorage||sd.get("previous_websocket_failure")===!0}markConnectionHealthy(){sd.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Ey(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Ve(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=wr(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=fF(r,XK);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(eQ))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),NF=(()=>{class n{static get ALL_TRANSPORTS(){return[Mm,_f]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let r=_f&&_f.isAvailable(),i=r&&!_f.previouslyFailed();if(t.webSocketOnly&&(r||li("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[_f];else{let o=this.transports_=[];for(let s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),tQ=6e4,nQ=5e3,rQ=10*1024,iQ=100*1024,XC="t",OO="d",oQ="s",FO="r",sQ="e",VO="o",jO="a",BO="n",UO="p",aQ="h",pS=class{constructor(e,t,r,i,o,s,a,u,l,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Wm("c:"+this.id+":"),this.transportManager_=new NF(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Dm(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>iQ?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>rQ?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(XC in e){let t=e[XC];t===jO?this.upgradeIfSecondaryHealthy_():t===FO?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===VO&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Em("t",e),r=Em("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:UO,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:jO,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:BO,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Em("t",e),r=Em("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Em(XC,e);if(OO in e){let r=e[OO];if(t===aQ){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===BO){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===oQ?this.onConnectionShutdown_(r):t===FO?this.onReset_(r):t===sQ?aS("Server Error: "+r):t===VO?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):aS("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),K_!==r&&li("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Dm(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(tQ))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Dm(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(nQ))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:UO,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Z_=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var J_=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Ve(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){Ve(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var X_=class n extends J_{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Hb()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ve(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var qO=32,HO=768,hn=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function dn(){return new hn("")}function $t(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function wl(n){return n.pieces_.length-n.pieceNum_}function kn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new hn(n.pieces_,e)}function hD(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function uQ(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Rm(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function MF(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new hn(e,0)}function Wn(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof hn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new hn(t,0)}function Wt(n){return n.pieceNum_>=n.pieces_.length}function Di(n,e){let t=$t(n),r=$t(e);if(t===null)return e;if(t===r)return Di(kn(n),kn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function lQ(n,e){let t=Rm(n,0),r=Rm(e,0);for(let i=0;i<t.length&&i<r.length;i++){let o=ld(t[i],r[i]);if(o!==0)return o}return t.length===r.length?0:t.length<r.length?-1:1}function fD(n,e){if(wl(n)!==wl(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Yo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(wl(n)>wl(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var gS=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Rm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Qp(this.parts_[r]);RF(this)}};function cQ(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Qp(e),RF(n)}function dQ(n){let e=n.parts_.pop();n.byteLength_-=Qp(e),n.parts_.length>0&&(n.byteLength_-=1)}function RF(n){if(n.byteLength_>HO)throw new Error(n.errorPrefix_+"has a key path longer than "+HO+" bytes ("+n.byteLength_+").");if(n.parts_.length>qO)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+qO+") or object contains a cycle "+od(n))}function od(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var mS=class n extends J_{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return Ve(e==="visible","Unknown event type: "+e),[this.visible_]}};var Im=1e3,hQ=60*5*1e3,zO=30*1e3,fQ=1.3,pQ=3e4,gQ="server_kill",$O=3,pD=(()=>{class n extends Z_{constructor(t,r,i,o,s,a,u,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Wm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Im,this.maxReconnectDelay_=hQ,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Ws())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mS.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&X_.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_(wr(s)),Ve(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new Vr,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let u=a.d;a.s==="ok"?r.resolve(u):r.reject(u)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(t,r,i,o){this.initConnection_();let s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),Ve(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ve(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let u={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,u),this.connected_&&this.sendListen_(u)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(a,s,u=>{let l=u.d,d=u.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",u),d!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(d,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Bo(t,"w")){let i=$u(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();li(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Zx(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=zO)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=Yx(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),Ve(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let s={p:t},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++;let u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+wr(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):aS("Unrecognized action received from server: "+wr(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Ve(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Im,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Im,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>pQ&&(this.reconnectDelay_=Im),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fQ)}this.onConnectStatus_(!1)}establishConnection_(){return Ee(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,a=!1,u=null,l=function(){u?u.close():(a=!0,i())},d=function(m){Ve(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(m)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,g]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?jr("getToken() completed but was canceled"):(jr("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=g&&g.token,u=new pS(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,b=>{li(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(gQ)},s))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&li(m),l())}}})}interrupt(t){jr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){jr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Iy(this.interruptReasons_)&&(this.reconnectDelay_=Im,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(s=>cD(s)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new hn(t).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){jr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=$O&&(this.reconnectDelay_=zO,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){jr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=$O&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Ws()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+uD.replace(/\./g,"-")]=1,Hb()?t["framework.cordova"]=1:Gx()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=X_.getInstance().currentlyOnline();return Iy(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Qt=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var Ef=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Qt(_l,e),i=new Qt(_l,t);return this.compare(r,i)!==0}minPost(){return Qt.MIN}};var G_,ew=class extends Ef{static get __EMPTY_NODE(){return G_}static set __EMPTY_NODE(e){G_=e}compare(e,t){return ld(e.name,t.name)}isDefinedOn(e){throw fh("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Qt.MIN}maxPost(){return new Qt(su,G_)}makePost(e,t){return Ve(typeof e=="string","KeyIndex indexValue must always be a string."),new Qt(e,G_)}toString(){return".key"}},la=new ew;var wf=class{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?r(e.key,t):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},xs=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??Zo.EMPTY_NODE,this.right=s??Zo.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,s=i(t,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Zo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Zo.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),vS=class{copy(e,t,r,i,o){return this}insert(e,t,r){return new xs(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Zo=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,xs.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xs.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new wf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new wf(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new wf(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new wf(this.root_,null,this.comparator_,!0,e)}};Zo.EMPTY_NODE=new vS;function mQ(n,e){return ld(n.name,e.name)}function gD(n,e){return ld(n,e)}var yS;function vQ(n){yS=n}var PF=function(n){return typeof n=="number"?"number:"+pF(n):"string:"+n},kF=function(n){if(n.isLeafNode()){let e=n.val();Ve(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Bo(e,".sv"),"Priority must be a string or number.")}else Ve(n===yS||n.isEmpty(),"priority of unexpected type.");Ve(n===yS||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var WO,If=(()=>{class n{static set __childrenNodeConstructor(t){WO=t}static get __childrenNodeConstructor(){return WO}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,Ve(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),kF(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Wt(t)?this:$t(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=$t(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(Ve(i!==".priority"||wl(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(kn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+PF(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=pF(this.value_):t+=this.value_,this.lazyHash_=dF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(Ve(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return Ve(o>=0,"Unknown leaf type: "+r),Ve(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),LF,OF;function yQ(n){LF=n}function _Q(n){OF=n}var _S=class extends Ef{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?ld(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Qt.MIN}maxPost(){return new Qt(su,new If("[PRIORITY-POST]",OF))}makePost(e,t){let r=LF(e);return new Qt(t,new If("[PRIORITY-POST]",r))}toString(){return".priority"}},Vn=new _S;var wQ=Math.log(2),wS=class{constructor(e){let t=o=>parseInt(Math.log(o)/wQ,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},tw=function(n,e,t,r){n.sort(e);let i=function(u,l){let d=l-u,f,m;if(d===0)return null;if(d===1)return f=n[u],m=t?t(f):f,new xs(m,f.node,xs.BLACK,null,null);{let g=parseInt(d/2,10)+u,b=i(u,g),E=i(g+1,l);return f=n[g],m=t?t(f):f,new xs(m,f.node,xs.BLACK,b,E)}},o=function(u){let l=null,d=null,f=n.length,m=function(b,E){let D=f-b,w=f;f-=b;let x=i(D+1,w),F=n[D],z=t?t(F):F;g(new xs(z,F.node,E,null,x))},g=function(b){l?(l.left=b,l=b):(d=b,l=b)};for(let b=0;b<u.count;++b){let E=u.nextBitIsOne(),D=Math.pow(2,u.count-(b+1));E?m(D,xs.BLACK):(m(D,xs.BLACK),m(D,xs.RED))}return d},s=new wS(n.length),a=o(s);return new Zo(r||e,a)};var eS,yf={},Cf=class n{static get Default(){return Ve(yf&&Vn,"ChildrenNode.ts has not been loaded"),eS=eS||new n({".priority":yf},{".priority":Vn}),eS}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=$u(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Zo?t:null}hasIndex(e){return Bo(this.indexSet_,e.toString())}addIndex(e,t){Ve(e!==la,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(Qt.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=tw(r,e.getCompare()):a=yf;let u=e.toString(),l=Object.assign({},this.indexSet_);l[u]=e;let d=Object.assign({},this.indexes_);return d[u]=a,new n(d,l)}addToIndexes(e,t){let r=Kp(this.indexes_,(i,o)=>{let s=$u(this.indexSet_,o);if(Ve(s,"Missing index implementation for "+o),i===yf)if(s.isDefinedOn(e.node)){let a=[],u=t.getIterator(Qt.Wrap),l=u.getNext();for(;l;)l.name!==e.name&&a.push(l),l=u.getNext();return a.push(e),tw(a,s.getCompare())}else return yf;else{let a=t.get(e.name),u=i;return a&&(u=u.remove(new Qt(e.name,a))),u.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=Kp(this.indexes_,i=>{if(i===yf)return i;{let o=t.get(e.name);return o?i.remove(new Qt(e.name,o)):i}});return new n(r,this.indexSet_)}};var Cm,Ft=(()=>{class n{static get EMPTY_NODE(){return Cm||(Cm=new n(new Zo(gD),null,Cf.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&kF(this.priorityNode_),this.children_.isEmpty()&&Ve(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Cm}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Cm:r}}getChild(t){let r=$t(t);return r===null?this:this.getImmediateChild(r).getChild(kn(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(Ve(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Qt(t,r),o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Cm:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){let i=$t(t);if(i===null)return r;{Ve($t(t)!==".priority"||wl(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(kn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(Vn,(a,u)=>{r[a]=u.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){let a=[];for(let u in r)a[u]=r[u];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+PF(this.getPriority().val())+":"),this.forEachChild(Vn,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":dF(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new Qt(t,r));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Qt(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Qt(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,Qt.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,Qt.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Gm?-1:0}withIndex(t){if(t===la||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===la||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Vn),o=r.getIterator(Vn),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===la?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),bS=class extends Ft{constructor(){super(new Zo(gD),Ft.EMPTY_NODE,Cf.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ft.EMPTY_NODE}isEmpty(){return!1}},Gm=new bS;Object.defineProperties(Qt,{MIN:{value:new Qt(_l,Ft.EMPTY_NODE)},MAX:{value:new Qt(su,Gm)}});ew.__EMPTY_NODE=Ft.EMPTY_NODE;If.__childrenNodeConstructor=Ft;vQ(Gm);_Q(Gm);var bQ=!0;function Qn(n,e=null){if(n===null)return Ft.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),Ve(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new If(t,Qn(e))}if(!(n instanceof Array)&&bQ){let t=[],r=!1;if(Br(n,(s,a)=>{if(s.substring(0,1)!=="."){let u=Qn(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),t.push(new Qt(s,u)))}}),t.length===0)return Ft.EMPTY_NODE;let o=tw(t,mQ,s=>s.name,gD);if(r){let s=tw(t,Vn.getCompare());return new Ft(o,Qn(e),new Cf({".priority":s},{".priority":Vn}))}else return new Ft(o,Qn(e),Cf.Default)}else{let t=Ft.EMPTY_NODE;return Br(n,(r,i)=>{if(Bo(n,r)&&r.substring(0,1)!=="."){let o=Qn(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Qn(e))}}yQ(Qn);var Pm=class extends Ef{constructor(e){super(),this.indexPath_=e,Ve(!Wt(e)&&$t(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?ld(e.name,t.name):o}makePost(e,t){let r=Qn(e),i=Ft.EMPTY_NODE.updateChild(this.indexPath_,r);return new Qt(t,i)}maxPost(){let e=Ft.EMPTY_NODE.updateChild(this.indexPath_,Gm);return new Qt(su,e)}toString(){return Rm(this.indexPath_,0).join("/")}};var ES=class extends Ef{compare(e,t){let r=e.node.compareTo(t.node);return r===0?ld(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Qt.MIN}maxPost(){return Qt.MAX}makePost(e,t){let r=Qn(e);return new Qt(t,r)}toString(){return".value"}},mD=new ES;function FF(n){return{type:"value",snapshotNode:n}}function Sf(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function km(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Lm(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function EQ(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var Om=class{constructor(e){this.index_=e}updateChild(e,t,r,i,o,s){Ve(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(t)?s.trackChildChange(km(t,a)):Ve(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Sf(t,r)):s.trackChildChange(Lm(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Vn,(i,o)=>{t.hasChild(i)||r.trackChildChange(km(i,o))}),t.isLeafNode()||t.forEachChild(Vn,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Lm(i,o,s))}else r.trackChildChange(Sf(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ft.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var nw=class n{constructor(e){this.indexedFilter_=new Om(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,s){return this.matches(new Qt(t,r))||(r=Ft.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,s)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ft.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ft.EMPTY_NODE);let o=this;return t.forEachChild(Vn,(s,a)=>{o.matches(new Qt(s,a))||(i=i.updateImmediateChild(s,Ft.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var IS=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new nw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,s){return this.rangedFilter_.matches(new Qt(t,r))||(r=Ft.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,s):this.fullLimitUpdateChild_(e,t,r,o,s)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ft.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=Ft.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(Ft.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,Ft.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let s;if(this.reverse_){let f=this.index_.getCompare();s=(m,g)=>f(g,m)}else s=this.index_.getCompare();let a=e;Ve(a.numChildren()===this.limit_,"");let u=new Qt(t,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(u);if(a.hasChild(t)){let f=a.getImmediateChild(t),m=i.getChildAfterChild(this.index_,l,this.reverse_);for(;m!=null&&(m.name===t||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);let g=m==null?1:s(m,u);if(d&&!r.isEmpty()&&g>=0)return o?.trackChildChange(Lm(t,r,f)),a.updateImmediateChild(t,r);{o?.trackChildChange(km(t,f));let E=a.updateImmediateChild(t,Ft.EMPTY_NODE);return m!=null&&this.rangedFilter_.matches(m)?(o?.trackChildChange(Sf(m.name,m.node)),E.updateImmediateChild(m.name,m.node)):E}}else return r.isEmpty()?e:d&&s(l,u)>=0?(o!=null&&(o.trackChildChange(km(l.name,l.node)),o.trackChildChange(Sf(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(l.name,Ft.EMPTY_NODE)):e}};var Fm=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Vn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ve(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ve(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_l}hasEnd(){return this.endSet_}getIndexEndValue(){return Ve(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ve(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:su}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ve(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Vn}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function IQ(n){return n.loadsAllData()?new Om(n.getIndex()):n.hasLimit()?new IS(n):new nw(n)}function CQ(n,e){let t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}function SQ(n,e){let t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function CS(n,e,t){let r=n.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,t!=null?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function DQ(n,e,t){let r;return n.index_===la||t?r=CS(n,e,t):r=CS(n,e,su),r.startAfterSet_=!0,r}function SS(n,e,t){let r=n.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,t!==void 0?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function AQ(n,e,t){let r;return n.index_===la||t?r=SS(n,e,t):r=SS(n,e,_l),r.endBeforeSet_=!0,r}function bw(n,e){let t=n.copy();return t.index_=e,t}function GO(n){let e={};if(n.isDefault())return e;let t;if(n.index_===Vn?t="$priority":n.index_===mD?t="$value":n.index_===la?t="$key":(Ve(n.index_ instanceof Pm,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=wr(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=wr(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+wr(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=wr(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+wr(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function KO(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Vn&&(e.i=n.index_.toString()),e}var DS=class n extends Z_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(Ve(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Wm("p:rest:"),this.listens_={}}listen(e,t,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=n.getListenId_(e,r),a={};this.listens_[s]=a;let u=GO(e._queryParams);this.restRequest_(o+".json",u,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(o,f,!1,r),$u(this.listens_,s)===a){let m;l?l===401?m="permission_denied":m="rest_error:"+l:m="ok",i(m,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=GO(e._queryParams),r=e._path.toString(),i=new Vr;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Jx(t);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=Ey(a.responseText)}catch{li("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,u)}else a.status!==401&&a.status!==404&&li("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var AS=class{constructor(){this.rootNode_=Ft.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function rw(){return{value:null,children:new Map}}function Mf(n,e,t){if(Wt(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=$t(e);n.children.has(r)||n.children.set(r,rw());let i=n.children.get(r);e=kn(e),Mf(i,e,t)}}function TS(n,e){if(Wt(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{let t=n.value;return n.value=null,t.forEachChild(Vn,(r,i)=>{Mf(n,new hn(r),i)}),TS(n,e)}}else if(n.children.size>0){let t=$t(e);return e=kn(e),n.children.has(t)&&TS(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function xS(n,e,t){n.value!==null?t(e,n.value):TQ(n,(r,i)=>{let o=new hn(e.toString()+"/"+r);xS(i,o,t)})}function TQ(n,e){n.children.forEach((t,r)=>{e(r,t)})}var NS=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Br(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var QO=10*1e3,xQ=30*1e3,NQ=5*60*1e3,MS=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new NS(e);let r=QO+(xQ-QO)*Math.random();Dm(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Br(e,(i,o)=>{o>0&&Bo(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Dm(this.reportStats_.bind(this),Math.floor(Math.random()*2*NQ))}};var ua=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(ua||{});function vD(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function yD(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function _D(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var RS=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ua.ACK_USER_WRITE,this.source=vD()}operationForChild(e){if(Wt(this.path)){if(this.affectedTree.value!=null)return Ve(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new hn(e));return new n(dn(),t,this.revert)}}else return Ve($t(this.path)===e,"operationForChild called for unrelated child."),new n(kn(this.path),this.affectedTree,this.revert)}};var iw=class n{constructor(e,t){this.source=e,this.path=t,this.type=ua.LISTEN_COMPLETE}operationForChild(e){return Wt(this.path)?new n(this.source,dn()):new n(this.source,kn(this.path))}};var Df=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ua.OVERWRITE}operationForChild(e){return Wt(this.path)?new n(this.source,dn(),this.snap.getImmediateChild(e)):new n(this.source,kn(this.path),this.snap)}};var Vm=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ua.MERGE}operationForChild(e){if(Wt(this.path)){let t=this.children.subtree(new hn(e));return t.isEmpty()?null:t.value?new Df(this.source,dn(),t.value):new n(this.source,dn(),t)}else return Ve($t(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,kn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var da=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Wt(e))return this.isFullyInitialized()&&!this.filtered_;let t=$t(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var PS=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function MQ(n,e,t,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(EQ(s.childName,s.snapshotNode))}),Sm(n,i,"child_removed",e,r,t),Sm(n,i,"child_added",e,r,t),Sm(n,i,"child_moved",o,r,t),Sm(n,i,"child_changed",e,r,t),Sm(n,i,"value",e,r,t),i}function Sm(n,e,t,r,i,o){let s=r.filter(a=>a.type===t);s.sort((a,u)=>PQ(n,a,u)),s.forEach(a=>{let u=RQ(n,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(u,n.query_))})})}function RQ(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function PQ(n,e,t){if(e.childName==null||t.childName==null)throw fh("Should only compare child_ events.");let r=new Qt(e.childName,e.snapshotNode),i=new Qt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function Ew(n,e){return{eventCache:n,serverCache:e}}function Tm(n,e,t,r){return Ew(new da(e,t,r),n.serverCache)}function VF(n,e,t,r){return Ew(n.eventCache,new da(e,t,r))}function ow(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ud(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var tS,kQ=()=>(tS||(tS=new Zo(RK)),tS),Ai=class n{static fromObject(e){let t=new n(null);return Br(e,(r,i)=>{t=t.set(new hn(r),i)}),t}constructor(e,t=kQ()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:dn(),value:this.value};if(Wt(e))return null;{let r=$t(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(kn(e),t);return o!=null?{path:Wn(new hn(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Wt(e))return this;{let t=$t(e),r=this.children.get(t);return r!==null?r.subtree(kn(e)):new n(null)}}set(e,t){if(Wt(e))return new n(t,this.children);{let r=$t(e),o=(this.children.get(r)||new n(null)).set(kn(e),t),s=this.children.insert(r,o);return new n(this.value,s)}}remove(e){if(Wt(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=$t(e),r=this.children.get(t);if(r){let i=r.remove(kn(e)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this}}get(e){if(Wt(e))return this.value;{let t=$t(e),r=this.children.get(t);return r?r.get(kn(e)):null}}setTree(e,t){if(Wt(e))return t;{let r=$t(e),o=(this.children.get(r)||new n(null)).setTree(kn(e),t),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new n(this.value,s)}}fold(e){return this.fold_(dn(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Wn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,dn(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Wt(e))return null;{let o=$t(e),s=this.children.get(o);return s?s.findOnPath_(kn(e),Wn(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,dn(),t)}foreachOnPath_(e,t,r){if(Wt(e))return this;{this.value&&r(t,this.value);let i=$t(e),o=this.children.get(i);return o?o.foreachOnPath_(kn(e),Wn(t,i),r):new n(null)}}foreach(e){this.foreach_(dn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Wn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Ns=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Ai(null))}};function xm(n,e,t){if(Wt(e))return new Ns(new Ai(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Di(i,e);return o=o.updateChild(s,t),new Ns(n.writeTree_.set(i,o))}else{let i=new Ai(t),o=n.writeTree_.setTree(e,i);return new Ns(o)}}}function kS(n,e,t){let r=n;return Br(t,(i,o)=>{r=xm(r,Wn(e,i),o)}),r}function YO(n,e){if(Wt(e))return Ns.empty();{let t=n.writeTree_.setTree(e,new Ai(null));return new Ns(t)}}function LS(n,e){return cd(n,e)!=null}function cd(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Di(t.path,e)):null}function ZO(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Vn,(r,i)=>{e.push(new Qt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Qt(r,i.value))}),e}function vl(n,e){if(Wt(e))return n;{let t=cd(n,e);return t!=null?new Ns(new Ai(t)):new Ns(n.writeTree_.subtree(e))}}function OS(n){return n.writeTree_.isEmpty()}function Af(n,e){return jF(dn(),n.writeTree_,e)}function jF(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(Ve(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=jF(Wn(n,i),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Wn(n,".priority"),r)),t}}function Iw(n,e){return HF(e,n)}function LQ(n,e,t,r,i){Ve(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=xm(n.visibleWrites,e,t)),n.lastWriteId=r}function OQ(n,e,t,r){Ve(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=kS(n.visibleWrites,e,t),n.lastWriteId=r}function FQ(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function VQ(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);Ve(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){let a=n.allWrites[s];a.visible&&(s>=t&&jQ(a,r.path)?i=!1:Yo(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return BQ(n),!0;if(r.snap)n.visibleWrites=YO(n.visibleWrites,r.path);else{let a=r.children;Br(a,u=>{n.visibleWrites=YO(n.visibleWrites,Wn(r.path,u))})}return!0}else return!1}function jQ(n,e){if(n.snap)return Yo(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Yo(Wn(n.path,t),e))return!0;return!1}function BQ(n){n.visibleWrites=BF(n.allWrites,UQ,dn()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function UQ(n){return n.visible}function BF(n,e,t){let r=Ns.empty();for(let i=0;i<n.length;++i){let o=n[i];if(e(o)){let s=o.path,a;if(o.snap)Yo(t,s)?(a=Di(t,s),r=xm(r,a,o.snap)):Yo(s,t)&&(a=Di(s,t),r=xm(r,dn(),o.snap.getChild(a)));else if(o.children){if(Yo(t,s))a=Di(t,s),r=kS(r,a,o.children);else if(Yo(s,t))if(a=Di(s,t),Wt(a))r=kS(r,dn(),o.children);else{let u=$u(o.children,$t(a));if(u){let l=u.getChild(kn(a));r=xm(r,dn(),l)}}}else throw fh("WriteRecord should have .snap or .children")}}return r}function UF(n,e,t,r,i){if(!r&&!i){let o=cd(n.visibleWrites,e);if(o!=null)return o;{let s=vl(n.visibleWrites,e);if(OS(s))return t;if(t==null&&!LS(s,dn()))return null;{let a=t||Ft.EMPTY_NODE;return Af(s,a)}}}else{let o=vl(n.visibleWrites,e);if(!i&&OS(o))return t;if(!i&&t==null&&!LS(o,dn()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Yo(l.path,e)||Yo(e,l.path))},a=BF(n.allWrites,s,e),u=t||Ft.EMPTY_NODE;return Af(a,u)}}}function qQ(n,e,t){let r=Ft.EMPTY_NODE,i=cd(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Vn,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){let o=vl(n.visibleWrites,e);return t.forEachChild(Vn,(s,a)=>{let u=Af(vl(o,new hn(s)),a);r=r.updateImmediateChild(s,u)}),ZO(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=vl(n.visibleWrites,e);return ZO(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function HQ(n,e,t,r,i){Ve(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Wn(e,t);if(LS(n.visibleWrites,o))return null;{let s=vl(n.visibleWrites,o);return OS(s)?i.getChild(t):Af(s,i.getChild(t))}}function zQ(n,e,t,r){let i=Wn(e,t),o=cd(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let s=vl(n.visibleWrites,i);return Af(s,r.getNode().getImmediateChild(t))}else return null}function $Q(n,e){return cd(n.visibleWrites,e)}function WQ(n,e,t,r,i,o,s){let a,u=vl(n.visibleWrites,e),l=cd(u,dn());if(l!=null)a=l;else if(t!=null)a=Af(u,t);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=s.getCompare(),m=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),g=m.getNext();for(;g&&d.length<i;)f(g,r)!==0&&d.push(g),g=m.getNext();return d}else return[]}function GQ(){return{visibleWrites:Ns.empty(),allWrites:[],lastWriteId:-1}}function sw(n,e,t,r){return UF(n.writeTree,n.treePath,e,t,r)}function wD(n,e){return qQ(n.writeTree,n.treePath,e)}function JO(n,e,t,r){return HQ(n.writeTree,n.treePath,e,t,r)}function aw(n,e){return $Q(n.writeTree,Wn(n.treePath,e))}function KQ(n,e,t,r,i,o){return WQ(n.writeTree,n.treePath,e,t,r,i,o)}function bD(n,e,t){return zQ(n.writeTree,n.treePath,e,t)}function qF(n,e){return HF(Wn(n.treePath,e),n.writeTree)}function HF(n,e){return{treePath:n,writeTree:e}}var FS=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;Ve(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),Ve(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,Lm(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,km(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,Sf(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,Lm(r,e.snapshotNode,i.oldSnap));else throw fh("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var VS=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},zF=new VS,jm=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new da(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bD(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ud(this.viewCache_),o=KQ(this.writes_,i,t,1,r,e);return o.length===0?null:o[0]}};function QQ(n){return{filter:n}}function YQ(n,e){Ve(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Ve(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function ZQ(n,e,t,r,i){let o=new FS,s,a;if(t.type===ua.OVERWRITE){let l=t;l.source.fromUser?s=jS(n,e,l.path,l.snap,r,i,o):(Ve(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Wt(l.path),s=uw(n,e,l.path,l.snap,r,i,a,o))}else if(t.type===ua.MERGE){let l=t;l.source.fromUser?s=XQ(n,e,l.path,l.children,r,i,o):(Ve(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=BS(n,e,l.path,l.children,r,i,a,o))}else if(t.type===ua.ACK_USER_WRITE){let l=t;l.revert?s=nY(n,e,l.path,r,i,o):s=eY(n,e,l.path,l.affectedTree,r,i,o)}else if(t.type===ua.LISTEN_COMPLETE)s=tY(n,e,t.path,r,o);else throw fh("Unknown operation type: "+t.type);let u=o.getChanges();return JQ(e,s,u),{viewCache:s,changes:u}}function JQ(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=ow(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(FF(ow(e)))}}function $F(n,e,t,r,i,o){let s=e.eventCache;if(aw(r,t)!=null)return e;{let a,u;if(Wt(t))if(Ve(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=ud(e),d=l instanceof Ft?l:Ft.EMPTY_NODE,f=wD(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{let l=sw(r,ud(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=$t(t);if(l===".priority"){Ve(wl(t)===1,"Can't have a priority with additional path components");let d=s.getNode();u=e.serverCache.getNode();let f=JO(r,t,d,u);f!=null?a=n.filter.updatePriority(d,f):a=s.getNode()}else{let d=kn(t),f;if(s.isCompleteForChild(l)){u=e.serverCache.getNode();let m=JO(r,t,s.getNode(),u);m!=null?f=s.getNode().getImmediateChild(l).updateChild(d,m):f=s.getNode().getImmediateChild(l)}else f=bD(r,l,e.serverCache);f!=null?a=n.filter.updateChild(s.getNode(),l,f,d,i,o):a=s.getNode()}}return Tm(e,a,s.isFullyInitialized()||Wt(t),n.filter.filtersNodes())}}function uw(n,e,t,r,i,o,s,a){let u=e.serverCache,l,d=s?n.filter:n.filter.getIndexedFilter();if(Wt(t))l=d.updateFullNode(u.getNode(),r,null);else if(d.filtersNodes()&&!u.isFiltered()){let g=u.getNode().updateChild(t,r);l=d.updateFullNode(u.getNode(),g,null)}else{let g=$t(t);if(!u.isCompleteForPath(t)&&wl(t)>1)return e;let b=kn(t),D=u.getNode().getImmediateChild(g).updateChild(b,r);g===".priority"?l=d.updatePriority(u.getNode(),D):l=d.updateChild(u.getNode(),g,D,b,zF,null)}let f=VF(e,l,u.isFullyInitialized()||Wt(t),d.filtersNodes()),m=new jm(i,f,o);return $F(n,f,t,i,m,a)}function jS(n,e,t,r,i,o,s){let a=e.eventCache,u,l,d=new jm(i,e,o);if(Wt(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,s),u=Tm(e,l,!0,n.filter.filtersNodes());else{let f=$t(t);if(f===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),u=Tm(e,l,a.isFullyInitialized(),a.isFiltered());else{let m=kn(t),g=a.getNode().getImmediateChild(f),b;if(Wt(m))b=r;else{let E=d.getCompleteChild(f);E!=null?hD(m)===".priority"&&E.getChild(MF(m)).isEmpty()?b=E:b=E.updateChild(m,r):b=Ft.EMPTY_NODE}if(g.equals(b))u=e;else{let E=n.filter.updateChild(a.getNode(),f,b,m,d,s);u=Tm(e,E,a.isFullyInitialized(),n.filter.filtersNodes())}}}return u}function XO(n,e){return n.eventCache.isCompleteForChild(e)}function XQ(n,e,t,r,i,o,s){let a=e;return r.foreach((u,l)=>{let d=Wn(t,u);XO(e,$t(d))&&(a=jS(n,a,d,l,i,o,s))}),r.foreach((u,l)=>{let d=Wn(t,u);XO(e,$t(d))||(a=jS(n,a,d,l,i,o,s))}),a}function eF(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function BS(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,l;Wt(t)?l=r:l=new Ai(null).setTree(t,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,m)=>{if(d.hasChild(f)){let g=e.serverCache.getNode().getImmediateChild(f),b=eF(n,g,m);u=uw(n,u,new hn(f),b,i,o,s,a)}}),l.children.inorderTraversal((f,m)=>{let g=!e.serverCache.isCompleteForChild(f)&&m.value===null;if(!d.hasChild(f)&&!g){let b=e.serverCache.getNode().getImmediateChild(f),E=eF(n,b,m);u=uw(n,u,new hn(f),E,i,o,s,a)}}),u}function eY(n,e,t,r,i,o,s){if(aw(i,t)!=null)return e;let a=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(Wt(t)&&u.isFullyInitialized()||u.isCompleteForPath(t))return uw(n,e,t,u.getNode().getChild(t),i,o,a,s);if(Wt(t)){let l=new Ai(null);return u.getNode().forEachChild(la,(d,f)=>{l=l.set(new hn(d),f)}),BS(n,e,t,l,i,o,a,s)}else return e}else{let l=new Ai(null);return r.foreach((d,f)=>{let m=Wn(t,d);u.isCompleteForPath(m)&&(l=l.set(d,u.getNode().getChild(m)))}),BS(n,e,t,l,i,o,a,s)}}function tY(n,e,t,r,i){let o=e.serverCache,s=VF(e,o.getNode(),o.isFullyInitialized()||Wt(t),o.isFiltered());return $F(n,s,t,r,zF,i)}function nY(n,e,t,r,i,o){let s;if(aw(r,t)!=null)return e;{let a=new jm(r,e,i),u=e.eventCache.getNode(),l;if(Wt(t)||$t(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=sw(r,ud(e));else{let f=e.serverCache.getNode();Ve(f instanceof Ft,"serverChildren would be complete if leaf node"),d=wD(r,f)}d=d,l=n.filter.updateFullNode(u,d,o)}else{let d=$t(t),f=bD(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=u.getImmediateChild(d)),f!=null?l=n.filter.updateChild(u,d,f,kn(t),a,o):e.eventCache.getNode().hasChild(d)?l=n.filter.updateChild(u,d,Ft.EMPTY_NODE,kn(t),a,o):l=u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=sw(r,ud(e)),s.isLeafNode()&&(l=n.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||aw(r,dn())!=null,Tm(e,l,s,n.filter.filtersNodes())}}var US=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Om(r.getIndex()),o=IQ(r);this.processor_=QQ(o);let s=t.serverCache,a=t.eventCache,u=i.updateFullNode(Ft.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(Ft.EMPTY_NODE,a.getNode(),null),d=new da(u,s.isFullyInitialized(),i.filtersNodes()),f=new da(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ew(f,d),this.eventGenerator_=new PS(this.query_)}get query(){return this.query_}};function rY(n){return n.viewCache_.serverCache.getNode()}function iY(n){return ow(n.viewCache_)}function oY(n,e){let t=ud(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Wt(e)&&!t.getImmediateChild($t(e)).isEmpty())?t.getChild(e):null}function tF(n){return n.eventRegistrations_.length===0}function sY(n,e){n.eventRegistrations_.push(e)}function nF(n,e,t){let r=[];if(t){Ve(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(t,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){let s=n.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function rF(n,e,t,r){e.type===ua.MERGE&&e.source.queryId!==null&&(Ve(ud(n.viewCache_),"We should always have a full cache before handling merges"),Ve(ow(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,o=ZQ(n.processor_,i,e,t,r);return YQ(n.processor_,o.viewCache),Ve(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,WF(n,o.changes,o.viewCache.eventCache.getNode(),null)}function aY(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Vn,(o,s)=>{r.push(Sf(o,s))}),t.isFullyInitialized()&&r.push(FF(t.getNode())),WF(n,r,t.getNode(),e)}function WF(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return MQ(n.eventGenerator_,e,t,i)}var lw,cw=class{constructor(){this.views=new Map}};function uY(n){Ve(!lw,"__referenceConstructor has already been defined"),lw=n}function lY(){return Ve(lw,"Reference.ts has not been loaded"),lw}function cY(n){return n.views.size===0}function ED(n,e,t,r){let i=e.source.queryId;if(i!==null){let o=n.views.get(i);return Ve(o!=null,"SyncTree gave us an op for an invalid query."),rF(o,e,t,r)}else{let o=[];for(let s of n.views.values())o=o.concat(rF(s,e,t,r));return o}}function GF(n,e,t,r,i){let o=e._queryIdentifier,s=n.views.get(o);if(!s){let a=sw(t,i?r:null),u=!1;a?u=!0:r instanceof Ft?(a=wD(t,r),u=!1):(a=Ft.EMPTY_NODE,u=!1);let l=Ew(new da(a,u,!1),new da(r,i,!1));return new US(e,l)}return s}function dY(n,e,t,r,i,o){let s=GF(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,s),sY(s,t),aY(s,t)}function hY(n,e,t,r){let i=e._queryIdentifier,o=[],s=[],a=bl(n);if(i==="default")for(let[u,l]of n.views.entries())s=s.concat(nF(l,t,r)),tF(l)&&(n.views.delete(u),l.query._queryParams.loadsAllData()||o.push(l.query));else{let u=n.views.get(i);u&&(s=s.concat(nF(u,t,r)),tF(u)&&(n.views.delete(i),u.query._queryParams.loadsAllData()||o.push(u.query)))}return a&&!bl(n)&&o.push(new(lY())(e._repo,e._path)),{removed:o,events:s}}function KF(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function yl(n,e){let t=null;for(let r of n.views.values())t=t||oY(r,e);return t}function QF(n,e){if(e._queryParams.loadsAllData())return Cw(n);{let r=e._queryIdentifier;return n.views.get(r)}}function YF(n,e){return QF(n,e)!=null}function bl(n){return Cw(n)!=null}function Cw(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var dw;function fY(n){Ve(!dw,"__referenceConstructor has already been defined"),dw=n}function pY(){return Ve(dw,"Reference.ts has not been loaded"),dw}var gY=1,hw=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ai(null),this.pendingWriteTree_=GQ(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function ID(n,e,t,r,i){return LQ(n.pendingWriteTree_,e,t,r,i),i?Rf(n,new Df(vD(),e,t)):[]}function mY(n,e,t,r){OQ(n.pendingWriteTree_,e,t,r);let i=Ai.fromObject(t);return Rf(n,new Vm(vD(),e,i))}function ml(n,e,t=!1){let r=FQ(n.pendingWriteTree_,e);if(VQ(n.pendingWriteTree_,e)){let o=new Ai(null);return r.snap!=null?o=o.set(dn(),!0):Br(r.children,s=>{o=o.set(new hn(s),!0)}),Rf(n,new RS(r.path,o,t))}else return[]}function Km(n,e,t){return Rf(n,new Df(yD(),e,t))}function vY(n,e,t){let r=Ai.fromObject(t);return Rf(n,new Vm(yD(),e,r))}function yY(n,e){return Rf(n,new iw(yD(),e))}function _Y(n,e,t){let r=CD(n,t);if(r){let i=SD(r),o=i.path,s=i.queryId,a=Di(o,e),u=new iw(_D(s),a);return DD(n,o,u)}else return[]}function fw(n,e,t,r,i=!1){let o=e._path,s=n.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||YF(s,e))){let u=hY(s,e,t,r);cY(s)&&(n.syncPointTree_=n.syncPointTree_.remove(o));let l=u.removed;if(a=u.events,!i){let d=l.findIndex(m=>m._queryParams.loadsAllData())!==-1,f=n.syncPointTree_.findOnPath(o,(m,g)=>bl(g));if(d&&!f){let m=n.syncPointTree_.subtree(o);if(!m.isEmpty()){let g=EY(m);for(let b=0;b<g.length;++b){let E=g[b],D=E.query,w=e4(n,E);n.listenProvider_.startListening(Nm(D),Bm(n,D),w.hashFn,w.onComplete)}}}!f&&l.length>0&&!r&&(d?n.listenProvider_.stopListening(Nm(e),null):l.forEach(m=>{let g=n.queryToTagMap.get(Dw(m));n.listenProvider_.stopListening(Nm(m),g)}))}IY(n,l)}return a}function ZF(n,e,t,r){let i=CD(n,r);if(i!=null){let o=SD(i),s=o.path,a=o.queryId,u=Di(s,e),l=new Df(_D(a),u,t);return DD(n,s,l)}else return[]}function wY(n,e,t,r){let i=CD(n,r);if(i){let o=SD(i),s=o.path,a=o.queryId,u=Di(s,e),l=Ai.fromObject(t),d=new Vm(_D(a),u,l);return DD(n,s,d)}else return[]}function qS(n,e,t,r=!1){let i=e._path,o=null,s=!1;n.syncPointTree_.foreachOnPath(i,(m,g)=>{let b=Di(m,i);o=o||yl(g,b),s=s||bl(g)});let a=n.syncPointTree_.get(i);a?(s=s||bl(a),o=o||yl(a,dn())):(a=new cw,n.syncPointTree_=n.syncPointTree_.set(i,a));let u;o!=null?u=!0:(u=!1,o=Ft.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((g,b)=>{let E=yl(b,dn());E&&(o=o.updateImmediateChild(g,E))}));let l=YF(a,e);if(!l&&!e._queryParams.loadsAllData()){let m=Dw(e);Ve(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");let g=CY();n.queryToTagMap.set(m,g),n.tagToQueryMap.set(g,m)}let d=Iw(n.pendingWriteTree_,i),f=dY(a,e,t,d,o,u);if(!l&&!s&&!r){let m=QF(a,e);f=f.concat(SY(n,e,m))}return f}function Sw(n,e,t){let i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{let u=Di(s,e),l=yl(a,u);if(l)return l});return UF(i,e,o,t,!0)}function bY(n,e){let t=e._path,r=null;n.syncPointTree_.foreachOnPath(t,(l,d)=>{let f=Di(l,t);r=r||yl(d,f)});let i=n.syncPointTree_.get(t);i?r=r||yl(i,dn()):(i=new cw,n.syncPointTree_=n.syncPointTree_.set(t,i));let o=r!=null,s=o?new da(r,!0,!1):null,a=Iw(n.pendingWriteTree_,e._path),u=GF(i,e,a,o?s.getNode():Ft.EMPTY_NODE,o);return iY(u)}function Rf(n,e){return JF(e,n.syncPointTree_,null,Iw(n.pendingWriteTree_,dn()))}function JF(n,e,t,r){if(Wt(n.path))return XF(n,e,t,r);{let i=e.get(dn());t==null&&i!=null&&(t=yl(i,dn()));let o=[],s=$t(n.path),a=n.operationForChild(s),u=e.children.get(s);if(u&&a){let l=t?t.getImmediateChild(s):null,d=qF(r,s);o=o.concat(JF(a,u,l,d))}return i&&(o=o.concat(ED(i,n,r,t))),o}}function XF(n,e,t,r){let i=e.get(dn());t==null&&i!=null&&(t=yl(i,dn()));let o=[];return e.children.inorderTraversal((s,a)=>{let u=t?t.getImmediateChild(s):null,l=qF(r,s),d=n.operationForChild(s);d&&(o=o.concat(XF(d,a,u,l)))}),i&&(o=o.concat(ED(i,n,r,t))),o}function e4(n,e){let t=e.query,r=Bm(n,t);return{hashFn:()=>(rY(e)||Ft.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?_Y(n,t._path,r):yY(n,t._path);{let o=LK(i,t);return fw(n,t,null,o)}}}}function Bm(n,e){let t=Dw(e);return n.queryToTagMap.get(t)}function Dw(n){return n._path.toString()+"$"+n._queryIdentifier}function CD(n,e){return n.tagToQueryMap.get(e)}function SD(n){let e=n.indexOf("$");return Ve(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new hn(n.substr(0,e))}}function DD(n,e,t){let r=n.syncPointTree_.get(e);Ve(r,"Missing sync point for query tag that we're tracking");let i=Iw(n.pendingWriteTree_,e);return ED(r,t,i,null)}function EY(n){return n.fold((e,t,r)=>{if(t&&bl(t))return[Cw(t)];{let i=[];return t&&(i=KF(t)),Br(r,(o,s)=>{i=i.concat(s)}),i}})}function Nm(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(pY())(n._repo,n._path):n}function IY(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=Dw(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}function CY(){return gY++}function SY(n,e,t){let r=e._path,i=Bm(n,e),o=e4(n,t),s=n.listenProvider_.startListening(Nm(e),i,o.hashFn,o.onComplete),a=n.syncPointTree_.subtree(r);if(i)Ve(!bl(a.value),"If we're adding a query, it shouldn't be shadowed");else{let u=a.fold((l,d,f)=>{if(!Wt(l)&&d&&bl(d))return[Cw(d).query];{let m=[];return d&&(m=m.concat(KF(d).map(g=>g.query))),Br(f,(g,b)=>{m=m.concat(b)}),m}});for(let l=0;l<u.length;++l){let d=u[l];n.listenProvider_.stopListening(Nm(d),Bm(n,d))}}return s}var HS=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},zS=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Wn(this.path_,e);return new n(this.syncTree_,t)}node(){return Sw(this.syncTree_,this.path_)}},DY=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},iF=function(n,e,t){if(!n||typeof n!="object")return n;if(Ve(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return AY(n[".sv"],e,t);if(typeof n[".sv"]=="object")return TY(n[".sv"],e);Ve(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},AY=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:Ve(!1,"Unexpected server value: "+n)}},TY=function(n,e,t){n.hasOwnProperty("increment")||Ve(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&Ve(!1,"Unexpected increment value: "+r);let i=e.node();if(Ve(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},t4=function(n,e,t,r){return TD(e,new zS(t,n),r)},AD=function(n,e,t){return TD(n,new HS(e),t)};function TD(n,e,t){let r=n.getPriority().val(),i=iF(r,e.getImmediateChild(".priority"),t),o;if(n.isLeafNode()){let s=n,a=iF(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new If(a,Qn(i)):n}else{let s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new If(i))),s.forEachChild(Vn,(a,u)=>{let l=TD(u,e.getImmediateChild(a),t);l!==u&&(o=o.updateImmediateChild(a,l))}),o}}var Um=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function Aw(n,e){let t=e instanceof hn?e:new hn(e),r=n,i=$t(t);for(;i!==null;){let o=$u(r.node.children,i)||{children:{},childCount:0};r=new Um(i,r,o),t=kn(t),i=$t(t)}return r}function dd(n){return n.node.value}function xD(n,e){n.node.value=e,$S(n)}function n4(n){return n.node.childCount>0}function xY(n){return dd(n)===void 0&&!n4(n)}function Tw(n,e){Br(n.node.children,(t,r)=>{e(new Um(t,n,r))})}function r4(n,e,t,r){t&&!r&&e(n),Tw(n,i=>{r4(i,e,!0,r)}),t&&r&&e(n)}function NY(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Qm(n){return new hn(n.parent===null?n.name:Qm(n.parent)+"/"+n.name)}function $S(n){n.parent!==null&&MY(n.parent,n.name,n)}function MY(n,e,t){let r=xY(t),i=Bo(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,$S(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,$S(n))}var RY=/[\[\].#$\/\u0000-\u001F\u007F]/,PY=/[\[\].#$\u0000-\u001F\u007F]/,nS=10*1024*1024,xw=function(n){return typeof n=="string"&&n.length!==0&&!RY.test(n)},i4=function(n){return typeof n=="string"&&n.length!==0&&!PY.test(n)},kY=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),i4(n)},qm=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!ww(n)||n&&typeof n=="object"&&Bo(n,".sv")},ha=function(n,e,t,r){r&&e===void 0||Ym(qi(n,"value"),e,t)},Ym=function(n,e,t){let r=t instanceof hn?new gS(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+od(r));if(typeof e=="function")throw new Error(n+"contains a function "+od(r)+" with contents = "+e.toString());if(ww(e))throw new Error(n+"contains "+e.toString()+" "+od(r));if(typeof e=="string"&&e.length>nS/3&&Qp(e)>nS)throw new Error(n+"contains a string greater than "+nS+" utf8 bytes "+od(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Br(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!xw(s)))throw new Error(n+" contains an invalid key ("+s+") "+od(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cQ(r,s),Ym(n,a,r),dQ(r)}),i&&o)throw new Error(n+' contains ".value" child '+od(r)+" in addition to actual children.")}},LY=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];let o=Rm(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!xw(o[s]))throw new Error(n+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(lQ);let i=null;for(t=0;t<e.length;t++){if(r=e[t],i!==null&&Yo(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},o4=function(n,e,t,r){if(r&&e===void 0)return;let i=qi(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let o=[];Br(e,(s,a)=>{let u=new hn(s);if(Ym(i,a,Wn(t,u)),hD(u)===".priority"&&!qm(a))throw new Error(i+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(u)}),LY(i,o)},ND=function(n,e,t){if(!(t&&e===void 0)){if(ww(e))throw new Error(qi(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qm(e))throw new Error(qi(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Zm=function(n,e,t,r){if(!(r&&t===void 0)&&!xw(t))throw new Error(qi(n,e)+'was an invalid key = "'+t+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Pf=function(n,e,t,r){if(!(r&&t===void 0)&&!i4(t))throw new Error(qi(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},OY=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Pf(n,e,t,r)},_o=function(n,e){if($t(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},s4=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!xw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!kY(t))throw new Error(qi(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var WS=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Nw(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();t!==null&&!fD(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function a4(n,e,t){Nw(n,t),u4(n,r=>fD(r,e))}function wo(n,e,t){Nw(n,t),u4(n,r=>Yo(r,e)||Yo(e,r))}function u4(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let o=i.path;e(o)?(FY(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function FY(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();ad&&jr("event: "+t.toString()),Nf(r)}}}var l4="repo_interrupt",VY=25,GS=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new WS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rw(),this.transactionQueueTree_=new Um,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function jY(n,e,t){if(n.stats_=dD(n.repoInfo_),n.forceRestClient_||jK())n.server_=new DS(n.repoInfo_,(r,i,o,s)=>{oF(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>sF(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wr(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new pD(n.repoInfo_,e,(r,i,o,s)=>{oF(n,r,i,o,s)},r=>{sF(n,r)},r=>{BY(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=UK(n.repoInfo_,()=>new MS(n.stats_,n.server_)),n.infoData_=new AS,n.infoSyncTree_=new hw({startListening:(r,i,o,s)=>{let a=[],u=n.infoData_.getNode(r._path);return u.isEmpty()||(a=Km(n.infoSyncTree_,r._path,u),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),MD(n,"connected",!1),n.serverSyncTree_=new hw({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,u)=>{let l=s(a,u);wo(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function c4(n){let t=n.infoData_.getNode(new hn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Jm(n){return DY({timestamp:c4(n)})}function oF(n,e,t,r,i){n.dataUpdateCount++;let o=new hn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){let u=Kp(t,l=>Qn(l));s=wY(n.serverSyncTree_,o,u,i)}else{let u=Qn(t);s=ZF(n.serverSyncTree_,o,u,i)}else if(r){let u=Kp(t,l=>Qn(l));s=vY(n.serverSyncTree_,o,u)}else{let u=Qn(t);s=Km(n.serverSyncTree_,o,u)}let a=o;s.length>0&&(a=Tf(n,o)),wo(n.eventQueue_,a,s)}function sF(n,e){MD(n,"connected",e),e===!1&&HY(n)}function BY(n,e){Br(e,(t,r)=>{MD(n,t,r)})}function MD(n,e,t){let r=new hn("/.info/"+e),i=Qn(t);n.infoData_.updateSnapshot(r,i);let o=Km(n.infoSyncTree_,r,i);wo(n.eventQueue_,r,o)}function Mw(n){return n.nextWriteId_++}function UY(n,e,t){let r=bY(n.serverSyncTree_,e);return r!=null?Promise.resolve(r):n.server_.get(e).then(i=>{let o=Qn(i).withIndex(e._queryParams.getIndex());qS(n.serverSyncTree_,e,t,!0);let s;if(e._queryParams.loadsAllData())s=Km(n.serverSyncTree_,e._path,o);else{let a=Bm(n.serverSyncTree_,e);s=ZF(n.serverSyncTree_,e._path,o,a)}return wo(n.eventQueue_,e._path,s),fw(n.serverSyncTree_,e,t,null,!0),o},i=>(kf(n,"get for query "+wr(e)+" failed: "+i),Promise.reject(new Error(i))))}function RD(n,e,t,r,i){kf(n,"set",{path:e.toString(),value:t,priority:r});let o=Jm(n),s=Qn(t,r),a=Sw(n.serverSyncTree_,e),u=AD(s,a,o),l=Mw(n),d=ID(n.serverSyncTree_,e,u,l,!0);Nw(n.eventQueue_,d),n.server_.put(e.toString(),s.val(!0),(m,g)=>{let b=m==="ok";b||li("set at "+e+" failed: "+m);let E=ml(n.serverSyncTree_,l,!b);wo(n.eventQueue_,e,E),El(n,i,m,g)});let f=kD(n,e);Tf(n,f),wo(n.eventQueue_,f,[])}function qY(n,e,t,r){kf(n,"update",{path:e.toString(),value:t});let i=!0,o=Jm(n),s={};if(Br(t,(a,u)=>{i=!1,s[a]=t4(Wn(e,a),Qn(u),n.serverSyncTree_,o)}),i)jr("update() called with empty data.  Don't do anything."),El(n,r,"ok",void 0);else{let a=Mw(n),u=mY(n.serverSyncTree_,e,s,a);Nw(n.eventQueue_,u),n.server_.merge(e.toString(),t,(l,d)=>{let f=l==="ok";f||li("update at "+e+" failed: "+l);let m=ml(n.serverSyncTree_,a,!f),g=m.length>0?Tf(n,e):e;wo(n.eventQueue_,g,m),El(n,r,l,d)}),Br(t,l=>{let d=kD(n,Wn(e,l));Tf(n,d)}),wo(n.eventQueue_,e,[])}}function HY(n){kf(n,"onDisconnectEvents");let e=Jm(n),t=rw();xS(n.onDisconnect_,dn(),(i,o)=>{let s=t4(i,o,n.serverSyncTree_,e);Mf(t,i,s)});let r=[];xS(t,dn(),(i,o)=>{r=r.concat(Km(n.serverSyncTree_,i,o));let s=kD(n,i);Tf(n,s)}),n.onDisconnect_=rw(),wo(n.eventQueue_,dn(),r)}function zY(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&TS(n.onDisconnect_,e),El(n,t,r,i)})}function aF(n,e,t,r){let i=Qn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,s)=>{o==="ok"&&Mf(n.onDisconnect_,e,i),El(n,r,o,s)})}function $Y(n,e,t,r,i){let o=Qn(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{s==="ok"&&Mf(n.onDisconnect_,e,o),El(n,i,s,a)})}function WY(n,e,t,r){if(Iy(t)){jr("onDisconnect().update() called with empty data.  Don't do anything."),El(n,r,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{i==="ok"&&Br(t,(s,a)=>{let u=Qn(a);Mf(n.onDisconnect_,Wn(e,s),u)}),El(n,r,i,o)})}function GY(n,e,t){let r;$t(e._path)===".info"?r=qS(n.infoSyncTree_,e,t):r=qS(n.serverSyncTree_,e,t),a4(n.eventQueue_,e._path,r)}function KS(n,e,t){let r;$t(e._path)===".info"?r=fw(n.infoSyncTree_,e,t):r=fw(n.serverSyncTree_,e,t),a4(n.eventQueue_,e._path,r)}function d4(n){n.persistentConnection_&&n.persistentConnection_.interrupt(l4)}function KY(n){n.persistentConnection_&&n.persistentConnection_.resume(l4)}function kf(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),jr(t,...e)}function El(n,e,t,r){e&&Nf(()=>{if(t==="ok")e(null);else{let i=(t||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function QY(n,e,t,r,i,o){kf(n,"transaction on "+e);let s={path:e,update:t,onComplete:r,status:null,order:cF(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=PD(n,e,void 0);s.currentInputSnapshot=a;let u=s.update(a.val());if(u===void 0)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{Ym("transaction failed: Data returned ",u,s.path),s.status=0;let l=Aw(n.transactionQueueTree_,e),d=dd(l)||[];d.push(s),xD(l,d);let f;typeof u=="object"&&u!==null&&Bo(u,".priority")?(f=$u(u,".priority"),Ve(qm(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(Sw(n.serverSyncTree_,e)||Ft.EMPTY_NODE).getPriority().val();let m=Jm(n),g=Qn(u,f),b=AD(g,a,m);s.currentOutputSnapshotRaw=g,s.currentOutputSnapshotResolved=b,s.currentWriteId=Mw(n);let E=ID(n.serverSyncTree_,e,b,s.currentWriteId,s.applyLocally);wo(n.eventQueue_,e,E),Rw(n,n.transactionQueueTree_)}}function PD(n,e,t){return Sw(n.serverSyncTree_,e,t)||Ft.EMPTY_NODE}function Rw(n,e=n.transactionQueueTree_){if(e||Pw(n,e),dd(e)){let t=f4(n,e);Ve(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&YY(n,Qm(e),t)}else n4(e)&&Tw(e,t=>{Rw(n,t)})}function YY(n,e,t){let r=t.map(l=>l.currentWriteId),i=PD(n,e,r),o=i,s=i.hash();for(let l=0;l<t.length;l++){let d=t[l];Ve(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=Di(e,d.path);o=o.updateChild(f,d.currentOutputSnapshotRaw)}let a=o.val(!0),u=e;n.server_.put(u.toString(),a,l=>{kf(n,"transaction put response",{path:u.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let m=0;m<t.length;m++)t[m].status=2,d=d.concat(ml(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&f.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();Pw(n,Aw(n.transactionQueueTree_,e)),Rw(n,n.transactionQueueTree_),wo(n.eventQueue_,e,d);for(let m=0;m<f.length;m++)Nf(f[m])}else{if(l==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{li("transaction at "+u.toString()+" failed: "+l);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=l}Tf(n,e)}},s)}function Tf(n,e){let t=h4(n,e),r=Qm(t),i=f4(n,t);return ZY(n,i,r),r}function ZY(n,e,t){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let u=e[a],l=Di(t,u.path),d=!1,f;if(Ve(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)d=!0,f=u.abortReason,i=i.concat(ml(n.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=VY)d=!0,f="maxretry",i=i.concat(ml(n.serverSyncTree_,u.currentWriteId,!0));else{let m=PD(n,u.path,s);u.currentInputSnapshot=m;let g=e[a].update(m.val());if(g!==void 0){Ym("transaction failed: Data returned ",g,u.path);let b=Qn(g);typeof g=="object"&&g!=null&&Bo(g,".priority")||(b=b.updatePriority(m.getPriority()));let D=u.currentWriteId,w=Jm(n),x=AD(b,m,w);u.currentOutputSnapshotRaw=b,u.currentOutputSnapshotResolved=x,u.currentWriteId=Mw(n),s.splice(s.indexOf(D),1),i=i.concat(ID(n.serverSyncTree_,u.path,x,u.currentWriteId,u.applyLocally)),i=i.concat(ml(n.serverSyncTree_,D,!0))}else d=!0,f="nodata",i=i.concat(ml(n.serverSyncTree_,u.currentWriteId,!0))}wo(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}Pw(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Nf(r[a]);Rw(n,n.transactionQueueTree_)}function h4(n,e){let t,r=n.transactionQueueTree_;for(t=$t(e);t!==null&&dd(r)===void 0;)r=Aw(r,t),e=kn(e),t=$t(e);return r}function f4(n,e){let t=[];return p4(n,e,t),t.sort((r,i)=>r.order-i.order),t}function p4(n,e,t){let r=dd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Tw(e,i=>{p4(n,i,t)})}function Pw(n,e){let t=dd(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,xD(e,t.length>0?t:void 0)}Tw(e,r=>{Pw(n,r)})}function kD(n,e){let t=Qm(h4(n,e)),r=Aw(n.transactionQueueTree_,e);return NY(r,i=>{rS(n,i)}),rS(n,r),r4(r,i=>{rS(n,i)}),t}function rS(n,e){let t=dd(e);if(t){let r=[],i=[],o=-1;for(let s=0;s<t.length;s++)t[s].status===3||(t[s].status===1?(Ve(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):(Ve(t[s].status===0,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(ml(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?xD(e,void 0):t.length=o+1,wo(n.eventQueue_,Qm(e),i);for(let s=0;s<r.length;s++)Nf(r[s])}}function JY(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function XY(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):li(`Invalid query segment '${t}' in query '${n}'`)}return e}var QS=function(n,e){let t=eZ(n),r=t.namespace;t.domain==="firebase.com"&&ca(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&ca("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||NK();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Q_(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new hn(t.pathString)}},eZ=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",u=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let d=n.indexOf("/");d===-1&&(d=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(i=JY(n.substring(d,f)));let m=XY(n.substring(Math.min(n.length,f)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",u=parseInt(e.substring(l+1),10)):l=e.length;let g=e.slice(0,l);if(g.toLowerCase()==="localhost")t="localhost";else if(g.split(".").length<=2)t=g;else{let b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),o=r}"ns"in m&&(o=m.ns)}return{host:e,port:u,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var uF="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",tZ=function(){let n=0,e=[];return function(t){let r=t===n;n=t;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=uF.charAt(t%64),t=Math.floor(t/64);Ve(t===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=uF.charAt(e[i]);return Ve(s.length===20,"nextPushId: Length should be 20."),s}}();var pw=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+wr(this.snapshot.exportVal())}},gw=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Hm=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ve(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var mw=class{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new Vr;return zY(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){_o("OnDisconnect.remove",this._path);let e=new Vr;return aF(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){_o("OnDisconnect.set",this._path),ha("OnDisconnect.set",e,this._path,!1);let t=new Vr;return aF(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){_o("OnDisconnect.setWithPriority",this._path),ha("OnDisconnect.setWithPriority",e,this._path,!1),ND("OnDisconnect.setWithPriority",t,!1);let r=new Vr;return $Y(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){_o("OnDisconnect.update",this._path),o4("OnDisconnect.update",e,this._path,!1);let t=new Vr;return WY(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}};var Ti=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Wt(this._path)?null:hD(this._path)}get ref(){return new bo(this._repo,this._path)}get _queryIdentifier(){let e=KO(this._queryParams),t=cD(e);return t==="{}"?"default":t}get _queryObject(){return KO(this._queryParams)}isEqual(e){if(e=Yt(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=fD(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+uQ(this._path)}};function kw(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Cl(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===la){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==_l)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==su)throw new Error(r);if(typeof t!="string")throw new Error(i)}}else if(n.getIndex()===Vn){if(e!=null&&!qm(e)||t!=null&&!qm(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ve(n.getIndex()instanceof Pm||n.getIndex()===mD,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Lw(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var bo=class n extends Ti{constructor(e,t){super(e,t,new Fm,!1)}get parent(){let e=MF(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},xf=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new hn(e),r=Il(this.ref,e);return new n(this._node.getChild(t),r,Vn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,Il(this.ref,r),Vn)))}hasChild(e){let t=new hn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function LD(n,e){return n=Yt(n),n._checkNotDeleted("ref"),e!==void 0?Il(n._root,e):n._root}function OD(n,e){n=Yt(n),n._checkNotDeleted("refFromURL");let t=QS(e,n._repo.repoInfo_.nodeAdmin);s4("refFromURL",t);let r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ca("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),LD(n,t.path.toString())}function Il(n,e){return n=Yt(n),$t(n._path)===null?OY("child","path",e,!1):Pf("child","path",e,!1),new bo(n._repo,Wn(n._path,e))}function g4(n,e){n=Yt(n),_o("push",n._path),ha("push",e,n._path,!0);let t=c4(n._repo),r=tZ(t),i=Il(n,r),o=Il(n,r),s;return e!=null?s=Ow(o,e).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function m4(n){return _o("remove",n._path),Ow(n,null)}function Ow(n,e){n=Yt(n),_o("set",n._path),ha("set",e,n._path,!1);let t=new Vr;return RD(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function v4(n,e){n=Yt(n),_o("setPriority",n._path),ND("setPriority",e,!1);let t=new Vr;return RD(n._repo,Wn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}function y4(n,e,t){if(_o("setWithPriority",n._path),ha("setWithPriority",e,n._path,!1),ND("setWithPriority",t,!1),n.key===".length"||n.key===".keys")throw"setWithPriority failed: "+n.key+" is a read-only object.";let r=new Vr;return RD(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}function _4(n,e){o4("update",e,n._path,!1);let t=new Vr;return qY(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function w4(n){n=Yt(n);let e=new Hm(()=>{}),t=new zm(e);return UY(n._repo,n,t).then(r=>new xf(r,new bo(n._repo,n._path),n._queryParams.getIndex()))}var zm=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new pw("value",this,new xf(e.snapshotNode,new bo(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new gw(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},vw=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new gw(this,e,t):null}createEvent(e,t){Ve(e.childName!=null,"Child events should have a childName.");let r=Il(new bo(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new pw(e.type,this,new xf(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Xm(n,e,t,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let u=t,l=(d,f)=>{KS(n._repo,n,a),u(d,f)};l.userCallback=t.userCallback,l.context=t.context,t=l}let s=new Hm(t,o||void 0),a=e==="value"?new zm(s):new vw(e,s);return GY(n._repo,n,a),()=>KS(n._repo,n,a)}function Fw(n,e,t,r){return Xm(n,"value",e,t,r)}function FD(n,e,t,r){return Xm(n,"child_added",e,t,r)}function VD(n,e,t,r){return Xm(n,"child_changed",e,t,r)}function jD(n,e,t,r){return Xm(n,"child_moved",e,t,r)}function BD(n,e,t,r){return Xm(n,"child_removed",e,t,r)}function UD(n,e,t){let r=null,i=t?new Hm(t):null;e==="value"?r=new zm(i):e&&(r=new vw(e,i)),KS(n._repo,n,r)}var Eo=class{},yw=class extends Eo{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){ha("endAt",this._value,e._path,!0);let t=SS(e._queryParams,this._value,this._key);if(Lw(t),Cl(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ti(e._repo,e._path,t,e._orderByCalled)}};function b4(n,e){return Zm("endAt","key",e,!0),new yw(n,e)}var YS=class extends Eo{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){ha("endBefore",this._value,e._path,!1);let t=AQ(e._queryParams,this._value,this._key);if(Lw(t),Cl(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ti(e._repo,e._path,t,e._orderByCalled)}};function E4(n,e){return Zm("endBefore","key",e,!0),new YS(n,e)}var _w=class extends Eo{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){ha("startAt",this._value,e._path,!0);let t=CS(e._queryParams,this._value,this._key);if(Lw(t),Cl(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ti(e._repo,e._path,t,e._orderByCalled)}};function I4(n=null,e){return Zm("startAt","key",e,!0),new _w(n,e)}var ZS=class extends Eo{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){ha("startAfter",this._value,e._path,!1);let t=DQ(e._queryParams,this._value,this._key);if(Lw(t),Cl(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ti(e._repo,e._path,t,e._orderByCalled)}};function C4(n,e){return Zm("startAfter","key",e,!0),new ZS(n,e)}var JS=class extends Eo{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ti(e._repo,e._path,CQ(e._queryParams,this._limit),e._orderByCalled)}};function S4(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new JS(n)}var XS=class extends Eo{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ti(e._repo,e._path,SQ(e._queryParams,this._limit),e._orderByCalled)}};function D4(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new XS(n)}var eD=class extends Eo{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){kw(e,"orderByChild");let t=new hn(this._path);if(Wt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new Pm(t),i=bw(e._queryParams,r);return Cl(i),new Ti(e._repo,e._path,i,!0)}};function A4(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Pf("orderByChild","path",n,!1),new eD(n)}var tD=class extends Eo{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){kw(e,"orderByKey");let t=bw(e._queryParams,la);return Cl(t),new Ti(e._repo,e._path,t,!0)}};function T4(){return new tD}var nD=class extends Eo{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){kw(e,"orderByPriority");let t=bw(e._queryParams,Vn);return Cl(t),new Ti(e._repo,e._path,t,!0)}};function x4(){return new nD}var rD=class extends Eo{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){kw(e,"orderByValue");let t=bw(e._queryParams,mD);return Cl(t),new Ti(e._repo,e._path,t,!0)}};function N4(){return new rD}var iD=class extends Eo{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(ha("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new yw(this._value,this._key)._apply(new _w(this._value,this._key)._apply(e))}};function M4(n,e){return Zm("equalTo","key",e,!0),new iD(n,e)}function Jo(n,...e){let t=Yt(n);for(let r of e)t=r._apply(t);return t}uY(bo);fY(bo);var nZ="FIREBASE_DATABASE_EMULATOR_HOST",oD={},rZ=!1;function iZ(n,e,t,r){n.repoInfo_=new Q_(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function qD(n,e,t,r,i){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||ca("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),jr("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let s=QS(o,i),a=s.repoInfo,u,l;typeof process<"u"&&process.env&&(l=process.env[nZ]),l?(u=!0,o=`http://${l}?ns=${a.namespace}`,s=QS(o,i),a=s.repoInfo):u=!s.repoInfo.secure;let d=i&&u?new Am(Am.OWNER):new lS(n.name,n.options,e);s4("Invalid Firebase Database URL",s),Wt(s.path)||ca("Database URL must point to the root of a Firebase Database (not including a child path).");let f=sZ(a,n,d,new uS(n,t));return new sD(f,n)}function oZ(n,e){let t=oD[e];(!t||t[n.key]!==n)&&ca(`Database ${e}(${n.repoInfo_}) has already been deleted.`),d4(n),delete t[n.key]}function sZ(n,e,t,r){let i=oD[e.name];i||(i={},oD[e.name]=i);let o=i[n.toURLString()];return o&&ca("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new GS(n,rZ,t,r),i[n.toURLString()]=o,o}var sD=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(jY(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new bo(this._repo,dn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(oZ(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ca("Cannot call "+e+" on a deleted database.")}};function R4(){NF.IS_TRANSPORT_INITIALIZED&&li("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function P4(){R4(),Mm.forceDisallow()}function k4(){R4(),_f.forceDisallow(),Mm.forceAllow()}function L4(n,e,t,r={}){n=Yt(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&ca("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ca('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Am(Am.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:wy(r.mockUserToken,n.app.options.projectId);o=new Am(s)}iZ(i,e,t,o)}function O4(n){n=Yt(n),n._checkNotDeleted("goOffline"),d4(n._repo)}function F4(n){n=Yt(n),n._checkNotDeleted("goOnline"),KY(n._repo)}function V4(n,e){hF(n,e)}function aZ(n){lD(Dy),gc(new uo("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return qD(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),fs(MO,RO,n),fs(MO,RO,"esm2017")}var uZ={".sv":"timestamp"};function j4(){return uZ}function B4(n){return{".sv":{increment:n}}}var aD=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function U4(n,e,t){var r;if(n=Yt(n),_o("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";let i=(r=t?.applyLocally)!==null&&r!==void 0?r:!0,o=new Vr,s=(u,l,d)=>{let f=null;u?o.reject(u):(f=new xf(d,new bo(n._repo,n._path),Vn),o.resolve(new aD(l,f)))},a=Fw(n,()=>{});return QY(n._repo,n._path,e,s,a,i),o.promise}pD.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};pD.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};aZ();var lZ="@firebase/database-compat",cZ="2.0.3";var dZ=new Wu("@firebase/database-compat"),q4=function(n){let e="FIREBASE WARNING: "+n;dZ.warn(e)};var hZ=function(n,e,t,r){if(!(r&&t===void 0)&&typeof t!="boolean")throw new Error(qi(n,e)+"must be a boolean.")},fZ=function(n,e,t){if(!(t&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(qi(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var HD=class{constructor(e){this._delegate=e}cancel(e){wt("OnDisconnect.cancel",0,1,arguments.length),Tr("OnDisconnect.cancel","onComplete",e,!0);let t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){wt("OnDisconnect.remove",0,1,arguments.length),Tr("OnDisconnect.remove","onComplete",e,!0);let t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){wt("OnDisconnect.set",1,2,arguments.length),Tr("OnDisconnect.set","onComplete",t,!0);let r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){wt("OnDisconnect.setWithPriority",2,3,arguments.length),Tr("OnDisconnect.setWithPriority","onComplete",r,!0);let i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if(wt("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,q4("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Tr("OnDisconnect.update","onComplete",t,!0);let r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}};var zD=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return wt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var hd=class n{constructor(e,t){this._database=e,this._delegate=t}val(){return wt("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return wt("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return wt("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return wt("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return wt("DataSnapshot.child",0,1,arguments.length),e=String(e),Pf("DataSnapshot.child","path",e,!1),new n(this._database,this._delegate.child(e))}hasChild(e){return wt("DataSnapshot.hasChild",1,1,arguments.length),Pf("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return wt("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return wt("DataSnapshot.forEach",1,1,arguments.length),Tr("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new n(this._database,t)))}hasChildren(){return wt("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return wt("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return wt("DataSnapshot.ref",0,0,arguments.length),new au(this._database,this._delegate.ref)}get ref(){return this.getRef()}},Vw=class n{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;wt("Query.on",2,4,arguments.length),Tr("Query.on","callback",t,!1);let s=n.getCancelAndContextArgs_("Query.on",r,i),a=(l,d)=>{t.call(s.context,new hd(this.database,l),d)};a.userCallback=t,a.context=s.context;let u=(o=s.cancel)===null||o===void 0?void 0:o.bind(s.context);switch(e){case"value":return Fw(this._delegate,a,u),t;case"child_added":return FD(this._delegate,a,u),t;case"child_removed":return BD(this._delegate,a,u),t;case"child_changed":return VD(this._delegate,a,u),t;case"child_moved":return jD(this._delegate,a,u),t;default:throw new Error(qi("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if(wt("Query.off",0,3,arguments.length),fZ("Query.off",e,!0),Tr("Query.off","callback",t,!0),Wb("Query.off","context",r,!0),t){let i=()=>{};i.userCallback=t,i.context=r,UD(this._delegate,e,i)}else UD(this._delegate,e)}get(){return w4(this._delegate).then(e=>new hd(this.database,e))}once(e,t,r,i){wt("Query.once",1,4,arguments.length),Tr("Query.once","callback",t,!0);let o=n.getCancelAndContextArgs_("Query.once",r,i),s=new Vr,a=(l,d)=>{let f=new hd(this.database,l);t&&t.call(o.context,f,d),s.resolve(f)};a.userCallback=t,a.context=o.context;let u=l=>{o.cancel&&o.cancel.call(o.context,l),s.reject(l)};switch(e){case"value":Fw(this._delegate,a,u,{onlyOnce:!0});break;case"child_added":FD(this._delegate,a,u,{onlyOnce:!0});break;case"child_removed":BD(this._delegate,a,u,{onlyOnce:!0});break;case"child_changed":VD(this._delegate,a,u,{onlyOnce:!0});break;case"child_moved":jD(this._delegate,a,u,{onlyOnce:!0});break;default:throw new Error(qi("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return wt("Query.limitToFirst",1,1,arguments.length),new n(this.database,Jo(this._delegate,S4(e)))}limitToLast(e){return wt("Query.limitToLast",1,1,arguments.length),new n(this.database,Jo(this._delegate,D4(e)))}orderByChild(e){return wt("Query.orderByChild",1,1,arguments.length),new n(this.database,Jo(this._delegate,A4(e)))}orderByKey(){return wt("Query.orderByKey",0,0,arguments.length),new n(this.database,Jo(this._delegate,T4()))}orderByPriority(){return wt("Query.orderByPriority",0,0,arguments.length),new n(this.database,Jo(this._delegate,x4()))}orderByValue(){return wt("Query.orderByValue",0,0,arguments.length),new n(this.database,Jo(this._delegate,N4()))}startAt(e=null,t){return wt("Query.startAt",0,2,arguments.length),new n(this.database,Jo(this._delegate,I4(e,t)))}startAfter(e=null,t){return wt("Query.startAfter",0,2,arguments.length),new n(this.database,Jo(this._delegate,C4(e,t)))}endAt(e=null,t){return wt("Query.endAt",0,2,arguments.length),new n(this.database,Jo(this._delegate,b4(e,t)))}endBefore(e=null,t){return wt("Query.endBefore",0,2,arguments.length),new n(this.database,Jo(this._delegate,E4(e,t)))}equalTo(e,t){return wt("Query.equalTo",1,2,arguments.length),new n(this.database,Jo(this._delegate,M4(e,t)))}toString(){return wt("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return wt("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(wt("Query.isEqual",1,1,arguments.length),!(e instanceof n)){let t="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(t)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){let i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,Tr(e,"cancel",i.cancel,!0),i.context=r,Wb(e,"context",i.context,!0);else if(t)if(typeof t=="object"&&t!==null)i.context=t;else if(typeof t=="function")i.cancel=t;else throw new Error(qi(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new au(this.database,new bo(this._delegate._repo,this._delegate._path))}},au=class n extends Vw{constructor(e,t){super(e,new Ti(t._repo,t._path,new Fm,!1)),this.database=e,this._delegate=t}getKey(){return wt("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return wt("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new n(this.database,Il(this._delegate,e))}getParent(){wt("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new n(this.database,e):null}getRoot(){return wt("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}set(e,t){wt("Reference.set",1,2,arguments.length),Tr("Reference.set","onComplete",t,!0);let r=Ow(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if(wt("Reference.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,q4("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_o("Reference.update",this._delegate._path),Tr("Reference.update","onComplete",t,!0);let r=_4(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){wt("Reference.setWithPriority",2,3,arguments.length),Tr("Reference.setWithPriority","onComplete",r,!0);let i=y4(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){wt("Reference.remove",0,1,arguments.length),Tr("Reference.remove","onComplete",e,!0);let t=m4(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){wt("Reference.transaction",1,3,arguments.length),Tr("Reference.transaction","transactionUpdate",e,!1),Tr("Reference.transaction","onComplete",t,!0),hZ("Reference.transaction","applyLocally",r,!0);let i=U4(this._delegate,e,{applyLocally:r}).then(o=>new zD(o.committed,new hd(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){wt("Reference.setPriority",1,2,arguments.length),Tr("Reference.setPriority","onComplete",t,!0);let r=v4(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){wt("Reference.push",0,2,arguments.length),Tr("Reference.push","onComplete",t,!0);let r=g4(this._delegate,e),i=r.then(s=>new n(this.database,s));t&&i.then(()=>t(null),s=>t(s));let o=new n(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return _o("Reference.onDisconnect",this._delegate._path),new HD(new mw(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var fd=class{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:P4,forceLongPolling:k4}}useEmulator(e,t,r={}){L4(this._delegate,e,t,r)}ref(e){if(wt("database.ref",0,1,arguments.length),e instanceof au){let t=OD(this._delegate,e.toString());return new au(this,t)}else{let t=LD(this._delegate,e);return new au(this,t)}}refFromURL(e){wt("database.refFromURL",1,1,arguments.length);let r=OD(this._delegate,e);return new au(this,r)}goOffline(){return wt("database.goOffline",0,0,arguments.length),O4(this._delegate)}goOnline(){return wt("database.goOnline",0,0,arguments.length),F4(this._delegate)}};fd.ServerValue={TIMESTAMP:j4(),increment:n=>B4(n)};function pZ({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:o,nodeAdmin:s=!1}){lD(t);let a=new Gb("database-standalone"),u=new Cy("auth-internal",a);u.setComponent(new uo("auth-internal",()=>r,"PRIVATE"));let l;return i&&(l=new Cy("app-check-internal",a),l.setComponent(new uo("app-check-internal",()=>i,"PRIVATE"))),{instance:new fd(qD(n,u,l,e,s),n),namespace:o}}var gZ=Object.freeze({__proto__:null,initStandalone:pZ});var mZ=fd.ServerValue;function vZ(n){n.INTERNAL.registerComponent(new uo("database-compat",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new fd(i,r)},"PUBLIC").setServiceProps({Reference:au,Query:Vw,Database:fd,DataSnapshot:hd,enableLogging:V4,INTERNAL:gZ,ServerValue:mZ}).setMultipleInstances(!0)),n.registerVersion(lZ,cZ)}vZ($r);function ev(n,e,t="on",r=wc){return new Lt(i=>{let o=null;return o=n[t](e,(s,a)=>{r.schedule(()=>{i.next({snapshot:s,prevKey:a})}),t==="once"&&r.schedule(()=>i.complete())},s=>{r.schedule(()=>i.error(s))}),t==="on"?{unsubscribe(){o!=null&&n.off(e,o)}}:{unsubscribe(){}}}).pipe(ut(i=>{let{snapshot:o,prevKey:s}=i,a=null;return o.exists()&&(a=o.key),{type:e,payload:o,prevKey:s,key:a}}),og())}function yZ(n){return typeof n=="string"}function _Z(n){return typeof n.exportVal=="function"}function G4(n){return n==null}function K4(n){return typeof n.set=="function"}function H4(n,e){return K4(e)?e:n.ref(e)}function Q4(n,e){if(yZ(n))return e.stringCase();if(K4(n))return e.firebaseCase();if(_Z(n))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof n}`)}function Y4(n){return(G4(n)||n.length===0)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Z4(n,e,t){e=Y4(e);let r=e.map(i=>ev(n,i,"on",t));return Dh(...r)}function wZ(n,e,t){let r=Z4(n,e).pipe(Qs((i,o)=>[...i,o],[]));return EZ(n,r,t)}function bZ(n,e){return ev(n,"value","on",e).pipe(ut(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}function EZ(n,e,t){return bZ(n,t).pipe(y2(e),ut(([i,o])=>{let s=i.lastKeyToLoad,a=o.map(u=>u.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),m2(i=>i.loadedKeys.indexOf(i.lastKeyToLoad)===-1),ut(i=>i.actions))}function z4(n,e){return function(r,i){return Q4(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function IZ(n){return function(t){return t?Q4(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function CZ(n,e,t){return ev(n,"value","once",t).pipe(Kn(r=>{let i=[vt(r)];return e.forEach(o=>i.push(ev(n,o,"on",t))),Dh(...i).pipe(Qs(DZ,[]))}),ng())}function J4(n,e){let t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function SZ(n,e){if(G4(e))return 0;{let t=J4(n,e);return t===-1?n.length:t+1}}function DZ(n,e){let{payload:t,prevKey:r,key:i}=e,o=J4(n,i),s=SZ(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(u=>{let l={payload:u,type:"value",prevKey:a,key:u.key};return a=u.key,n=[...n,l],!1})}return n;case"child_added":if(o>-1)(n[o-1]?.key||null)!==r&&(n=n.filter(u=>u.payload.key!==t.key),n.splice(s,0,e));else{if(r==null)return[e,...n];n=n.slice(),n.splice(s,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(o>-1){let a=n.splice(o,1)[0];return n=n.slice(),n.splice(s,0,a),n}return n;default:return n}}function $4(n,e,t){return e=Y4(e),CZ(n,e,t)}function AZ(n,e,t){let r=e.schedulers.outsideAngular,i=Fe(un).run(()=>n.ref);return{query:n,update:z4(i,"update"),set:z4(i,"set"),push:o=>i.push(o),remove:IZ(i),snapshotChanges(o){return $4(n,o,r).pipe(ir(t))},stateChanges(o){return Z4(n,o,r).pipe(ir(t))},auditTrail(o){return wZ(n,o,r).pipe(ir(t))},valueChanges(o,s){return $4(n,o,r).pipe(ut(u=>u.map(l=>s&&s.idField?Ut(Ue({},l.payload.val()),{[s.idField]:l.key}):l.payload.val())),ir(t))}}}function W4(n,e){return function(){return ev(n,"value","on",e)}}function TZ(n,e,t){return{query:n,snapshotChanges(){return W4(n,e.schedulers.outsideAngular)().pipe(ir(t))},update(r){return n.ref.update(r)},set(r){return n.ref.set(r)},remove(){return n.ref.remove()},valueChanges(){return W4(n,e.schedulers.outsideAngular)().pipe(ir(t),ut(i=>i.payload.exists()?i.payload.val():null))}}}var xZ=new nt("angularfire2.realtimeDatabaseURL"),NZ=new nt("angularfire2.database.use-emulator"),jw=(()=>{class n{schedulers;database;injector=Fe(lr);constructor(t,r,i,o,s,a,u,l,d,f,m,g,b,E,D){this.schedulers=a;let w=u,x=id(t,s,r);l&&wm(x,s,d,m,g,b,f,E),this.database=vf(`${x.name}.database.${i}`,"AngularFireDatabase",x.name,()=>{let F=s.runOutsideAngular(()=>x.database(i||void 0));return w&&F.useEmulator(...w),F},[w])}list(t,r){let i=Fe(un).runOutsideAngular(()=>H4(this.database,t)),o=i;return r&&(o=r(i)),AZ(o,this,this.injector)}object(t){let r=Fe(un).runOutsideAngular(()=>H4(this.database,t));return TZ(r,this,this.injector)}createPushId(){return Fe(un).runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(je(pl),je(gl,8),je(xZ,8),je(po),je(un),je(rd),je(NZ,8),je(bm,8),je(pm,8),je(gm,8),je(mm,8),je(vm,8),je(ym,8),je(_m,8),je(fl,8))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var X4=(()=>{class n{constructor(t){this.db=t,this.dbPath="/PowerData",this.lastKey=null,this.database=t.list(this.dbPath),this.data=this.db.list(this.dbPath,r=>r.orderByChild("timestamp").limitToLast(1)).snapshotChanges().pipe(ut(r=>r.map(i=>{let o=i.payload.val();return o&&typeof o=="object"?Ue({key:i.payload.key},o):null})[0]))}getFilteredMonitoringView(t,r,i){return new Lt(o=>{let s=this.convertToFirebaseDate(t);this.database.query.ref.orderByChild("current_date").equalTo(s).once("value",a=>{if(!a.exists()){o.next([]),o.complete();return}let u=Object.values(a.val()).filter(l=>this.isTimeInRange(l?.current_time,r,i));o.next(u),o.complete()},a=>o.error(a))})}getLatestMonitoringView(){return this.data}convertToFirebaseDate(t){let r=new Date(t);return`${r.getMonth()+1}/${r.getDate()}/${r.getFullYear()}`}isTimeInRange(t,r,i){if(!t)return!1;let[o,s]=t.split(":").map(Number),[a,u]=r.split(":").map(Number),[l,d]=i.split(":").map(Number),f=o*60+s,m=a*60+u,g=l*60+d;return f>=m&&f<=g}static{this.\u0275fac=function(r){return new(r||n)(je(jw))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function PZ(n,e){if(n&1&&(Xe(0,"option",35),at(1),Je()),n&2){let t=e.$implicit;Ci("value",t),Zt(),Si(" ",t," kWh ")}}function kZ(n,e){n&1&&(Xe(0,"span")(1,"div",36)(2,"span",37),at(3,"Generating..."),Je()(),at(4," Generating... "),Je())}function LZ(n,e){n&1&&(Xe(0,"span"),at(1,"Download PDF"),Je())}function OZ(n,e){n&1&&(Xe(0,"tbody")(1,"tr")(2,"td",38),at(3," Loading data, please wait... "),Xe(4,"div",39)(5,"span",37),at(6,"Loading..."),Je()()()()())}function FZ(n,e){if(n&1&&(Xe(0,"tr")(1,"td"),at(2),Je(),Xe(3,"td",8),at(4),Bc(5,"number"),Je(),Xe(6,"td"),at(7),Je(),Xe(8,"td",8),at(9),Je(),Xe(10,"td"),at(11),Je(),Xe(12,"td"),at(13),Bc(14,"number"),Je(),Xe(15,"td"),at(16),Je(),Xe(17,"td"),at(18),Bc(19,"number"),Je()()),n&2){let t=e.$implicit,r=uI(2);Zt(2),il(t.current_date+" "+t.current_time),Zt(),Ci("ngClass",r.getVoltageClass(t.voltage_V)),Zt(),Si("",Uc(5,10,t.voltage_V,"1.2-2")," V"),Zt(3),Si("",t.current_A," A"),Zt(),Ci("ngClass",r.getPowerFactorClass(t.power_factor)),Zt(),il(t.power_factor),Zt(2),Si("",t.frequency_Hz," Hz"),Zt(2),Si("",Uc(14,13,t.phase_angle_deg,"1.2-2"),"\xB0"),Zt(3),Si("",t.active_power_W," W"),Zt(2),Si("",Uc(19,16,t.energy_kWh,"1.2-2")," kWh")}}function VZ(n,e){if(n&1&&(Xe(0,"tbody"),Qh(1,FZ,20,19,"tr",40),Je()),n&2){let t=uI();Zt(),Ci("ngForOf",t.filteredMonitoringViewList)}}var t3=(()=>{class n{constructor(t){this.monitoringService=t,this.filteredMonitoringViewList=[],this.monitoringViewList=[],this.monitoringView={active_power_W:0,apparent_power_VA:0,current_A:0,current_date:"",current_time:"",energy_kWh:0,frequency_Hz:0,phase_angle_deg:0,power_factor:0,voltage_V:0},this.loading=!1,this.inputCost=0,this.consumptionKwh=0,this.filterDate="",this.startTime="",this.endTime="",this.selectedEnergy=0,this.uniqueEnergyList=[],this.pdfLoading=!1}ngOnInit(){this.getLatestMonitoringView()}preventInvalidInput(t){(t.key==="e"||t.key==="-"||t.key==="+")&&t.preventDefault()}getLatestMonitoringView(){this.monitoringService.getLatestMonitoringView().subscribe({next:t=>{this.monitoringView=t},error:t=>{},complete:()=>{}})}onFilter(){this.filterDate&&this.startTime&&this.endTime&&this.loadData()}loadData(){this.filterDate&&this.startTime&&this.endTime?(this.loading=!0,this.monitoringService.getFilteredMonitoringView(this.filterDate,this.startTime,this.endTime).subscribe({next:t=>{this.filteredMonitoringViewList=t,this.uniqueEnergyList=[...new Set(this.filteredMonitoringViewList.map(r=>r.energy_kWh))],this.loading=!1},error:()=>{this.loading=!1}})):this.filteredMonitoringViewList=[]}calculate(){this.inputCost>0&&(this.consumptionKwh=this.inputCost*this.selectedEnergy)}resetConsumption(){this.inputCost=0,this.consumptionKwh=0}convertDateTime(t){let r=t.substring(0,2),i=t.substring(2,4),o=t.substring(4,8),s=t.substring(8,10),a=t.substring(10,12);return`${r}/${i}/${o} ${s}:${a}`}getVoltageClass(t){return t===220?"green":t>=198&&t<220||t>220&&t<=242?"yellow":t<198||t>242?"red":""}getPowerFactorClass(t){return t>=.95&&t<=1?"green":t>=.85&&t<=.94?"yellow":t<.85?"red":""}updateEnergy(){this.monitoringView.energy_kWh=this.selectedEnergy}downloadPDF(){this.filteredMonitoringViewList.length!==0&&(this.pdfLoading=!0,setTimeout(()=>{let t=new jC;t.setFontSize(16),t.text("Electrical Monitoring Data",14,10);let r=[["Date & Time","Voltage (V)","Current (A)","Power Factor","Frequency (Hz)","Phase Angle (\xB0)","Active Power (W)","Energy (kWh)"]],i=this.filteredMonitoringViewList.map(o=>[`${o.current_date} ${o.current_time}`,o.voltage_V,o.current_A,o.power_factor,o.frequency_Hz,o.phase_angle_deg,o.active_power_W,o.energy_kWh]);(0,e3.default)(t,{head:r,body:i,startY:20}),t.save("Electrical_Monitoring_Data.pdf"),this.pdfLoading=!1},1500))}static{this.\u0275fac=function(r){return new(r||n)(tn(X4))}}static{this.\u0275cmp=Kh({type:n,selectors:[["app-monitoring-view"]],decls:159,vars:34,consts:[[1,"container","mt-4"],[1,"row","mb-4"],[1,"col-12"],[1,"text-center"],[1,"row"],[1,"col-12","col-md-6"],[1,"table","table-bordered"],["colspan","2",1,"text-center"],[3,"ngClass"],[1,"wider-dropdown",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"input-group"],["min","0","type","number","placeholder","Unit Value kWh","name","inputCost",1,"form-control",3,"ngModelChange","keydown","ngModel"],[1,"btn","btn-sm","btn-primary",3,"click"],["type","text","readonly","","disabled","",1,"form-control",3,"value"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"table","table-bordered","legend-table","mt-3"],[1,"green"],[1,"yellow"],[1,"red"],[1,"filters","mt-4"],[1,"filter-row"],[1,"filter-item"],["for","filterDate"],["type","date","id","filterDate",3,"ngModelChange","ngModel"],["for","startTime"],["type","time","id","startTime",3,"ngModelChange","ngModel"],["for","endTime"],["type","time","id","endTime",3,"ngModelChange","ngModel"],[1,"button","btn","btn-primary","mt-3",3,"click","disabled"],[1,"button","btn","btn-warning","mt",3,"click","disabled"],[4,"ngIf"],[1,"table-container","mt-3"],[1,"table","table-striped","table-bordered"],[3,"value"],["role","status",1,"spinner-border","spinner-border-sm","text-light"],[1,"visually-hidden"],["colspan","8",1,"text-center"],["role","status",1,"spinner-border","text-primary"],[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(Xe(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),at(4,"REMOTE ELECTRICAL ANALYZER AND LOGGER"),Je()()(),Xe(5,"div",4)(6,"div",5)(7,"table",6)(8,"thead")(9,"tr")(10,"th",7),at(11,"Electrical Measurements"),Je()()(),Xe(12,"tbody")(13,"tr")(14,"td"),at(15,"Date"),Je(),Xe(16,"td"),at(17),Je()(),Xe(18,"tr")(19,"td"),at(20,"Time"),Je(),Xe(21,"td"),at(22),Je()(),Xe(23,"tr")(24,"td"),at(25,"Voltage"),Je(),Xe(26,"td",8),at(27),Bc(28,"number"),Je()(),Xe(29,"tr")(30,"td"),at(31,"Current"),Je(),Xe(32,"td"),at(33),Je()(),Xe(34,"tr")(35,"td"),at(36,"Frequency"),Je(),Xe(37,"td"),at(38),Je()(),Xe(39,"tr")(40,"td"),at(41,"Active Power"),Je(),Xe(42,"td"),at(43),Je()(),Xe(44,"tr")(45,"td"),at(46,"Power Factor"),Je(),Xe(47,"td",8),at(48),Je()(),Xe(49,"tr")(50,"td"),at(51,"Phase Angle"),Je(),Xe(52,"td"),at(53),Bc(54,"number"),Je()()()()(),Xe(55,"div",5)(56,"table",6)(57,"thead")(58,"tr")(59,"th",7),at(60,"Cost Calculation"),Je()()(),Xe(61,"tbody")(62,"tr")(63,"td"),at(64,"Energy Used"),Je(),Xe(65,"td")(66,"select",9),Vc("ngModelChange",function(s){return Zh(i.selectedEnergy,s)||(i.selectedEnergy=s),s}),$i("change",function(){return i.updateEnergy()}),Qh(67,PZ,2,2,"option",10),Je()()(),Xe(68,"tr")(69,"td"),at(70,"Input Cost Per kWh"),Je(),Xe(71,"td")(72,"div",11)(73,"input",12),Vc("ngModelChange",function(s){return Zh(i.inputCost,s)||(i.inputCost=s),s}),$i("keydown",function(s){return i.preventInvalidInput(s)}),Je(),Xe(74,"button",13),$i("click",function(){return i.calculate()}),at(75,"Send"),Je()()()(),Xe(76,"tr")(77,"td"),at(78,"Cost Per kWh"),Je(),Xe(79,"td"),Oc(80,"input",14),Je()(),Xe(81,"tr")(82,"td"),at(83,"Consumption in PHP"),Je(),Xe(84,"td")(85,"div",15)(86,"span"),at(87),Bc(88,"number"),Je(),Xe(89,"button",16),$i("click",function(){return i.resetConsumption()}),at(90,"Reset"),Je()()()()()(),Xe(91,"table",17)(92,"thead")(93,"tr")(94,"th",7),at(95,"Legend"),Je()(),Xe(96,"tr")(97,"th"),at(98,"Status"),Je(),Xe(99,"th"),at(100,"Color"),Je()()(),Xe(101,"tbody")(102,"tr")(103,"td"),at(104,"Ideal"),Je(),Xe(105,"td",18),at(106,"Green"),Je()(),Xe(107,"tr")(108,"td"),at(109,"Fair"),Je(),Xe(110,"td",19),at(111,"Yellow"),Je()(),Xe(112,"tr")(113,"td"),at(114,"Poor"),Je(),Xe(115,"td",20),at(116,"Red"),Je()()()()()(),Xe(117,"div",21)(118,"div",22)(119,"div",23)(120,"label",24),at(121,"Select Date:"),Je(),Xe(122,"input",25),Vc("ngModelChange",function(s){return Zh(i.filterDate,s)||(i.filterDate=s),s}),Je()()(),Xe(123,"div",22)(124,"div",23)(125,"label",26),at(126,"Start Time:"),Je(),Xe(127,"input",27),Vc("ngModelChange",function(s){return Zh(i.startTime,s)||(i.startTime=s),s}),Je()(),Xe(128,"div",23)(129,"label",28),at(130,"End Time:"),Je(),Xe(131,"input",29),Vc("ngModelChange",function(s){return Zh(i.endTime,s)||(i.endTime=s),s}),Je()()(),Xe(132,"button",30),$i("click",function(){return i.onFilter()}),at(133," Apply Filter "),Je(),Xe(134,"button",31),$i("click",function(){return i.downloadPDF()}),Qh(135,kZ,5,0,"span",32)(136,LZ,2,0,"span",32),Je()(),Xe(137,"div",33)(138,"table",34)(139,"thead")(140,"tr")(141,"th"),at(142,"Date & Time"),Je(),Xe(143,"th"),at(144,"Voltage (V)"),Je(),Xe(145,"th"),at(146,"Current (A)"),Je(),Xe(147,"th"),at(148,"Power Factor"),Je(),Xe(149,"th"),at(150,"Frequency (Hz)"),Je(),Xe(151,"th"),at(152,"Phase Angle (\xB0)"),Je(),Xe(153,"th"),at(154,"Active Power (W)"),Je(),Xe(155,"th"),at(156,"Energy (kWh)"),Je()()(),Qh(157,OZ,7,0,"tbody",32)(158,VZ,2,1,"tbody",32),Je()()()),r&2&&(Zt(17),il(i.monitoringView.current_date),Zt(5),il(i.monitoringView.current_time),Zt(4),Ci("ngClass",i.getVoltageClass(i.monitoringView.voltage_V)),Zt(),Si("",Uc(28,25,i.monitoringView.voltage_V,"1.2-2")," V"),Zt(6),Si("",i.monitoringView.current_A," A"),Zt(5),Si("",i.monitoringView.frequency_Hz," Hz"),Zt(5),Si("",i.monitoringView.active_power_W," kW"),Zt(4),Ci("ngClass",i.getPowerFactorClass(i.monitoringView.power_factor)),Zt(),il(i.monitoringView.power_factor),Zt(5),Si("",Uc(54,28,i.monitoringView.phase_angle_deg,"1.2-2")," \xB0"),Zt(13),Fc("ngModel",i.selectedEnergy),Zt(),Ci("ngForOf",i.uniqueEnergyList),Zt(6),Fc("ngModel",i.inputCost),Zt(7),lI("value","1 kWh = \u20B1",i.inputCost,""),Zt(7),il(Uc(88,31,i.consumptionKwh,"1.2-2")),Zt(35),Fc("ngModel",i.filterDate),Zt(5),Fc("ngModel",i.startTime),Zt(4),Fc("ngModel",i.endTime),Zt(),Ci("disabled",!i.filterDate||!i.startTime||!i.endTime),Zt(2),Ci("disabled",i.filteredMonitoringViewList.length===0||i.pdfLoading),Zt(),Ci("ngIf",i.pdfLoading),Zt(),Ci("ngIf",!i.pdfLoading),Zt(21),Ci("ngIf",i.loading),Zt(),Ci("ngIf",!i.loading))},dependencies:[bL,yL,wL,M_,gC,P_,pL,mC,pC,Ng,YP,ZP,JP,XP],styles:[".filters[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-top:50px}.filter-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.filter-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.filters[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.25rem}.button-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:10px}button.small[_ngcontent-%COMP%]{font-size:.875rem;padding:.4rem 1rem}button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-size:1rem}.table-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;overflow-x:auto;margin-top:15px;width:100%;display:block}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;table-layout:auto}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-wrap:break-word;text-overflow:ellipsis;overflow:hidden}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}.green[_ngcontent-%COMP%]{color:#57a857}.yellow[_ngcontent-%COMP%]{color:gold}.red[_ngcontent-%COMP%]{color:red}@media (max-width: 768px){.col-md-6[_ngcontent-%COMP%]{width:100%}.filter-row[_ngcontent-%COMP%], .button-row[_ngcontent-%COMP%]{flex-direction:column}.wider-dropdown[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]{max-height:350px}}@media (max-width: 576px){button[_ngcontent-%COMP%]{width:50%}.table-container[_ngcontent-%COMP%]{max-height:350px;overflow-x:auto;overflow-y:visible;width:100%}table[_ngcontent-%COMP%]{min-width:600px}}.legend-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .legend-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;padding:4px}.legend-table[_ngcontent-%COMP%]   td.green[_ngcontent-%COMP%]{background-color:#57a857;color:#fff}.legend-table[_ngcontent-%COMP%]   td.yellow[_ngcontent-%COMP%]{background-color:gold;color:#000}.legend-table[_ngcontent-%COMP%]   td.red[_ngcontent-%COMP%]{background-color:red;color:#fff}.legend-table[_ngcontent-%COMP%]{text-align:center}"]})}}return n})();var n3=[{path:"",component:t3}];var r3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i3={};var uu,$D;(function(){var n;function e(R,I){function N(){}N.prototype=I.prototype,R.D=I.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(P,C,T){for(var M=Array(arguments.length-2),B=2;B<arguments.length;B++)M[B-2]=arguments[B];return I.prototype[C].apply(P,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,I,N){N||(N=0);var P=Array(16);if(typeof I=="string")for(var C=0;16>C;++C)P[C]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(C=0;16>C;++C)P[C]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=R.g[0],N=R.g[1],C=R.g[2];var T=R.g[3],M=I+(T^N&(C^T))+P[0]+3614090360&4294967295;I=N+(M<<7&4294967295|M>>>25),M=T+(C^I&(N^C))+P[1]+3905402710&4294967295,T=I+(M<<12&4294967295|M>>>20),M=C+(N^T&(I^N))+P[2]+606105819&4294967295,C=T+(M<<17&4294967295|M>>>15),M=N+(I^C&(T^I))+P[3]+3250441966&4294967295,N=C+(M<<22&4294967295|M>>>10),M=I+(T^N&(C^T))+P[4]+4118548399&4294967295,I=N+(M<<7&4294967295|M>>>25),M=T+(C^I&(N^C))+P[5]+1200080426&4294967295,T=I+(M<<12&4294967295|M>>>20),M=C+(N^T&(I^N))+P[6]+2821735955&4294967295,C=T+(M<<17&4294967295|M>>>15),M=N+(I^C&(T^I))+P[7]+4249261313&4294967295,N=C+(M<<22&4294967295|M>>>10),M=I+(T^N&(C^T))+P[8]+1770035416&4294967295,I=N+(M<<7&4294967295|M>>>25),M=T+(C^I&(N^C))+P[9]+2336552879&4294967295,T=I+(M<<12&4294967295|M>>>20),M=C+(N^T&(I^N))+P[10]+4294925233&4294967295,C=T+(M<<17&4294967295|M>>>15),M=N+(I^C&(T^I))+P[11]+2304563134&4294967295,N=C+(M<<22&4294967295|M>>>10),M=I+(T^N&(C^T))+P[12]+1804603682&4294967295,I=N+(M<<7&4294967295|M>>>25),M=T+(C^I&(N^C))+P[13]+4254626195&4294967295,T=I+(M<<12&4294967295|M>>>20),M=C+(N^T&(I^N))+P[14]+2792965006&4294967295,C=T+(M<<17&4294967295|M>>>15),M=N+(I^C&(T^I))+P[15]+1236535329&4294967295,N=C+(M<<22&4294967295|M>>>10),M=I+(C^T&(N^C))+P[1]+4129170786&4294967295,I=N+(M<<5&4294967295|M>>>27),M=T+(N^C&(I^N))+P[6]+3225465664&4294967295,T=I+(M<<9&4294967295|M>>>23),M=C+(I^N&(T^I))+P[11]+643717713&4294967295,C=T+(M<<14&4294967295|M>>>18),M=N+(T^I&(C^T))+P[0]+3921069994&4294967295,N=C+(M<<20&4294967295|M>>>12),M=I+(C^T&(N^C))+P[5]+3593408605&4294967295,I=N+(M<<5&4294967295|M>>>27),M=T+(N^C&(I^N))+P[10]+38016083&4294967295,T=I+(M<<9&4294967295|M>>>23),M=C+(I^N&(T^I))+P[15]+3634488961&4294967295,C=T+(M<<14&4294967295|M>>>18),M=N+(T^I&(C^T))+P[4]+3889429448&4294967295,N=C+(M<<20&4294967295|M>>>12),M=I+(C^T&(N^C))+P[9]+568446438&4294967295,I=N+(M<<5&4294967295|M>>>27),M=T+(N^C&(I^N))+P[14]+3275163606&4294967295,T=I+(M<<9&4294967295|M>>>23),M=C+(I^N&(T^I))+P[3]+4107603335&4294967295,C=T+(M<<14&4294967295|M>>>18),M=N+(T^I&(C^T))+P[8]+1163531501&4294967295,N=C+(M<<20&4294967295|M>>>12),M=I+(C^T&(N^C))+P[13]+2850285829&4294967295,I=N+(M<<5&4294967295|M>>>27),M=T+(N^C&(I^N))+P[2]+4243563512&4294967295,T=I+(M<<9&4294967295|M>>>23),M=C+(I^N&(T^I))+P[7]+1735328473&4294967295,C=T+(M<<14&4294967295|M>>>18),M=N+(T^I&(C^T))+P[12]+2368359562&4294967295,N=C+(M<<20&4294967295|M>>>12),M=I+(N^C^T)+P[5]+4294588738&4294967295,I=N+(M<<4&4294967295|M>>>28),M=T+(I^N^C)+P[8]+2272392833&4294967295,T=I+(M<<11&4294967295|M>>>21),M=C+(T^I^N)+P[11]+1839030562&4294967295,C=T+(M<<16&4294967295|M>>>16),M=N+(C^T^I)+P[14]+4259657740&4294967295,N=C+(M<<23&4294967295|M>>>9),M=I+(N^C^T)+P[1]+2763975236&4294967295,I=N+(M<<4&4294967295|M>>>28),M=T+(I^N^C)+P[4]+1272893353&4294967295,T=I+(M<<11&4294967295|M>>>21),M=C+(T^I^N)+P[7]+4139469664&4294967295,C=T+(M<<16&4294967295|M>>>16),M=N+(C^T^I)+P[10]+3200236656&4294967295,N=C+(M<<23&4294967295|M>>>9),M=I+(N^C^T)+P[13]+681279174&4294967295,I=N+(M<<4&4294967295|M>>>28),M=T+(I^N^C)+P[0]+3936430074&4294967295,T=I+(M<<11&4294967295|M>>>21),M=C+(T^I^N)+P[3]+3572445317&4294967295,C=T+(M<<16&4294967295|M>>>16),M=N+(C^T^I)+P[6]+76029189&4294967295,N=C+(M<<23&4294967295|M>>>9),M=I+(N^C^T)+P[9]+3654602809&4294967295,I=N+(M<<4&4294967295|M>>>28),M=T+(I^N^C)+P[12]+3873151461&4294967295,T=I+(M<<11&4294967295|M>>>21),M=C+(T^I^N)+P[15]+530742520&4294967295,C=T+(M<<16&4294967295|M>>>16),M=N+(C^T^I)+P[2]+3299628645&4294967295,N=C+(M<<23&4294967295|M>>>9),M=I+(C^(N|~T))+P[0]+4096336452&4294967295,I=N+(M<<6&4294967295|M>>>26),M=T+(N^(I|~C))+P[7]+1126891415&4294967295,T=I+(M<<10&4294967295|M>>>22),M=C+(I^(T|~N))+P[14]+2878612391&4294967295,C=T+(M<<15&4294967295|M>>>17),M=N+(T^(C|~I))+P[5]+4237533241&4294967295,N=C+(M<<21&4294967295|M>>>11),M=I+(C^(N|~T))+P[12]+1700485571&4294967295,I=N+(M<<6&4294967295|M>>>26),M=T+(N^(I|~C))+P[3]+2399980690&4294967295,T=I+(M<<10&4294967295|M>>>22),M=C+(I^(T|~N))+P[10]+4293915773&4294967295,C=T+(M<<15&4294967295|M>>>17),M=N+(T^(C|~I))+P[1]+2240044497&4294967295,N=C+(M<<21&4294967295|M>>>11),M=I+(C^(N|~T))+P[8]+1873313359&4294967295,I=N+(M<<6&4294967295|M>>>26),M=T+(N^(I|~C))+P[15]+4264355552&4294967295,T=I+(M<<10&4294967295|M>>>22),M=C+(I^(T|~N))+P[6]+2734768916&4294967295,C=T+(M<<15&4294967295|M>>>17),M=N+(T^(C|~I))+P[13]+1309151649&4294967295,N=C+(M<<21&4294967295|M>>>11),M=I+(C^(N|~T))+P[4]+4149444226&4294967295,I=N+(M<<6&4294967295|M>>>26),M=T+(N^(I|~C))+P[11]+3174756917&4294967295,T=I+(M<<10&4294967295|M>>>22),M=C+(I^(T|~N))+P[2]+718787259&4294967295,C=T+(M<<15&4294967295|M>>>17),M=N+(T^(C|~I))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(C+(M<<21&4294967295|M>>>11))&4294967295,R.g[2]=R.g[2]+C&4294967295,R.g[3]=R.g[3]+T&4294967295}r.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var N=I-this.blockSize,P=this.B,C=this.h,T=0;T<I;){if(C==0)for(;T<=N;)i(this,R,T),T+=this.blockSize;if(typeof R=="string"){for(;T<I;)if(P[C++]=R.charCodeAt(T++),C==this.blockSize){i(this,P),C=0;break}}else for(;T<I;)if(P[C++]=R[T++],C==this.blockSize){i(this,P),C=0;break}}this.h=C,this.o+=I},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var N=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=N&255,N/=256;for(this.u(R),R=Array(16),I=N=0;4>I;++I)for(var P=0;32>P;P+=8)R[N++]=this.g[I]>>>P&255;return R};function o(R,I){var N=a;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=I(R)}function s(R,I){this.h=I;for(var N=[],P=!0,C=R.length-1;0<=C;C--){var T=R[C]|0;P&&T==I||(N[C]=T,P=!1)}this.g=N}var a={};function u(R){return-128<=R&&128>R?o(R,function(I){return new s([I|0],0>I?-1:0)}):new s([R|0],0>R?-1:0)}function l(R){if(isNaN(R)||!isFinite(R))return f;if(0>R)return D(l(-R));for(var I=[],N=1,P=0;R>=N;P++)I[P]=R/N|0,N*=4294967296;return new s(I,0)}function d(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return D(d(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=l(Math.pow(I,8)),P=f,C=0;C<R.length;C+=8){var T=Math.min(8,R.length-C),M=parseInt(R.substring(C,C+T),I);8>T?(T=l(Math.pow(I,T)),P=P.j(T).add(l(M))):(P=P.j(N),P=P.add(l(M)))}return P}var f=u(0),m=u(1),g=u(16777216);n=s.prototype,n.m=function(){if(E(this))return-D(this).m();for(var R=0,I=1,N=0;N<this.g.length;N++){var P=this.i(N);R+=(0<=P?P:4294967296+P)*I,I*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(b(this))return"0";if(E(this))return"-"+D(this).toString(R);for(var I=l(Math.pow(R,6)),N=this,P="";;){var C=z(N,I).g;N=w(N,C.j(I));var T=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=C,b(N))return T+P;for(;6>T.length;)T="0"+T;P=T+P}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function b(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function E(R){return R.h==-1}n.l=function(R){return R=w(this,R),E(R)?-1:b(R)?0:1};function D(R){for(var I=R.g.length,N=[],P=0;P<I;P++)N[P]=~R.g[P];return new s(N,~R.h).add(m)}n.abs=function(){return E(this)?D(this):this},n.add=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],P=0,C=0;C<=I;C++){var T=P+(this.i(C)&65535)+(R.i(C)&65535),M=(T>>>16)+(this.i(C)>>>16)+(R.i(C)>>>16);P=M>>>16,T&=65535,M&=65535,N[C]=M<<16|T}return new s(N,N[N.length-1]&-2147483648?-1:0)};function w(R,I){return R.add(D(I))}n.j=function(R){if(b(this)||b(R))return f;if(E(this))return E(R)?D(this).j(D(R)):D(D(this).j(R));if(E(R))return D(this.j(D(R)));if(0>this.l(g)&&0>R.l(g))return l(this.m()*R.m());for(var I=this.g.length+R.g.length,N=[],P=0;P<2*I;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(var C=0;C<R.g.length;C++){var T=this.i(P)>>>16,M=this.i(P)&65535,B=R.i(C)>>>16,K=R.i(C)&65535;N[2*P+2*C]+=M*K,x(N,2*P+2*C),N[2*P+2*C+1]+=T*K,x(N,2*P+2*C+1),N[2*P+2*C+1]+=M*B,x(N,2*P+2*C+1),N[2*P+2*C+2]+=T*B,x(N,2*P+2*C+2)}for(P=0;P<I;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=I;P<2*I;P++)N[P]=0;return new s(N,0)};function x(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function F(R,I){this.g=R,this.h=I}function z(R,I){if(b(I))throw Error("division by zero");if(b(R))return new F(f,f);if(E(R))return I=z(D(R),I),new F(D(I.g),D(I.h));if(E(I))return I=z(R,D(I)),new F(D(I.g),I.h);if(30<R.g.length){if(E(R)||E(I))throw Error("slowDivide_ only works with positive integers.");for(var N=m,P=I;0>=P.l(R);)N=H(N),P=H(P);var C=Y(N,1),T=Y(P,1);for(P=Y(P,2),N=Y(N,2);!b(P);){var M=T.add(P);0>=M.l(R)&&(C=C.add(N),T=M),P=Y(P,1),N=Y(N,1)}return I=w(R,C.j(I)),new F(C,I)}for(C=f;0<=R.l(I);){for(N=Math.max(1,Math.floor(R.m()/I.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),T=l(N),M=T.j(I);E(M)||0<M.l(R);)N-=P,T=l(N),M=T.j(I);b(T)&&(T=m),C=C.add(T),R=w(R,M)}return new F(C,R)}n.A=function(R){return z(this,R).h},n.and=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],P=0;P<I;P++)N[P]=this.i(P)&R.i(P);return new s(N,this.h&R.h)},n.or=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],P=0;P<I;P++)N[P]=this.i(P)|R.i(P);return new s(N,this.h|R.h)},n.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],P=0;P<I;P++)N[P]=this.i(P)^R.i(P);return new s(N,this.h^R.h)};function H(R){for(var I=R.g.length+1,N=[],P=0;P<I;P++)N[P]=R.i(P)<<1|R.i(P-1)>>>31;return new s(N,R.h)}function Y(R,I){var N=I>>5;I%=32;for(var P=R.g.length-N,C=[],T=0;T<P;T++)C[T]=0<I?R.i(T+N)>>>I|R.i(T+N+1)<<32-I:R.i(T+N);return new s(C,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$D=i3.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,uu=i3.Integer=s}).apply(typeof r3<"u"?r3:typeof self<"u"?self:typeof window<"u"?window:{});var Bw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lu={};var WD,jZ,Lf,GD,tv,Uw,KD,QD,YD;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,A){return h==Array.prototype||h==Object.prototype||(h[_]=A.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bw=="object"&&Bw];for(var _=0;_<h.length;++_){var A=h[_];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=t(this);function i(h,_){if(_)e:{var A=r;h=h.split(".");for(var U=0;U<h.length-1;U++){var ue=h[U];if(!(ue in A))break e;A=A[ue]}h=h[h.length-1],U=A[h],_=_(U),_!=U&&_!=null&&e(A,h,{configurable:!0,writable:!0,value:_})}}function o(h,_){h instanceof String&&(h+="");var A=0,U=!1,ue={next:function(){if(!U&&A<h.length){var pe=A++;return{value:_(pe,h[pe]),done:!1}}return U=!0,{done:!0,value:void 0}}};return ue[Symbol.iterator]=function(){return ue},ue}i("Array.prototype.values",function(h){return h||function(){return o(this,function(_,A){return A})}});var s=s||{},a=this||self;function u(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function l(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function d(h,_,A){return h.call.apply(h.bind,arguments)}function f(h,_,A){if(!h)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var ue=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ue,U),h.apply(_,ue)}}return function(){return h.apply(_,arguments)}}function m(h,_,A){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function g(h,_){var A=Array.prototype.slice.call(arguments,1);return function(){var U=A.slice();return U.push.apply(U,arguments),h.apply(this,U)}}function b(h,_){function A(){}A.prototype=_.prototype,h.aa=_.prototype,h.prototype=new A,h.prototype.constructor=h,h.Qb=function(U,ue,pe){for(var Pe=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)Pe[Dt-2]=arguments[Dt];return _.prototype[ue].apply(U,Pe)}}function E(h){let _=h.length;if(0<_){let A=Array(_);for(let U=0;U<_;U++)A[U]=h[U];return A}return[]}function D(h,_){for(let A=1;A<arguments.length;A++){let U=arguments[A];if(u(U)){let ue=h.length||0,pe=U.length||0;h.length=ue+pe;for(let Pe=0;Pe<pe;Pe++)h[ue+Pe]=U[Pe]}else h.push(U)}}class w{constructor(_,A){this.i=_,this.j=A,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function x(h){return/^[\s\xa0]*$/.test(h)}function F(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function z(h){return z[" "](h),h}z[" "]=function(){};var H=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Y(h,_,A){for(let U in h)_.call(A,h[U],U,h)}function R(h,_){for(let A in h)_.call(void 0,h[A],A,h)}function I(h){let _={};for(let A in h)_[A]=h[A];return _}let N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,_){let A,U;for(let ue=1;ue<arguments.length;ue++){U=arguments[ue];for(A in U)h[A]=U[A];for(let pe=0;pe<N.length;pe++)A=N[pe],Object.prototype.hasOwnProperty.call(U,A)&&(h[A]=U[A])}}function C(h){var _=1;h=h.split(":");let A=[];for(;0<_&&h.length;)A.push(h.shift()),_--;return h.length&&A.push(h.join(":")),A}function T(h){a.setTimeout(()=>{throw h},0)}function M(){var h=se;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class B{constructor(){this.h=this.g=null}add(_,A){let U=K.get();U.set(_,A),this.h?this.h.next=U:this.g=U,this.h=U}}var K=new w(()=>new ee,h=>h.reset());class ee{constructor(){this.next=this.g=this.h=null}set(_,A){this.h=_,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let J,ne=!1,se=new B,ce=()=>{let h=a.Promise.resolve(void 0);J=()=>{h.then(Ce)}};var Ce=()=>{for(var h;h=M();){try{h.h.call(h.g)}catch(A){T(A)}var _=K;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}ne=!1};function k(){this.s=this.s,this.C=this.C}k.prototype.s=!1,k.prototype.ma=function(){this.s||(this.s=!0,this.N())},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var G=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{let A=()=>{};a.addEventListener("test",A,_),a.removeEventListener("test",A,_)}catch{}return h}();function te(h,_){if(W.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var A=this.type=h.type,U=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(H){e:{try{z(_.nodeName);var ue=!0;break e}catch{}ue=!1}ue||(_=null)}}else A=="mouseover"?_=h.fromElement:A=="mouseout"&&(_=h.toElement);this.relatedTarget=_,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ae[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&te.aa.h.call(this)}}b(te,W);var ae={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),ye=0;function _e(h,_,A,U,ue){this.listener=h,this.proxy=null,this.src=_,this.type=A,this.capture=!!U,this.ha=ue,this.key=++ye,this.da=this.fa=!1}function Oe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ke(h){this.src=h,this.g={},this.h=0}ke.prototype.add=function(h,_,A,U,ue){var pe=h.toString();h=this.g[pe],h||(h=this.g[pe]=[],this.h++);var Pe=qe(h,_,U,ue);return-1<Pe?(_=h[Pe],A||(_.fa=!1)):(_=new _e(_,this.src,pe,!!U,ue),_.fa=A,h.push(_)),_};function ze(h,_){var A=_.type;if(A in h.g){var U=h.g[A],ue=Array.prototype.indexOf.call(U,_,void 0),pe;(pe=0<=ue)&&Array.prototype.splice.call(U,ue,1),pe&&(Oe(_),h.g[A].length==0&&(delete h.g[A],h.h--))}}function qe(h,_,A,U){for(var ue=0;ue<h.length;++ue){var pe=h[ue];if(!pe.da&&pe.listener==_&&pe.capture==!!A&&pe.ha==U)return ue}return-1}var ft="closure_lm_"+(1e6*Math.random()|0),Se={};function X(h,_,A,U,ue){if(U&&U.once)return Le(h,_,A,U,ue);if(Array.isArray(_)){for(var pe=0;pe<_.length;pe++)X(h,_[pe],A,U,ue);return null}return A=Vt(A),h&&h[fe]?h.K(_,A,l(U)?!!U.capture:!!U,ue):St(h,_,A,!1,U,ue)}function St(h,_,A,U,ue,pe){if(!_)throw Error("Invalid event type");var Pe=l(ue)?!!ue.capture:!!ue,Dt=Et(h);if(Dt||(h[ft]=Dt=new ke(h)),A=Dt.add(_,A,U,Pe,pe),A.proxy)return A;if(U=ot(),A.proxy=U,U.src=h,U.listener=A,h.addEventListener)G||(ue=Pe),ue===void 0&&(ue=!1),h.addEventListener(_.toString(),U,ue);else if(h.attachEvent)h.attachEvent($e(_.toString()),U);else if(h.addListener&&h.removeListener)h.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return A}function ot(){function h(A){return _.call(h.src,h.listener,A)}let _=lt;return h}function Le(h,_,A,U,ue){if(Array.isArray(_)){for(var pe=0;pe<_.length;pe++)Le(h,_[pe],A,U,ue);return null}return A=Vt(A),h&&h[fe]?h.L(_,A,l(U)?!!U.capture:!!U,ue):St(h,_,A,!0,U,ue)}function Be(h,_,A,U,ue){if(Array.isArray(_))for(var pe=0;pe<_.length;pe++)Be(h,_[pe],A,U,ue);else U=l(U)?!!U.capture:!!U,A=Vt(A),h&&h[fe]?(h=h.i,_=String(_).toString(),_ in h.g&&(pe=h.g[_],A=qe(pe,A,U,ue),-1<A&&(Oe(pe[A]),Array.prototype.splice.call(pe,A,1),pe.length==0&&(delete h.g[_],h.h--)))):h&&(h=Et(h))&&(_=h.g[_.toString()],h=-1,_&&(h=qe(_,A,U,ue)),(A=-1<h?_[h]:null)&&Ke(A))}function Ke(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[fe])ze(_.i,h);else{var A=h.type,U=h.proxy;_.removeEventListener?_.removeEventListener(A,U,h.capture):_.detachEvent?_.detachEvent($e(A),U):_.addListener&&_.removeListener&&_.removeListener(U),(A=Et(_))?(ze(A,h),A.h==0&&(A.src=null,_[ft]=null)):Oe(h)}}}function $e(h){return h in Se?Se[h]:Se[h]="on"+h}function lt(h,_){if(h.da)h=!0;else{_=new te(_,this);var A=h.listener,U=h.ha||h.src;h.fa&&Ke(h),h=A.call(U,_)}return h}function Et(h){return h=h[ft],h instanceof ke?h:null}var Tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vt(h){return typeof h=="function"?h:(h[Tt]||(h[Tt]=function(_){return h.handleEvent(_)}),h[Tt])}function _t(){k.call(this),this.i=new ke(this),this.M=this,this.F=null}b(_t,k),_t.prototype[fe]=!0,_t.prototype.removeEventListener=function(h,_,A,U){Be(this,h,_,A,U)};function Rt(h,_){var A,U=h.F;if(U)for(A=[];U;U=U.F)A.push(U);if(h=h.M,U=_.type||_,typeof _=="string")_=new W(_,h);else if(_ instanceof W)_.target=_.target||h;else{var ue=_;_=new W(U,h),P(_,ue)}if(ue=!0,A)for(var pe=A.length-1;0<=pe;pe--){var Pe=_.g=A[pe];ue=gt(Pe,U,!0,_)&&ue}if(Pe=_.g=h,ue=gt(Pe,U,!0,_)&&ue,ue=gt(Pe,U,!1,_)&&ue,A)for(pe=0;pe<A.length;pe++)Pe=_.g=A[pe],ue=gt(Pe,U,!1,_)&&ue}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var A=h.g[_],U=0;U<A.length;U++)Oe(A[U]);delete h.g[_],h.h--}}this.F=null},_t.prototype.K=function(h,_,A,U){return this.i.add(String(h),_,!1,A,U)},_t.prototype.L=function(h,_,A,U){return this.i.add(String(h),_,!0,A,U)};function gt(h,_,A,U){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var ue=!0,pe=0;pe<_.length;++pe){var Pe=_[pe];if(Pe&&!Pe.da&&Pe.capture==A){var Dt=Pe.listener,_n=Pe.ha||Pe.src;Pe.fa&&ze(h.i,Pe),ue=Dt.call(_n,U)!==!1&&ue}}return ue&&!U.defaultPrevented}function Ht(h,_,A){if(typeof h=="function")A&&(h=m(h,A));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function Ye(h){h.g=Ht(()=>{h.g=null,h.i&&(h.i=!1,Ye(h))},h.l);let _=h.h;h.h=null,h.m.apply(null,_)}class Lr extends k{constructor(_,A){super(),this.m=_,this.l=A,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ye(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gt(h){k.call(this),this.h=h,this.g={}}b(Gt,k);var Mi=[];function mn(h){Y(h.g,function(_,A){this.g.hasOwnProperty(A)&&Ke(_)},h),h.g={}}Gt.prototype.N=function(){Gt.aa.N.call(this),mn(this)},Gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var In=a.JSON.stringify,Do=a.JSON.parse,cn=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function ts(){}ts.prototype.h=null;function Bn(h){return h.h||(h.h=h.i())}function Ri(){}var fi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ln(){W.call(this,"d")}b(Ln,W);function It(){W.call(this,"c")}b(It,W);var Kt={},Vs=null;function Jn(){return Vs=Vs||new _t}Kt.La="serverreachability";function Qi(h){W.call(this,Kt.La,h)}b(Qi,W);function Xr(h){let _=Jn();Rt(_,new Qi(_))}Kt.STAT_EVENT="statevent";function pt(h,_){W.call(this,Kt.STAT_EVENT,h),this.stat=_}b(pt,W);function Tn(h){let _=Jn();Rt(_,new pt(_,h))}Kt.Ma="timingevent";function Yi(h,_){W.call(this,Kt.Ma,h),this.size=_}b(Yi,W);function vr(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Un(){this.g=!0}Un.prototype.xa=function(){this.g=!1};function Xn(h,_,A,U,ue,pe){h.info(function(){if(h.g)if(pe)for(var Pe="",Dt=pe.split("&"),_n=0;_n<Dt.length;_n++){var At=Dt[_n].split("=");if(1<At.length){var xn=At[0];At=At[1];var sr=xn.split("_");Pe=2<=sr.length&&sr[1]=="type"?Pe+(xn+"="+At+"&"):Pe+(xn+"=redacted&")}}else Pe=null;else Pe=pe;return"XMLHTTP REQ ("+U+") [attempt "+ue+"]: "+_+`
`+A+`
`+Pe})}function pi(h,_,A,U,ue,pe,Pe){h.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ue+"]: "+_+`
`+A+`
`+pe+" "+Pe})}function Zi(h,_,A,U){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ji(h,A)+(U?" "+U:"")})}function ns(h,_){h.info(function(){return"TIMEOUT: "+_})}Un.prototype.info=function(){};function Ji(h,_){if(!h.g)return _;if(!_)return null;try{var A=JSON.parse(_);if(A){for(h=0;h<A.length;h++)if(Array.isArray(A[h])){var U=A[h];if(!(2>U.length)){var ue=U[1];if(Array.isArray(ue)&&!(1>ue.length)){var pe=ue[0];if(pe!="noop"&&pe!="stop"&&pe!="close")for(var Pe=1;Pe<ue.length;Pe++)ue[Pe]=""}}}}return In(A)}catch{return _}}var ei={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ki;function Ur(){}b(Ur,ts),Ur.prototype.g=function(){return new XMLHttpRequest},Ur.prototype.i=function(){return{}},ki=new Ur;function Dr(h,_,A,U){this.j=h,this.i=_,this.l=A,this.R=U||1,this.U=new Gt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new js}function js(){this.i=null,this.g="",this.h=!1}var Ia={},Bs={};function Us(h,_,A){h.L=1,h.v=Cu(Oi(_)),h.m=A,h.P=!0,Ca(h,null)}function Ca(h,_){h.F=Date.now(),wu(h),h.A=Oi(h.v);var A=h.A,U=h.R;Array.isArray(U)||(U=[String(U)]),Kd(A.i,"t",U),h.C=0,A=h.j.J,h.h=new js,h.g=Z(h.j,A?_:null,!h.m),0<h.O&&(h.M=new Lr(m(h.Y,h,h.g),h.O)),_=h.U,A=h.g,U=h.ca;var ue="readystatechange";Array.isArray(ue)||(ue&&(Mi[0]=ue.toString()),ue=Mi);for(var pe=0;pe<ue.length;pe++){var Pe=X(A,ue[pe],U||_.handleEvent,!1,_.h||_);if(!Pe)break;_.g[Pe.key]=Pe}_=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Xr(),Xn(h.i,h.u,h.A,h.l,h.R,h.m)}Dr.prototype.ca=function(h){h=h.target;let _=this.M;_&&no(h)==3?_.j():this.Y(h)},Dr.prototype.Y=function(h){try{if(h==this.g)e:{let sr=no(this.g);var _=this.g.Ba();let Ro=this.g.Z();if(!(3>sr)&&(sr!=3||this.g&&(this.h.h||this.g.oa()||ss(this.g)))){this.J||sr!=4||_==7||(_==8||0>=Ro?Xr(3):Xr(2)),bu(this);var A=this.g.Z();this.X=A;t:if(Ql(this)){var U=ss(this.g);h="";var ue=U.length,pe=no(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xi(this),Da(this);var Pe="";break t}this.h.i=new a.TextDecoder}for(_=0;_<ue;_++)this.h.h=!0,h+=this.h.i.decode(U[_],{stream:!(pe&&_==ue-1)});U.length=0,this.h.g+=h,this.C=0,Pe=this.h.g}else Pe=this.g.oa();if(this.o=A==200,pi(this.i,this.u,this.A,this.l,this.R,sr,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Dt,_n=this.g;if((Dt=_n.g?_n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Dt)){var At=Dt;break t}}At=null}if(A=At)Zi(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yl(this,A);else{this.o=!1,this.s=3,Tn(12),Xi(this),Da(this);break e}}if(this.P){A=!0;let qr;for(;!this.J&&this.C<Pe.length;)if(qr=Np(this,Pe),qr==Bs){sr==4&&(this.s=4,Tn(14),A=!1),Zi(this.i,this.l,null,"[Incomplete Response]");break}else if(qr==Ia){this.s=4,Tn(15),Zi(this.i,this.l,Pe,"[Invalid Chunk]"),A=!1;break}else Zi(this.i,this.l,qr,null),Yl(this,qr);if(Ql(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sr!=4||Pe.length!=0||this.h.h||(this.s=1,Tn(16),A=!1),this.o=this.o&&A,!A)Zi(this.i,this.l,Pe,"[Invalid Chunked Response]"),Xi(this),Da(this);else if(0<Pe.length&&!this.W){this.W=!0;var xn=this.j;xn.g==this&&xn.ba&&!xn.M&&(xn.j.info("Great, no buffering proxy detected. Bytes received: "+Pe.length),uc(xn),xn.M=!0,Tn(11))}}else Zi(this.i,this.l,Pe,null),Yl(this,Pe);sr==4&&Xi(this),this.o&&!this.J&&(sr==4?Pu(this.j,this):(this.o=!1,wu(this)))}else ro(this.g),A==400&&0<Pe.indexOf("Unknown SID")?(this.s=3,Tn(12)):(this.s=0,Tn(13)),Xi(this),Da(this)}}}catch{}finally{}};function Ql(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Np(h,_){var A=h.C,U=_.indexOf(`
`,A);return U==-1?Bs:(A=Number(_.substring(A,U)),isNaN(A)?Ia:(U+=1,U+A>_.length?Bs:(_=_.slice(U,U+A),h.C=U+A,_)))}Dr.prototype.cancel=function(){this.J=!0,Xi(this)};function wu(h){h.S=Date.now()+h.I,Sa(h,h.I)}function Sa(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=vr(m(h.ba,h),_)}function bu(h){h.B&&(a.clearTimeout(h.B),h.B=null)}Dr.prototype.ba=function(){this.B=null;let h=Date.now();0<=h-this.S?(ns(this.i,this.A),this.L!=2&&(Xr(),Tn(17)),Xi(this),this.s=2,Da(this)):Sa(this,this.S-h)};function Da(h){h.j.G==0||h.J||Pu(h.j,h)}function Xi(h){bu(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,mn(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Yl(h,_){try{var A=h.j;if(A.G!=0&&(A.g==h||qn(A.h,h))){if(!h.K&&qn(A.h,h)&&A.G==3){try{var U=A.Da.g.parse(_)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ue=U;if(ue[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<h.F)Mo(A),us(A);else break e;Ru(A),Tn(18)}}else A.za=ue[1],0<A.za-A.T&&37500>ue[2]&&A.F&&A.v==0&&!A.C&&(A.C=vr(m(A.Za,A),6e3));if(1>=zd(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else io(A,11)}else if((h.K||A.g==h)&&Mo(A),!x(_))for(ue=A.Da.g.parse(_),_=0;_<ue.length;_++){let At=ue[_];if(A.T=At[0],At=At[1],A.G==2)if(At[0]=="c"){A.K=At[1],A.ia=At[2];let xn=At[3];xn!=null&&(A.la=xn,A.j.info("VER="+A.la));let sr=At[4];sr!=null&&(A.Aa=sr,A.j.info("SVER="+A.Aa));let Ro=At[5];Ro!=null&&typeof Ro=="number"&&0<Ro&&(U=1.5*Ro,A.L=U,A.j.info("backChannelRequestTimeoutMs_="+U)),U=A;let qr=h.g;if(qr){let cs=qr.g?qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cs){var pe=U.h;pe.g||cs.indexOf("spdy")==-1&&cs.indexOf("quic")==-1&&cs.indexOf("h2")==-1||(pe.j=pe.l,pe.g=new Set,pe.h&&(Eu(pe,pe.h),pe.h=null))}if(U.D){let Pa=qr.g?qr.g.getResponseHeader("X-HTTP-Session-Id"):null;Pa&&(U.ya=Pa,vn(U.I,U.D,Pa))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-h.F,A.j.info("Handshake RTT: "+A.R+"ms")),U=A;var Pe=h;if(U.qa=L(U,U.J?U.ia:null,U.W),Pe.K){Zl(U.h,Pe);var Dt=Pe,_n=U.L;_n&&(Dt.I=_n),Dt.B&&(bu(Dt),wu(Dt)),U.g=Pe}else Mu(U);0<A.i.length&&zs(A)}else At[0]!="stop"&&At[0]!="close"||io(A,7);else A.G==3&&(At[0]=="stop"||At[0]=="close"?At[0]=="stop"?io(A,7):oc(A):At[0]!="noop"&&A.l&&A.l.ta(At),A.v=0)}}Xr(4)}catch{}}var qd=class{constructor(h,_){this.g=h,this.map=_}};function Hd(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Aa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function zd(h){return h.h?1:h.g?h.g.size:0}function qn(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Eu(h,_){h.g?h.g.add(_):h.h=_}function Zl(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Hd.prototype.cancel=function(){if(this.i=Jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let h of this.g.values())h.cancel();this.g.clear()}};function Jl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(let A of h.g.values())_=_.concat(A.D);return _}return E(h.i)}function Xl(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(u(h)){for(var _=[],A=h.length,U=0;U<A;U++)_.push(h[U]);return _}_=[],A=0;for(U in h)_[A++]=h[U];return _}function Mp(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||typeof h=="string"){var _=[];h=h.length;for(var A=0;A<h;A++)_.push(A);return _}_=[],A=0;for(let U in h)_[A++]=U;return _}}}function Li(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(u(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var A=Mp(h),U=Xl(h),ue=U.length,pe=0;pe<ue;pe++)_.call(void 0,U[pe],A&&A[pe],h)}var Ta=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ti(h,_){if(h){h=h.split("&");for(var A=0;A<h.length;A++){var U=h[A].indexOf("="),ue=null;if(0<=U){var pe=h[A].substring(0,U);ue=h[A].substring(U+1)}else pe=h[A];_(pe,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function eo(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof eo){this.h=h.h,Iu(this,h.j),this.o=h.o,this.g=h.g,xa(this,h.s),this.l=h.l;var _=h.i,A=new er;A.i=_.i,_.g&&(A.g=new Map(_.g),A.h=_.h),$d(this,A),this.m=h.m}else h&&(_=String(h).match(Ta))?(this.h=!1,Iu(this,_[1]||"",!0),this.o=rs(_[2]||""),this.g=rs(_[3]||"",!0),xa(this,_[4]),this.l=rs(_[5]||"",!0),$d(this,_[6]||"",!0),this.m=rs(_[7]||"")):(this.h=!1,this.i=new er(null,this.h))}eo.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Na(_,Wd,!0),":");var A=this.g;return(A||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Na(_,Wd,!0),"@"),h.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&h.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&h.push("/"),h.push(Na(A,A.charAt(0)=="/"?Su:is,!0))),(A=this.i.toString())&&h.push("?",A),(A=this.m)&&h.push("#",Na(A,Gd)),h.join("")};function Oi(h){return new eo(h)}function Iu(h,_,A){h.j=A?rs(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function xa(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function $d(h,_,A){_ instanceof er?(h.i=_,To(h.i,h.h)):(A||(_=Na(_,Du)),h.i=new er(_,h.h))}function vn(h,_,A){h.i.set(_,A)}function Cu(h){return vn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function rs(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Na(h,_,A){return typeof h=="string"?(h=encodeURI(h).replace(_,Rp),A&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Rp(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Wd=/[#\/\?@]/g,is=/[#\?:]/g,Su=/[#\?]/g,Du=/[#\?@]/g,Gd=/#/g;function er(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Ao(h){h.g||(h.g=new Map,h.h=0,h.i&&ti(h.i,function(_,A){h.add(decodeURIComponent(_.replace(/\+/g," ")),A)}))}n=er.prototype,n.add=function(h,_){Ao(this),this.i=null,h=qs(this,h);var A=this.g.get(h);return A||this.g.set(h,A=[]),A.push(_),this.h+=1,this};function ec(h,_){Ao(h),_=qs(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Ct(h,_){return Ao(h),_=qs(h,_),h.g.has(_)}n.forEach=function(h,_){Ao(this),this.g.forEach(function(A,U){A.forEach(function(ue){h.call(_,ue,U,this)},this)},this)},n.na=function(){Ao(this);let h=Array.from(this.g.values()),_=Array.from(this.g.keys()),A=[];for(let U=0;U<_.length;U++){let ue=h[U];for(let pe=0;pe<ue.length;pe++)A.push(_[U])}return A},n.V=function(h){Ao(this);let _=[];if(typeof h=="string")Ct(this,h)&&(_=_.concat(this.g.get(qs(this,h))));else{h=Array.from(this.g.values());for(let A=0;A<h.length;A++)_=_.concat(h[A])}return _},n.set=function(h,_){return Ao(this),this.i=null,h=qs(this,h),Ct(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Kd(h,_,A){ec(h,_),0<A.length&&(h.i=null,h.g.set(qs(h,_),E(A)),h.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let h=[],_=Array.from(this.g.keys());for(var A=0;A<_.length;A++){var U=_[A];let pe=encodeURIComponent(String(U)),Pe=this.V(U);for(U=0;U<Pe.length;U++){var ue=pe;Pe[U]!==""&&(ue+="="+encodeURIComponent(String(Pe[U]))),h.push(ue)}}return this.i=h.join("&")};function qs(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function To(h,_){_&&!h.j&&(Ao(h),h.i=null,h.g.forEach(function(A,U){var ue=U.toLowerCase();U!=ue&&(ec(this,U),Kd(this,ue,A))},h)),h.j=_}function Qd(h,_){let A=new Un;if(a.Image){let U=new Image;U.onload=g(gi,A,"TestLoadImage: loaded",!0,_,U),U.onerror=g(gi,A,"TestLoadImage: error",!1,_,U),U.onabort=g(gi,A,"TestLoadImage: abort",!1,_,U),U.ontimeout=g(gi,A,"TestLoadImage: timeout",!1,_,U),a.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=h}else _(!1)}function Yd(h,_){let A=new Un,U=new AbortController,ue=setTimeout(()=>{U.abort(),gi(A,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:U.signal}).then(pe=>{clearTimeout(ue),pe.ok?gi(A,"TestPingServer: ok",!0,_):gi(A,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(ue),gi(A,"TestPingServer: error",!1,_)})}function gi(h,_,A,U,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),U(A)}catch{}}function tc(){this.g=new cn}function Pp(h,_,A){let U=A||"";try{Li(h,function(ue,pe){let Pe=ue;l(ue)&&(Pe=In(ue)),_.push(U+pe+"="+encodeURIComponent(Pe))})}catch(ue){throw _.push(U+"type="+encodeURIComponent("_badmap")),ue}}function Ma(h){this.l=h.Ub||null,this.j=h.eb||!1}b(Ma,ts),Ma.prototype.g=function(){return new Au(this.l,this.j)},Ma.prototype.i=function(h){return function(){return h}}({});function Au(h,_){_t.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Au,_t),n=Au.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Fi(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,to(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tu(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tu(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?to(this):Fi(this),this.readyState==3&&Tu(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,to(this))},n.Qa=function(h){this.g&&(this.response=h,to(this))},n.ga=function(){this.g&&to(this)};function to(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Fi(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let h=[],_=this.h.entries();for(var A=_.next();!A.done;)A=A.value,h.push(A[0]+": "+A[1]),A=_.next();return h.join(`\r
`)};function Fi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Au.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Zd(h){let _="";return Y(h,function(A,U){_+=U,_+=":",_+=A,_+=`\r
`}),_}function os(h,_,A){e:{for(U in A){var U=!1;break e}U=!0}U||(A=Zd(A),typeof h=="string"?A!=null&&encodeURIComponent(String(A)):vn(h,_,A))}function Cn(h){_t.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Cn,_t);var xu=/^https?$/i,Jd=["POST","PUT"];n=Cn.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,A,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ki.g(),this.v=this.o?Bn(this.o):Bn(ki),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(pe){nc(this,pe);return}if(h=A||"",A=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ue in U)A.set(ue,U[ue]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(let pe of U.keys())A.set(pe,U.get(pe));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(A.keys()).find(pe=>pe.toLowerCase()=="content-type"),ue=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Jd,_,void 0))||U||ue||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[pe,Pe]of A)this.g.setRequestHeader(pe,Pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xo(this),this.u=!0,this.g.send(h),this.u=!1}catch(pe){nc(this,pe)}};function nc(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,rc(h),mi(h)}function rc(h){h.A||(h.A=!0,Rt(h,"complete"),Rt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Rt(this,"complete"),Rt(this,"abort"),mi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mi(this,!0)),Cn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ic(this):this.bb())},n.bb=function(){ic(this)};function ic(h){if(h.h&&typeof s<"u"&&(!h.v[1]||no(h)!=4||h.Z()!=2)){if(h.u&&no(h)==4)Ht(h.Ea,0,h);else if(Rt(h,"readystatechange"),no(h)==4){h.h=!1;try{let Pe=h.Z();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var A;if(!(A=_)){var U;if(U=Pe===0){var ue=String(h.D).match(Ta)[1]||null;!ue&&a.self&&a.self.location&&(ue=a.self.location.protocol.slice(0,-1)),U=!xu.test(ue?ue.toLowerCase():"")}A=U}if(A)Rt(h,"complete"),Rt(h,"success");else{h.m=6;try{var pe=2<no(h)?h.g.statusText:""}catch{pe=""}h.l=pe+" ["+h.Z()+"]",rc(h)}}finally{mi(h)}}}}function mi(h,_){if(h.g){xo(h);let A=h.g,U=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Rt(h,"ready");try{A.onreadystatechange=U}catch{}}}function xo(h){h.I&&(a.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function no(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<no(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Do(_)}};function ss(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ro(h){let _={};h=(h.g&&2<=no(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<h.length;U++){if(x(h[U]))continue;var A=C(h[U]);let ue=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();let pe=_[ue]||[];_[ue]=pe,pe.push(A)}R(_,function(U){return U.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function as(h,_,A){return A&&A.internalChannelParams&&A.internalChannelParams[h]||_}function Hs(h){this.Aa=0,this.i=[],this.j=new Un,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=as("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=as("baseRetryDelayMs",5e3,h),this.cb=as("retryDelaySeedMs",1e4,h),this.Wa=as("forwardChannelMaxRetries",2,h),this.wa=as("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Hd(h&&h.concurrentRequestLimit),this.Da=new tc,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Hs.prototype,n.la=8,n.G=1,n.connect=function(h,_,A,U){Tn(0),this.W=h,this.H=_||{},A&&U!==void 0&&(this.H.OSID=A,this.H.OAID=U),this.F=this.X,this.I=L(this,null,this.W),zs(this)};function oc(h){if(Xd(h),h.G==3){var _=h.U++,A=Oi(h.I);if(vn(A,"SID",h.K),vn(A,"RID",_),vn(A,"TYPE","terminate"),No(h,A),_=new Dr(h,h.j,_),_.L=2,_.v=Cu(Oi(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!A&&a.Image&&(new Image().src=_.v,A=!0),A||(_.g=Z(_.j,null),_.g.ea(_.v)),_.F=Date.now(),wu(_)}v(h)}function us(h){h.g&&(uc(h),h.g.cancel(),h.g=null)}function Xd(h){us(h),h.u&&(a.clearTimeout(h.u),h.u=null),Mo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function zs(h){if(!Aa(h.h)&&!h.s){h.s=!0;var _=h.Ga;J||ce(),ne||(J(),ne=!0),se.add(_,h),h.B=0}}function sc(h,_){return zd(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=vr(m(h.Ga,h,_),ls(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;let ue=new Dr(this,this.j,h),pe=this.o;if(this.S&&(pe?(pe=I(pe),P(pe,this.S)):pe=this.S),this.m!==null||this.O||(ue.H=pe,pe=null),this.P)e:{for(var _=0,A=0;A<this.i.length;A++){t:{var U=this.i[A];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(_+=U,4096<_){_=A;break e}if(_===4096||A===this.i.length-1){_=A+1;break e}}_=1e3}else _=1e3;_=Nu(this,ue,_),A=Oi(this.I),vn(A,"RID",h),vn(A,"CVER",22),this.D&&vn(A,"X-HTTP-Session-Id",this.D),No(this,A),pe&&(this.O?_="headers="+encodeURIComponent(String(Zd(pe)))+"&"+_:this.m&&os(A,this.m,pe)),Eu(this.h,ue),this.Ua&&vn(A,"TYPE","init"),this.P?(vn(A,"$req",_),vn(A,"SID","null"),ue.T=!0,Us(ue,A,null)):Us(ue,A,_),this.G=2}}else this.G==3&&(h?ac(this,h):this.i.length==0||Aa(this.h)||ac(this))};function ac(h,_){var A;_?A=_.l:A=h.U++;let U=Oi(h.I);vn(U,"SID",h.K),vn(U,"RID",A),vn(U,"AID",h.T),No(h,U),h.m&&h.o&&os(U,h.m,h.o),A=new Dr(h,h.j,A,h.B+1),h.m===null&&(A.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Nu(h,A,1e3),A.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Eu(h.h,A),Us(A,U,_)}function No(h,_){h.H&&Y(h.H,function(A,U){vn(_,U,A)}),h.l&&Li({},function(A,U){vn(_,U,A)})}function Nu(h,_,A){A=Math.min(h.i.length,A);var U=h.l?m(h.l.Na,h.l,h):null;e:{var ue=h.i;let pe=-1;for(;;){let Pe=["count="+A];pe==-1?0<A?(pe=ue[0].g,Pe.push("ofs="+pe)):pe=0:Pe.push("ofs="+pe);let Dt=!0;for(let _n=0;_n<A;_n++){let At=ue[_n].g,xn=ue[_n].map;if(At-=pe,0>At)pe=Math.max(0,ue[_n].g-100),Dt=!1;else try{Pp(xn,Pe,"req"+At+"_")}catch{U&&U(xn)}}if(Dt){U=Pe.join("&");break e}}}return h=h.i.splice(0,A),_.D=h,U}function Mu(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;J||ce(),ne||(J(),ne=!0),se.add(_,h),h.v=0}}function Ru(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=vr(m(h.Fa,h),ls(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Ra(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=vr(m(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tn(10),us(this),Ra(this))};function uc(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function Ra(h){h.g=new Dr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Oi(h.qa);vn(_,"RID","rpc"),vn(_,"SID",h.K),vn(_,"AID",h.T),vn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&vn(_,"TO",h.ja),vn(_,"TYPE","xmlhttp"),No(h,_),h.m&&h.o&&os(_,h.m,h.o),h.L&&(h.g.I=h.L);var A=h.g;h=h.ia,A.L=1,A.v=Cu(Oi(_)),A.m=null,A.P=!0,Ca(A,h)}n.Za=function(){this.C!=null&&(this.C=null,us(this),Ru(this),Tn(19))};function Mo(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function Pu(h,_){var A=null;if(h.g==_){Mo(h),uc(h),h.g=null;var U=2}else if(qn(h.h,_))A=_.D,Zl(h.h,_),U=1;else return;if(h.G!=0){if(_.o)if(U==1){A=_.m?_.m.length:0,_=Date.now()-_.F;var ue=h.B;U=Jn(),Rt(U,new Yi(U,A)),zs(h)}else Mu(h);else if(ue=_.s,ue==3||ue==0&&0<_.X||!(U==1&&sc(h,_)||U==2&&Ru(h)))switch(A&&0<A.length&&(_=h.h,_.i=_.i.concat(A)),ue){case 1:io(h,5);break;case 4:io(h,10);break;case 3:io(h,6);break;default:io(h,2)}}}function ls(h,_){let A=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(A*=2),A*_}function io(h,_){if(h.j.info("Error code "+_),_==2){var A=m(h.fb,h),U=h.Xa;let ue=!U;U=new eo(U||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Iu(U,"https"),Cu(U),ue?Qd(U.toString(),A):Yd(U.toString(),A)}else Tn(2);h.G=0,h.l&&h.l.sa(_),v(h),Xd(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Tn(2)):(this.j.info("Failed to ping google.com"),Tn(1))};function v(h){if(h.G=0,h.ka=[],h.l){let _=Jl(h.h);(_.length!=0||h.i.length!=0)&&(D(h.ka,_),D(h.ka,h.i),h.h.i.length=0,E(h.i),h.i.length=0),h.l.ra()}}function L(h,_,A){var U=A instanceof eo?Oi(A):new eo(A);if(U.g!="")_&&(U.g=_+"."+U.g),xa(U,U.s);else{var ue=a.location;U=ue.protocol,_=_?_+"."+ue.hostname:ue.hostname,ue=+ue.port;var pe=new eo(null);U&&Iu(pe,U),_&&(pe.g=_),ue&&xa(pe,ue),A&&(pe.l=A),U=pe}return A=h.D,_=h.ya,A&&_&&vn(U,A,_),vn(U,"VER",h.la),No(h,U),U}function Z(h,_,A){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Cn(new Ma({eb:A})):new Cn(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function re(){}n=re.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function he(){}he.prototype.g=function(h,_){return new we(h,_)};function we(h,_){_t.call(this),this.g=new Hs(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!x(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!x(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new st(this)}b(we,_t),we.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},we.prototype.close=function(){oc(this.g)},we.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var A={};A.__data__=h,h=A}else this.u&&(A={},A.__data__=In(h),h=A);_.i.push(new qd(_.Ya++,h)),_.G==3&&zs(_)},we.prototype.N=function(){this.g.l=null,delete this.j,oc(this.g),delete this.g,we.aa.N.call(this)};function Me(h){Ln.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(let A in _){h=A;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}b(Me,Ln);function Ze(){It.call(this),this.status=1}b(Ze,It);function st(h){this.g=h}b(st,re),st.prototype.ua=function(){Rt(this.g,"a")},st.prototype.ta=function(h){Rt(this.g,new Me(h))},st.prototype.sa=function(h){Rt(this.g,new Ze)},st.prototype.ra=function(){Rt(this.g,"b")},he.prototype.createWebChannel=he.prototype.g,we.prototype.send=we.prototype.o,we.prototype.open=we.prototype.m,we.prototype.close=we.prototype.close,YD=lu.createWebChannelTransport=function(){return new he},QD=lu.getStatEventTarget=function(){return Jn()},KD=lu.Event=Kt,Uw=lu.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ei.NO_ERROR=0,ei.TIMEOUT=8,ei.HTTP_ERROR=6,tv=lu.ErrorCode=ei,Pi.COMPLETE="complete",GD=lu.EventType=Pi,Ri.EventType=fi,fi.OPEN="a",fi.CLOSE="b",fi.ERROR="c",fi.MESSAGE="d",_t.prototype.listen=_t.prototype.K,Lf=lu.WebChannel=Ri,jZ=lu.FetchXmlHttpFactory=Ma,Cn.prototype.listenOnce=Cn.prototype.L,Cn.prototype.getLastError=Cn.prototype.Ka,Cn.prototype.getLastErrorCode=Cn.prototype.Ba,Cn.prototype.getStatus=Cn.prototype.Z,Cn.prototype.getResponseJson=Cn.prototype.Oa,Cn.prototype.getResponseText=Cn.prototype.oa,Cn.prototype.send=Cn.prototype.ea,Cn.prototype.setWithCredentials=Cn.prototype.Ha,WD=lu.XhrIo=Cn}).apply(typeof Bw<"u"?Bw:typeof self<"u"?self:typeof window<"u"?window:{});var o3="@firebase/firestore",s3="4.7.8";var Cr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");var wp="11.3.1";var Pl=new Wu("@firebase/firestore");function qf(){return Pl.logLevel}function y6(n){Pl.setLogLevel(n)}function Re(n,...e){if(Pl.logLevel<=Uo.DEBUG){let t=e.map(l5);Pl.debug(`Firestore (${wp}): ${n}`,...t)}}function fr(n,...e){if(Pl.logLevel<=Uo.ERROR){let t=e.map(l5);Pl.error(`Firestore (${wp}): ${n}`,...t)}}function Rs(n,...e){if(Pl.logLevel<=Uo.WARN){let t=e.map(l5);Pl.warn(`Firestore (${wp}): ${n}`,...t)}}function l5(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function tt(n="Unexpected state"){let e=`FIRESTORE (${wp}) INTERNAL ASSERTION FAILED: `+n;throw fr(e),new Error(e)}function it(n,e){n||tt()}function _6(n,e){n||tt()}function We(n,e){return n}var be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xe=class extends Kx{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Pr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var e1=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},iA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Cr.UNAUTHENTICATED))}shutdown(){}},oA=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},sA=class{constructor(e){this.t=e,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Pr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>Ee(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Pr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string"),new e1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string"),new Cr(e)}},aA=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},uA=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new aA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}},t1=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},lA=class{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Sy(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){it(this.o===void 0);let r=o=>{o.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,Re("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new t1(this.V));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(it(typeof t.token=="string"),this.R=t.token,new t1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function BZ(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var n1=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=BZ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Mt(n,e){return n<e?-1:n>e?1:0}function Zf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function w6(n){return n+"\0"}var a3=-62135596800,u3=1e6,Yn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*u3);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<a3)throw new xe(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/u3}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-a3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ct=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Yn(0,0))}static max(){return new n(new Yn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var l3="__name__",r1=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&tt(),r===void 0?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return uu.fromString(e.substring(4,e.length-2))}},sn=class n extends r1{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new xe(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},UZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pr=class n extends r1{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return UZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===l3}static keyField(){return new n([l3])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new xe(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new xe(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new xe(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new xe(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Ge=class n{constructor(e){this.path=e}static fromPath(e){return new n(sn.fromString(e))}static fromName(e){return new n(sn.fromString(e).popFirst(5))}static empty(){return new n(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&sn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new sn(e.slice()))}};var Jf=-1,Xf=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function cA(n){return n.fields.find(e=>e.kind===2)}function gd(n){return n.fields.filter(e=>e.kind!==2)}Xf.UNKNOWN_ID=-1;var Kf=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var pv=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Xo.min())}};function b6(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ct.fromTimestamp(r===1e9?new Yn(t+1,0):new Yn(t,r));return new Xo(i,Ge.empty(),e)}function E6(n){return new Xo(n.readTime,n.key,Jf)}var Xo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ct.min(),Ge.empty(),Jf)}static max(){return new n(ct.max(),Ge.empty(),Jf)}};function c5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ge.comparator(n.documentKey,e.documentKey),t!==0?t:Mt(n.largestBatchId,e.largestBatchId))}var I6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",i1=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zl(n){return Ee(this,null,function*(){if(n.code!==be.FAILED_PRECONDITION||n.message!==I6)throw n;Re("LocalStore","Unexpectedly lost primary lease")})}var ve=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Io="SimpleDb",o1=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Id(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new Pr,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Id(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{let i=d5(r.target.error);this.m.reject(new Id(e,i))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(Re(Io,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new hA(t)}},kl=class n{static delete(e){return Re(Io,"Removing database:",e),vd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!by())return!1;if(n.v())return!0;let e=Gp(),t=n.C(e),r=0<t&&t<10,i=C6(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,n.C(Gp())===12.2&&fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}N(e){return Ee(this,null,function*(){return this.db||(Re(Io,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Id(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new xe(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new xe(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Id(e,s))},i.onupgradeneeded=o=>{Re(Io,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.O.B(s,i.transaction,o.oldVersion,this.version).next(()=>{Re(Io,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db})}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return Ee(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.N(e);let a=o1.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.S(),l)).catch(l=>(a.abort(l),ve.reject(l))).toPromise();return u.catch(()=>{}),yield a.p,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(Re(Io,"Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function C6(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var dA=class{constructor(e){this.q=e,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.K=e}delete(){return vd(this.q.delete())}},Id=class extends xe{constructor(e,t){super(be.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function $l(n){return n.name==="IndexedDbTransactionError"}var hA=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Re(Io,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re(Io,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vd(r)}add(e){return Re(Io,"ADD",this.store.name,e,e),vd(this.store.add(e))}get(e){return vd(this.store.get(e)).next(t=>(t===void 0&&(t=null),Re(Io,"GET",this.store.name,e,t),t))}delete(e){return Re(Io,"DELETE",this.store.name,e),vd(this.store.delete(e))}count(){return Re(Io,"COUNT",this.store.name),vd(this.store.count())}G(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new ve((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.j(o,(a,u)=>{s.push(u)}).next(()=>s)}}H(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new ve((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}J(e,t){Re(Io,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Y=!1;let i=this.cursor(r);return this.j(i,(o,s,a)=>a.delete())}Z(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.j(i,t)}X(e){let t=this.cursor({});return new ve((r,i)=>{t.onerror=o=>{let s=d5(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}j(e,t){let r=[];return new ve((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new dA(a),l=t(a.primaryKey,a.value,u);if(l instanceof ve){let d=l.catch(f=>(u.done(),ve.reject(f)));r.push(d)}u.isDone?i():u.U===null?a.continue():a.continue(u.U)}}).next(()=>ve.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function vd(n){return new ve((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=d5(r.target.error);t(i)}})}var c3=!1;function d5(n){let e=kl.C(Gp());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return c3||(c3=!0,setTimeout(()=>{throw r},0)),r}}return n}var uv="IndexBackfiller",fA=class{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){Re(uv,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>Ee(this,null,function*(){this.task=null;try{let t=yield this.ee.ne();Re(uv,`Documents written: ${t}`)}catch(t){$l(t)?Re(uv,"Ignoring IndexedDB error during index backfill: ",t):yield zl(t)}yield this.te(6e4)}))}},pA=class{constructor(e,t){this.localStore=e,this.persistence=t}ne(e=50){return Ee(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))})}re(e,t){let r=new Set,i=t,o=!0;return ve.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return Re(uv,`Processing collection: ${s}`),this.ie(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.se(i,o)).next(a=>(Re(uv,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}se(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=E6(o);c5(s,r)>0&&(r=s)}),new Xo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Co=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this._e&&this._e(t),t}}n.ae=-1;return n})(),Ml=-1;function jv(n){return n==null}function gv(n){return n===0&&1/n==-1/0}function S6(n){return typeof n=="number"&&Number.isInteger(n)&&!gv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var s1="";function hi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=d3(e)),e=qZ(n.get(t),e);return d3(e)}function qZ(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case s1:t+="";break;default:t+=o}}return t}function d3(n){return n+s1+""}function pa(n){let e=n.length;if(it(e>=2),e===2)return it(n.charAt(0)===s1&&n.charAt(1)===""),sn.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(s1,o);switch((s<0||s>t)&&tt(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:tt()}o=s+2}return new sn(r)}var md="remoteDocuments",Bv="owner",Of="owner",mv="mutationQueues",HZ="userId",Ms="mutations",h3="batchId",bd="userMutationsIndex",f3=["userId","batchId"];function Gw(n,e){return[n,hi(e)]}function D6(n,e,t){return[n,hi(e),t]}var zZ={},ep="documentMutations",a1="remoteDocumentsV14",$Z=["prefixPath","collectionGroup","readTime","documentId"],Kw="documentKeyIndex",WZ=["prefixPath","collectionGroup","documentId"],A6="collectionGroupIndex",GZ=["collectionGroup","readTime","prefixPath","documentId"],vv="remoteDocumentGlobal",gA="remoteDocumentGlobalKey",tp="targets",T6="queryTargetsIndex",KZ=["canonicalId","targetId"],np="targetDocuments",QZ=["targetId","path"],h5="documentTargetsIndex",YZ=["path","targetId"],u1="targetGlobalKey",Cd="targetGlobal",yv="collectionParents",ZZ=["collectionId","parent"],rp="clientMetadata",JZ="clientId",ib="bundles",XZ="bundleId",ob="namedQueries",eJ="name",f5="indexConfiguration",tJ="indexId",mA="collectionGroupIndex",nJ="collectionGroup",l1="indexState",rJ=["indexId","uid"],x6="sequenceNumberIndex",iJ=["uid","sequenceNumber"],c1="indexEntries",oJ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],N6="documentKeyIndex",sJ=["indexId","uid","orderedDocumentKey"],sb="documentOverlays",aJ=["userId","collectionPath","documentId"],vA="collectionPathOverlayIndex",uJ=["userId","collectionPath","largestBatchId"],M6="collectionGroupOverlayIndex",lJ=["userId","collectionGroup","largestBatchId"],p5="globals",cJ="name",R6=[mv,Ms,ep,md,tp,Bv,Cd,np,rp,vv,yv,ib,ob],dJ=[...R6,sb],P6=[mv,Ms,ep,a1,tp,Bv,Cd,np,rp,vv,yv,ib,ob,sb],k6=P6,g5=[...k6,f5,l1,c1],hJ=g5,fJ=[...g5,p5];var _v=class extends i1{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}};function kr(n,e){let t=We(n);return kl.M(t.ue,e)}function p3(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wl(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function L6(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var $n=class n{constructor(e,t){this.comparator=e,this.root=t||ma.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ma.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ma.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gf(this.root,e,this.comparator,!0)}},Gf=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ma=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();let e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}};ma.EMPTY=null,ma.RED=!0,ma.BLACK=!1;ma.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(e,t,r,i,o){return this}insert(e,t,r){return new ma(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var An=class n{constructor(e){this.comparator=e,this.data=new $n(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new d1(this.data.getIterator())}getIteratorFrom(e){return new d1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},d1=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ff(n){return n.hasNext()?n.getNext():void 0}var So=class n{constructor(e){this.fields=e,e.sort(pr.comparator)}static empty(){return new n([])}unionWith(e){let t=new An(pr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zf(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var h1=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function O6(){return typeof atob<"u"}var mr=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new h1("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};mr.EMPTY_BYTE_STRING=new mr("");var pJ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hu(n){if(it(!!n),typeof n=="string"){let e=0,t=pJ.exec(n);if(it(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gn(n.seconds),nanos:Gn(n.nanos)}}function Gn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function fu(n){return typeof n=="string"?mr.fromBase64String(n):mr.fromUint8Array(n)}var F6="server_timestamp",V6="__type__",j6="__previous_value__",B6="__local_write_time__";function ab(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[V6])===null||t===void 0?void 0:t.stringValue)===F6}function ub(n){let e=n.mapValue.fields[j6];return ab(e)?ub(e):e}function wv(n){let e=hu(n.mapValue.fields[B6].timestampValue);return new Yn(e.seconds,e.nanos)}var yA=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},_A="(default)",Ll=class n{constructor(e,t){this.projectId=e,this.database=t||_A}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===_A}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var m5="__type__",U6="__max__",xl={mapValue:{fields:{__type__:{stringValue:U6}}}},v5="__vector__",ip="value",Qw={nullValue:"NULL_VALUE"};function Ol(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ab(n)?4:q6(n)?9007199254740991:lb(n)?10:11:tt()}function _a(n,e){if(n===e)return!0;let t=Ol(n);if(t!==Ol(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wv(n).isEqual(wv(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=hu(i.timestampValue),a=hu(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return fu(i.bytesValue).isEqual(fu(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Gn(i.geoPointValue.latitude)===Gn(o.geoPointValue.latitude)&&Gn(i.geoPointValue.longitude)===Gn(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Gn(i.integerValue)===Gn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Gn(i.doubleValue),a=Gn(o.doubleValue);return s===a?gv(s)===gv(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Zf(n.arrayValue.values||[],e.arrayValue.values||[],_a);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(p3(s)!==p3(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!_a(s[u],a[u])))return!1;return!0}(n,e);default:return tt()}}function bv(n,e){return(n.values||[]).find(t=>_a(t,e))!==void 0}function Fl(n,e){if(n===e)return 0;let t=Ol(n),r=Ol(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Gn(o.integerValue||o.doubleValue),u=Gn(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return g3(n.timestampValue,e.timestampValue);case 4:return g3(wv(n),wv(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(o,s){let a=fu(o),u=fu(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let d=Mt(a[l],u[l]);if(d!==0)return d}return Mt(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Mt(Gn(o.latitude),Gn(s.latitude));return a!==0?a:Mt(Gn(o.longitude),Gn(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return m3(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,d;let f=o.fields||{},m=s.fields||{},g=(a=f[ip])===null||a===void 0?void 0:a.arrayValue,b=(u=m[ip])===null||u===void 0?void 0:u.arrayValue,E=Mt(((l=g?.values)===null||l===void 0?void 0:l.length)||0,((d=b?.values)===null||d===void 0?void 0:d.length)||0);return E!==0?E:m3(g,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===xl.mapValue&&s===xl.mapValue)return 0;if(o===xl.mapValue)return 1;if(s===xl.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},d=Object.keys(l);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){let m=Mt(u[f],d[f]);if(m!==0)return m;let g=Fl(a[u[f]],l[d[f]]);if(g!==0)return g}return Mt(u.length,d.length)}(n.mapValue,e.mapValue);default:throw tt()}}function g3(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Mt(n,e);let t=hu(n),r=hu(e),i=Mt(t.seconds,r.seconds);return i!==0?i:Mt(t.nanos,r.nanos)}function m3(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Fl(t[i],r[i]);if(o)return o}return Mt(t.length,r.length)}function op(n){return wA(n)}function wA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=hu(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return fu(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ge.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=wA(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${wA(t.fields[s])}`;return i+"}"}(n.mapValue):tt()}function Yw(n){switch(Ol(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ub(n);return e?16+Yw(e):16;case 5:return 2*n.stringValue.length;case 6:return fu(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Yw(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Wl(r.fields,(o,s)=>{i+=o.length+Yw(s)}),i}(n.mapValue);default:throw tt()}}function Sd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bA(n){return!!n&&"integerValue"in n}function Ev(n){return!!n&&"arrayValue"in n}function v3(n){return!!n&&"nullValue"in n}function y3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Zw(n){return!!n&&"mapValue"in n}function lb(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[m5])===null||t===void 0?void 0:t.stringValue)===v5}function lv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Wl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lv(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lv(n.arrayValue.values[t]);return e}return Object.assign({},n)}function q6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===U6}var H6={mapValue:{fields:{[m5]:{stringValue:v5},[ip]:{arrayValue:{}}}}};function gJ(n){return"nullValue"in n?Qw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sd(Ll.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?lb(n)?H6:{mapValue:{}}:tt()}function mJ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sd(Ll.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?H6:"mapValue"in n?lb(n)?{mapValue:{}}:xl:tt()}function _3(n,e){let t=Fl(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function w3(n,e){let t=Fl(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var di=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Zw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lv(t)}setAll(e){let t=pr.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=lv(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Zw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _a(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Zw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wl(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(lv(this.value))}};function z6(n){let e=[];return Wl(n.fields,(t,r)=>{let i=new pr([t]);if(Zw(r)){let o=z6(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new So(e)}var Sr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ct.min(),ct.min(),ct.min(),di.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ct.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ct.min(),ct.min(),di.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ct.min(),ct.min(),di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var wa=class{constructor(e,t){this.position=e,this.inclusive=t}};function b3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Ge.comparator(Ge.fromName(s.referenceValue),t.key):r=Fl(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function E3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_a(n.position[t],e.position[t]))return!1;return!0}var Dd=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function vJ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var f1=class{},Xt=class n extends f1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new CA(e,t,r):t==="array-contains"?new AA(e,r):t==="in"?new p1(e,r):t==="not-in"?new TA(e,r):t==="array-contains-any"?new xA(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new SA(e,r):new DA(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Fl(t,this.value)):t!==null&&Ol(this.value)===Ol(t)&&this.matchesComparison(Fl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},En=class n extends f1{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new n(e,t)}matches(e){return sp(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}};function sp(n){return n.op==="and"}function EA(n){return n.op==="or"}function y5(n){return $6(n)&&sp(n)}function $6(n){for(let e of n.filters)if(e instanceof En)return!1;return!0}function IA(n){if(n instanceof Xt)return n.field.canonicalString()+n.op.toString()+op(n.value);if(y5(n))return n.filters.map(e=>IA(e)).join(",");{let e=n.filters.map(t=>IA(t)).join(",");return`${n.op}(${e})`}}function W6(n,e){return n instanceof Xt?function(r,i){return i instanceof Xt&&r.op===i.op&&r.field.isEqual(i.field)&&_a(r.value,i.value)}(n,e):n instanceof En?function(r,i){return i instanceof En&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&W6(s,i.filters[a]),!0):!1}(n,e):void tt()}function G6(n,e){let t=n.filters.concat(e);return En.create(t,n.op)}function K6(n){return n instanceof Xt?function(t){return`${t.field.canonicalString()} ${t.op} ${op(t.value)}`}(n):n instanceof En?function(t){return t.op.toString()+" {"+t.getFilters().map(K6).join(" ,")+"}"}(n):"Filter"}var CA=class extends Xt{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){let t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}},SA=class extends Xt{constructor(e,t){super(e,"in",t),this.keys=Q6("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},DA=class extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=Q6("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Q6(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}var AA=class extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Ev(t)&&bv(t.arrayValue,this.value)}},p1=class extends Xt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&bv(this.value.arrayValue,t)}},TA=class extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(bv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!bv(this.value.arrayValue,t)}},xA=class extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Ev(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>bv(this.value.arrayValue,r))}};var NA=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.le=null}};function MA(n,e=null,t=[],r=[],i=null,o=null,s=null){return new NA(n,e,t,r,i,o,s)}function Ad(n){let e=We(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>IA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),jv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>op(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>op(r)).join(",")),e.le=t}return e.le}function Uv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!vJ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!W6(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!E3(n.startAt,e.startAt)&&E3(n.endAt,e.endAt)}function g1(n){return Ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function m1(n,e){return n.filters.filter(t=>t instanceof Xt&&t.field.isEqual(e))}function I3(n,e,t){let r=Qw,i=!0;for(let o of m1(n,e)){let s=Qw,a=!0;switch(o.op){case"<":case"<=":s=gJ(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Qw}_3({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];_3({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function C3(n,e,t){let r=xl,i=!0;for(let o of m1(n,e)){let s=xl,a=!0;switch(o.op){case">=":case">":s=mJ(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=xl}w3({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];w3({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Ps=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}};function Y6(n,e,t,r,i,o,s,a){return new Ps(n,e,t,r,i,o,s,a)}function bp(n){return new Ps(n)}function S3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _5(n){return n.collectionGroup!==null}function Qf(n){let e=We(n);if(e.he===null){e.he=[];let t=new Set;for(let o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new An(pr.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Dd(o,r))}),t.has(pr.keyField().canonicalString())||e.he.push(new Dd(pr.keyField(),r))}return e.he}function xi(n){let e=We(n);return e.Pe||(e.Pe=yJ(e,Qf(n))),e.Pe}function yJ(n,e){if(n.limitType==="F")return MA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Dd(i.field,o)});let t=n.endAt?new wa(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new wa(n.startAt.position,n.startAt.inclusive):null;return MA(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function RA(n,e){let t=n.filters.concat([e]);return new Ps(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function v1(n,e,t){return new Ps(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qv(n,e){return Uv(xi(n),xi(e))&&n.limitType===e.limitType}function Z6(n){return`${Ad(xi(n))}|lt:${n.limitType}`}function Hf(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>K6(i)).join(", ")}]`),jv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>op(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>op(i)).join(",")),`Target(${r})`}(xi(n))}; limitType=${n.limitType})`}function Hv(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ge.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Qf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=b3(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Qf(r),i)||r.endAt&&!function(s,a,u){let l=b3(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Qf(r),i))}(n,e)}function J6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function X6(n){return(e,t)=>{let r=!1;for(let i of Qf(n)){let o=_J(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function _J(n,e,t){let r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Fl(u,l):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}var ks=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wl(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return L6(this.inner)}size(){return this.innerSize}};var wJ=new $n(Ge.comparator);function Ki(){return wJ}var eV=new $n(Ge.comparator);function sv(...n){let e=eV;for(let t of n)e=e.insert(t.key,t);return e}function tV(n){let e=eV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ga(){return cv()}function nV(){return cv()}function cv(){return new ks(n=>n.toString(),(n,e)=>n.isEqual(e))}var bJ=new $n(Ge.comparator),EJ=new An(Ge.comparator);function Bt(...n){let e=EJ;for(let t of n)e=e.add(t);return e}var IJ=new An(Mt);function w5(){return IJ}function b5(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gv(e)?"-0":e}}function rV(n){return{integerValue:""+n}}function iV(n,e){return S6(e)?rV(e):b5(n,e)}var ap=class{constructor(){this._=void 0}};function CJ(n,e,t){return n instanceof Vl?function(i,o){let s={fields:{[V6]:{stringValue:F6},[B6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ab(o)&&(o=ub(o)),o&&(s.fields[j6]=o),{mapValue:s}}(t,e):n instanceof pu?sV(n,e):n instanceof gu?aV(n,e):function(i,o){let s=oV(i,o),a=D3(s)+D3(i.Ie);return bA(s)&&bA(i.Ie)?rV(a):b5(i.serializer,a)}(n,e)}function SJ(n,e,t){return n instanceof pu?sV(n,e):n instanceof gu?aV(n,e):t}function oV(n,e){return n instanceof jl?function(r){return bA(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Vl=class extends ap{},pu=class extends ap{constructor(e){super(),this.elements=e}};function sV(n,e){let t=uV(e);for(let r of n.elements)t.some(i=>_a(i,r))||t.push(r);return{arrayValue:{values:t}}}var gu=class extends ap{constructor(e){super(),this.elements=e}};function aV(n,e){let t=uV(e);for(let r of n.elements)t=t.filter(i=>!_a(i,r));return{arrayValue:{values:t}}}var jl=class extends ap{constructor(e,t){super(),this.serializer=e,this.Ie=t}};function D3(n){return Gn(n.integerValue||n.doubleValue)}function uV(n){return Ev(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Td=class{constructor(e,t){this.field=e,this.transform=t}};function DJ(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof pu&&i instanceof pu||r instanceof gu&&i instanceof gu?Zf(r.elements,i.elements,_a):r instanceof jl&&i instanceof jl?_a(r.Ie,i.Ie):r instanceof Vl&&i instanceof Vl}(n.transform,e.transform)}var PA=class{constructor(e,t){this.version=e,this.transformResults=t}},or=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Jw(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var up=class{};function lV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ul(n.key,or.none()):new Bl(n.key,n.data,or.none());{let t=n.data,r=di.empty(),i=new An(pr.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ls(n.key,r,new So(i.toArray()),or.none())}}function AJ(n,e,t){n instanceof Bl?function(i,o,s){let a=i.value.clone(),u=T3(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ls?function(i,o,s){if(!Jw(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=T3(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(cV(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function dv(n,e,t,r){return n instanceof Bl?function(o,s,a,u){if(!Jw(o.precondition,s))return a;let l=o.value.clone(),d=x3(o.fieldTransforms,u,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ls?function(o,s,a,u){if(!Jw(o.precondition,s))return a;let l=x3(o.fieldTransforms,u,s),d=s.data;return d.setAll(cV(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return Jw(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function TJ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=oV(r.transform,i||null);o!=null&&(t===null&&(t=di.empty()),t.set(r.field,o))}return t||null}function A3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zf(r,i,(o,s)=>DJ(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Bl=class extends up{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ls=class extends up{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function cV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function T3(n,e,t){let r=new Map;it(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,SJ(s,a,t[i]))}return r}function x3(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,CJ(o,s,e))}return r}var Ul=class extends up{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Iv=class extends up{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Cv=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&AJ(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=dv(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=dv(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=nV();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=lV(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ct.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&Zf(this.mutations,e.mutations,(t,r)=>A3(t,r))&&Zf(this.baseMutations,e.baseMutations,(t,r)=>A3(t,r))}},kA=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){it(e.mutations.length===r.length);let i=function(){return bJ}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Sv=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var LA=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Er,on;function dV(n){switch(n){case be.OK:return tt();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return tt()}}function hV(n){if(n===void 0)return fr("GRPC error has no .code"),be.UNKNOWN;switch(n){case Er.OK:return be.OK;case Er.CANCELLED:return be.CANCELLED;case Er.UNKNOWN:return be.UNKNOWN;case Er.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case Er.INTERNAL:return be.INTERNAL;case Er.UNAVAILABLE:return be.UNAVAILABLE;case Er.UNAUTHENTICATED:return be.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case Er.NOT_FOUND:return be.NOT_FOUND;case Er.ALREADY_EXISTS:return be.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return be.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case Er.ABORTED:return be.ABORTED;case Er.OUT_OF_RANGE:return be.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return be.UNIMPLEMENTED;case Er.DATA_LOSS:return be.DATA_LOSS;default:return tt()}}(on=Er||(Er={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";var N3=null;function fV(){return new TextEncoder}var xJ=new uu([4294967295,4294967295],0);function M3(n){let e=fV().encode(n),t=new $D;return t.update(e),new Uint8Array(t.digest())}function R3(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new uu([t,r],0),new uu([i,o],0)]}var OA=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ed(`Invalid padding: ${t}`);if(r<0)throw new Ed(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ed(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ed(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=uu.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(uu.fromNumber(r)));return i.compare(xJ)===1&&(i=new uu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;let t=M3(e),[r,i]=R3(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);if(!this.Re(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ee===0)return;let t=M3(e),[r,i]=R3(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);this.Ve(s)}}Ve(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ed=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Dv=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Av.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ct.min(),i,new $n(Mt),Ki(),Bt())}},Av=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Bt(),Bt(),Bt())}};var Yf=class{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}},y1=class{constructor(e,t){this.targetId=e,this.ge=t}},_1=class{constructor(e,t,r=mr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},w1=class{constructor(){this.pe=0,this.ye=P3(),this.we=mr.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Bt(),t=Bt(),r=Bt();return this.ye.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:tt()}}),new Av(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=P3()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,it(this.pe>=0)}Le(){this.be=!0,this.Se=!0}},FA=class{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ki(),this.$e=qw(),this.Ke=qw(),this.Ue=new $n(Mt)}We(e){for(let t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(let t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{let r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){let t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){let o=i.target;if(g1(o))if(r===0){let s=new Ge(o.path);this.ze(t,s,Sr.newNoDocument(s,ct.min()))}else it(r===1);else{let s=this.et(t);if(s!==r){let a=this.tt(e),u=a?this.nt(a,e,s):1;if(u!==0){this.Ye(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,l)}N3?.rt(function(d,f,m,g,b){var E,D,w,x,F,z;let H={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},Y=f.unchangedNames;return Y&&(H.bloomFilter={applied:b===0,hashCount:(E=Y?.hashCount)!==null&&E!==void 0?E:0,bitmapLength:(x=(w=(D=Y?.bits)===null||D===void 0?void 0:D.bitmap)===null||w===void 0?void 0:w.length)!==null&&x!==void 0?x:0,padding:(z=(F=Y?.bits)===null||F===void 0?void 0:F.padding)!==null&&z!==void 0?z:0,mightContain:R=>{var I;return(I=g?.mightContain(R))!==null&&I!==void 0&&I}}),H}(s,e.ge,this.ke.it(),a,u))}}}}tt(e){let t=e.ge.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=fu(r).toUint8Array()}catch(u){if(u instanceof h1)return Rs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new OA(s,i,o)}catch(u){return Rs(u instanceof Ed?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ee===0?null:a}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){let r=this.ke.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ke.it(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,o,null),i++)}),i}ot(e){let t=new Map;this.qe.forEach((o,s)=>{let a=this.Xe(s);if(a){if(o.current&&g1(a.target)){let u=new Ge(a.target.path);this._t(u).has(s)||this.ut(s,u)||this.ze(s,u,Sr.newNoDocument(u,e))}o.ve&&(t.set(s,o.Fe()),o.Me())}});let r=Bt();this.Ke.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Xe(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.Qe.forEach((o,s)=>s.setReadTime(e));let i=new Dv(e,t,this.Ue,this.Qe,r);return this.Qe=Ki(),this.$e=qw(),this.Ke=qw(),this.Ue=new $n(Mt),i}Ge(e,t){if(!this.Je(e))return;let r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;let i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){let t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new w1,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new An(Mt),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new An(Mt),this.$e=this.$e.insert(e,t)),t}Je(e){let t=this.Xe(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){let t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new w1),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}};function qw(){return new $n(Ge.comparator)}function P3(){return new $n(Ge.comparator)}var NJ={asc:"ASCENDING",desc:"DESCENDING"},MJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RJ={and:"AND",or:"OR"},VA=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function jA(n,e){return n.useProto3Json||jv(e)?e:{value:e}}function lp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function PJ(n,e){return lp(n,e.toTimestamp())}function gr(n){return it(!!n),ct.fromTimestamp(function(t){let r=hu(t);return new Yn(r.seconds,r.nanos)}(n))}function E5(n,e){return BA(n,e).canonicalString()}function BA(n,e){let t=function(i){return new sn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function gV(n){let e=sn.fromString(n);return it(SV(e)),e}function Tv(n,e){return E5(n.databaseId,e.path)}function va(n,e){let t=gV(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(yV(t))}function mV(n,e){return E5(n.databaseId,e)}function vV(n){let e=gV(n);return e.length===4?sn.emptyPath():yV(e)}function UA(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yV(n){return it(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function k3(n,e,t){return{name:Tv(n,e),fields:t.value.mapValue.fields}}function _V(n,e,t){let r=va(n,e.name),i=gr(e.updateTime),o=e.createTime?gr(e.createTime):ct.min(),s=new di({mapValue:{fields:e.fields}}),a=Sr.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function kJ(n,e){return"found"in e?function(r,i){it(!!i.found),i.found.name,i.found.updateTime;let o=va(r,i.found.name),s=gr(i.found.updateTime),a=i.found.createTime?gr(i.found.createTime):ct.min(),u=new di({mapValue:{fields:i.found.fields}});return Sr.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){it(!!i.missing),it(!!i.readTime);let o=va(r,i.missing),s=gr(i.readTime);return Sr.newNoDocument(o,s)}(n,e):tt()}function LJ(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:tt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(it(d===void 0||typeof d=="string"),mr.fromBase64String(d||"")):(it(d===void 0||d instanceof Buffer||d instanceof Uint8Array),mr.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?be.UNKNOWN:hV(l.code);return new xe(d,l.message||"")}(s);t=new _1(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=va(n,r.document.name),o=gr(r.document.updateTime),s=r.document.createTime?gr(r.document.createTime):ct.min(),a=new di({mapValue:{fields:r.document.fields}}),u=Sr.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new Yf(l,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=va(n,r.document),o=r.readTime?gr(r.readTime):ct.min(),s=Sr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Yf([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=va(n,r.document),o=r.removedTargetIds||[];t=new Yf([],o,i,null)}else{if(!("filter"in e))return tt();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new LA(i,o),a=r.targetId;t=new y1(a,s)}}return t}function xv(n,e){let t;if(e instanceof Bl)t={update:k3(n,e.key,e.value)};else if(e instanceof Ul)t={delete:Tv(n,e.key)};else if(e instanceof Ls)t={update:k3(n,e.key,e.data),updateMask:UJ(e.fieldMask)};else{if(!(e instanceof Iv))return tt();t={verify:Tv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Vl)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof pu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof gu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof jl)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:PJ(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:tt()}(n,e.precondition)),t}function qA(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?or.updateTime(gr(o.updateTime)):o.exists!==void 0?or.exists(o.exists):or.none()}(e.currentDocument):or.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)it(a.setToServerValue==="REQUEST_TIME"),u=new Vl;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];u=new pu(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];u=new gu(d)}else"increment"in a?u=new jl(s,a.increment):tt();let l=pr.fromServerFormat(a.fieldPath);return new Td(l,u)}(n,i)):[];if(e.update){e.update.name;let i=va(n,e.update.name),o=new di({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new So(l.map(d=>pr.fromServerFormat(d)))}(e.updateMask);return new Ls(i,o,s,t,r)}return new Bl(i,o,t,r)}if(e.delete){let i=va(n,e.delete);return new Ul(i,t)}if(e.verify){let i=va(n,e.verify);return new Iv(i,t)}return tt()}function OJ(n,e){return n&&n.length>0?(it(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?gr(i.updateTime):gr(o);return s.isEqual(ct.min())&&(s=gr(o)),new PA(s,i.transformResults||[])}(t,e))):[]}function wV(n,e){return{documents:[mV(n,e.path)]}}function bV(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=mV(n,i);let o=function(l){if(l.length!==0)return CV(En.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(m){return{field:zf(m.field),direction:VJ(m.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=jA(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ht:t,parent:i}}function EV(n){let e=vV(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){it(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let m=IV(f);return m instanceof En&&y5(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(m=>function(b){return new Dd($f(b.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,jv(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(f){let m=!!f.before,g=f.values||[];return new wa(g,m)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let m=!f.before,g=f.values||[];return new wa(g,m)}(t.endAt)),Y6(e,i,s,o,a,"F",u,l)}function FJ(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function IV(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=$f(t.unaryFilter.field);return Xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=$f(t.unaryFilter.field);return Xt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=$f(t.unaryFilter.field);return Xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=$f(t.unaryFilter.field);return Xt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}(n):n.fieldFilter!==void 0?function(t){return Xt.create($f(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return En.create(t.compositeFilter.filters.map(r=>IV(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return tt()}}(t.compositeFilter.op))}(n):tt()}function VJ(n){return NJ[n]}function jJ(n){return MJ[n]}function BJ(n){return RJ[n]}function zf(n){return{fieldPath:n.canonicalString()}}function $f(n){return pr.fromServerFormat(n.fieldPath)}function CV(n){return n instanceof Xt?function(t){if(t.op==="=="){if(y3(t.value))return{unaryFilter:{field:zf(t.field),op:"IS_NAN"}};if(v3(t.value))return{unaryFilter:{field:zf(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(y3(t.value))return{unaryFilter:{field:zf(t.field),op:"IS_NOT_NAN"}};if(v3(t.value))return{unaryFilter:{field:zf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zf(t.field),op:jJ(t.op),value:t.value}}}(n):n instanceof En?function(t){let r=t.getFilters().map(i=>CV(i));return r.length===1?r[0]:{compositeFilter:{op:BJ(t.op),filters:r}}}(n):tt()}function UJ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function SV(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var cp=class n{constructor(e,t,r,i,o=ct.min(),s=ct.min(),a=mr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var b1=class{constructor(e){this.Tt=e}};function qJ(n,e){let t;if(e.document)t=_V(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=Ge.fromSegments(e.noDocument.path),i=Nd(e.noDocument.readTime);t=Sr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{let r=Ge.fromSegments(e.unknownDocument.path),i=Nd(e.unknownDocument.version);t=Sr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Yn(i[0],i[1]);return ct.fromTimestamp(o)}(e.readTime)),t}function L3(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:E1(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Tv(o,s.key),fields:s.data.value.mapValue.fields,updateTime:lp(o,s.version.toTimestamp()),createTime:lp(o,s.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xd(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:xd(e.version)}}return r}function E1(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xd(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Nd(n){let e=new Yn(n.seconds,n.nanoseconds);return ct.fromTimestamp(e)}function yd(n,e){let t=(e.baseMutations||[]).map(o=>qA(n.Tt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>qA(n.Tt,o)),i=Yn.fromMillis(e.localWriteTimeMs);return new Cv(e.batchId,i,t,r)}function av(n){let e=Nd(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Nd(n.lastLimboFreeSnapshotVersion):ct.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return it(o.documents.length===1),xi(bp(vV(o.documents[0])))}(n.query):function(o){return xi(EV(o))}(n.query),new cp(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,mr.fromBase64String(n.resumeToken))}function DV(n,e){let t=xd(e.snapshotVersion),r=xd(e.lastLimboFreeSnapshotVersion),i;i=g1(e.target)?wV(n.Tt,e.target):bV(n.Tt,e.target).ht;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ad(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function I5(n){let e=EV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?v1(e,e.limit,"L"):e}function ZD(n,e){return new Sv(e.largestBatchId,qA(n.Tt,e.overlayMutation))}function O3(n,e){let t=e.path.lastSegment();return[n,hi(e.path.popLast()),t]}function F3(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:xd(r.readTime),documentKey:hi(r.documentKey.path),largestBatchId:r.largestBatchId}}var HA=class{getBundleMetadata(e,t){return V3(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Nd(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return V3(e).put(function(i){return{bundleId:i.id,createTime:xd(gr(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return j3(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:I5(o.bundledQuery),readTime:Nd(o.readTime)}}(r)})}saveNamedQuery(e,t){return j3(e).put(function(i){return{name:i.name,readTime:xd(gr(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function V3(n){return kr(n,ib)}function j3(n){return kr(n,ob)}var I1=class n{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return nv(e).get(O3(this.userId,t)).next(r=>r?ZD(this.serializer,r):null)}getOverlays(e,t){let r=ga();return ve.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Sv(t,s);i.push(this.Et(e,a))}),ve.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(hi(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(nv(e).J(vA,a))}),ve.waitFor(o)}getOverlaysForCollection(e,t,r){let i=ga(),o=hi(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return nv(e).G(vA,s).next(a=>{for(let u of a){let l=ZD(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=ga(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nv(e).Z({index:M6,range:a},(u,l,d)=>{let f=ZD(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}Et(e,t){return nv(e).put(function(i,o,s){let[a,u,l]=O3(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:xv(i.Tt,s.mutation)}}(this.serializer,this.userId,t))}};function nv(n){return kr(n,sb)}var zA=class{dt(e){return kr(e,p5)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{let r=t?.value;return r?mr.fromUint8Array(r):mr.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var cu=class{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Gn(e.integerValue));else if("doubleValue"in e){let r=Gn(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),gv(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=hu(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(fu(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?q6(e)?this.ft(t,Number.MAX_SAFE_INTEGER):lb(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):tt()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){let r=e.fields||{};this.ft(t,55);for(let i of Object.keys(r))this.wt(i,t),this.Rt(r[i],t)}vt(e,t){var r,i;let o=e.fields||{};this.ft(t,53);let s=ip,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(Gn(a)),this.wt(s,t),this.Rt(o[s],t)}Ft(e,t){let r=e.values||[];this.ft(t,50);for(let i of r)this.Rt(i,t)}Dt(e,t){this.ft(t,37),Ge.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}};cu.xt=new cu;var Vf=255;function HJ(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function B3(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=HJ(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var $A=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{let i=t.codePointAt(0);this.Nt(240|i>>>18),this.Nt(128|63&i>>>12),this.Nt(128|63&i>>>6),this.Nt(128|63&i)}}this.Bt()}$t(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{let i=t.codePointAt(0);this.kt(240|i>>>18),this.kt(128|63&i>>>12),this.kt(128|63&i>>>6),this.kt(128|63&i)}}this.qt()}Kt(e){let t=this.Ut(e),r=B3(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Gt(e){let t=this.Ut(e),r=B3(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}zt(){this.jt(Vf),this.jt(255)}Ht(){this.Jt(Vf),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Ut(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Nt(e){let t=255&e;t===0?(this.jt(0),this.jt(255)):t===Vf?(this.jt(Vf),this.jt(0)):this.jt(t)}kt(e){let t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===Vf?(this.Jt(Vf),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},WA=class{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Kt(e)}Vt(){this.Zt.zt()}},GA=class{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}},_d=class{constructor(){this.Zt=new $A,this.Xt=new WA(this.Zt),this.en=new GA(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}};var wd=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}nn(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Sl(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=U3(n.arrayValue,e.arrayValue),t!==0?t:(t=U3(n.directionalValue,e.directionalValue),t!==0?t:Ge.comparator(n.documentKey,e.documentKey)))}function U3(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var C1=class{constructor(e){this.rn=new An((t,r)=>pr.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(let t of e.filters){let r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(it(e.collectionGroup===this.collectionId),this.an)return!1;let t=cA(e);if(t!==void 0&&!this.cn(t))return!1;let r=gd(e),i=new Set,o=0,s=0;for(;o<r.length&&this.cn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.rn.size>0){let a=this.rn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.ln(a,u)||!this.hn(this.sn[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.sn.length||!this.hn(this.sn[s++],a))return!1}return!0}Pn(){if(this.an)return null;let e=new An(pr.comparator),t=[];for(let r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Kf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Kf(r.field,0))}for(let r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Kf(r.field,r.dir==="asc"?0:1)));return new Xf(Xf.UNKNOWN_ID,this.collectionId,t,pv.empty())}cn(e){for(let t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function AV(n){var e,t;if(it(n instanceof Xt||n instanceof En),n instanceof Xt){if(n instanceof p1){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>Xt.create(n.field,"==",o)))||[];return En.create(i,"or")}return n}let r=n.filters.map(i=>AV(i));return En.create(r,n.op)}function zJ(n){if(n.getFilters().length===0)return[];let e=YA(AV(n));return it(TV(e)),KA(e)||QA(e)?[e]:e.getFilters()}function KA(n){return n instanceof Xt}function QA(n){return n instanceof En&&y5(n)}function TV(n){return KA(n)||QA(n)||function(t){if(t instanceof En&&EA(t)){for(let r of t.getFilters())if(!KA(r)&&!QA(r))return!1;return!0}return!1}(n)}function YA(n){if(it(n instanceof Xt||n instanceof En),n instanceof Xt)return n;if(n.filters.length===1)return YA(n.filters[0]);let e=n.filters.map(r=>YA(r)),t=En.create(e,n.op);return t=S1(t),TV(t)?t:(it(t instanceof En),it(sp(t)),it(t.filters.length>1),t.filters.reduce((r,i)=>C5(r,i)))}function C5(n,e){let t;return it(n instanceof Xt||n instanceof En),it(e instanceof Xt||e instanceof En),t=n instanceof Xt?e instanceof Xt?function(i,o){return En.create([i,o],"and")}(n,e):q3(n,e):e instanceof Xt?q3(e,n):function(i,o){if(it(i.filters.length>0&&o.filters.length>0),sp(i)&&sp(o))return G6(i,o.getFilters());let s=EA(i)?i:o,a=EA(i)?o:i,u=s.filters.map(l=>C5(l,a));return En.create(u,"or")}(n,e),S1(t)}function q3(n,e){if(sp(e))return G6(e,n.getFilters());{let t=e.filters.map(r=>C5(n,r));return En.create(t,"or")}}function S1(n){if(it(n instanceof Xt||n instanceof En),n instanceof Xt)return n;let e=n.getFilters();if(e.length===1)return S1(e[0]);if($6(n))return n;let t=e.map(i=>S1(i)),r=[];return t.forEach(i=>{i instanceof Xt?r.push(i):i instanceof En&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:En.create(r,n.op)}var ZA=class{constructor(){this.Tn=new Nv}addToCollectionParentIndex(e,t){return this.Tn.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t){return ve.resolve(null)}getIndexType(e,t){return ve.resolve(0)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,t){return ve.resolve(Xo.min())}getMinOffsetFromCollectionGroup(e,t){return ve.resolve(Xo.min())}updateCollectionGroup(e,t,r){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}},Nv=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new An(sn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new An(sn.comparator)).toArray()}};var H3="IndexedDbIndexManager",Hw=new Uint8Array(0),JA=class{constructor(e,t){this.databaseId=t,this.In=new Nv,this.En=new ks(r=>Ad(r),(r,i)=>Uv(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});let o={collectionId:r,parent:hi(i)};return z3(e).put(o)}return ve.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[w6(t),""],!1,!0);return z3(e).G(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(pa(s.parent))}return r})}addFieldIndex(e,t){let r=rv(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Bf(e);return o.next(a=>{s.put(F3(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=rv(e),i=Bf(e),o=jf(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=rv(e),r=jf(e),i=Bf(e);return t.J().next(()=>r.J()).next(()=>i.J())}createTargetIndexes(e,t){return ve.forEach(this.dn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new C1(r).Pn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=jf(e),i=!0,o=new Map;return ve.forEach(this.dn(t),s=>this.An(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Bt(),a=[];return ve.forEach(o,(u,l)=>{Re(H3,`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(z=>`${z.fieldPath}:${z.kind}`).join(",")}`}(u)} to execute ${Ad(t)}`);let d=function(F,z){let H=cA(z);if(H===void 0)return null;for(let Y of m1(F,H.fieldPath))switch(Y.op){case"array-contains-any":return Y.value.arrayValue.values||[];case"array-contains":return[Y.value]}return null}(l,u),f=function(F,z){let H=new Map;for(let Y of gd(z))for(let R of m1(F,Y.fieldPath))switch(R.op){case"==":case"in":H.set(Y.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return H.set(Y.fieldPath.canonicalString(),R.value),Array.from(H.values())}return null}(l,u),m=function(F,z){let H=[],Y=!0;for(let R of gd(z)){let I=R.kind===0?I3(F,R.fieldPath,F.startAt):C3(F,R.fieldPath,F.startAt);H.push(I.value),Y&&(Y=I.inclusive)}return new wa(H,Y)}(l,u),g=function(F,z){let H=[],Y=!0;for(let R of gd(z)){let I=R.kind===0?C3(F,R.fieldPath,F.endAt):I3(F,R.fieldPath,F.endAt);H.push(I.value),Y&&(Y=I.inclusive)}return new wa(H,Y)}(l,u),b=this.Rn(u,l,m),E=this.Rn(u,l,g),D=this.Vn(u,l,f),w=this.mn(u.indexId,d,b,m.inclusive,E,g.inclusive,D);return ve.forEach(w,x=>r.H(x,t.limit).next(F=>{F.forEach(z=>{let H=Ge.fromSegments(z.documentKey);s.has(H)||(s=s.add(H),a.push(H))})}))}).next(()=>a)}return ve.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=zJ(En.create(e.filters,"and")).map(r=>MA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),d=[];for(let f=0;f<u;++f){let m=t?this.fn(t[f/l]):Hw,g=this.gn(e,m,r[f%l],i),b=this.pn(e,m,o[f%l],s),E=a.map(D=>this.gn(e,m,D,!0));d.push(...this.createRange(g,b,E))}return d}gn(e,t,r,i){let o=new wd(e,Ge.empty(),t,r);return i?o:o.nn()}pn(e,t,r,i){let o=new wd(e,Ge.empty(),t,r);return i?o.nn():o}An(e,t){let r=new C1(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.un(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.dn(t);return ve.forEach(i,o=>this.An(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new An(pr.comparator),d=!1;for(let f of u.filters)for(let m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:l=l.add(m.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}yn(e,t){let r=new _d;for(let i of gd(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.tn(i.kind);cu.xt.At(o,s)}return r.Yt()}fn(e){let t=new _d;return cu.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){let r=new _d;return cu.xt.At(Sd(this.databaseId,t),r.tn(function(o){let s=gd(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let i=[];i.push(new _d);let o=0;for(let s of gd(e)){let a=r[o++];for(let u of i)if(this.Sn(t,s.fieldPath)&&Ev(a))i=this.bn(i,s,a);else{let l=u.tn(s.kind);cu.xt.At(a,l)}}return this.Dn(i)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}bn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new _d;u.seed(a.Yt()),cu.xt.At(s,u.tn(t.kind)),o.push(u)}return o}Sn(e,t){return!!e.filters.find(r=>r instanceof Xt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=rv(e),i=Bf(e);return(t?r.G(mA,IDBKeyRange.bound(t,t)):r.G()).next(o=>{let s=[];return ve.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(d,f){let m=f?new pv(f.sequenceNumber,new Xo(Nd(f.readTime),new Ge(pa(f.documentKey)),f.largestBatchId)):pv.empty(),g=d.fields.map(([b,E])=>new Kf(pr.fromServerFormat(b),E));return new Xf(d.indexId,d.collectionGroup,g,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Mt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=rv(e),o=Bf(e);return this.vn(e).next(s=>i.G(mA,IDBKeyRange.bound(t,t)).next(a=>ve.forEach(a,u=>o.put(F3(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return ve.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?ve.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),ve.forEach(a,u=>this.Cn(e,i,u).next(l=>{let d=this.Fn(o,u);return l.isEqual(d)?ve.resolve():this.Mn(e,o,u,l,d)}))))})}xn(e,t,r,i){return jf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,i){return jf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){let i=jf(e),o=new An(Sl);return i.Z({index:N6,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(s,a)=>{o=o.add(new wd(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Fn(e,t){let r=new An(Sl),i=this.yn(t,e);if(i==null)return r;let o=cA(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Ev(s))for(let a of s.arrayValue.values||[])r=r.add(new wd(t.indexId,e.key,this.fn(a),i))}else r=r.add(new wd(t.indexId,e.key,Hw,i));return r}Mn(e,t,r,i,o){Re(H3,"Updating index entries for document '%s'",t.key);let s=[];return function(u,l,d,f,m){let g=u.getIterator(),b=l.getIterator(),E=Ff(g),D=Ff(b);for(;E||D;){let w=!1,x=!1;if(E&&D){let F=d(E,D);F<0?x=!0:F>0&&(w=!0)}else E!=null?x=!0:w=!0;w?(f(D),D=Ff(b)):x?(m(E),E=Ff(g)):(E=Ff(g),D=Ff(b))}}(i,o,Sl,a=>{s.push(this.xn(e,t,r,a))},a=>{s.push(this.On(e,t,r,a))}),ve.waitFor(s)}vn(e){let t=1;return Bf(e).Z({index:x6,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Sl(s,a)).filter((s,a,u)=>!a||Sl(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Sl(s,e),u=Sl(s,t);if(a===0)i[0]=e.nn();else if(a>0&&u<0)i.push(s),i.push(s.nn());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Nn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Hw,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Hw,[]];o.push(IDBKeyRange.bound(a,u))}return o}Nn(e,t){return Sl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($3)}getMinOffset(e,t){return ve.mapArray(this.dn(t),r=>this.An(e,r).next(i=>i||tt())).next($3)}};function z3(n){return kr(n,yv)}function jf(n){return kr(n,c1)}function rv(n){return kr(n,f5)}function Bf(n){return kr(n,l1)}function $3(n){it(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;c5(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Xo(e.readTime,e.documentKey,t)}var W3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xV=41943040,Gi=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function NV(n,e,t){let r=n.store(Ms),i=n.store(ep),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.Z({range:s},(d,f,m)=>(a++,m.delete()));o.push(u.next(()=>{it(a===1)}));let l=[];for(let d of t.mutations){let f=D6(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return ve.waitFor(o).next(()=>l)}function D1(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}Gi.DEFAULT_COLLECTION_PERCENTILE=10,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gi.DEFAULT=new Gi(xV,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gi.DISABLED=new Gi(-1,0,0);var A1=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Bn={}}static It(e,t,r,i){it(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dl(e).Z({index:bd,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Wf(e),s=Dl(e);return s.add({}).next(a=>{it(typeof a=="number");let u=new Cv(a,t,r,i),l=function(g,b,E){let D=E.baseMutations.map(x=>xv(g.Tt,x)),w=E.mutations.map(x=>xv(g.Tt,x));return{userId:b,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:D,mutations:w}}(this.serializer,this.userId,u),d=[],f=new An((m,g)=>Mt(m.canonicalString(),g.canonicalString()));for(let m of i){let g=D6(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),d.push(s.put(l)),d.push(o.put(g,zZ))}return f.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Bn[a]=u.keys()}),ve.waitFor(d).next(()=>u)})}lookupMutationBatch(e,t){return Dl(e).get(t).next(r=>r?(it(r.userId===this.userId),yd(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?ve.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Bn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Dl(e).Z({index:bd,range:i},(s,a,u)=>{a.userId===this.userId&&(it(a.batchId>=r),o=yd(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=Ml;return Dl(e).Z({index:bd,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,Ml],[this.userId,Number.POSITIVE_INFINITY]);return Dl(e).G(bd,t).next(r=>r.map(i=>yd(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Gw(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Wf(e).Z({range:i},(s,a,u)=>{let[l,d,f]=s,m=pa(d);if(l===this.userId&&t.path.isEqual(m))return Dl(e).get(f).next(g=>{if(!g)throw tt();it(g.userId===this.userId),o.push(yd(this.serializer,g))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(Mt),i=[];return t.forEach(o=>{let s=Gw(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Wf(e).Z({range:a},(l,d,f)=>{let[m,g,b]=l,E=pa(g);m===this.userId&&o.path.isEqual(E)?r=r.add(b):f.done()});i.push(u)}),ve.waitFor(i).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Gw(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new An(Mt);return Wf(e).Z({range:s},(u,l,d)=>{let[f,m,g]=u,b=pa(m);f===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(g)):d.done()}).next(()=>this.kn(e,a))}kn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Dl(e).get(o).next(s=>{if(s===null)throw tt();it(s.userId===this.userId),r.push(yd(this.serializer,s))}))}),ve.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return NV(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),ve.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ve.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Wf(e).Z({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=pa(o[1]);i.push(u)}else a.done()}).next(()=>{it(i.length===0)})})}containsKey(e,t){return MV(e,this.userId,t)}Qn(e){return RV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ml,lastStreamToken:""})}};function MV(n,e,t){let r=Gw(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Wf(n).Z({range:o,Y:!0},(a,u,l)=>{let[d,f,m]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function Dl(n){return kr(n,Ms)}function Wf(n){return kr(n,ep)}function RV(n){return kr(n,mv)}var dp=class n{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new n(0)}static Un(){return new n(-1)}};var XA=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{let r=new dp(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>ct.fromTimestamp(new Yn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Gn(e,i)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Uf(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(it(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Uf(e).Z((s,a)=>{let u=av(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>ve.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Uf(e).Z((r,i)=>{let o=av(i);t(o)})}Wn(e){return G3(e).get(u1).next(t=>(it(t!==null),t))}Gn(e,t){return G3(e).put(u1,t)}zn(e,t){return Uf(e).put(DV(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Ad(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Uf(e).Z({range:i,index:T6},(s,a,u)=>{let l=av(a);Uv(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Tl(e);return t.forEach(s=>{let a=hi(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),ve.waitFor(i)}removeMatchingKeys(e,t,r){let i=Tl(e);return ve.forEach(t,o=>{let s=hi(o.path);return ve.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Tl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Tl(e),o=Bt();return i.Z({range:r,Y:!0},(s,a,u)=>{let l=pa(s[1]),d=new Ge(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=hi(t.path),i=IDBKeyRange.bound([r],[w6(r)],!1,!0),o=0;return Tl(e).Z({index:h5,Y:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}lt(e,t){return Uf(e).get(t).next(r=>r?av(r):null)}};function Uf(n){return kr(n,tp)}function G3(n){return kr(n,Cd)}function Tl(n){return kr(n,np)}var K3="LruGarbageCollector",$J=1048576;function Q3([n,e],[t,r]){let i=Mt(n,t);return i===0?Mt(e,r):i}var eT=class{constructor(e){this.Hn=e,this.buffer=new An(Q3),this.Jn=0}Yn(){return++this.Jn}Zn(e){let t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Q3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},T1=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Re(K3,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>Ee(this,null,function*(){this.Xn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){$l(t)?Re(K3,"Ignoring IndexedDB error during garbage collection: ",t):yield zl(t)}yield this.er(3e5)}))}},tT=class{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ve.resolve(Co.ae);let r=new eT(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(W3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),W3):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,o,s,a,u,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),qf()<=Uo.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-d}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function PV(n,e){return new tT(n,e)}var nT=class{constructor(e,t){this.db=e,this.garbageCollector=PV(this,t)}nr(e){let t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,i)=>t(i))}addReference(e,t,r){return zw(e,r)}removeReference(e,t,r){return zw(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return zw(e,t)}ar(e,t){return function(i,o){let s=!1;return RV(i).X(a=>MV(i,a,o).next(u=>(u&&(s=!0),ve.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this._r(e,(s,a)=>{if(a<=t){let u=this.ar(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ct.min()),Tl(e).delete(function(f){return[0,hi(f.path)]}(s))))});i.push(u)}}).next(()=>ve.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return zw(e,t)}_r(e,t){let r=Tl(e),i,o=Co.ae;return r.Z({index:h5},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Co.ae&&t(new Ge(pa(i)),o),o=l,i=u):o=Co.ae}).next(()=>{o!==Co.ae&&t(new Ge(pa(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function zw(n,e){return Tl(n).put(function(r,i){return{targetId:0,path:hi(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var x1=class{constructor(){this.changes=new ks(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?ve.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var rT=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pd(e).put(r)}removeEntry(e,t,r){return pd(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],E1(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=Sr.newInvalidDocument(t);return pd(e).Z({index:Kw,range:IDBKeyRange.only(iv(t))},(i,o)=>{r=this.cr(t,o)}).next(()=>r)}lr(e,t){let r={size:0,document:Sr.newInvalidDocument(t)};return pd(e).Z({index:Kw,range:IDBKeyRange.only(iv(t))},(i,o)=>{r={document:this.cr(t,o),size:D1(o)}}).next(()=>r)}getEntries(e,t){let r=Ki();return this.hr(e,t,(i,o)=>{let s=this.cr(i,o);r=r.insert(i,s)}).next(()=>r)}Pr(e,t){let r=Ki(),i=new $n(Ge.comparator);return this.hr(e,t,(o,s)=>{let a=this.cr(o,s);r=r.insert(o,a),i=i.insert(o,D1(s))}).next(()=>({documents:r,Tr:i}))}hr(e,t,r){if(t.isEmpty())return ve.resolve();let i=new An(J3);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(iv(i.first()),iv(i.last())),s=i.getIterator(),a=s.getNext();return pd(e).Z({index:Kw,range:o},(u,l,d)=>{let f=Ge.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&J3(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.W(iv(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),E1(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pd(e).G(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=Ki();for(let f of l){let m=this.cr(Ge.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(Hv(t,m)||i.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=Ki(),s=Z3(t,r),a=Z3(t,Xo.max());return pd(e).Z({index:A6,range:IDBKeyRange.bound(s,a,!0)},(u,l,d)=>{let f=this.cr(Ge.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new iT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Y3(e).get(gA).next(t=>(it(!!t),t))}ur(e,t){return Y3(e).put(gA,t)}cr(e,t){if(t){let r=qJ(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ct.min())))return r}return Sr.newInvalidDocument(e)}};function kV(n){return new rT(n)}var iT=class extends x1{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new ks(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new An((o,s)=>Mt(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Er.get(o);if(t.push(this.Ir.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=L3(this.Ir.serializer,s);i=i.add(o.path.popLast());let l=D1(u);r+=l-a.size,t.push(this.Ir.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=L3(this.Ir.serializer,s.convertToNoDocument(ct.min()));t.push(this.Ir.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Ir.updateMetadata(e,r)),ve.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:i})=>(i.forEach((o,s)=>{this.Er.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function Y3(n){return kr(n,vv)}function pd(n){return kr(n,a1)}function iv(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Z3(n,e){let t=e.documentKey.path.toArray();return[n,E1(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function J3(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Mt(t[o],r[o]),i)return i;return i=Mt(t.length,r.length),i||(i=Mt(t[t.length-2],r[r.length-2]),i||Mt(t[t.length-1],r[r.length-1]))}var oT=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var N1=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&dv(r.mutation,i,So.empty(),Yn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bt()){let i=ga();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=sv();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ga();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bt()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ki(),s=cv(),a=function(){return cv()}();return t.forEach((u,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Ls)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),dv(d.mutation,l,d.mutation.getFieldMask(),Yn.now())):s.set(l.key,So.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new oT(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=cv(),i=new $n((s,a)=>s-a),o=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let d=r.get(u)||So.empty();d=a.applyToLocalView(l,d),r.set(u,d);let f=(i.get(a.batchId)||Bt()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,d=u.value,f=nV();d.forEach(m=>{if(!o.has(m)){let g=lV(t.get(m),r.get(m));g!==null&&f.set(m,g),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return ve.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Ge.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_5(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ve.resolve(ga()),a=Jf,u=o;return s.next(l=>ve.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?ve.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,Bt())).next(d=>({batchId:a,changes:tV(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let i=sv();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=sv();return this.indexManager.getCollectionParents(e,o).next(a=>ve.forEach(a,u=>{let l=function(f,m){return new Ps(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,Sr.newInvalidDocument(d)))});let a=sv();return s.forEach((u,l)=>{let d=o.get(u);d!==void 0&&dv(d.mutation,l,So.empty(),Yn.now()),Hv(t,l)&&(a=a.insert(u,l))}),a})}};var sT=class{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ve.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:gr(i.createTime)}}(t)),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:I5(i.bundledQuery),readTime:gr(i.readTime)}}(t)),ve.resolve()}};var aT=class{constructor(){this.overlays=new $n(Ge.comparator),this.Rr=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ga();return ve.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Et(e,t,o)}),ve.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),ve.resolve()}getOverlaysForCollection(e,t,r){let i=ga(),o=t.length+1,s=new Ge(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return ve.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new $n((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=ga(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=ga(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return ve.resolve(a)}Et(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Sv(t,r));let o=this.Rr.get(t);o===void 0&&(o=Bt(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}};var uT=class{constructor(){this.sessionToken=mr.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ve.resolve()}};var Mv=class{constructor(){this.Vr=new An(Ir.mr),this.gr=new An(Ir.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){let r=new Ir(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Ir(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){let t=new Ge(new sn([])),r=new Ir(t,e),i=new Ir(t,e+1),o=[];return this.gr.forEachInRange([r,i],s=>{this.wr(s),o.push(s.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){let t=new Ge(new sn([])),r=new Ir(t,e),i=new Ir(t,e+1),o=Bt();return this.gr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ir(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ir=class{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Ge.comparator(e.key,t.key)||Mt(e.Cr,t.Cr)}static pr(e,t){return Mt(e.Cr,t.Cr)||Ge.comparator(e.key,t.key)}};var lT=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new An(Ir.mr)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Cv(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Mr=this.Mr.add(new Ir(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ve.resolve(s)}lookupMutationBatch(e,t){return ve.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Nr(r),o=i<0?0:i;return ve.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?Ml:this.Fr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ir(t,0),i=new Ir(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],s=>{let a=this.Or(s.Cr);o.push(a)}),ve.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(Mt);return t.forEach(i=>{let o=new Ir(i,0),s=new Ir(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,s],a=>{r=r.add(a.Cr)})}),ve.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Ge.isDocumentKey(o)||(o=o.child(""));let s=new Ir(new Ge(o),0),a=new An(Mt);return this.Mr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Cr)),!0)},s),ve.resolve(this.Br(a))}Br(e){let t=[];return e.forEach(r=>{let i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){it(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ve.forEach(t.mutations,i=>{let o=new Ir(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){let r=new Ir(t,0),i=this.Mr.firstAfterOrEqual(r);return ve.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){let t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var cT=class{constructor(e){this.kr=e,this.docs=function(){return new $n(Ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return ve.resolve(r?r.document.mutableCopy():Sr.newInvalidDocument(t))}getEntries(e,t){let r=Ki();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Sr.newInvalidDocument(i))}),ve.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ki(),s=t.path,a=new Ge(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:d}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||c5(E6(d),r)<=0||(i.has(d.key)||Hv(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return ve.resolve(o)}getAllFromCollectionGroup(e,t,r,i){tt()}qr(e,t){return ve.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new dT(this)}getSize(e){return ve.resolve(this.size)}},dT=class extends x1{constructor(e){super(),this.Ir=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),ve.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}};var hT=class{constructor(e){this.persistence=e,this.Qr=new ks(t=>Ad(t),Uv),this.lastRemoteSnapshotVersion=ct.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Mv,this.targetCount=0,this.Ur=dp.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),ve.resolve()}zn(e){this.Qr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Ur=new dp(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.zn(t),ve.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.br(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Qr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Qr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ve.waitFor(o).next(()=>i)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){let r=this.Qr.get(t)||null;return ve.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),ve.resolve()}removeMatchingKeys(e,t,r){this.Kr.Sr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),ve.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.br(t),ve.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Kr.vr(t);return ve.resolve(r)}containsKey(e,t){return ve.resolve(this.Kr.containsKey(t))}};var Rv=class{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Co(0),this.zr=!1,this.zr=!0,this.jr=new uT,this.referenceDelegate=e(this),this.Hr=new hT(this),this.indexManager=new ZA,this.remoteDocumentCache=function(i){return new cT(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new b1(t),this.Yr=new sT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new lT(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);let i=new fT(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(e,t){return ve.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}},fT=class extends i1{constructor(e){super(),this.currentSequenceNumber=e}},M1=class n{constructor(e){this.persistence=e,this.ti=new Mv,this.ni=null}static ri(e){return new n(e)}get ii(){if(this.ni)return this.ni;throw tt()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),ve.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ve.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.ii,r=>{let i=Ge.fromPath(r);return this.si(e,i).next(o=>{o||t.removeEntry(i,ct.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ve.or([()=>ve.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}},R1=class n{constructor(e,t){this.persistence=e,this.oi=new ks(r=>hi(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=PV(this,t)}static ri(e,t){return new n(e,t)}Zr(){}Xr(e){return ve.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){let t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return ve.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(o=>o?ve.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(e,s=>this.ar(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ct.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ve.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ve.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ve.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yw(e.data.value)),t}ar(e,t,r){return ve.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.oi.get(t);return ve.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var pT=class{constructor(e){this.serializer=e}B(e,t,r,i){let o=new o1("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore(Bv)}(e),function(u){u.createObjectStore(mv,{keyPath:HZ}),u.createObjectStore(Ms,{keyPath:h3,autoIncrement:!0}).createIndex(bd,f3,{unique:!0}),u.createObjectStore(ep)}(e),X3(e),function(u){u.createObjectStore(md)}(e));let s=ve.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore(np),u.deleteObjectStore(tp),u.deleteObjectStore(Cd)}(e),X3(e)),s=s.next(()=>function(u){let l=u.store(Cd),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ct.min().toTimestamp(),targetCount:0};return l.put(u1,d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store(Ms).G().next(f=>{u.deleteObjectStore(Ms),u.createObjectStore(Ms,{keyPath:h3,autoIncrement:!0}).createIndex(bd,f3,{unique:!0});let m=l.store(Ms),g=f.map(b=>m.put(b));return ve.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore(rp,{keyPath:JZ})})(e)})),r<5&&i>=5&&(s=s.next(()=>this._i(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore(vv)}(e),this.ai(o)))),r<7&&i>=7&&(s=s.next(()=>this.ui(o))),r<8&&i>=8&&(s=s.next(()=>this.ci(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.li(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore(ib,{keyPath:XZ})})(e),function(u){u.createObjectStore(ob,{keyPath:eJ})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore(sb,{keyPath:aJ});l.createIndex(vA,uJ,{unique:!1}),l.createIndex(M6,lJ,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore(a1,{keyPath:$Z});l.createIndex(Kw,WZ),l.createIndex(A6,GZ)}(e)).next(()=>this.hi(e,o)).next(()=>e.deleteObjectStore(md))),r<14&&i>=14&&(s=s.next(()=>this.Pi(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore(f5,{keyPath:tJ,autoIncrement:!0}).createIndex(mA,nJ,{unique:!1}),u.createObjectStore(l1,{keyPath:rJ}).createIndex(x6,iJ,{unique:!1}),u.createObjectStore(c1,{keyPath:oJ}).createIndex(N6,sJ,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(l1).clear()}).next(()=>{t.objectStore(c1).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore(p5,{keyPath:cJ})})(e)})),s}ai(e){let t=0;return e.store(md).Z((r,i)=>{t+=D1(i)}).next(()=>{let r={byteSize:t};return e.store(vv).put(gA,r)})}_i(e){let t=e.store(mv),r=e.store(Ms);return t.G().next(i=>ve.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,Ml],[o.userId,o.lastAcknowledgedBatchId]);return r.G(bd,s).next(a=>ve.forEach(a,u=>{it(u.userId===o.userId);let l=yd(this.serializer,u);return NV(e,o.userId,l).next(()=>{})}))}))}ui(e){let t=e.store(np),r=e.store(md);return e.store(Cd).get(u1).next(i=>{let o=[];return r.Z((s,a)=>{let u=new sn(s),l=function(f){return[0,hi(f)]}(u);o.push(t.get(l).next(d=>d?ve.resolve():(f=>t.put({targetId:0,path:hi(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>ve.waitFor(o))})}ci(e,t){e.createObjectStore(yv,{keyPath:ZZ});let r=t.store(yv),i=new Nv,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:hi(u)})}};return t.store(md).Z({Y:!0},(s,a)=>{let u=new sn(s);return o(u.popLast())}).next(()=>t.store(ep).Z({Y:!0},([s,a,u],l)=>{let d=pa(a);return o(d.popLast())}))}li(e){let t=e.store(tp);return t.Z((r,i)=>{let o=av(i),s=DV(this.serializer,o);return t.put(s)})}hi(e,t){let r=t.store(md),i=[];return r.Z((o,s)=>{let a=t.store(a1),u=function(f){return f.document?new Ge(sn.fromString(f.document.name).popFirst(5)):f.noDocument?Ge.fromSegments(f.noDocument.path):f.unknownDocument?Ge.fromSegments(f.unknownDocument.path):tt()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>ve.waitFor(i))}Pi(e,t){let r=t.store(Ms),i=kV(this.serializer),o=new Rv(M1.ri,this.serializer.Tt);return r.G().next(s=>{let a=new Map;return s.forEach(u=>{var l;let d=(l=a.get(u.userId))!==null&&l!==void 0?l:Bt();yd(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),ve.forEach(a,(u,l)=>{let d=new Cr(l),f=I1.It(this.serializer,d),m=o.getIndexManager(d),g=A1.It(d,this.serializer,m,o.referenceDelegate);return new N1(i,g,f,m).recalculateAndSaveOverlaysForDocumentKeys(new _v(t,Co.ae),u).next()})})}};function X3(n){n.createObjectStore(np,{keyPath:QZ}).createIndex(h5,YZ,{unique:!0}),n.createObjectStore(tp,{keyPath:"targetId"}).createIndex(T6,KZ,{unique:!0}),n.createObjectStore(Cd)}var Al="IndexedDbPersistence",JD=18e5,XD=5e3,eA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",LV="main",gT=class n{constructor(e,t,r,i,o,s,a,u,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=o,this.window=s,this.document=a,this.Ii=l,this.Ei=d,this.di=f,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=m=>Promise.resolve(),!n.D())throw new xe(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nT(this,i),this.gi=t+LV,this.serializer=new b1(u),this.pi=new kl(this.gi,this.di,new pT(this.serializer)),this.jr=new zA,this.Hr=new XA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kV(this.serializer),this.Yr=new HA,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,d===!1&&fr(Al,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(be.FAILED_PRECONDITION,eA);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Co(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=t=>Ee(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(t=>Ee(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(()=>Ee(this,null,function*(){this.started&&(yield this.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$w(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if($l(e))return Re(Al,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re(Al,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return ov(e).get(Of).next(t=>ve.resolve(this.Ni(t)))}Bi(e){return $w(e).delete(this.clientId)}Li(){return Ee(this,null,function*(){if(this.isPrimary&&!this.ki(this.mi,JD)){this.mi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=kr(t,rp);return r.G().next(i=>{let o=this.qi(i,JD),s=i.filter(a=>o.indexOf(a)===-1);return ve.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.yi)for(let t of e)this.yi.removeItem(this.Qi(t.clientId))}})}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?ve.resolve(!0):ov(e).get(Of).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,XD)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new xe(be.FAILED_PRECONDITION,eA);return!1}}return!(!this.networkEnabled||!this.inForeground)||$w(e).G().next(r=>this.qi(r,XD).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Re(Al,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return Ee(this,null,function*(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),yield this.pi.runTransaction("shutdown","readwrite",[Bv,rp],e=>{let t=new _v(e,Co.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()})}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>$w(e).G().next(t=>this.qi(t,JD).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return A1.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new JA(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return I1.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){Re(Al,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?fJ:u===16?hJ:u===15?g5:u===14?k6:u===13?P6:u===12?dJ:u===11?R6:void tt()}(this.di),s;return this.pi.runTransaction(e,i,o,a=>(s=new _v(a,this.Gr?this.Gr.next():Co.ae),t==="readwrite-primary"?this.Fi(s).next(u=>!!u||this.Mi(s)).next(u=>{if(!u)throw fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new xe(be.FAILED_PRECONDITION,I6);return r(s)}).next(u=>this.Oi(s).next(()=>u)):this.ji(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ji(e){return ov(e).get(Of).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,XD)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(be.FAILED_PRECONDITION,eA)})}Oi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ov(e).put(Of,t)}static D(){return kl.D()}xi(e){let t=ov(e);return t.get(Of).next(r=>this.Ni(r)?(Re(Al,"Releasing primary lease."),t.delete(Of)):ve.resolve())}ki(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(fr(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();let t=/(?:Version|Mobile)\/1[456]/;zb()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{let r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return Re(Al,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fr(Al,"Failed to get zombied client id.",r),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){fr("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function ov(n){return kr(n,Bv)}function $w(n){return kr(n,rp)}function S5(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var mT=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=Bt(),i=Bt();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var vT=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var P1=class{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return zb()?8:C6(Gp())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ss(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new vT;return this._s(e,t,s).next(a=>{if(o.result=a,this.Xi)return this.us(e,t,s,a.size)})}).next(()=>o.result)}us(e,t,r,i){return r.documentReadCount<this.es?(qf()<=Uo.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Hf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ve.resolve()):(qf()<=Uo.DEBUG&&Re("QueryEngine","Query:",Hf(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(qf()<=Uo.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Hf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xi(t))):ve.resolve())}rs(e,t){if(S3(t))return ve.resolve(null);let r=xi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=v1(t,null,"F"),r=xi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Bt(...o);return this.ns.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.cs(t,a);return this.ls(t,l,s,u.readTime)?this.rs(e,v1(t,null,"F")):this.hs(e,l,t,u)}))})))}ss(e,t,r,i){return S3(t)||i.isEqual(ct.min())?ve.resolve(null):this.ns.getDocuments(e,r).next(o=>{let s=this.cs(t,o);return this.ls(t,s,r,i)?ve.resolve(null):(qf()<=Uo.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hf(t)),this.hs(e,s,t,b6(i,Jf)).next(a=>a))})}cs(e,t){let r=new An(X6(e));return t.forEach((i,o)=>{Hv(e,o)&&(r=r.add(o))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(e,t,r){return qf()<=Uo.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Hf(t)),this.ns.getDocumentsMatchingQuery(e,t,Xo.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var D5="LocalStore",WJ=3e8,yT=class{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new $n(Mt),this.Is=new ks(o=>Ad(o),Uv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N1(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}};function OV(n,e,t,r){return new yT(n,e,t,r)}function FV(n,e){return Ee(this,null,function*(){let t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=Bt();for(let l of i){s.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Rs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function GJ(n,e){let t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,u,l,d){let f=l.batch,m=f.keys(),g=ve.resolve();return m.forEach(b=>{g=g.next(()=>d.getEntry(u,b)).next(E=>{let D=l.docVersions.get(b);it(D!==null),E.version.compareTo(D)<0&&(f.applyToRemoteDocument(E,l),E.isValidDocument()&&(E.setReadTime(l.commitVersion),d.addEntry(E)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Bt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function VV(n){let e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function KJ(n,e){let t=We(n),r=e.snapshotVersion,i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;let a=[];e.targetChanges.forEach((d,f)=>{let m=i.get(f);if(!m)return;a.push(t.Hr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Hr.addMatchingKeys(o,d.addedDocuments,f)));let g=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(mr.EMPTY_BYTE_STRING,ct.min()).withLastLimboFreeSnapshotVersion(ct.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(f,g),function(E,D,w){return E.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=WJ?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,g,d)&&a.push(t.Hr.updateTargetData(o,g))});let u=Ki(),l=Bt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(jV(o,s,e.documentUpdates).next(d=>{u=d.Vs,l=d.fs})),!r.isEqual(ct.min())){let d=t.Hr.getLastRemoteSnapshotVersion(o).next(f=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return ve.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ts=i,o))}function jV(n,e,t){let r=Bt(),i=Bt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ki();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ct.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):Re(D5,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Vs:s,fs:i}})}function QJ(n,e){let t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ml),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hp(n,e){let t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(o=>o?(i=o,ve.resolve(i)):t.Hr.allocateTargetId(r).next(s=>(i=new cp(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}function fp(n,e,t){return Ee(this,null,function*(){let r=We(n),i=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!$l(s))throw s;Re(D5,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)})}function k1(n,e,t){let r=We(n),i=ct.min(),o=Bt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,d){let f=We(u),m=f.Is.get(d);return m!==void 0?ve.resolve(f.Ts.get(m)):f.Hr.getTargetData(l,d)}(r,s,xi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Ps.getDocumentsMatchingQuery(s,e,t?i:ct.min(),t?o:Bt())).next(a=>(qV(r,J6(e),a),{documents:a,gs:o})))}function BV(n,e){let t=We(n),r=We(t.Hr),i=t.Ts.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.lt(o,e).next(s=>s?s.target:null))}function UV(n,e){let t=We(n),r=t.Es.get(e)||ct.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ds.getAllFromCollectionGroup(i,e,b6(r,Jf),Number.MAX_SAFE_INTEGER)).then(i=>(qV(t,e,i),i))}function qV(n,e,t){let r=n.Es.get(e)||ct.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}function YJ(n,e,t,r){return Ee(this,null,function*(){let i=We(n),o=Bt(),s=Ki();for(let l of t){let d=e.ps(l.metadata.name);l.document&&(o=o.add(d));let f=e.ys(l);f.setReadTime(e.ws(l.metadata.readTime)),s=s.insert(d,f)}let a=i.ds.newChangeBuffer({trackRemovals:!0}),u=yield hp(i,function(d){return xi(bp(sn.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>jV(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Hr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Hr.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Vs,d.fs)).next(()=>d.Vs)))})}function ZJ(r,i){return Ee(this,arguments,function*(n,e,t=Bt()){let o=yield hp(n,xi(I5(e.bundledQuery))),s=We(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=gr(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Yr.saveNamedQuery(a,e);let l=o.withResumeToken(mr.EMPTY_BYTE_STRING,u);return s.Ts=s.Ts.insert(l.targetId,l),s.Hr.updateTargetData(a,l).next(()=>s.Hr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Hr.addMatchingKeys(a,t,o.targetId)).next(()=>s.Yr.saveNamedQuery(a,e))})})}var HV="firestore_clients";function e6(n,e){return`${HV}_${n}_${e}`}var zV="firestore_mutations";function t6(n,e,t){let r=`${zV}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var $V="firestore_targets";function tA(n,e){return`${$V}_${n}_${e}`}var fa="SharedClientState",L1=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ss(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new xe(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(fr(fa,`Failed to parse mutation state for ID '${t}': ${r}`),null)}bs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},hv=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ss(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new xe(r.error.code,r.error.message))),o?new n(e,r.state,i):(fr(fa,`Failed to parse target state for ID '${e}': ${t}`),null)}bs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},O1=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ss(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=w5();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=S6(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(fr(fa,`Failed to parse client data for instance '${e}': ${t}`),null)}},_T=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ss(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(fr(fa,`Failed to parse online state: ${e}`),null)}},Pv=class{constructor(){this.activeTargetIds=w5()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},fv=class{constructor(e,t,r,i,o){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new $n(Mt),this.started=!1,this.Os=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ns=e6(this.persistenceKey,this.Cs),this.Bs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new Pv),this.Ls=new RegExp(`^${HV}_${s}_([^_]*)$`),this.ks=new RegExp(`^${zV}_${s}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${$V}_${s}_(\\d+)$`),this.Qs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.$s=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}start(){return Ee(this,null,function*(){let e=yield this.syncEngine.zi();for(let r of e){if(r===this.Cs)continue;let i=this.getItem(e6(this.persistenceKey,r));if(i){let o=O1.Ss(r,i);o&&(this.xs=this.xs.insert(o.clientId,o))}}this.Ks();let t=this.storage.getItem(this.Qs);if(t){let r=this.Us(t);r&&this.Ws(r)}for(let r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(tA(this.persistenceKey,e));if(i){let o=hv.Ss(e,i);o&&(r=o.state)}}return t&&this.Hs.Ds(e),this.Ks(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Ks()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tA(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.js(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return Re(fa,"READ",e,t),t}setItem(e,t){Re(fa,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re(fa,"REMOVE",e),this.storage.removeItem(e)}Ms(e){let t=e;if(t.storageArea===this.storage){if(Re(fa,"EVENT",t.key,t.newValue),t.key===this.Ns)return void fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(()=>Ee(this,null,function*(){if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){let r=this.Xs(t.key);return this.eo(r,null)}{let r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){let r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){let r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){let r=this.Us(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){let r=function(o){let s=Co.ae;if(o!=null)try{let a=JSON.parse(o);it(typeof a=="number"),s=a}catch(a){fr(fa,"Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Co.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){let r=this._o(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.ao(i)))}}}else this.Os.push(t)}))}}get Hs(){return this.xs.get(this.Cs)}Ks(){this.setItem(this.Ns,this.Hs.bs())}zs(e,t,r){let i=new L1(this.currentUser,e,t,r),o=t6(this.persistenceKey,this.currentUser,e);this.setItem(o,i.bs())}js(e){let t=t6(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){let t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){let i=tA(this.persistenceKey,e),o=new hv(e,t,r);this.setItem(i,o.bs())}Zs(e){let t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){let t=this.Ls.exec(e);return t?t[1]:null}no(e,t){let r=this.Xs(e);return O1.Ss(r,t)}ro(e,t){let r=this.ks.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return L1.Ss(new Cr(o),i,t)}so(e,t){let r=this.qs.exec(e),i=Number(r[1]);return hv.Ss(i,t)}Us(e){return _T.Ss(e)}_o(e){return JSON.parse(e)}io(e){return Ee(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);Re(fa,`Ignoring mutation for non-active user ${e.user.uid}`)})}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){let r=t?this.xs.insert(e,t):this.xs.remove(e),i=this.Gs(this.xs),o=this.Gs(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.lo(s,a).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=w5();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},F1=class{constructor(){this.ho=new Pv,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Pv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var wT=class{To(e){}shutdown(){}};var n6="ConnectivityMonitor",V1=class{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Re(n6,"Network connectivity changed: AVAILABLE");for(let e of this.Vo)e(0)}Ro(){Re(n6,"Network connectivity changed: UNAVAILABLE");for(let e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ww=null;function bT(){return Ww===null?Ww=function(){return 268435456+Math.round(2147483648*Math.random())}():Ww++,"0x"+Ww.toString(16)}var nA="RestConnection",JJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ET=class{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===_A?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,o){let s=bT(),a=this.bo(e,t.toUriEncodedString());Re(nA,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,i,o),this.vo(e,a,u,r).then(l=>(Re(nA,`Received RPC '${e}' ${s}: `,l),l),l=>{throw Rs(nA,`RPC '${e}' ${s} failed with error: `,l,"url: ",a,"request:",r),l})}Co(e,t,r,i,o,s){return this.So(e,t,r,i,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wp}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}bo(e,t){let r=JJ[e];return`${this.po}/v1/${t}:${r}`}terminate(){}};var IT=class{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}};var ci="WebChannelConnection",CT=class extends ET{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){let o=bT();return new Promise((s,a)=>{let u=new WD;u.setWithCredentials(!0),u.listenOnce(GD.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case tv.NO_ERROR:let d=u.getResponseJson();Re(ci,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case tv.TIMEOUT:Re(ci,`RPC '${e}' ${o} timed out`),a(new xe(be.DEADLINE_EXCEEDED,"Request time out"));break;case tv.HTTP_ERROR:let f=u.getStatus();if(Re(ci,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let g=m?.error;if(g&&g.status&&g.message){let b=function(D){let w=D.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(w)>=0?w:be.UNKNOWN}(g.status);a(new xe(b,g.message))}else a(new xe(be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new xe(be.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Re(ci,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);Re(ci,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Wo(e,t,r){let i=bT(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=YD(),a=QD(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let d=o.join("");Re(ci,`Creating RPC '${e}' stream ${i}: ${d}`,u);let f=s.createWebChannel(d,u),m=!1,g=!1,b=new IT({Fo:D=>{g?Re(ci,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(m||(Re(ci,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),Re(ci,`RPC '${e}' stream ${i} sending:`,D),f.send(D))},Mo:()=>f.close()}),E=(D,w,x)=>{D.listen(w,F=>{try{x(F)}catch(z){setTimeout(()=>{throw z},0)}})};return E(f,Lf.EventType.OPEN,()=>{g||(Re(ci,`RPC '${e}' stream ${i} transport opened.`),b.Qo())}),E(f,Lf.EventType.CLOSE,()=>{g||(g=!0,Re(ci,`RPC '${e}' stream ${i} transport closed`),b.Ko())}),E(f,Lf.EventType.ERROR,D=>{g||(g=!0,Rs(ci,`RPC '${e}' stream ${i} transport errored:`,D),b.Ko(new xe(be.UNAVAILABLE,"The operation could not be completed")))}),E(f,Lf.EventType.MESSAGE,D=>{var w;if(!g){let x=D.data[0];it(!!x);let F=x,z=F?.error||((w=F[0])===null||w===void 0?void 0:w.error);if(z){Re(ci,`RPC '${e}' stream ${i} received error:`,z);let H=z.status,Y=function(N){let P=Er[N];if(P!==void 0)return hV(P)}(H),R=z.message;Y===void 0&&(Y=be.INTERNAL,R="Unknown error status: "+H+" with message "+z.message),g=!0,b.Ko(new xe(Y,R)),f.close()}else Re(ci,`RPC '${e}' stream ${i} received:`,x),b.Uo(x)}}),E(a,KD.STAT_EVENT,D=>{D.stat===Uw.PROXY?Re(ci,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===Uw.NOPROXY&&Re(ci,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.$o()},0),b}};function WV(){return typeof window<"u"?window:null}function Xw(){return typeof document<"u"?document:null}function zv(n){return new VA(n,!0)}var kv=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();let t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&Re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}};var r6="PersistentStream",j1=class{constructor(e,t,r,i,o,s,a,u){this.Ti=e,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new kv(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}stop(){return Ee(this,null,function*(){this.u_()&&(yield this.close(0))})}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}T_(){return Ee(this,null,function*(){if(this.c_())return this.close(0)})}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}close(e,t){return Ee(this,null,function*(){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===be.RESOURCE_EXHAUSTED?(fr(t.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Lo(t)})}A_(){}auth(){this.state=1;let e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{let i=new xe(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){let r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(()=>Ee(this,null,function*(){this.state=0,this.start()}))}m_(e){return Re(r6,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(Re(r6,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ST=class extends j1{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();let t=LJ(this.serializer,e),r=function(o){if(!("targetChange"in o))return ct.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ct.min():s.readTime?gr(s.readTime):ct.min()}(e);return this.listener.p_(t,r)}y_(e){let t={};t.database=UA(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=g1(u)?{documents:wV(o,u)}:{query:bV(o,u).ht},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=pV(o,s.resumeToken);let l=jA(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ct.min())>0){a.readTime=lp(o,s.snapshotVersion.toTimestamp());let l=jA(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=FJ(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){let t={};t.database=UA(this.serializer),t.removeTarget=e,this.I_(t)}},DT=class extends j1{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return it(!!e.streamToken),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){it(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();let t=OJ(e.writeResults,e.commitTime),r=gr(e.commitTime);return this.listener.v_(r,t)}C_(){let e={};e.database=UA(this.serializer),this.I_(e)}b_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>xv(this.serializer,r))};this.I_(t)}};var AT=class{},TT=class extends AT{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new xe(be.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,BA(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(be.UNKNOWN,o.toString())})}Co(e,t,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,BA(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xe(be.UNKNOWN,s.toString())})}terminate(){this.F_=!0,this.connection.terminate()}},xT=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(fr(t),this.N_=!1):Re("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}};var Md="RemoteStore",NT=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(s=>{r.enqueueAndForget(()=>Ee(this,null,function*(){Gl(this)&&(Re(Md,"Restarting streams for network reachability change."),yield function(u){return Ee(this,null,function*(){let l=We(u);l.W_.add(4),yield Ep(l),l.j_.set("Unknown"),l.W_.delete(4),yield $v(l)})}(this))}))}),this.j_=new xT(r,i)}};function $v(n){return Ee(this,null,function*(){if(Gl(n))for(let e of n.G_)yield e(!0)})}function Ep(n){return Ee(this,null,function*(){for(let e of n.G_)yield e(!1)})}function cb(n,e){let t=We(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),x5(t)?T5(t):Cp(t).c_()&&A5(t,e))}function pp(n,e){let t=We(n),r=Cp(t);t.U_.delete(e),r.c_()&&GV(t,e),t.U_.size===0&&(r.c_()?r.P_():Gl(t)&&t.j_.set("Unknown"))}function A5(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ct.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cp(n).y_(e)}function GV(n,e){n.H_.Ne(e),Cp(n).w_(e)}function T5(n){n.H_=new FA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Cp(n).start(),n.j_.B_()}function x5(n){return Gl(n)&&!Cp(n).u_()&&n.U_.size>0}function Gl(n){return We(n).W_.size===0}function KV(n){n.H_=void 0}function XJ(n){return Ee(this,null,function*(){n.j_.set("Online")})}function eX(n){return Ee(this,null,function*(){n.U_.forEach((e,t)=>{A5(n,e)})})}function tX(n,e){return Ee(this,null,function*(){KV(n),x5(n)?(n.j_.q_(e),T5(n)):n.j_.set("Unknown")})}function nX(n,e,t){return Ee(this,null,function*(){if(n.j_.set("Online"),e instanceof _1&&e.state===2&&e.cause)try{yield function(i,o){return Ee(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.U_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.U_.delete(a),i.H_.removeTarget(a))})}(n,e)}catch(r){Re(Md,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield B1(n,r)}else if(e instanceof Yf?n.H_.We(e):e instanceof y1?n.H_.Ze(e):n.H_.je(e),!t.isEqual(ct.min()))try{let r=yield VV(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.H_.ot(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let d=o.U_.get(l);d&&o.U_.set(l,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let d=o.U_.get(u);if(!d)return;o.U_.set(u,d.withResumeToken(mr.EMPTY_BYTE_STRING,d.snapshotVersion)),GV(o,u);let f=new cp(d.target,u,l,d.sequenceNumber);A5(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Re(Md,"Failed to raise snapshot:",r),yield B1(n,r)}})}function B1(n,e,t){return Ee(this,null,function*(){if(!$l(e))throw e;n.W_.add(1),yield Ep(n),n.j_.set("Offline"),t||(t=()=>VV(n.localStore)),n.asyncQueue.enqueueRetryable(()=>Ee(this,null,function*(){Re(Md,"Retrying IndexedDB access"),yield t(),n.W_.delete(1),yield $v(n)}))})}function QV(n,e){return e().catch(t=>B1(n,t,e))}function Ip(n){return Ee(this,null,function*(){let e=We(n),t=ql(e),r=e.K_.length>0?e.K_[e.K_.length-1].batchId:Ml;for(;rX(e);)try{let i=yield QJ(e.localStore,r);if(i===null){e.K_.length===0&&t.P_();break}r=i.batchId,iX(e,i)}catch(i){yield B1(e,i)}YV(e)&&ZV(e)})}function rX(n){return Gl(n)&&n.K_.length<10}function iX(n,e){n.K_.push(e);let t=ql(n);t.c_()&&t.S_&&t.b_(e.mutations)}function YV(n){return Gl(n)&&!ql(n).u_()&&n.K_.length>0}function ZV(n){ql(n).start()}function oX(n){return Ee(this,null,function*(){ql(n).C_()})}function sX(n){return Ee(this,null,function*(){let e=ql(n);for(let t of n.K_)e.b_(t.mutations)})}function aX(n,e,t){return Ee(this,null,function*(){let r=n.K_.shift(),i=kA.from(r,e,t);yield QV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ip(n)})}function uX(n,e){return Ee(this,null,function*(){e&&ql(n).S_&&(yield function(r,i){return Ee(this,null,function*(){if(function(s){return dV(s)&&s!==be.ABORTED}(i.code)){let o=r.K_.shift();ql(r).h_(),yield QV(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ip(r)}})}(n,e)),YV(n)&&ZV(n)})}function i6(n,e){return Ee(this,null,function*(){let t=We(n);t.asyncQueue.verifyOperationInProgress(),Re(Md,"RemoteStore received new credentials");let r=Gl(t);t.W_.add(3),yield Ep(t),r&&t.j_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),yield $v(t)})}function MT(n,e){return Ee(this,null,function*(){let t=We(n);e?(t.W_.delete(2),yield $v(t)):e||(t.W_.add(2),yield Ep(t),t.j_.set("Unknown"))})}function Cp(n){return n.J_||(n.J_=function(t,r,i){let o=We(t);return o.M_(),new ST(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:XJ.bind(null,n),No:eX.bind(null,n),Lo:tX.bind(null,n),p_:nX.bind(null,n)}),n.G_.push(e=>Ee(this,null,function*(){e?(n.J_.h_(),x5(n)?T5(n):n.j_.set("Unknown")):(yield n.J_.stop(),KV(n))}))),n.J_}function ql(n){return n.Y_||(n.Y_=function(t,r,i){let o=We(t);return o.M_(),new DT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:oX.bind(null,n),Lo:uX.bind(null,n),D_:sX.bind(null,n),v_:aX.bind(null,n)}),n.G_.push(e=>Ee(this,null,function*(){e?(n.Y_.h_(),yield Ip(n)):(yield n.Y_.stop(),n.K_.length>0&&(Re(Md,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))}))),n.Y_}var RT=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Sp(n,e){if(fr("AsyncQueue",`${e}: ${n}`),$l(n))return new xe(be.UNAVAILABLE,`${e}: ${n}`);throw n}var U1=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=sv(),this.sortedSet=new $n(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var q1=class{constructor(){this.Z_=new $n(Ge.comparator)}track(e){let t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):tt():this.Z_=this.Z_.insert(t,e)}X_(){let e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}},gp=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,U1.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var PT=class{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}},kT=class{constructor(){this.queries=o6(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){let i=We(t),o=i.queries;i.queries=o6(),o.forEach((s,a)=>{for(let u of a.ta)u.onError(r)})})(this,new xe(be.ABORTED,"Firestore shutting down"))}};function o6(){return new ks(n=>Z6(n),qv)}function N5(n,e){return Ee(this,null,function*(){let t=We(n),r=3,i=e.query,o=t.queries.get(i);o?!o.na()&&e.ra()&&(r=2):(o=new PT,r=e.ra()?0:1);try{switch(r){case 0:o.ea=yield t.onListen(i,!0);break;case 1:o.ea=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Sp(s,`Initialization of query '${Hf(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&R5(t)})}function M5(n,e){return Ee(this,null,function*(){let t=We(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ta.indexOf(e);s>=0&&(o.ta.splice(s,1),o.ta.length===0?i=e.ra()?0:1:!o.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function lX(n,e){let t=We(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.ta)a.oa(i)&&(r=!0);s.ea=i}}r&&R5(t)}function cX(n,e,t){let r=We(n),i=r.queries.get(e);if(i)for(let o of i.ta)o.onError(t);r.queries.delete(e)}function R5(n){n.ia.forEach(e=>{e.next()})}var LT,s6;(s6=LT||(LT={}))._a="default",s6.Cache="cache";var Lv=class{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new gp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;let r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;let t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=gp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==LT.Cache}};var OT=class{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}};var H1=class{constructor(e){this.serializer=e}ps(e){return va(this.serializer,e)}ys(e){return e.metadata.exists?_V(this.serializer,e.document,!1):Sr.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return gr(e)}},FT=class{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=JV(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;let r=sn.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){let t=new Map,r=new H1(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.ps(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||Bt()).add(o);t.set(s,a)}}return t}complete(){return Ee(this,null,function*(){let e=yield YJ(this.localStore,new H1(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(let r of this.queries)yield ZJ(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}})}};function JV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var z1=class{constructor(e){this.key=e}},$1=class{constructor(e){this.key=e}},W1=class{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Bt(),this.mutatedKeys=Bt(),this.ya=X6(e),this.wa=new U1(this.ya)}get Sa(){return this.fa}ba(e,t){let r=t?t.Da:new q1,i=t?t.wa:this.wa,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let m=i.get(d),g=Hv(this.query,f)?f:null,b=!!m&&this.mutatedKeys.has(m.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),D=!1;m&&g?m.data.isEqual(g.data)?b!==E&&(r.track({type:3,doc:g}),D=!0):this.va(m,g)||(r.track({type:2,doc:g}),D=!0,(u&&this.ya(g,u)>0||l&&this.ya(g,l)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),D=!0):m&&!g&&(r.track({type:1,doc:m}),D=!0,(u||l)&&(a=!0)),D&&(g?(s=s.add(g),o=E?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{wa:s,Da:r,ls:a,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;let s=e.Da.X_();s.sort((d,f)=>function(g,b){let E=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return E(g)-E(b)}(d.type,f.type)||this.ya(d.doc,f.doc)),this.Ca(r),i=i!=null&&i;let a=t&&!i?this.Fa():[],u=this.pa.size===0&&this.current&&!i?1:0,l=u!==this.ga;return this.ga=u,s.length!==0||l?{snapshot:new gp(this.query,e.wa,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new q1,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];let e=this.pa;this.pa=Bt(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});let t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new $1(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new z1(r))}),t}Oa(e){this.fa=e.gs,this.pa=Bt();let t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return gp.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}},Kl="SyncEngine",VT=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},jT=class{constructor(e){this.key=e,this.Ba=!1}},BT=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new ks(a=>Z6(a),qv),this.qa=new Map,this.Qa=new Set,this.$a=new $n(Ge.comparator),this.Ka=new Map,this.Ua=new Mv,this.Wa={},this.Ga=new Map,this.za=dp.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}};function dX(n,e,t=!0){return Ee(this,null,function*(){let r=db(n),i,o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=yield XV(r,e,t,!0),i})}function hX(n,e){return Ee(this,null,function*(){let t=db(n);yield XV(t,e,!0,!1)})}function XV(n,e,t,r){return Ee(this,null,function*(){let i=yield hp(n.localStore,xi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield P5(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&cb(n.remoteStore,i),a})}function P5(n,e,t,r,i){return Ee(this,null,function*(){n.Ha=(f,m,g)=>function(E,D,w,x){return Ee(this,null,function*(){let F=D.view.ba(w);F.ls&&(F=yield k1(E.localStore,D.query,!1).then(({documents:R})=>D.view.ba(R,F)));let z=x&&x.targetChanges.get(D.targetId),H=x&&x.targetMismatches.get(D.targetId)!=null,Y=D.view.applyChanges(F,E.isPrimaryClient,z,H);return UT(E,D.targetId,Y.Ma),Y.snapshot})}(n,f,m,g);let o=yield k1(n.localStore,e,!0),s=new W1(e,o.gs),a=s.ba(o.documents),u=Av.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);UT(n,t,l.Ma);let d=new VT(e,t,s);return n.ka.set(e,d),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),l.snapshot})}function fX(n,e,t){return Ee(this,null,function*(){let r=We(n),i=r.ka.get(e),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(s=>!qv(s,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield fp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&pp(r.remoteStore,i.targetId),mp(r,i.targetId)}).catch(zl))):(mp(r,i.targetId),yield fp(r.localStore,i.targetId,!0))})}function pX(n,e){return Ee(this,null,function*(){let t=We(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),pp(t.remoteStore,r.targetId))})}function gX(n,e,t){return Ee(this,null,function*(){let r=F5(n);try{let i=yield function(s,a){let u=We(s),l=Yn.now(),d=a.reduce((g,b)=>g.add(b.key),Bt()),f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=Ki(),E=Bt();return u.ds.getEntries(g,d).next(D=>{b=D,b.forEach((w,x)=>{x.isValidDocument()||(E=E.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,b)).next(D=>{f=D;let w=[];for(let x of a){let F=TJ(x,f.get(x.key).overlayedDocument);F!=null&&w.push(new Ls(x.key,F,z6(F.value.mapValue),or.exists(!0)))}return u.mutationQueue.addMutationBatch(g,l,w,a)}).next(D=>{m=D;let w=D.applyToLocalDocumentSet(f,E);return u.documentOverlayCache.saveOverlays(g,D.batchId,w)})}).then(()=>({batchId:m.batchId,changes:tV(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Wa[s.currentUser.toKey()];l||(l=new $n(Mt)),l=l.insert(a,u),s.Wa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield yu(r,i.changes),yield Ip(r.remoteStore)}catch(i){let o=Sp(i,"Failed to persist write");t.reject(o)}})}function e8(n,e){return Ee(this,null,function*(){let t=We(n);try{let r=yield KJ(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Ka.get(o);s&&(it(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ba=!0:i.modifiedDocuments.size>0?it(s.Ba):i.removedDocuments.size>0&&(it(s.Ba),s.Ba=!1))}),yield yu(t,r,e)}catch(r){yield zl(r)}})}function a6(n,e,t){let r=We(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ka.forEach((o,s)=>{let a=s.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=We(s);u.onlineState=a;let l=!1;u.queries.forEach((d,f)=>{for(let m of f.ta)m.sa(a)&&(l=!0)}),l&&R5(u)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mX(n,e,t){return Ee(this,null,function*(){let r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Ka.get(e),o=i&&i.key;if(o){let s=new $n(Ge.comparator);s=s.insert(o,Sr.newNoDocument(o,ct.min()));let a=Bt().add(o),u=new Dv(ct.min(),new Map,new $n(Mt),s,a);yield e8(r,u),r.$a=r.$a.remove(o),r.Ka.delete(e),O5(r)}else yield fp(r.localStore,e,!1).then(()=>mp(r,e,t)).catch(zl)})}function vX(n,e){return Ee(this,null,function*(){let t=We(n),r=e.batch.batchId;try{let i=yield GJ(t.localStore,e);L5(t,r,null),k5(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield yu(t,i)}catch(i){yield zl(i)}})}function yX(n,e,t){return Ee(this,null,function*(){let r=We(n);try{let i=yield function(s,a){let u=We(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(it(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>u.localDocuments.getDocuments(l,d))})}(r.localStore,e);L5(r,e,t),k5(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield yu(r,i)}catch(i){yield zl(i)}})}function _X(n,e){return Ee(this,null,function*(){let t=We(n);Gl(t.remoteStore)||Re(Kl,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=We(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===Ml)return void e.resolve();let i=t.Ga.get(r)||[];i.push(e),t.Ga.set(r,i)}catch(r){let i=Sp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function k5(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function L5(n,e,t){let r=We(n),i=r.Wa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function mp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.br(e).forEach(r=>{n.Ua.containsKey(r)||t8(n,r)})}function t8(n,e){n.Qa.delete(e.path.canonicalString());let t=n.$a.get(e);t!==null&&(pp(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),O5(n))}function UT(n,e,t){for(let r of t)r instanceof z1?(n.Ua.addReference(r.key,e),wX(n,r)):r instanceof $1?(Re(Kl,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||t8(n,r.key)):tt()}function wX(n,e){let t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(Re(Kl,"New document in limbo: "+t),n.Qa.add(r),O5(n))}function O5(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){let e=n.Qa.values().next().value;n.Qa.delete(e);let t=new Ge(sn.fromString(e)),r=n.za.next();n.Ka.set(r,new jT(t)),n.$a=n.$a.insert(t,r),cb(n.remoteStore,new cp(xi(bp(t.path)),r,"TargetPurposeLimboResolution",Co.ae))}}function yu(n,e,t){return Ee(this,null,function*(){let r=We(n),i=[],o=[],s=[];r.ka.isEmpty()||(r.ka.forEach((a,u)=>{s.push(r.Ha(u,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=mT.Yi(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.La.p_(i),yield function(u,l){return Ee(this,null,function*(){let d=We(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ve.forEach(l,m=>ve.forEach(m.Hi,g=>d.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>ve.forEach(m.Ji,g=>d.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!$l(f))throw f;Re(D5,"Failed to update sequence numbers: "+f)}for(let f of l){let m=f.targetId;if(!f.fromCache){let g=d.Ts.get(m),b=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(b);d.Ts=d.Ts.insert(m,E)}}})}(r.localStore,o))})}function bX(n,e){return Ee(this,null,function*(){let t=We(n);if(!t.currentUser.isEqual(e)){Re(Kl,"User change. New user:",e.toKey());let r=yield FV(t.localStore,e);t.currentUser=e,function(o,s){o.Ga.forEach(a=>{a.forEach(u=>{u.reject(new xe(be.CANCELLED,s))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yu(t,r.Rs)}})}function EX(n,e){let t=We(n),r=t.Ka.get(e);if(r&&r.Ba)return Bt().add(r.key);{let i=Bt(),o=t.qa.get(e);if(!o)return i;for(let s of o){let a=t.ka.get(s);i=i.unionWith(a.view.Sa)}return i}}function IX(n,e){return Ee(this,null,function*(){let t=We(n),r=yield k1(t.localStore,e.query,!0),i=e.view.Oa(r);return t.isPrimaryClient&&UT(t,e.targetId,i.Ma),i})}function CX(n,e){return Ee(this,null,function*(){let t=We(n);return UV(t.localStore,e).then(r=>yu(t,r))})}function SX(n,e,t,r){return Ee(this,null,function*(){let i=We(n),o=yield function(a,u){let l=We(a),d=We(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Ln(f,u).next(m=>m?l.localDocuments.getDocuments(f,m):ve.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Ip(i.remoteStore):t==="acknowledged"||t==="rejected"?(L5(i,e,r||null),k5(i,e),function(a,u){We(We(a).mutationQueue).qn(u)}(i.localStore,e)):tt(),yield yu(i,o)):Re(Kl,"Cannot apply mutation batch with id: "+e)})}function DX(n,e){return Ee(this,null,function*(){let t=We(n);if(db(t),F5(t),e===!0&&t.ja!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield u6(t,r.toArray());t.ja=!0,yield MT(t.remoteStore,!0);for(let o of i)cb(t.remoteStore,o)}else if(e===!1&&t.ja!==!1){let r=[],i=Promise.resolve();t.qa.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(mp(t,s),fp(t.localStore,s,!0))),pp(t.remoteStore,s)}),yield i,yield u6(t,r),function(s){let a=We(s);a.Ka.forEach((u,l)=>{pp(a.remoteStore,l)}),a.Ua.Dr(),a.Ka=new Map,a.$a=new $n(Ge.comparator)}(t),t.ja=!1,yield MT(t.remoteStore,!1)}})}function u6(n,e,t){return Ee(this,null,function*(){let r=We(n),i=[],o=[];for(let s of e){let a,u=r.qa.get(s);if(u&&u.length!==0){a=yield hp(r.localStore,xi(u[0]));for(let l of u){let d=r.ka.get(l),f=yield IX(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield BV(r.localStore,s);a=yield hp(r.localStore,l),yield P5(r,n8(l),s,!1,a.resumeToken)}i.push(a)}return r.La.p_(o),i})}function n8(n){return Y6(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function AX(n){return function(t){return We(We(t).persistence).zi()}(We(n).localStore)}function TX(n,e,t,r){return Ee(this,null,function*(){let i=We(n);if(i.ja)return void Re(Kl,"Ignoring unexpected query state notification.");let o=i.qa.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield UV(i.localStore,J6(o[0])),a=Dv.createSynthesizedRemoteEventForCurrentChange(e,t==="current",mr.EMPTY_BYTE_STRING);yield yu(i,s,a);break}case"rejected":yield fp(i.localStore,e,!0),mp(i,e,r);break;default:tt()}})}function xX(n,e,t){return Ee(this,null,function*(){let r=db(n);if(r.ja){for(let i of e){if(r.qa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Re(Kl,"Adding an already active target "+i);continue}let o=yield BV(r.localStore,i),s=yield hp(r.localStore,o);yield P5(r,n8(o),s.targetId,!1,s.resumeToken),cb(r.remoteStore,s)}for(let i of t)r.qa.has(i)&&(yield fp(r.localStore,i,!1).then(()=>{pp(r.remoteStore,i),mp(r,i)}).catch(zl))}})}function db(n){let e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=e8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mX.bind(null,e),e.La.p_=lX.bind(null,e.eventManager),e.La.Ja=cX.bind(null,e.eventManager),e}function F5(n){let e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yX.bind(null,e),e}function NX(n,e,t){let r=We(n);(function(o,s,a){return Ee(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(g,b){let E=We(g),D=gr(b.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",w=>E.Yr.getBundleMetadata(w,b.id)).then(w=>!!w&&w.createTime.compareTo(D)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(JV(u));let l=new FT(u,o.localStore,s.serializer),d=yield s.Ya();for(;d;){let m=yield l.Aa(d);m&&a._updateProgress(m),d=yield s.Ya()}let f=yield l.complete();return yield yu(o,f.ma,void 0),yield function(g,b){let E=We(g);return E.persistence.runTransaction("Save bundle","readwrite",D=>E.Yr.saveBundleMetadata(D,b))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.Va)}catch(u){return Rs(Kl,`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var V5=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return Ee(this,null,function*(){this.serializer=zv(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),yield this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)})}tu(t,r){return null}nu(t,r){return null}eu(t){return OV(this.persistence,new P1,t.initialUser,this.serializer)}Xa(t){return new Rv(M1.ri,this.serializer)}Za(t){return new F1}terminate(){return Ee(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),qT=class extends V5{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){it(this.persistence.referenceDelegate instanceof R1);let r=this.persistence.referenceDelegate.garbageCollector;return new T1(r,e.asyncQueue,t)}Xa(e){let t=this.cacheSizeBytes!==void 0?Gi.withCacheSize(this.cacheSizeBytes):Gi.DEFAULT;return new Rv(r=>R1.ri(r,t),this.serializer)}},G1=class n extends V5{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return Ee(this,null,function*(){yield qb(n.prototype,this,"initialize").call(this,e),yield this.ru.initialize(this,e),yield F5(this.ru.syncEngine),yield Ip(this.ru.remoteStore),yield this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}eu(e){return OV(this.persistence,new P1,e.initialUser,this.serializer)}tu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new T1(r,e.asyncQueue,t)}nu(e,t){let r=new pA(t,this.persistence);return new fA(e.asyncQueue,r)}Xa(e){let t=S5(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Gi.withCacheSize(this.cacheSizeBytes):Gi.DEFAULT;return new gT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,WV(),Xw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new F1}},HT=class n extends G1{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return Ee(this,null,function*(){yield qb(n.prototype,this,"initialize").call(this,e);let t=this.ru.syncEngine;this.sharedClientState instanceof fv&&(this.sharedClientState.syncEngine={uo:SX.bind(null,t),co:TX.bind(null,t),lo:xX.bind(null,t),zi:AX.bind(null,t),ao:CX.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.Ci(r=>Ee(this,null,function*(){yield DX(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Za(e){let t=WV();if(!fv.D(t))throw new xe(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=S5(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fv(t,e.asyncQueue,r,e.clientId,e.initialUser)}},j5=(()=>{class n{initialize(t,r){return Ee(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>a6(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bX.bind(null,this.syncEngine),yield MT(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new kT}()}createDatastore(t){let r=zv(t.databaseInfo.databaseId),i=function(s){return new CT(s)}(t.databaseInfo);return function(s,a,u,l){return new TT(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new NT(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>a6(this.syncEngine,r,0),function(){return V1.D()?new V1:new wT}())}createSyncEngine(t,r){return function(o,s,a,u,l,d,f){let m=new BT(o,s,a,u,l,d);return f&&(m.ja=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return Ee(this,null,function*(){var t,r;yield function(o){return Ee(this,null,function*(){let s=We(o);Re(Md,"RemoteStore shutting down."),s.W_.add(5),yield Ep(s),s.z_.shutdown(),s.j_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function l6(n,e=10240){let t=0;return{read(){return Ee(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return Ee(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var vp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var zT=class{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new Pr,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}getMetadata(){return Ee(this,null,function*(){return this.metadata.promise})}Ya(){return Ee(this,null,function*(){return yield this.getMetadata(),this.au()})}au(){return Ee(this,null,function*(){let e=yield this.uu();if(e===null)return null;let t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);let i=yield this.lu(r);return new OT(JSON.parse(i),e.length+r)})}hu(){return this.buffer.findIndex(e=>e===123)}uu(){return Ee(this,null,function*(){for(;this.hu()<0&&!(yield this.Pu()););if(this.buffer.length===0)return null;let e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}lu(e){return Ee(this,null,function*(){for(;this.buffer.length<e;)(yield this.Pu())&&this.cu("Reached the end of bundle when more is expected.");let t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}Pu(){return Ee(this,null,function*(){let e=yield this.ou.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var $T=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return Ee(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new xe(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return Ee(this,null,function*(){let s=We(i),a={documents:o.map(f=>Tv(s.serializer,f))},u=yield s.Co("BatchGetDocuments",s.serializer.databaseId,sn.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let m=kJ(s.serializer,f);l.set(m.key.toString(),m)});let d=[];return o.forEach(f=>{let m=l.get(f.toString());it(!!m),d.push(m)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ul(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return Ee(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=Ge.fromPath(r);this.mutations.push(new Iv(i,this.precondition(i)))}),yield function(r,i){return Ee(this,null,function*(){let o=We(r),s={writes:i.map(a=>xv(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,sn.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=ct.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ct.min())?or.exists(!1):or.updateTime(t):or.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ct.min()))throw new xe(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return or.updateTime(t)}return or.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var WT=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Tu=r.maxAttempts,this.a_=new kv(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(()=>Ee(this,null,function*(){let e=new $T(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Au(i)}))}).catch(r=>{this.Au(r)})}))}du(e){try{let t=this.updateFunction(e);return!jv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!dV(t)}return!1}};var Hl="FirestoreClient",GT=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Cr.UNAUTHENTICATED,this.clientId=n1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>Ee(this,null,function*(){Re(Hl,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(Re(Hl,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>Ee(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Sp(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function rA(n,e){return Ee(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Re(Hl,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>Ee(this,null,function*(){r.isEqual(i)||(yield FV(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function c6(n,e){return Ee(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield B5(n);Re(Hl,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>i6(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>i6(e.remoteStore,i)),n._onlineComponents=e})}function B5(n){return Ee(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re(Hl,"Using user provided OfflineComponentProvider");try{yield rA(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===be.FAILED_PRECONDITION||i.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Rs("Error using user provided cache. Falling back to memory cache: "+t),yield rA(n,new V5)}}else Re(Hl,"Using default OfflineComponentProvider"),yield rA(n,new qT(void 0));return n._offlineComponents})}function hb(n){return Ee(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re(Hl,"Using user provided OnlineComponentProvider"),yield c6(n,n._uninitializedComponentsProvider._online)):(Re(Hl,"Using default OnlineComponentProvider"),yield c6(n,new j5))),n._onlineComponents})}function r8(n){return B5(n).then(e=>e.persistence)}function U5(n){return B5(n).then(e=>e.localStore)}function i8(n){return hb(n).then(e=>e.remoteStore)}function q5(n){return hb(n).then(e=>e.syncEngine)}function MX(n){return hb(n).then(e=>e.datastore)}function yp(n){return Ee(this,null,function*(){let e=yield hb(n),t=e.eventManager;return t.onListen=dX.bind(null,e.syncEngine),t.onUnlisten=fX.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=hX.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pX.bind(null,e.syncEngine),t})}function RX(n){return n.asyncQueue.enqueue(()=>Ee(this,null,function*(){let e=yield r8(n),t=yield i8(n);return e.setNetworkEnabled(!0),function(i){let o=We(i);return o.W_.delete(0),$v(o)}(t)}))}function PX(n){return n.asyncQueue.enqueue(()=>Ee(this,null,function*(){let e=yield r8(n),t=yield i8(n);return e.setNetworkEnabled(!1),function(i){return Ee(this,null,function*(){let o=We(i);o.W_.add(0),yield Ep(o),o.j_.set("Offline")})}(t)}))}function kX(n,e){let t=new Pr;return n.asyncQueue.enqueueAndForget(()=>Ee(this,null,function*(){return function(i,o,s){return Ee(this,null,function*(){try{let a=yield function(l,d){let f=We(l);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new xe(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Sp(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield U5(n),e,t)})),t.promise}function o8(n,e,t={}){let r=new Pr;return n.asyncQueue.enqueueAndForget(()=>Ee(this,null,function*(){return function(o,s,a,u,l){let d=new vp({next:m=>{d.su(),s.enqueueAndForget(()=>M5(o,f));let g=m.docs.has(a);!g&&m.fromCache?l.reject(new xe(be.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&u&&u.source==="server"?l.reject(new xe(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),f=new Lv(bp(a.path),d,{includeMetadataChanges:!0,Ta:!0});return N5(o,f)}(yield yp(n),n.asyncQueue,e,t,r)})),r.promise}function LX(n,e){let t=new Pr;return n.asyncQueue.enqueueAndForget(()=>Ee(this,null,function*(){return function(i,o,s){return Ee(this,null,function*(){try{let a=yield k1(i,o,!0),u=new W1(o,a.gs),l=u.ba(a.documents),d=u.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let u=Sp(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield U5(n),e,t)})),t.promise}function s8(n,e,t={}){let r=new Pr;return n.asyncQueue.enqueueAndForget(()=>Ee(this,null,function*(){return function(o,s,a,u,l){let d=new vp({next:m=>{d.su(),s.enqueueAndForget(()=>M5(o,f)),m.fromCache&&u.source==="server"?l.reject(new xe(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),f=new Lv(a,d,{includeMetadataChanges:!0,Ta:!0});return N5(o,f)}(yield yp(n),n.asyncQueue,e,t,r)})),r.promise}function OX(n,e){let t=new vp(e);return n.asyncQueue.enqueueAndForget(()=>Ee(this,null,function*(){return function(i,o){We(i).ia.add(o),o.next()}(yield yp(n),t)})),()=>{t.su(),n.asyncQueue.enqueueAndForget(()=>Ee(this,null,function*(){return function(i,o){We(i).ia.delete(o)}(yield yp(n),t)}))}}function FX(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?fV().encode(s):s,function(d,f){return new zT(d,f)}(function(d,f){if(d instanceof Uint8Array)return l6(d,f);if(d instanceof ArrayBuffer)return l6(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,zv(e));n.asyncQueue.enqueueAndForget(()=>Ee(this,null,function*(){NX(yield q5(n),i,r)}))}function VX(n,e){return n.asyncQueue.enqueue(()=>Ee(this,null,function*(){return function(r,i){let o=We(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Yr.getNamedQuery(s,i))}(yield U5(n),e)}))}function a8(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var d6=new Map;function H5(n,e,t){if(!t)throw new xe(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function z5(n,e,t,r){if(e===!0&&r===!0)throw new xe(be.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function h6(n){if(!Ge.isDocumentKey(n))throw new xe(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function f6(n){if(Ge.isDocumentKey(n))throw new xe(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fb(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":tt()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=fb(n);throw new xe(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function u8(n,e){if(e<=0)throw new xe(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var l8="firestore.googleapis.com",p6=!0,K1=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=l8,this.ssl=p6}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:p6;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$J)throw new xe(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}z5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a8((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new xe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new xe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new xe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Rd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iA;switch(r.type){case"firstParty":return new uA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return Ee(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=d6.get(t);r&&(Re("ComponentProvider","Removing Datastore"),d6.delete(t),r.terminate())}(this),Promise.resolve()}};function c8(n,e,t,r={}){var i;let o=(n=ln(n,Rd))._getSettings(),s=`${e}:${t}`;if(o.host!==l8&&o.host!==s&&Rs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Cr.MOCK_USER;else{a=wy(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new xe(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Cr(l)}n._authCredentials=new oA(new e1(a,u))}}var Zr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},jn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ya(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ya=class n extends Zr{constructor(e,t,r){super(e,t,bp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new Ge(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function $5(n,e,...t){if(n=Yt(n),H5("collection","path",e),n instanceof Rd){let r=sn.fromString(e,...t);return f6(r),new ya(n,null,r)}{if(!(n instanceof jn||n instanceof ya))throw new xe(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(sn.fromString(e,...t));return f6(r),new ya(n.firestore,null,r)}}function d8(n,e){if(n=ln(n,Rd),H5("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(be.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zr(n,null,function(r){return new Ps(sn.emptyPath(),r)}(e))}function Wv(n,e,...t){if(n=Yt(n),arguments.length===1&&(e=n1.newId()),H5("doc","path",e),n instanceof Rd){let r=sn.fromString(e,...t);return h6(r),new jn(n,null,new Ge(r))}{if(!(n instanceof jn||n instanceof ya))throw new xe(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(sn.fromString(e,...t));return h6(r),new jn(n.firestore,n instanceof ya?n.converter:null,new Ge(r))}}function W5(n,e){return n=Yt(n),e=Yt(e),(n instanceof jn||n instanceof ya)&&(e instanceof jn||e instanceof ya)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function G5(n,e){return n=Yt(n),e=Yt(e),n instanceof Zr&&e instanceof Zr&&n.firestore===e.firestore&&qv(n._query,e._query)&&n.converter===e.converter}var g6="AsyncQueue",Q1=class{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new kv(this,"async_queue_retry"),this.Su=()=>{let r=Xw();r&&Re(g6,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;let t=Xw();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;let t=Xw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});let t=new Pr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}Cu(){return Ee(this,null,function*(){if(this.Vu.length!==0){try{yield this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!$l(e))throw e;Re(g6,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}})}vu(e){let t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw fr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);let i=RT.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&tt()}verifyOperationInProgress(){}Mu(){return Ee(this,null,function*(){let e;do e=this.bu,yield e;while(e!==this.bu)})}xu(e){for(let t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){let t=this.fu.indexOf(e);this.fu.splice(t,1)}};function KT(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var QT=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var h8=-1,Zn=class extends Rd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Q1,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return Ee(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Q1(e),this._firestoreClient=void 0,yield e}})}};function Jr(n){if(n._terminated)throw new xe(be.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||f8(n),n._firestoreClient}function f8(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,d){return new yA(a,u,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,a8(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new GT(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function p8(n,e){Rs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return m8(n,j5.provider,{build:r=>new G1(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function g8(n){return Ee(this,null,function*(){Rs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();m8(n,j5.provider,{build:t=>new HT(t,e.cacheSizeBytes)})})}function m8(n,e,t){if((n=ln(n,Zn))._firestoreClient||n._terminated)throw new xe(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new xe(be.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},f8(n)}function v8(n){if(n._initialized&&!n._terminated)throw new xe(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Pr;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>Ee(this,null,function*(){try{yield function(r){return Ee(this,null,function*(){if(!kl.D())return Promise.resolve();let i=r+LV;yield kl.delete(i)})}(S5(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function y8(n){return function(t){let r=new Pr;return t.asyncQueue.enqueueAndForget(()=>Ee(this,null,function*(){return _X(yield q5(t),r)})),r.promise}(Jr(n=ln(n,Zn)))}function _8(n){return RX(Jr(n=ln(n,Zn)))}function w8(n){return PX(Jr(n=ln(n,Zn)))}function b8(n,e){let t=Jr(n=ln(n,Zn)),r=new QT;return FX(t,n._databaseId,e,r),r}function E8(n,e){return VX(Jr(n=ln(n,Zn)),e).then(t=>t?new Zr(n,null,t.query):null)}var ba=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(mr.fromBase64String(e))}catch(t){throw new xe(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Os=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var mu=class{constructor(e){this._methodName=e}};var Pd=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}};var Ov=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var jX=/^__.*__$/,YT=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ls(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bl(e,this.data,t,this.fieldTransforms)}},Y1=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ls(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function I8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}var Z1=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Ku(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return J1(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(I8(this.Lu)&&jX.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}},ZT=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||zv(e)}ju(e,t,r,i=!1){return new Z1({Lu:e,methodName:t,zu:r,path:pr.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Od(n){let e=n._freezeSettings(),t=zv(n._databaseId);return new ZT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pb(n,e,t,r,i,o={}){let s=n.ju(o.merge||o.mergeFields?2:0,e,t,i);Y5("Data must be an object, but it was:",s,r);let a=D8(r,s),u,l;if(o.merge)u=new So(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let m=n5(e,f,t);if(!s.contains(m))throw new xe(be.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);T8(d,m)||d.push(m)}u=new So(d),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new YT(new di(a),u,l)}var Fv=class n extends mu{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function C8(n,e,t){return new Z1({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var JT=class n extends mu{_toFieldTransform(e){return new Td(e.path,new Vl)}isEqual(e){return e instanceof n}},XT=class n extends mu{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){let t=C8(this,e,!0),r=this.Hu.map(o=>Fd(o,t)),i=new pu(r);return new Td(e.path,i)}isEqual(e){return e instanceof n&&$b(this.Hu,e.Hu)}},e5=class n extends mu{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){let t=C8(this,e,!0),r=this.Hu.map(o=>Fd(o,t)),i=new gu(r);return new Td(e.path,i)}isEqual(e){return e instanceof n&&$b(this.Hu,e.Hu)}},t5=class n extends mu{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){let t=new jl(e.serializer,iV(e.serializer,this.Ju));return new Td(e.path,t)}isEqual(e){return e instanceof n&&this.Ju===e.Ju}};function K5(n,e,t,r){let i=n.ju(1,e,t);Y5("Data must be an object, but it was:",i,r);let o=[],s=di.empty();Wl(r,(u,l)=>{let d=Z5(e,u,t);l=Yt(l);let f=i.Ku(d);if(l instanceof Fv)o.push(d);else{let m=Fd(l,f);m!=null&&(o.push(d),s.set(d,m))}});let a=new So(o);return new Y1(s,a,i.fieldTransforms)}function Q5(n,e,t,r,i,o){let s=n.ju(1,e,t),a=[n5(e,r,t)],u=[i];if(o.length%2!=0)throw new xe(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(n5(e,o[m])),u.push(o[m+1]);let l=[],d=di.empty();for(let m=a.length-1;m>=0;--m)if(!T8(l,a[m])){let g=a[m],b=u[m];b=Yt(b);let E=s.Ku(g);if(b instanceof Fv)l.push(g);else{let D=Fd(b,E);D!=null&&(l.push(g),d.set(g,D))}}let f=new So(l);return new Y1(d,f,s.fieldTransforms)}function S8(n,e,t,r=!1){return Fd(t,n.ju(r?4:3,e))}function Fd(n,e){if(A8(n=Yt(n)))return Y5("Unsupported field value:",e,n),D8(n,e);if(n instanceof mu)return function(r,i){if(!I8(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Fd(a,i.Uu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Yn.fromDate(r);return{timestampValue:lp(i.serializer,o)}}if(r instanceof Yn){let o=new Yn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lp(i.serializer,o)}}if(r instanceof Pd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ba)return{bytesValue:pV(i.serializer,r._byteString)};if(r instanceof jn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:E5(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ov)return function(s,a){return{mapValue:{fields:{[m5]:{stringValue:v5},[ip]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Wu("VectorValues must only contain numeric values.");return b5(a.serializer,l)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${fb(r)}`)}(n,e)}function D8(n,e){let t={};return L6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wl(n,(r,i)=>{let o=Fd(i,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function A8(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Yn||n instanceof Pd||n instanceof ba||n instanceof jn||n instanceof mu||n instanceof Ov)}function Y5(n,e,t){if(!A8(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=fb(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function n5(n,e,t){if((e=Yt(e))instanceof Os)return e._internalPath;if(typeof e=="string")return Z5(n,e);throw J1("Field path arguments must be of type string or ",n,!1,void 0,t)}var BX=new RegExp("[~\\*/\\[\\]]");function Z5(n,e,t){if(e.search(BX)>=0)throw J1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Os(...e.split("."))._internalPath}catch{throw J1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function J1(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new xe(be.INVALID_ARGUMENT,a+n+u)}function T8(n,e){return n.some(t=>t.isEqual(e))}var kd=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new r5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(gb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},r5=class extends kd{data(){return super.data()}};function gb(n,e){return typeof e=="string"?Z5(n,e):e instanceof Os?e._internalPath:e._delegate._internalPath}function x8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new xe(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vv=class{},Ld=class extends Vv{};function _u(n,e,...t){let r=[];e instanceof Vv&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof i5).length,a=o.filter(u=>u instanceof X1).length;if(s>1||s>0&&a>0)throw new xe(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var X1=class n extends Ld{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return j8(e._query,t),new Zr(e.firestore,e.converter,RA(e._query,t))}_parse(e){let t=Od(e.firestore);return function(o,s,a,u,l,d,f){let m;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new xe(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){v6(f,d);let b=[];for(let E of f)b.push(m6(u,o,E));m={arrayValue:{values:b}}}else m=m6(u,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||v6(f,d),m=S8(a,s,f,d==="in"||d==="not-in");return Xt.create(l,d,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function N8(n,e,t){let r=e,i=gb("where",n);return X1._create(i,r,t)}var i5=class n extends Vv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:En.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)j8(s,u),s=RA(s,u)}(e._query,t),new Zr(e.firestore,e.converter,RA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var o5=class n extends Ld{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new xe(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new xe(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dd(o,s)}(e._query,this._field,this._direction);return new Zr(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Ps(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function M8(n,e="asc"){let t=e,r=gb("orderBy",n);return o5._create(r,t)}var eb=class n extends Ld{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Zr(e.firestore,e.converter,v1(e._query,this._limit,this._limitType))}};function R8(n){return u8("limit",n),eb._create("limit",n,"F")}function P8(n){return u8("limitToLast",n),eb._create("limitToLast",n,"L")}var tb=class n extends Ld{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=V8(e,this.type,this._docOrFields,this._inclusive);return new Zr(e.firestore,e.converter,function(i,o){return new Ps(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function k8(...n){return tb._create("startAt",n,!0)}function L8(...n){return tb._create("startAfter",n,!1)}var nb=class n extends Ld{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=V8(e,this.type,this._docOrFields,this._inclusive);return new Zr(e.firestore,e.converter,function(i,o){return new Ps(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function O8(...n){return nb._create("endBefore",n,!1)}function F8(...n){return nb._create("endAt",n,!0)}function V8(n,e,t,r){if(t[0]=Yt(t[0]),t[0]instanceof kd)return function(o,s,a,u,l){if(!u)throw new xe(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Qf(o))if(f.field.isKeyField())d.push(Sd(s,u.key));else{let m=u.data.field(f.field);if(ab(m))throw new xe(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let g=f.field.canonicalString();throw new xe(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(m)}return new wa(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Od(n.firestore);return function(s,a,u,l,d,f){let m=s.explicitOrderBy;if(d.length>m.length)throw new xe(be.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let g=[];for(let b=0;b<d.length;b++){let E=d[b];if(m[b].field.isKeyField()){if(typeof E!="string")throw new xe(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof E}`);if(!_5(s)&&E.indexOf("/")!==-1)throw new xe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${E}' contains a slash.`);let D=s.path.child(sn.fromString(E));if(!Ge.isDocumentKey(D))throw new xe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);let w=new Ge(D);g.push(Sd(a,w))}else{let D=S8(u,l,E);g.push(D)}}return new wa(g,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function m6(n,e,t){if(typeof(t=Yt(t))=="string"){if(t==="")throw new xe(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_5(e)&&t.indexOf("/")!==-1)throw new xe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(sn.fromString(t));if(!Ge.isDocumentKey(r))throw new xe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sd(n,new Ge(r))}if(t instanceof jn)return Sd(n,t._key);throw new xe(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fb(t)}.`)}function v6(n,e){if(!Array.isArray(n)||n.length===0)throw new xe(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function j8(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new xe(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var _p=class{convertValue(e,t="none"){switch(Ol(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw tt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Wl(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ip].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Gn(s.doubleValue));return new Ov(o)}convertGeoPoint(e){return new Pd(Gn(e.latitude),Gn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ub(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(wv(e));default:return null}}convertTimestamp(e){let t=hu(e);return new Yn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=sn.fromString(e);it(SV(r));let i=new Ll(r.get(1),r.get(3)),o=new Ge(r.popFirst(5));return i.isEqual(t)||fr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function mb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var s5=class extends _p{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}};var du=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},es=class extends kd{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Rl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(gb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Rl=class extends es{data(e={}){return super.data(e)}},Fs=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new du(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Rl(this._firestore,this._userDataWriter,r.key,r,new du(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Rl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new du(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Rl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new du(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:UX(a.type),doc:u,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function UX(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function J5(n,e){return n instanceof es&&e instanceof es?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Fs&&e instanceof Fs&&n._firestore===e._firestore&&G5(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function B8(n){n=ln(n,jn);let e=ln(n.firestore,Zn);return o8(Jr(e),n._key).then(t=>nx(e,n,t))}var vu=class extends _p{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}};function U8(n){n=ln(n,jn);let e=ln(n.firestore,Zn),t=Jr(e),r=new vu(e);return kX(t,n._key).then(i=>new es(e,r,n._key,i,new du(i!==null&&i.hasLocalMutations,!0),n.converter))}function q8(n){n=ln(n,jn);let e=ln(n.firestore,Zn);return o8(Jr(e),n._key,{source:"server"}).then(t=>nx(e,n,t))}function H8(n){n=ln(n,Zr);let e=ln(n.firestore,Zn),t=Jr(e),r=new vu(e);return x8(n._query),s8(t,n._query).then(i=>new Fs(e,r,n,i))}function z8(n){n=ln(n,Zr);let e=ln(n.firestore,Zn),t=Jr(e),r=new vu(e);return LX(t,n._query).then(i=>new Fs(e,r,n,i))}function $8(n){n=ln(n,Zr);let e=ln(n.firestore,Zn),t=Jr(e),r=new vu(e);return s8(t,n._query,{source:"server"}).then(i=>new Fs(e,r,n,i))}function X5(n,e,t){n=ln(n,jn);let r=ln(n.firestore,Zn),i=mb(n.converter,e,t);return Dp(r,[pb(Od(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,or.none())])}function ex(n,e,t,...r){n=ln(n,jn);let i=ln(n.firestore,Zn),o=Od(i),s;return s=typeof(e=Yt(e))=="string"||e instanceof Os?Q5(o,"updateDoc",n._key,e,t,r):K5(o,"updateDoc",n._key,e),Dp(i,[s.toMutation(n._key,or.exists(!0))])}function W8(n){return Dp(ln(n.firestore,Zn),[new Ul(n._key,or.none())])}function G8(n,e){let t=ln(n.firestore,Zn),r=Wv(n),i=mb(n.converter,e);return Dp(t,[pb(Od(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,or.exists(!1))]).then(()=>r)}function tx(n,...e){var t,r,i;n=Yt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||KT(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(KT(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,d;if(n instanceof jn)l=ln(n.firestore,Zn),d=bp(n._key.path),u={next:f=>{e[s]&&e[s](nx(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=ln(n,Zr);l=ln(f.firestore,Zn),d=f._query;let m=new vu(l);u={next:g=>{e[s]&&e[s](new Fs(l,m,f,g))},error:e[s+1],complete:e[s+2]},x8(n._query)}return function(m,g,b,E){let D=new vp(E),w=new Lv(g,D,b);return m.asyncQueue.enqueueAndForget(()=>Ee(this,null,function*(){return N5(yield yp(m),w)})),()=>{D.su(),m.asyncQueue.enqueueAndForget(()=>Ee(this,null,function*(){return M5(yield yp(m),w)}))}}(Jr(l),d,a,u)}function K8(n,e){return OX(Jr(n=ln(n,Zn)),KT(e)?e:{next:e})}function Dp(n,e){return function(r,i){let o=new Pr;return r.asyncQueue.enqueueAndForget(()=>Ee(this,null,function*(){return gX(yield q5(r),i,o)})),o.promise}(Jr(n),e)}function nx(n,e,t){let r=t.docs.get(e._key),i=new vu(n);return new es(n,i,e._key,r,new du(t.hasPendingWrites,t.fromCache),e.converter)}var qX={maxAttempts:5};var rb=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Od(e)}set(e,t,r){this._verifyNotCommitted();let i=Nl(e,this._firestore),o=mb(i.converter,t,r),s=pb(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,or.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Nl(e,this._firestore),s;return s=typeof(t=Yt(t))=="string"||t instanceof Os?Q5(this._dataReader,"WriteBatch.update",o._key,t,r,i):K5(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,or.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Nl(e,this._firestore);return this._mutations=this._mutations.concat(new Ul(t._key,or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Nl(n,e){if((n=Yt(n)).firestore!==e)throw new xe(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var a5=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Od(e)}get(e){let t=Nl(e,this._firestore),r=new s5(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return tt();let o=i[0];if(o.isFoundDocument())return new kd(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new kd(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){let i=Nl(e,this._firestore),o=mb(i.converter,t,r),s=pb(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=Nl(e,this._firestore),s;return s=typeof(t=Yt(t))=="string"||t instanceof Os?Q5(this._dataReader,"Transaction.update",o._key,t,r,i):K5(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=Nl(e,this._firestore);return this._transaction.delete(t._key),this}};var u5=class extends a5{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Nl(e,this._firestore),r=new vu(this._firestore);return super.get(e).then(i=>new es(this._firestore,r,t._key,i._document,new du(!1,!1),t.converter))}};function Q8(n,e,t){n=ln(n,Zn);let r=Object.assign(Object.assign({},qX),t);return function(o){if(o.maxAttempts<1)throw new xe(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new Pr;return o.asyncQueue.enqueueAndForget(()=>Ee(this,null,function*(){let l=yield MX(o);new WT(o.asyncQueue,l,a,s,u).Iu()})),u.promise}(Jr(n),i=>e(new u5(n,i)),r)}function Y8(){return new Fv("deleteField")}function Z8(){return new JT("serverTimestamp")}function J8(...n){return new XT("arrayUnion",n)}function X8(...n){return new e5("arrayRemove",n)}function ej(n){return new t5("increment",n)}(function(e,t=!0){(function(i){wp=i})(Dy),gc(new uo("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Zn(new sA(r.getProvider("auth-internal")),new lA(s,r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new xe(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),fs(o3,s3,e),fs(o3,s3,"esm2017")})();var HX="@firebase/firestore-compat",zX="0.3.43";function ux(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function tj(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function nj(){if(!O6())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}var vb=class n{constructor(e){this._delegate=e}static fromBase64String(e){return nj(),new n(ba.fromBase64String(e))}static fromUint8Array(e){return tj(),new n(ba.fromUint8Array(e))}toBase64(){return nj(),this._delegate.toBase64()}toUint8Array(){return tj(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function rx(n){return $X(n,["next","error","complete"])}function $X(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var ix=class{enableIndexedDbPersistence(e,t){return p8(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return g8(e._delegate)}clearIndexedDbPersistence(e){return v8(e._delegate)}},yb=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ll||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Rs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){c8(this._delegate,e,t,r)}enableNetwork(){return _8(this._delegate)}disableNetwork(){return w8(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,z5("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return y8(this._delegate)}onSnapshotsInSync(e){return K8(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xp(this,$5(this._delegate,e))}catch(t){throw Ni(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ea(this,Wv(this._delegate,e))}catch(t){throw Ni(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ud(this,d8(this._delegate,e))}catch(t){throw Ni(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Q8(this._delegate,t=>e(new _b(this,t)))}batch(){return Jr(this._delegate),new wb(new rb(this._delegate,e=>Dp(this._delegate,e)))}loadBundle(e){return b8(this._delegate,e)}namedQuery(e){return E8(this._delegate,e).then(t=>t?new Ud(this,t):null)}},Ap=class extends _p{constructor(e){super(),this.firestore=e}convertBytes(e){return new vb(new ba(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Ea.forKey(t,this.firestore,null)}};function WX(n){y6(n)}var _b=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ap(e)}get(e){let t=Vd(e);return this._delegate.get(t).then(r=>new jd(this._firestore,new es(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Vd(e);return r?(ux("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Vd(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Vd(e);return this._delegate.delete(t),this}},wb=class{constructor(e){this._delegate=e}set(e,t,r){let i=Vd(e);return r?(ux("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Vd(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Vd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Tp=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Rl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bd(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Ap(e),t),i.set(t,o)),o}};Tp.INSTANCES=new WeakMap;var Ea=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ap(e)}static forPath(e,t,r){if(e.length%2!==0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new jn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new n(t,new jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new xp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xp(this.firestore,$5(this._delegate,e))}catch(t){throw Ni(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Yt(e),e instanceof jn?W5(this._delegate,e):!1}set(e,t){t=ux("DocumentReference.set",t);try{return t?X5(this._delegate,e,t):X5(this._delegate,e)}catch(r){throw Ni(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?ex(this._delegate,e):ex(this._delegate,e,t,...r)}catch(i){throw Ni(i,"updateDoc()","DocumentReference.update()")}}delete(){return W8(this._delegate)}onSnapshot(...e){let t=rj(e),r=ij(e,i=>new jd(this.firestore,new es(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return tx(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=U8(this._delegate):e?.source==="server"?t=q8(this._delegate):t=B8(this._delegate),t.then(r=>new jd(this.firestore,new es(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Tp.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ni(n,e,t){return n.message=n.message.replace(e,t),n}function rj(n){for(let e of n)if(typeof e=="object"&&!rx(e))return e;return{}}function ij(n,e){var t,r;let i;return rx(n[0])?i=n[0]:rx(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var jd=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return J5(this._delegate,e._delegate)}},Bd=class extends jd{data(e){let t=this._delegate.data(e);return this._delegate._converter||_6(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Ud=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ap(e)}where(e,t,r){try{return new n(this.firestore,_u(this._delegate,N8(e,t,r)))}catch(i){throw Ni(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,_u(this._delegate,M8(e,t)))}catch(r){throw Ni(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,_u(this._delegate,R8(e)))}catch(t){throw Ni(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,_u(this._delegate,P8(e)))}catch(t){throw Ni(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,_u(this._delegate,k8(...e)))}catch(t){throw Ni(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,_u(this._delegate,L8(...e)))}catch(t){throw Ni(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,_u(this._delegate,O8(...e)))}catch(t){throw Ni(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,_u(this._delegate,F8(...e)))}catch(t){throw Ni(t,"endAt()","Query.endAt()")}}isEqual(e){return G5(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=z8(this._delegate):e?.source==="server"?t=$8(this._delegate):t=H8(this._delegate),t.then(r=>new Gv(this.firestore,new Fs(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=rj(e),r=ij(e,i=>new Gv(this.firestore,new Fs(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return tx(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Tp.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},ox=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Bd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Gv=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ud(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ox(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Bd(this._firestore,r))})}isEqual(e){return J5(this._delegate,e._delegate)}},xp=class n extends Ud{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Ea(this.firestore,e):null}doc(e){try{return e===void 0?new Ea(this.firestore,Wv(this._delegate)):new Ea(this.firestore,Wv(this._delegate,e))}catch(t){throw Ni(t,"doc()","CollectionReference.doc()")}}add(e){return G8(this._delegate,e).then(t=>new Ea(this.firestore,t))}isEqual(e){return W5(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Tp.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Vd(n){return ln(n,jn)}var sx=class n{constructor(...e){this._delegate=new Os(...e)}static documentId(){return new n(pr.keyField().canonicalString())}isEqual(e){return e=Yt(e),e instanceof Os?this._delegate._internalPath.isEqual(e._internalPath):!1}};var ax=class n{static serverTimestamp(){let e=Z8();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=Y8();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=J8(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=X8(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=ej(e);return t._methodName="FieldValue.increment",new n(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}};var GX={Firestore:yb,GeoPoint:Pd,Timestamp:Yn,Blob:vb,Transaction:_b,WriteBatch:wb,DocumentReference:Ea,DocumentSnapshot:jd,Query:Ud,QueryDocumentSnapshot:Bd,QuerySnapshot:Gv,CollectionReference:xp,FieldPath:sx,FieldValue:ax,setLogLevel:WX,CACHE_SIZE_UNLIMITED:h8};function KX(n,e){n.INTERNAL.registerComponent(new uo("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},GX)))}function QX(n){KX(n,(e,t)=>new yb(e,t,new ix)),n.registerVersion(HX,zX)}QX($r);function YX(n,e=wc){return new Lt(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function oj(n,e){return YX(n,e)}function ZX(n,e){return oj(n,e).pipe(bc(void 0),ig(),ut(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function dx(n,e){return oj(n,e).pipe(ut(t=>({payload:t,type:"query"})))}var bb=class{ref;afs;injector=Fe(lr);constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=uj(r,t);return new Ib(i,o,this.afs)}snapshotChanges(){return ZX(this.ref,this.afs.schedulers.outsideAngular).pipe(ir(this.injector))}valueChanges(e={}){return this.snapshotChanges().pipe(ut(({payload:t})=>e.idField?Ut(Ue({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return pn(this.ref.get(e)).pipe(ir(this.injector))}};function Eb(n,e){return dx(n,e).pipe(bc(void 0),ig(),ut(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function sj(n,e,t){return Eb(n,t).pipe(Qs((r,i)=>JX(r,i.map(o=>o.payload),e),[]),ng(),ut(r=>r.map(i=>({type:i.type,payload:i}))))}function JX(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=XX(n,r))}),n}function lx(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function XX(n,e){switch(e.type){case"added":if(!n[e.newIndex]?.doc.ref.isEqual(e.doc.ref))return lx(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return lx(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]?.doc.ref.isEqual(e.doc.ref))return lx(n,e.oldIndex,1);break}return n}function aj(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Ib=class{ref;query;afs;injector=Fe(lr);constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Eb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ut(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(bc(void 0),ig(),ri(([r,i])=>i.length>0||!r),ut(([,r])=>r),ir(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(Qs((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=aj(e);return sj(this.query,t,this.afs.schedulers.outsideAngular).pipe(ir(this.injector))}valueChanges(e={}){return dx(this.query,this.afs.schedulers.outsideAngular).pipe(ut(t=>t.payload.docs.map(r=>e.idField?Ut(Ue({},r.data()),{[e.idField]:r.id}):r.data())),ir(this.injector))}get(e){return pn(this.query.get(e)).pipe(ir(this.injector))}add(e){return this.ref.add(e)}doc(e){return new bb(this.ref.doc(e),this.afs)}},cx=class{query;afs;injector=Fe(lr);constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Eb(this.query,this.afs.schedulers.outsideAngular).pipe(ir(this.injector)):Eb(this.query,this.afs.schedulers.outsideAngular).pipe(ut(t=>t.filter(r=>e.indexOf(r.type)>-1)),ri(t=>t.length>0),ir(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(Qs((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=aj(e);return sj(this.query,t,this.afs.schedulers.outsideAngular).pipe(ir(this.injector))}valueChanges(e={}){return dx(this.query,this.afs.schedulers.outsideAngular).pipe(ut(r=>r.payload.docs.map(i=>e.idField?Ue({[e.idField]:i.id},i.data()):i.data())),ir(this.injector))}get(e){return pn(this.query.get(e)).pipe(ir(this.injector))}},eee=new nt("angularfire2.enableFirestorePersistence"),tee=new nt("angularfire2.firestore.persistenceSettings"),nee=new nt("angularfire2.firestore.settings"),ree=new nt("angularfire2.firestore.use-emulator");function uj(n,e=t=>t){return{query:e(n),ref:n}}var lj=(()=>{class n{schedulers;firestore;persistenceEnabled$;ngZone=Fe(un);constructor(t,r,i,o,s,a,u,l,d,f,m,g,b,E,D,w,x){this.schedulers=u;let F=id(t,a,r),z=d;f&&wm(F,a,m,b,E,D,g,w),[this.firestore,this.persistenceEnabled$]=vf(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let H=a.runOutsideAngular(()=>F.firestore());if(o&&H.settings(o),z&&H.useEmulator(...z),i&&!zc(s)){let Y=()=>{try{return pn(H.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(R){return typeof console<"u"&&console.warn(R),vt(!1)}};return[H,a.runOutsideAngular(Y)]}else return[H,vt(!1)]},[o,z,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=uj(i,r),a=this.ngZone.run(()=>o);return new Ib(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new cx(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.ngZone.run(()=>r);return new bb(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(je(pl),je(gl,8),je(eee,8),je(nee,8),je(po),je(un),je(rd),je(tee,8),je(ree,8),je(bm,8),je(pm,8),je(gm,8),je(mm,8),je(vm,8),je(ym,8),je(_m,8),je(fl,8))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var cj={apiKey:"AIzaSyAgzLE6J3CGJM-PgSRFhp5hFsvnY8mymug",authDomain:"iot-multiparameter.firebaseapp.com",databaseURL:"https://iot-multiparameter-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"iot-multiparameter",storageBucket:"iot-multiparameter.appspot.com",messagingSenderId:"773940000383",appId:"1:773940000383:web:0be13598bc82c0d522f14a",measurementId:"G-DSZ9883T5H"};var dj={providers:[Kk(n3),CE([TO.initializeApp(cj),xO,jw,lj])]};var hj=(()=>{class n{constructor(){this.title="electrical-load-Monitoring"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Kh({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){r&1&&Oc(0,"router-outlet")},dependencies:[Ng,rC],encapsulation:2})}}return n})();ck(hj,dj).catch(n=>console.error(n));
